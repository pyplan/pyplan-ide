/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[107,18,26,66,183],{1241:function(n,e,t){var o=t(670);function i(n){return n&&(n.__esModule?n.default:n)}n.exports=(o.default||o).template({1:function(n,e,o,a,s){var r,l=n.lambda,c=n.escapeExpression,u=null!=e?e:n.nullContext||{},d=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<tr data-id="'+c(l(null!=e?d(e,"id"):e,e))+'">\n  <td>['+c(l(null!=(r=null!=e?d(e,"module"):e)?d(r,"description"):r,e))+"] "+c(l(null!=e?d(e,"description"):e,e))+"</td>\n  <td>"+c(l(null!=e?d(e,"definition"):e,e))+'</td>\n  <td>\n    <input type="text" value="'+c(l(null!=(r=null!=e?d(e,"custom"):e)?d(r,"definition"):r,e))+'" class="form-control" name="value" data-id="'+c(l(null!=(r=null!=e?d(e,"custom"):e)?d(r,"id"):r,e))+'" />\n  </td>\n  <td>\n'+(null!=(r=i(t(681)).call(u,"change_companypreference",{name:"haveAccess",hash:{},fn:n.program(2,s,0),inverse:n.noop,data:s,loc:{start:{line:9,column:4},end:{line:13,column:19}}}))?r:"")+(null!=(r=i(t(681)).call(u,"delete_companypreference",{name:"haveAccess",hash:{},fn:n.program(4,s,0),inverse:n.noop,data:s,loc:{start:{line:14,column:4},end:{line:18,column:19}}}))?r:"")+"  </td>\n</tr>\n"},2:function(n,e,o,a,s){return'    <button class="btn btn-mini btn-primary btn-save" rel="tooltip" data-title=\''+n.escapeExpression(i(t(668)).call(null!=e?e:n.nullContext||{},"_saveCustomValue",{name:"L",hash:{},data:s,loc:{start:{line:10,column:80},end:{line:10,column:104}}}))+'\'>\n      <i class="fal fa-save" />\n    </button>\n'},4:function(n,e,o,a,s){return'    <button class="btn btn-mini btn-red btn-remove" rel="tooltip" data-title=\''+n.escapeExpression(i(t(668)).call(null!=e?e:n.nullContext||{},"_removeCustomValue",{name:"L",hash:{},data:s,loc:{start:{line:15,column:78},end:{line:15,column:104}}}))+'\'>\n      <i class="fal fa-trash" />\n    </button>\n'},compiler:[8,">= 4.3.0"],main:function(n,e,t,o,i){var a,s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(a=s(t,"each").call(null!=e?e:n.nullContext||{},null!=e?s(e,"data"):e,{name:"each",hash:{},fn:n.program(1,i,0),inverse:n.noop,data:i,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))?a:""},useData:!0})},2311:function(n,e,t){"use strict";(function(o,i){var a,s,r=t(18);function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),o.forEach((function(e){c(n,e,t[e])}))}return n}function c(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}a=[t(665),t(721),t(703),t(773),t(1241)],void 0===(s=function(n,e,a,s,c){return o.View.extend({el:i("#main"),_uId:"",preferences:[],companyPreferences:[],render:function(){var n=this;this._uId=i.uuid();var t=i("#mainLoading");t.show(),i('div[data-rel="abm-company"]').remove(),(new e).preferences(this.options.companyId,(function(e){var o=e.preferences,u=e.companyPreferences;n.preferences=o,n.companyPreferences=u;var d={id:n._uId,dataRel:"abm-company",tmpClass:"company-pref-edit",title:(0,r.translate)("_editCompanyPreferences")},p=function(n){var e=u.find((function(e){return e.preference===n.id}));return e&&l({},e,{definition:e.definition&&JSON.stringify(e.definition)})},f=o.map((function(n){return l({},n,{definition:n.definition&&JSON.stringify(n.definition),custom:p(n)})})),m={headers:[(0,r.translate)("_name"),(0,r.translate)("_default"),(0,r.translate)("_custom"),(0,r.translate)("_options")]},h=a(d),v=s(m),y=c({data:f});n.$el.append(h);var g=i("div[data-id='".concat(n._uId,"']"));g.find("div.abm-content").append(v),g.find("tbody").append(y),(0,r.postRender)(g),n.addHandlers(g),n.addTableHandlers(g.find("table")),t.hide()}))},save:function(t){var o=i(t.currentTarget.closest("tr")),a=o.children("td").find("input"),s=o.attr("data-id"),l=a.attr("data-id"),c=a.val(),u=new n;if((0,r.isValidJsonString)(c)){var d=JSON.parse(c),p=new e;l?p.updateCompanyPreference(parseInt(l),{preference:parseInt(s),definition:d},(function(){u.show({title:(0,r.translate)("_successfully_edited"),notifyType:"success"})})):p.saveCompanyPreference({company:__currentSession.companyId,preference:parseInt(s),definition:d},(function(n){a.attr("data-id",n.id),u.show({title:(0,r.translate)("_successfully_added"),notifyType:"success"})}))}else u.show({title:(0,r.translate)("saving_error"),text:(0,r.translate)("invalid_json_format")})},remove:function(t){var o=i(t.currentTarget.closest("tr")).children("td").find("input"),a=new n,s=o.attr("data-id");s?(new e).removeCompanyPreference(s,(function(){o.removeAttr("data-id"),o.val(null),a.show({title:(0,r.translate)("_successfully_removed"),notifyType:"success"})})):a.show({title:(0,r.translate)("nothing_to_delete"),notifyType:"info"})},cancel:function(){Promise.resolve().then((function(){var n=[t(764)];(function(n){(new n).show()}).apply(null,n)})).catch(t.oe)},addHandlers:function(n){n.find("div.abm-top-options a.btn-close").on("click",this.cancel)},addTableHandlers:function(n){n.find("button.btn-save").on("click",this.save),n.find("button.btn-remove").on("click",this.remove)}})}.apply(e,a))||(n.exports=s)}).call(this,t(219),t(1))},665:function(n,e,t){"use strict";(function(o){var i,a,s=t(18);i=[t(761)],void 0===(a=function(n){return o.Controller.extend({name:"showNotify",currentProgressBar:void 0,show:function(e){var t=e.title,o=e.text,i=e.endpoint,a=e.notifyType,r=e.timeOut,l=e.tapToDismiss,c=e.buttons,u=e.showProgressBar,d=e.showFooter,p=e.callback,f=e.progressBar,m=void 0===f?null:f;if(m&&this.currentProgressBar&&this.currentProgressBar.length>0&&this.currentProgressBar.is(":visible"))return this.currentProgressBar.find(".toast-title").text(t),this.currentProgressBar.find(".toast-text").text(o),this.currentProgressBar.find(".progress-bar").css("width","".concat(m,"%")),void(m>=100&&(this.currentProgressBar.find(".progress").removeClass("active"),this.currentProgressBar.find('button[data-code="cancel"]').text((0,s.translate)("close")),this.currentProgressBar=void 0));var h=new n({title:t,text:o,endpoint:i,notifyType:a,timeOut:r,tapToDismiss:l,buttons:c,showProgressBar:u,showFooter:d,callback:p,progressBar:m}).render();m&&(this.currentProgressBar=h)}})}.apply(e,i))||(n.exports=a)}).call(this,t(677))},703:function(n,e,t){var o=t(670);n.exports=(o.default||o).template({compiler:[8,">= 4.3.0"],main:function(n,e,t,o,i){var a,s=null!=e?e:n.nullContext||{},r=n.hooks.helperMissing,l=n.escapeExpression,c=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="abm-base-tmp '+l("function"==typeof(a=null!=(a=c(t,"tmpClass")||(null!=e?c(e,"tmpClass"):e))?a:r)?a.call(s,{name:"tmpClass",hash:{},data:i,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):a)+' container-fluid mainTask" data-id="'+l("function"==typeof(a=null!=(a=c(t,"id")||(null!=e?c(e,"id"):e))?a:r)?a.call(s,{name:"id",hash:{},data:i,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):a)+'" data-rel="'+l("function"==typeof(a=null!=(a=c(t,"dataRel")||(null!=e?c(e,"dataRel"):e))?a:r)?a.call(s,{name:"dataRel",hash:{},data:i,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):a)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+l("function"==typeof(a=null!=(a=c(t,"title")||(null!=e?c(e,"title"):e))?a:r)?a.call(s,{name:"title",hash:{},data:i,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):a)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},721:function(n,e,t){"use strict";(function(o){var i,a=t(679);void 0===(i=function(){return o.Model.extend({list:function(n){(0,a.send)("companies/?limit=1000&offset=0",null,null,n)},getCompany:function(n,e){(0,a.send)("companies/".concat(n,"/"),null,null,e)},update:function(n,e,t){(0,a.send)("companies/".concat(n,"/"),JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},partialUpdate:function(n,e,t){(0,a.send)("companies/".concat(n,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},create:function(n,e){(0,a.send)("companies/",n,{type:"POST"},e)},delete:function(n,e){(0,a.send)("companies/".concat(n,"/"),null,{type:"DELETE"},e)},preferences:function(n,e){(0,a.send)("companies/".concat(n,"/preferences/"),null,null,e)},saveCompanyPreference:function(n,e){var t=n.company,o=n.preference,i=n.definition;(0,a.send)("companyPreferences/",JSON.stringify({company:t,preference:o,definition:i}),{type:"POST",contentType:"application/json;charset=utf-8"},e)},updateCompanyPreference:function(n,e,t){var o=e.preference,i=e.definition;(0,a.send)("companyPreferences/".concat(n,"/"),JSON.stringify({id:n,preference:o,definition:i}),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},removeCompanyPreference:function(n,e){(0,a.send)("companyPreferences/".concat(n,"/"),null,{type:"DELETE"},e)},GetCompanyPreference:function(n,e){(0,a.send)("companies/preference_by_code/?code=".concat(n),null,{type:"GET"},e)},sendTestEmail:function(n,e){(0,a.send)("company/SendTestEmail",n,{type:"PUT"},e)},getLicenceKey:function(n,e){(0,a.send)("company/GetLK/"+n,null,null,e)},setLicenceKey:function(n,e){(0,a.send)("company/SetLK/",n,{type:"POST"},e)}})}.apply(e,[]))||(n.exports=i)}).call(this,t(219))},737:function(n,e,t){var o,i;t(131),o=[t(1)],void 0===(i=function(n){return function(){function e(e,t){return e||(e=s()),(l=n("#"+e.containerId)).length||t&&(l=function(e){return(l=n("<div/>").attr("id",e.containerId).addClass(e.positionClass).attr("aria-live","polite").attr("role","alert")).appendTo(n(e.target)),l}(e)),l}function t(e){for(var t=l.children(),i=t.length-1;i>=0;i--)o(n(t[i]),e)}function o(e,t){return!(!e||0!==n(":focus",e).length||(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){r(e)}}),0))}function i(n){c&&c(n)}function a(t){function o(e){return!n(":focus",f).length||e?(clearTimeout(g.intervalId),f[a.hideMethod]({duration:a.hideDuration,easing:a.hideEasing,complete:function(){r(f),a.onHidden&&"hidden"!==b.state&&a.onHidden(),b.state="hidden",b.endTime=new Date,i(b)}})):void 0}var a=s(),c=t.iconClass||a.iconClass;if(void 0!==t.optionsOverride&&(a=n.extend(a,t.optionsOverride),c=t.optionsOverride.iconClass||c),a.preventDuplicates){if(t.message===u)return;u=t.message}d++,l=e(a,!0);var p=null,f=n("<div/>"),m=n("<div/>"),h=n("<div/>"),v=n("<div/>"),y=n(a.closeHtml),g={intervalId:null,hideEta:null,maxHideTime:null},b={toastId:d,state:"visible",startTime:new Date,options:a,map:t};return t.iconClass&&f.addClass(a.toastClass).addClass(c),t.title&&(m.append(t.title).addClass(a.titleClass),f.append(m)),t.message&&(h.append(t.message).addClass(a.messageClass),f.append(h)),a.closeButton&&(y.addClass("toast-close-button").attr("role","button"),f.prepend(y)),a.progressBar&&(v.addClass("toast-progress"),f.prepend(v)),f.hide(),a.newestOnTop?l.prepend(f):l.append(f),f[a.showMethod]({duration:a.showDuration,easing:a.showEasing,complete:a.onShown}),a.timeOut>0&&(p=setTimeout(o,a.timeOut),g.maxHideTime=parseFloat(a.timeOut),g.hideEta=(new Date).getTime()+g.maxHideTime,a.progressBar&&(g.intervalId=setInterval((function(){var n=(g.hideEta-(new Date).getTime())/g.maxHideTime*100;v.width(n+"%")}),10))),f.hover((function(){clearTimeout(p),g.hideEta=0,f.stop(!0,!0)[a.showMethod]({duration:a.showDuration,easing:a.showEasing})}),(function(){(a.timeOut>0||a.extendedTimeOut>0)&&(p=setTimeout(o,a.extendedTimeOut),g.maxHideTime=parseFloat(a.extendedTimeOut),g.hideEta=(new Date).getTime()+g.maxHideTime)})),!a.onclick&&a.tapToDismiss&&f.click(o),a.closeButton&&y&&y.click((function(n){n.stopPropagation?n.stopPropagation():void 0!==n.cancelBubble&&!0!==n.cancelBubble&&(n.cancelBubble=!0),o(!0)})),a.onclick&&f.click((function(){a.onclick(),o()})),i(b),a.debug&&console&&console.log(b),f}function s(){return n.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1},f.options)}function r(n){l||(l=e()),n.is(":visible")||(n.remove(),n=null,0===l.children().length&&(l.remove(),u=void 0))}var l,c,u,d=0,p={error:"error",info:"info",success:"success",warning:"warning"},f={clear:function(n){var i=s();l||e(i),o(n,i)||t(i)},remove:function(t){var o=s();return l||e(o),t&&0===n(":focus",t).length?void r(t):void(l.children().length&&l.remove())},error:function(n,e,t){return a({type:p.error,iconClass:s().iconClasses.error,message:n,optionsOverride:t,title:e})},getContainer:e,info:function(n,e,t){return a({type:p.info,iconClass:s().iconClasses.info,message:n,optionsOverride:t,title:e})},options:{},subscribe:function(n){c=n},success:function(n,e,t){return a({type:p.success,iconClass:s().iconClasses.success,message:n,optionsOverride:t,title:e})},version:"2.1.0",warning:function(n,e,t){return a({type:p.warning,iconClass:s().iconClasses.warning,message:n,optionsOverride:t,title:e})}};return f}()}.apply(e,o))||(n.exports=i)},761:function(n,e,t){"use strict";(function(o,i){var a,s,r,l=(r=t(737))&&r.__esModule?r:{default:r},c=t(18);a=[t(762)],void 0===(s=function(n){return o.View.extend({el:i("#main"),currentProgressBar:void 0,defaults:{notifyType:"info",timeOut:3e3},initialize:function(){this.options=i.extend({},this.defaults,this.options)},render:function(){(this.options.buttons||this.options.progressBar)&&(this.options.showFooter=!0,this.options.progressBar&&(this.options.showProgressBar=!0)),l.default.options={closeButton:!0,closeHtml:'<button rel="tooltip" title="'.concat((0,c.translate)("close_all_notifications"),'" data-placement="left"><i class="fal fa-times"></i></button>'),debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:isNaN(parseInt(this.options.timeOut))?__currentSession.notificationTimeOut:this.options.timeOut,extendedTimeOut:0,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut",tapToDismiss:this.options.tapToDismiss};var e=n(this.options),t=l.default[this.options.notifyType](e,this.options.title);(0,c.postRender)(t),this.options.notifyClass&&t.addClass(this.options.notifyClass);var o=this;return t.find(".footer-area button").click((function(){var n=!0;return o.options.callback&&!1===o.options.callback.call(this,i(this).attr("data-code"),t)&&(n=!1),n&&t.find(".toast-close-button").click(),!1})),t.find(".toast-close-button").click((function(n){n.preventDefault(),n.shiftKey&&i(".toast-close-button").click()})),t}})}.apply(e,a))||(n.exports=s)}).call(this,t(219),t(1))},762:function(n,e,t){var o=t(670);n.exports=(o.default||o).template({1:function(n,e,t,o,i){var a,s=null!=e?e:n.nullContext||{},r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="footer-area">\n'+(null!=(a=r(t,"if").call(s,null!=e?r(e,"showProgressBar"):e,{name:"if",hash:{},fn:n.program(2,i,0),inverse:n.noop,data:i,loc:{start:{line:11,column:2},end:{line:15,column:9}}}))?a:"")+"\n"+(null!=(a=r(t,"each").call(s,null!=e?r(e,"buttons"):e,{name:"each",hash:{},fn:n.program(4,i,0),inverse:n.noop,data:i,loc:{start:{line:17,column:2},end:{line:19,column:11}}}))?a:"")+"\n</div>\n"},2:function(n,e,t,o,i){var a,s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'  <div class="progress progress-striped active">\n    <div class="progress-bar progress-bar-warning" style="width: '+n.escapeExpression("function"==typeof(a=null!=(a=s(t,"progressBar")||(null!=e?s(e,"progressBar"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"progressBar",hash:{},data:i,loc:{start:{line:13,column:65},end:{line:13,column:80}}}):a)+'%"></div>\n  </div>\n'},4:function(n,e,t,o,i){var a,s=null!=e?e:n.nullContext||{},r=n.hooks.helperMissing,l=n.escapeExpression,c=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'  <button class="btn btn-mini btn-'+l("function"==typeof(a=null!=(a=c(t,"css")||(null!=e?c(e,"css"):e))?a:r)?a.call(s,{name:"css",hash:{},data:i,loc:{start:{line:18,column:34},end:{line:18,column:41}}}):a)+'" data-code="'+l("function"==typeof(a=null!=(a=c(t,"code")||(null!=e?c(e,"code"):e))?a:r)?a.call(s,{name:"code",hash:{},data:i,loc:{start:{line:18,column:54},end:{line:18,column:62}}}):a)+'">'+l("function"==typeof(a=null!=(a=c(t,"title")||(null!=e?c(e,"title"):e))?a:r)?a.call(s,{name:"title",hash:{},data:i,loc:{start:{line:18,column:64},end:{line:18,column:73}}}):a)+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(n,e,t,o,i){var a,s,r=null!=e?e:n.nullContext||{},l=n.hooks.helperMissing,c=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<span class="toast-text">\n  <div>\n    '+(null!=(a="function"==typeof(s=null!=(s=c(t,"text")||(null!=e?c(e,"text"):e))?s:l)?s.call(r,{name:"text",hash:{},data:i,loc:{start:{line:3,column:4},end:{line:3,column:14}}}):s)?a:"")+"\n  </div>\n  <div>\n    "+(null!=(a="function"==typeof(s=null!=(s=c(t,"endpoint")||(null!=e?c(e,"endpoint"):e))?s:l)?s.call(r,{name:"endpoint",hash:{},data:i,loc:{start:{line:6,column:4},end:{line:6,column:18}}}):s)?a:"")+"\n  </div>\n</span>\n"+(null!=(a=c(t,"if").call(r,null!=e?c(e,"showFooter"):e,{name:"if",hash:{},fn:n.program(1,i,0),inverse:n.noop,data:i,loc:{start:{line:9,column:0},end:{line:22,column:7}}}))?a:"")},useData:!0})},773:function(n,e,t){var o=t(670);n.exports=(o.default||o).template({1:function(n,e,t,o,i){return"      <th>"+n.escapeExpression(n.lambda(e,e))+"</th>\n"},compiler:[8,">= 4.3.0"],main:function(n,e,t,o,i){var a,s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<table class="table table-hover table-nomargin table-bordered">\n  <thead>\n    <tr>\n'+(null!=(a=s(t,"each").call(null!=e?e:n.nullContext||{},null!=e?s(e,"headers"):e,{name:"each",hash:{},fn:n.program(1,i,0),inverse:n.noop,data:i,loc:{start:{line:4,column:6},end:{line:6,column:15}}}))?a:"")+"    </tr>\n  </thead>\n  <tbody>\n\n  </tbody>\n</table>"},useData:!0})}}]);