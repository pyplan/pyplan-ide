/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[114,27],{1240:function(e,n,t){var a=t(669);function l(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({1:function(e,n,a,o,r){var s,i=e.lambda,c=e.escapeExpression,u=null!=n?n:e.nullContext||{},d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<tr data-id="'+c(i(null!=n?d(n,"id"):n,n))+'">\n  <td>['+c(i(null!=(s=null!=n?d(n,"module"):n)?d(s,"description"):s,n))+"] "+c(i(null!=n?d(n,"description"):n,n))+"</td>\n  <td>"+c(i(null!=n?d(n,"definition"):n,n))+'</td>\n  <td>\n    <input type="text" value="'+c(i(null!=(s=null!=n?d(n,"custom"):n)?d(s,"definition"):s,n))+'" class="form-control" name="value" data-id="'+c(i(null!=(s=null!=n?d(n,"custom"):n)?d(s,"id"):s,n))+'" />\n  </td>\n  <td>\n'+(null!=(s=l(t(680)).call(u,"change_companypreference",{name:"haveAccess",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r,loc:{start:{line:9,column:4},end:{line:13,column:19}}}))?s:"")+(null!=(s=l(t(680)).call(u,"delete_companypreference",{name:"haveAccess",hash:{},fn:e.program(4,r,0),inverse:e.noop,data:r,loc:{start:{line:14,column:4},end:{line:18,column:19}}}))?s:"")+"  </td>\n</tr>\n"},2:function(e,n,a,o,r){return'    <button class="btn btn-mini btn-primary btn-save" rel="tooltip" data-title=\''+e.escapeExpression(l(t(667)).call(null!=n?n:e.nullContext||{},"_saveCustomValue",{name:"L",hash:{},data:r,loc:{start:{line:10,column:80},end:{line:10,column:104}}}))+'\'>\n      <i class="fal fa-save" />\n    </button>\n'},4:function(e,n,a,o,r){return'    <button class="btn btn-mini btn-red btn-remove" rel="tooltip" data-title=\''+e.escapeExpression(l(t(667)).call(null!=n?n:e.nullContext||{},"_removeCustomValue",{name:"L",hash:{},data:r,loc:{start:{line:15,column:78},end:{line:15,column:104}}}))+'\'>\n      <i class="fal fa-trash" />\n    </button>\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var o,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return null!=(o=r(t,"each").call(null!=n?n:e.nullContext||{},null!=n?r(n,"data"):n,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:21,column:9}}}))?o:""},useData:!0})},2315:function(e,n,t){"use strict";(function(a,l){var o,r,s=t(18);o=[t(712),t(938),t(702),t(750),t(2316),t(2317),t(1240)],void 0===(r=function(e,n,o,r,i,c,u){return a.View.extend({el:l("#main"),_uId:"",_user:{},_prevSel:{companyId:"",moduleId:""},render:function(){l("#mainLoading").show(),l("div[data-rel='abm-user']").remove();var t=new e,a=new n,u=this;this._uId=l.uuid(),t.GetUser(this.options.userId,(function(e){u._user=e,a.ListPrefModules((function(n){var t={id:u._uId,dataRel:"abm-user",tmpClass:"user-pref-edit",title:(0,s.translate)("_editUserPreferences")},a={prefModule:n},d={company:e.userCompanies},p=o(t),f=r(),m=c(d),v=i(a);u.$el.append(p),l("div[data-id='"+u._uId+"']").find("div.abm-content").append(f),l("div[data-id='"+u._uId+"']").find("div.form-content").append(m),l("div[data-id='"+u._uId+"']").find("div.form-content").append(v),(0,s.postRender)(u.$el.find("div[data-id='"+u._uId+"']")),u.firstValues(),u.addHandlers(),l("#mainLoading").hide()}))}))},firstValues:function(){var e=this;e._prevSel={companyId:l("div[data-id='"+e._uId+"']").find("div.combo-company-selection select").val(),moduleId:l("div[data-id='"+e._uId+"']").find("div.pref-module-selection select").val()},(new n).List(void 0,(function(n){if(e._user&&e._user.userCompanies.length>0)for(var t=0;t<e._user.userCompanies.length;t++)if(e._user.userCompanies[t].preferences&&e._user.userCompanies[t].preferences.length>0)for(var a=0;a<e._user.userCompanies[t].preferences.length;a++)for(var l=0;l<n.length;l++){if(n[l].preferenceId==e._user.userCompanies[t].preferences[a].preferenceId){""!=e._user.userCompanies[t].preferences[a].value&&null!=e._user.userCompanies[t].preferences[a].value||(e._user.userCompanies[t].preferences[a].value=n[l].defaultValue);break}l+1==n.length&&e._user.userCompanies[t].preferences.push(n[l])}else for(var o=0;o<n.length;o++)e._user.userCompanies[t].preferences[o]={value:n[o].defaultValue,moduleId:n[o].moduleId,preferenceId:n[o].preferenceId};e.changeList(e._prevSel)}))},reRender:function(){var e=this;e.saveCurrentItems((function(){var n={companyId:l("div[data-id='"+e._uId+"']").find("div.combo-company-selection select").val(),moduleId:l("div[data-id='"+e._uId+"']").find("div.pref-module-selection select").val()},t=l("div[data-id='"+e._uId+"']").find("div.pref-content").children();l(t).length>0?l(t).fadeOut(100,"linear",(function(){e.changeList(n)})):e.changeList(n)}))},saveCurrentItems:function(e){var n=l("div[data-id='"+this._uId+"']").find("div.pref-content input");if(n.length>0){for(var t=[{}],a=0;a<n.length;a++)t[a]={preferenceId:l(n[a]).attr("data-id"),value:n[a].value,moduleId:this._prevSel.moduleId};if(t.length>0)for(var o=0;o<this._user.userCompanies.length;o++)if(this._user.userCompanies[o].companyId==this._prevSel.companyId)if(this._user.userCompanies[o].preferences.length>0)for(a=0;a<t.length;a++)for(var r=0;r<this._user.userCompanies[o].preferences.length;r++){if(this._user.userCompanies[o].preferences[r].preferenceId==t[a].preferenceId){this._user.userCompanies[o].preferences[r].value=t[a].value;break}r+1==this._user.userCompanies[o].preferences.length&&this._user.userCompanies[o].preferences.push(t[a])}else this._user.userCompanies[o].preferences=t}e()},changeList:function(e){var t=this;(new n).List(e.moduleId,(function(n){for(var a=0;a<t._user.userCompanies.length;a++)if(t._user.userCompanies[a].companyId==e.companyId)for(var o=0;o<n.length;o++)for(var r=0;r<t._user.userCompanies[a].preferences.length;r++)if(n[o].preferenceId==t._user.userCompanies[a].preferences[r].preferenceId){n[o].defaultValue=t._user.userCompanies[a].preferences[r].value;break}var s=u({data:n}),i=l("div[data-id='"+t._uId+"']").find("div.pref-content");l(i).children().remove(),l(i).append(s),l(i).children().fadeIn(100,"linear",(function(){})),t._prevSel={companyId:e.companyId,moduleId:e.moduleId}}))},save:function(){this._uId;var n=this,a=new e;n.saveCurrentItems((function(){a.Update(n._user,(function(){Promise.resolve().then((function(){var e=[t(781)];(function(e){(new e).show()}).apply(null,e)})).catch(t.oe)}))}))},cancel:function(){Promise.resolve().then((function(){var e=[t(781)];(function(e){(new e).show()}).apply(null,e)})).catch(t.oe)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("form").on("submit",l.proxy((function(){return this.save(),!1}),this)),l("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",l.proxy((function(){return this.cancel(),!1}),this)),l("div[data-id='"+this._uId+"']").find("div.pref-module-selection select").on("change",l.proxy((function(){return this.reRender(),!1}),this)),l("div[data-id='"+this._uId+"']").find("div.combo-company-selection select").on("change",l.proxy((function(){return this.reRender(),!1}),this)),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(n,o))||(e.exports=r)}).call(this,t(219),t(1))},2316:function(e,n,t){var a=t(669);e.exports=(a.default||a).template({1:function(e,n,t,a,l){var o=e.lambda,r=e.escapeExpression,s=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"      <option value='"+r(o(null!=n?s(n,"moduleId"):n,n))+"'>"+r(o(null!=n?s(n,"description"):n,n))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,a,l,o){var r,s,i=null!=n?n:e.nullContext||{},c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="form-group">\n  <label for="textfield" class="control-label col-sm-3">'+e.escapeExpression((s=t(667),s&&(s.__esModule?s.default:s)).call(i,"_prefModule",{name:"L",hash:{},data:o,loc:{start:{line:2,column:56},end:{line:2,column:75}}}))+'</label>\n  <div class="pref-module-selection col-sm-9">\n    <select class="select2-me input-xlarge">\n'+(null!=(r=c(a,"each").call(i,null!=n?c(n,"prefModule"):n,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:6},end:{line:7,column:15}}}))?r:"")+'    </select>\n  </div>\n</div>\n<div class="pref-content">\n\n</div>\n'},useData:!0})},2317:function(e,n,t){var a=t(669);e.exports=(a.default||a).template({1:function(e,n,t,a,l){var o,r=e.lambda,s=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"                <option value='"+s(r(null!=n?i(n,"companyId"):n,n))+"'>"+s(r(null!=(o=null!=n?i(n,"company"):n)?i(o,"name"):o,n))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,a,l,o){var r,s,i=null!=n?n:e.nullContext||{},c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="form-group">\n    <label for="textfield" class="control-label col-sm-3">'+e.escapeExpression((s=t(667),s&&(s.__esModule?s.default:s)).call(i,"_company",{name:"L",hash:{},data:o,loc:{start:{line:2,column:58},end:{line:2,column:74}}}))+'</label>\n    <div class="combo-company-selection col-sm-9">\n        <select class="select2-me input-xlarge">\n'+(null!=(r=c(a,"each").call(i,null!=n?c(n,"company"):n,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:12},end:{line:7,column:21}}}))?r:"")+"        </select>\n    </div>\n</div>\n"},useData:!0})},702:function(e,n,t){var a=t(669);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var o,r=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,i=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="abm-base-tmp '+i("function"==typeof(o=null!=(o=c(t,"tmpClass")||(null!=n?c(n,"tmpClass"):n))?o:s)?o.call(r,{name:"tmpClass",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):o)+' container-fluid mainTask" data-id="'+i("function"==typeof(o=null!=(o=c(t,"id")||(null!=n?c(n,"id"):n))?o:s)?o.call(r,{name:"id",hash:{},data:l,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):o)+'" data-rel="'+i("function"==typeof(o=null!=(o=c(t,"dataRel")||(null!=n?c(n,"dataRel"):n))?o:s)?o.call(r,{name:"dataRel",hash:{},data:l,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):o)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+i("function"==typeof(o=null!=(o=c(t,"title")||(null!=n?c(n,"title"):n))?o:s)?o.call(r,{name:"title",hash:{},data:l,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):o)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},712:function(e,n,t){"use strict";(function(a){var l,o=t(678);void 0===(l=function(){return a.Model.extend({list:function(e,n){(0,o.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},listByCompany:function(e){(0,o.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},get:function(e,n){(0,o.send)("users/".concat(e,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},update:function(e,n,t){(0,o.send)("users/".concat(e,"/"),n,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},partialUpdateUser:function(e,n,t){(0,o.send)("users/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},EditProfile:function(e,n){(0,o.send)("users/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)},create:function(e,n){(0,o.send)("usercompanies/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n)},partialUpdate:function(e,n,t){(0,o.send)("usercompanies/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},deleteUser:function(e,n){(0,o.send)("users/".concat(e,"/"),null,{type:"DELETE"},n)},deleteUserCompany:function(e,n){(0,o.send)("usercompanies/".concat(e,"/"),null,{type:"DELETE"},n)},getUserCompany:function(e,n){(0,o.send)("usercompanies/".concat(e,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},UpdateUserPreference:function(e,n){var t={userCompanyId:__currentSession.userId,preferenceCode:e,value:n};(0,o.send)("user/UpdateUserPreference",t,{type:"PUT"})},GetUserPreference:function(e,n){(0,o.send)("usercompanies/preference_by_code/?code=".concat(e),null,{type:"GET"},n)},GetRelatedDashboard:function(e){(0,o.send)("user/GetRelatedDashboard",null,null,e)}})}.apply(n,[]))||(e.exports=l)}).call(this,t(219))},750:function(e,n,t){var a=t(669);function l(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,a,o,r){var s=null!=n?n:e.nullContext||{},i=e.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+i(l(t(667)).call(s,"_save",{name:"L",hash:{},data:r,loc:{start:{line:6,column:63},end:{line:6,column:76}}}))+'</button>\n        <button type="button" class="btn btn-cancel">'+i(l(t(667)).call(s,"cancel",{name:"L",hash:{},data:r,loc:{start:{line:7,column:53},end:{line:7,column:67}}}))+"</button>\n    </div>\n</form>\n"},useData:!0})},938:function(e,n,t){"use strict";(function(a){var l,o=t(678);void 0===(l=function(){return a.Model.extend({List:function(e,n){(0,o.send)("preference/List",{moduleId:e},null,n)},GetPreference:function(e,n){(0,o.send)("preference/Get/"+e,null,null,n)},Update:function(e,n){(0,o.send)("preference/Update",e,{type:"PUT"},n)},Create:function(e,n){(0,o.send)("preference/Create",e,{type:"POST"},n)},DeletePreference:function(e,n){(0,o.send)("preference/Delete/"+e,null,{type:"DELETE"},n)},ListPrefModules:function(e){(0,o.send)("preferenceModule/List",null,null,e)}})}.apply(n,[]))||(e.exports=l)}).call(this,t(219))}}]);