/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[117,6],{1129:function(n,t,i){var a=i(669);function e(n){return n&&(n.__esModule?n.default:n)}n.exports=(a.default||a).template({1:function(n,t,a,o,s){var l,c=n.lambda,r=n.escapeExpression,u=null!=t?t:n.nullContext||{},f=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<li class="notificationItem" data-id="'+r(c(null!=t?f(t,"notificationId"):t,t))+'" data-messageType="'+r(c(null!=t?f(t,"messageType"):t,t))+'">\n    <a href="#" '+(null!=(l=f(a,"if").call(u,null!=t?f(t,"read"):t,{name:"if",hash:{},fn:n.program(2,s,0),inverse:n.noop,data:s,loc:{start:{line:3,column:16},end:{line:3,column:49}}}))?l:"")+'>\n        \x3c!--img src="'+r(e(i(711)).call(u,{name:"baseURL",hash:{},data:s,loc:{start:{line:4,column:21},end:{line:4,column:32}}}))+"thumbs/view.ashx?img=users-"+r(c(null!=t?f(t,"fromUserImageUrl"):t,t))+'&w=43&h=43&t=cropt" alt="'+r(c(null!=t?f(t,"fromUser"):t,t))+'" title="'+r(c(null!=t?f(t,"fromUser"):t,t))+'" /--\x3e\n        <div class="details">\n            <div class="message">\n                <p>'+(null!=(l=c(null!=t?f(t,"textMessage"):t,t))?l:"")+'</p>\n                <span class="time">'+r(e(i(840)).call(u,null!=t?f(t,"createdDate"):t,{name:"timeAgo",hash:{},data:s,loc:{start:{line:8,column:35},end:{line:8,column:58}}}))+'</span>\n            </div>\n        </div>\n        <i class="far fa-circle btnMarkAsRead" title="'+r(e(i(667)).call(u,"mark_as_read",{name:"L",hash:{},data:s,loc:{start:{line:11,column:54},end:{line:11,column:74}}}))+'"></i>\n    </a>\n</li>\n'},2:function(n,t,i,a,e){return' class="read" '},compiler:[8,">= 4.3.0"],main:function(n,t,i,a,e){var o;return null!=(o=(n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]})(i,"each").call(null!=t?t:n.nullContext||{},t,{name:"each",hash:{},fn:n.program(1,e,0),inverse:n.noop,data:e,loc:{start:{line:1,column:0},end:{line:14,column:9}}}))?o:""},useData:!0})},662:function(n,t,i){"use strict";(function(a){var e;void 0===(e=function(){return a.Controller.extend({name:"showModal",show:function(n){Promise.all([i.e(2),i.e(229)]).then((function(){var t=[i(685)];(function(t){(new t).render(n)}).apply(null,t)})).catch(i.oe)}})}.apply(t,[]))||(n.exports=e)}).call(this,i(676))},667:function(n,t,i){"use strict";var a=i(18);n.exports=function(n){return(0,a.translate)(n)}},711:function(n,t,i){"use strict";n.exports=function(){return __apiURL}},809:function(n,t,i){"use strict";(function(a,e){var o,s=i(678);void 0===(o=function(){var n;return a.Model.extend({start:function(){n=setTimeout((function t(){(0,s.send)("notification/KeepAlive",null,null,(function(i){if(i){var a=i.unread;e("#navigation .unreadNotifications").length>0&&(e("#navigation .unreadNotifications").text(a).hide(),a>0&&e("#navigation .unreadNotifications").show())}n=setTimeout(t,4e4)}),void 0,!0)}),1e3)},stop:function(){clearTimeout(n)},getNotifications:function(n){(0,s.send)("notification/",null,null,n)},markAsRead:function(n,t){(0,s.send)("notification/".concat(n,"/"),null,{type:"PATCH",dataType:"text"},t)}})}.apply(t,[]))||(n.exports=o)}).call(this,i(219),i(1))},840:function(n,t,i){"use strict";var a=i(18);n.exports=function(n){return(0,a.timeAgo)(n)}},967:function(n,t,i){"use strict";(function(a,e){var o,s,l=i(18);o=[i(809),i(1129),i(662)],void 0===(s=function(n,t,i){return a.Controller.extend({name:"notificationManager",start:function(){var i=new n;i.start(),e("#navigation .btnNotification").on("click",(function(){e("#navigation .notificationsList").empty(),e("#navigation .notificationsList").append("<li><a><div class='message'>"+(0,l.translate)("loading_notifications")+"</div></a></li>"),i.getNotifications((function(n){if(e("#navigation .notificationsList").empty(),n&&0!=n.length){var i=t(n);e("#navigation .notificationsList").append(i)}else e("#navigation .notificationsList").append("<li><a><div class='message'>"+(0,l.translate)("no_new_notifications")+"</div></a></li>")}))})),e("#navigation .notificationsList").on("click","li a, li a .btnMarkAsRead",(function(n){if(e(this).closest("li").hasClass("notificationItem")&&!e(this).closest("li.notificationItem").find("a").hasClass("read")){var t=e(this).closest("li").attr("data-id");i.markAsRead(t),e(this).closest("li").find("a").addClass("read");var a=parseInt(e("#navigation .unreadNotifications").text())-1;e("#navigation .unreadNotifications").text(a).show(),a<=0&&e("#navigation .unreadNotifications").hide()}if(e(this).hasClass("btnMarkAsRead"))return!1}))},notify:function(n){(0,l.showMessage)(n.textMessage,(0,l.translate)("new_notification"),"info"),e("#navigation .unreadNotifications").text(parseInt(e("#navigation .unreadNotifications").text())+1).show()},showNotifications:function(){var t=new n,a=new i;t.getNotifications((function(n){n&&n.length>0&&a.show({title:"".concat((0,l.translate)("new_notification"),"!"),html:n[0].message,okOnEnter:!1,keyboard:!1,backdrop:"static",buttons:[{title:(0,l.translate)("accept"),code:"yes"}],callback:function(i){if("yes"!==i)return!1;t.markAsRead(n[0].id)}})}))}})}.apply(t,o))||(n.exports=s)}).call(this,i(676),i(1))}}]);