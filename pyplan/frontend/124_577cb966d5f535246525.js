/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[124,23,26,30,58,167],{1114:function(e,n,t){"use strict";(function(a,o){var s,i,r=t(18);s=[t(684),t(713),t(990),t(1419)],void 0===(i=function(e,n,t,s){return a.View.extend({el:o("#main"),_userData:{},picManagerView:void 0,render:function(){this.picManagerView=new t;var a=this,i=new e;i.hideAllTasks(),i.selectTask("edit-profile"),(new n).get(__currentSession.userId,function(e){a._userData=e;var n={user:e},t=s(n);a.$el.append(t),e.fromAD&&(o('input[name="password"]').enable(!1),o('input[name="password2"]').enable(!1)),a.picManagerView.setElement(a.$el.find("[data-key='picManager']")),a.picManagerView.render(n),a.addHandlers(),(0,r.postRender)(o(".mainTask[data-rel='edit-profile']"))})},initialValues:function(e){},save:function(){var t=this,a=o("div.mainTask[data-rel='edit-profile']").find("form");if((0,r.cubeValidate)(a)){if(t._userData.first_name=a.find("div.user-name input").val(),t._userData.last_name=a.find("div.user-lastname input").val(),t._userData.password=""!=a.find("div.user-password input").val().trim()?a.find("div.user-password input").val():null,t._userData.email=a.find("div.user-email input").val(),this.picManagerView.imageChange){var s=this.picManagerView.getSrc();s&&(t._userData.imageURL=s)}var i=new n;i.EditProfile(t._userData,function(){o.gritter.add({text:(0,r.translate)("profile_updated"),image:null,time:2e3});var n=t._userData.first_name+" "+t._userData.last_name;o("#navigation .current-user span").text(__currentSession.companyName+"/"+n),t.picManagerView.imageChange&&i.GetUser(__currentSession.loginId,function(e){e&&(__currentSession.imageUrl=e.imageUrl)}),(new e).removeTask("edit-profile")})}},addHandlers:function(){(0,r.postRender)(o("div.mainTask[data-rel='edit-profile']")),o("div.mainTask[data-rel='edit-profile']").find("form").on("submit",o.proxy(function(){return this.save(),!1},this))}})}.apply(n,s))||(e.exports=i)}).call(this,t(218),t(1))},1419:function(e,n,t){var a=t(690);function o(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({1:function(e,n,t,a,o){return' selected="selected" '},compiler:[8,">= 4.3.0"],main:function(e,n,a,s,i){var r,l=null!=n?n:e.nullContext||{},c=e.escapeExpression,d=e.lambda;return'<div class="abm-base-tmp container-fluid mainTask" data-rel="edit-profile" data-type="tab-content">\n  <div class="row">\n    <div class="col-sm-12">\n      <div class="box">\n        <div class="box-title">\n          <h3><i class="fa fa-th-list"></i>'+c(o(t(688)).call(l,"edit_profile",{name:"L",hash:{},data:i,loc:{start:{line:6,column:43},end:{line:6,column:63}}}))+'</h3>\n        </div>\n        <div class="box-content nopadding abm-content">\n\n          <form action="#" method="POST" class=\'form-horizontal form-bordered form-validate\'>\n\n            \x3c!--div class="form-group" data-key="picManager">\n\n\n                      </div--\x3e\n\n            <div class="form-group">\n              <label for="textfield" class="control-label col-sm-2">'+c(o(t(688)).call(l,"_name",{name:"L",hash:{},data:i,loc:{start:{line:18,column:68},end:{line:18,column:81}}}))+'</label>\n              <div class="user-name col-sm-10">\n                <div class="input-group">\n                  <input type="text" value="'+c(d(null!=(r=null!=n?n.user:n)?r.first_name:r,n))+'" class="form-control" name="firstName"\n                    data-rule-required="true" data-rule-minlength="2">\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <label for="textfield" class="control-label col-sm-2">'+c(o(t(688)).call(l,"_lastName",{name:"L",hash:{},data:i,loc:{start:{line:28,column:68},end:{line:28,column:85}}}))+'</label>\n              <div class="user-lastname col-sm-10">\n                <div class="input-group">\n                  <input type="text" value="'+c(d(null!=(r=null!=n?n.user:n)?r.last_name:r,n))+'" class="form-control" name="lastName"\n                    data-rule-required="true" data-rule-minlength="2">\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <label for="textfield" class="control-label col-sm-2">'+c(o(t(688)).call(l,"_email",{name:"L",hash:{},data:i,loc:{start:{line:38,column:68},end:{line:38,column:82}}}))+'</label>\n              <div class="user-email col-sm-10">\n                <div class="input-group">\n                  <input type="email" value="'+c(d(null!=(r=null!=n?n.user:n)?r.email:r,n))+'" class="form-control" name="email" data-rule-required="true"\n                    data-rule-minlength="3" data-rule-email="true">\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <label for="textfield" class="control-label col-sm-2">'+c(o(t(688)).call(l,"app_language",{name:"L",hash:{},data:i,loc:{start:{line:48,column:68},end:{line:48,column:88}}}))+'</label>\n              <div class="user-name col-sm-10">\n                <div class="input-group">\n                  <select class=\'select2-me input-xlarge\'>\n                    <option value="en" '+(null!=(r=o(t(689)).call(l,null!=(r=null!=n?n.user:n)?r.langCode:r,"==","en",{name:"ifCond",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:52,column:39},end:{line:52,column:106}}}))?r:"")+'>English\n                    </option>\n                  </select>\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <label for="textfield" class="control-label col-sm-2">'+c(o(t(688)).call(l,"_password",{name:"L",hash:{},data:i,loc:{start:{line:60,column:68},end:{line:60,column:85}}}))+'</label>\n              <div class="user-name col-sm-10">\n                <div class="input-group user-password">\n                  <input type="password" value="'+c(d(null!=(r=null!=n?n.user:n)?r.password:r,n))+'" class="form-control" id="user-password"\n                    name="password" data-rule-minlength="6">\n                  '+c(o(t(688)).call(l,"complete_only_for_change",{name:"L",hash:{},data:i,loc:{start:{line:65,column:18},end:{line:65,column:50}}}))+'\n                </div>\n              </div>\n            </div>\n\n            <div class="form-group">\n              <label for="textfield" class="control-label col-sm-2">'+c(o(t(688)).call(l,"_confirmPassword",{name:"L",hash:{},data:i,loc:{start:{line:71,column:68},end:{line:71,column:92}}}))+'</label>\n              <div class="user-name col-sm-10">\n                <div class="input-group">\n                  <input type="password" value="'+c(d(null!=(r=null!=n?n.user:n)?r.password:r,n))+'" class="form-control" id="user-password2"\n                    name="password2" data-rule-minlength="6" data-rule-equalTo="#user-password">\n                  '+c(o(t(688)).call(l,"complete_only_for_change",{name:"L",hash:{},data:i,loc:{start:{line:76,column:18},end:{line:76,column:50}}}))+'\n                </div>\n              </div>\n            </div>\n\n\n            <div class="submit form-actions">\n              <button type="submit" class="btn btn-primary btn-save">'+c(o(t(688)).call(l,"_save",{name:"L",hash:{},data:i,loc:{start:{line:83,column:69},end:{line:83,column:82}}}))+"</button>\n            </div>\n          </form>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0})},219:function(e,n,t){"use strict";(function(a,o){var s,i,r=t(18),l=t(693);s=[t(686)],void 0===(i=function(e){var n=function(n,t,o,s){if(__currentSession.modelInfo=n,a("#licenceExpiration").hide(),__currentSession.modelInfo.daysToExpire)try{var i=parseInt(__currentSession.modelInfo.daysToExpire)-1;i>=0&&i<15&&(i>=0?a("#licenceExpiration span").html((0,r.translate)("days_to_expire").replace("#days#",i)):a("#licenceExpiration span").html((0,r.translate)("license_expired")),a("#licenceExpiration").show(),setTimeout(function(){a("#licenceExpiration").hide()},15e3))}catch(e){}if(""!=n.new_session_key){var c=__currentSession.session_key;__currentSession.session_key=n.new_session_key,(0,l.ajaxSetup)(),(new e).changeSessionKey(c,__currentSession.session_key)}if(t(n),a(".wikiLink").attr("href","http://docs.pyplan.org"),o||a("#summary").trigger("refresh"),a("#navigation .modelopened").show(),a("#left .navigation .modelopened").show(),a("#currentModel").html(n.uri.substring(n.uri.lastIndexOf("/")+1,n.uri.lastIndexOf("."))),n.useSnapshot){var d=(0,r.translate)("use_snapshot");a("#navigation .snapshotactive").show().attr("title",d).attr("data-snapdate",n.snapshotDate)}var u=a("#navigation li.modelopened[data-key='btnSaveModelAs'] a"),p=a("#navigation li.modelopened[data-key='btnSaveModelAs'] a i");s.canEdit()?(a("#navigation li.modelopened[data-key='btnSaveModel']").show(),p.removeClass("fa-paste").addClass("fa-save-all"),u.prop("title",(0,r.translate)("save_model_as")),a("#navigation li.modelopened[data-key='btnSaveModelAs']").show(),__currentSession.modelInfo&&__currentSession.modelInfo.readonly&&(a("#navigation li.modelopened[data-key='btnSaveModel']").hide(),(0,r.showMessage)(__currentSession.modelInfo.readOnlyReason,"","info",!1))):(a("#navigation li.modelopened[data-key='btnSaveModel']").hide(),s.isInPublic(),a("#navigation li.modelopened[data-key='btnSaveModelAs']").hide())};return o.Model.extend({openModel:function(e,t,o,s){a("#navigation .snapshotactive").hide();var i=this;(0,l.send)("modelManager/openModel/",{file:e},null,function(e){e&&n(e,t,o,i)},s)},createNewModel:function(e,t,o,s){a("#navigation .snapshotactive").hide();var i=this;(0,l.send)("modelManager/createNewModel/",{modelName:e},null,function(e){e&&n(e,t,o,i)},s)},closeModel:function(e){(0,l.send)("modelManager/closeModel/",null,null,function(){Promise.all([t.e(2),t.e(4),t.e(58)]).then(function(){var n=[t(684)];(function(n){(new n).clearUI(),e()}).apply(null,n)}).catch(t.oe)})},saveModel:function(e){(0,l.send)("modelManager/saveModel/",null,{dataType:"text"},function(){e()})},saveModelAs:function(e,n){(0,l.send)("modelManager/saveModelAs/",{name:e},{type:"GET"},function(e){n(e)})},saveModelToMyWorkspace:function(e,n,t,a){(0,l.send)("modelManager/saveModelToMyWorkspace/?source=".concat(encodeURIComponent(e),"&name=").concat(n,"&fileLocation=").concat(encodeURIComponent(t)),null,{type:"GET",dataType:"text"},a)},getModelInfo:function(e){(0,l.send)("modelManager/getModelInfo/",null,null,e)},isInPublic:function(){return!!(__currentSession.modelInfo.uri&&__currentSession.modelInfo.uri.toLowerCase().indexOf("/public/")>=0)},canEdit:function(){var e=!1,n=this.isInPublic();return((0,r.haveAccess)("change_model")&&!n||(0,r.haveAccess)("change_public_model")&&n)&&(e=!0),e},setModelPreferences:function(e,n,t,o){(0,l.send)("modelManager/setModelPreferences/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){void 0!=n&&n(e),a("body").trigger("pendingChanges",[!0])},function(e){t(e)},!1,o)},getModelPreferences:function(e,n,t){(0,l.send)("modelManager/getModelPreferences/",null,{type:"GET"},e,n,!0,t)},setNodeProperties:function(e,n,t,o,s,i){void 0===i&&(i=!0),(0,l.send)("modelManager/setNodeProperties/",JSON.stringify({node:e,properties:n}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){void 0!=t&&t(e),a("body").trigger("pendingChanges",[i])},function(e){o(e)},!1,s)},setNodesProperties:function(e,n){(0,l.send)("modelManager/setNodesProperties/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){n(e),a("body").trigger("pendingChanges",[!0])})},setNodeIdFromTitle:function(e,n){(0,l.send)("modelManager/setNodeIdFromTitle/",{value:e},{type:"POST"},function(e){n(e),a("body").trigger("pendingChanges",[!0])})},getNodeProperties:function(e,n,t,a,o,s){(0,l.send)("modelManager/getNodeProperties/",JSON.stringify({node:e,properties:n,forceThisNode:s}),{type:"POST",contentType:"application/json;charset=utf-8"},t,a,!0,o)},getInputs:function(e,n){(0,l.send)("modelManager/getNodeInputs/?node="+e,null,{type:"GET"},n)},getOutputs:function(e,n){(0,l.send)("modelManager/getNodeOutputs/?node="+e,null,{type:"GET"},n)},executeForRefresh:function(e){(0,l.send)("modelManager/executeForRefresh/",null,{type:"POST",dataType:"text"},function(n){void 0!=e&&e(n)})},createNode:function(e,n,t){(0,l.send)("modelManager/createNode/",e,{type:"POST"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},createAlias:function(e,n,t){(0,l.send)("modelManager/createAlias/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},createInputNode:function(e,n,t){(0,l.send)("modelManager/createInputNode/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},deleteNodes:function(e,n,t){(0,l.send)("modelManager/deleteNodes/",JSON.stringify({values:e}),{type:"DELETE",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},searchNode:function(e,n,t){var a=e.text,o=void 0===a?"":a,s=e.extraClasses,i=void 0===s?[]:s,r=e.moduleId,c=e.nodeClass,d=e.fillDetail;(0,l.send)("modelManager/searchNodes/?text=".concat(o).concat(r?"&moduleId=".concat(r):"").concat(c?"&nodeClass=".concat(c):"").concat(d?"&fillDetail=".concat(d):""),JSON.stringify({extraClasses:i}),{type:"POST",contentType:"application/json;charset=utf-8"},n,t)},SearchForAutocomplete:function(e,n,t){(0,l.send)("modelManager/searchForAutocomplete/",{text:e},{type:"GET",dataType:"text"},n,t)},navigateDiagram:function(e,n,t){(0,l.send)("modelManager/navigateDiagram/",{moduleId:e,includeArrows:!1},null,n,t)},getArrows:function(e,n,t){(0,l.send)("modelManager/getArrows/",{moduleId:e},null,n,t)},executeButton:function(e,n,t){(0,l.send)("modelManager/executeButton/",JSON.stringify({nodeId:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n,t)},evaluateNode:function(e,n,t){(0,l.send)("dashboardManager/getOrCreate/",{node:e},void 0,n,t)},isInBackground:function(e,n,t){(0,l.send)("modelManager/isInBackground/",{nodeId:e},{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n,t,!0)},abortProcess:function(e,n){(0,l.send)("modelManager/abortProcess/",null,{type:"GET"},e,n)},getIndexValues:function(e,n){(0,l.send)("dashboardManager/getIndexValues/",e,null,function(e){e&&n(e)})},getNodeIndexes:function(e,n){(0,l.send)("dashboardManager/getNodeIndexes/",{node:e},null,function(e){e&&n(e)})},getSelector:function(e,n){(0,l.send)("modelManager/getSelector/",{node:e},{type:"POST"},n)},exportFlatNode:function(e,n,a,o,s,i){var r={nodeId:e,fileFormat:n,numberFormat:a,columnFormat:o,compressed:s},l=new XMLHttpRequest;l.responseType="arraybuffer",l.open("POST","".concat(__apiURL,"/modelManager/exportFlatNode/")),l.setRequestHeader("Authorization","Token ".concat(__currentToken)),l.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),l.setRequestHeader("Content-type","application/json;charset=utf-8"),l.onreadystatechange=function(e){var n=e.currentTarget;n.readyState==n.DONE&&(200==n.status?i(n):Promise.all([t.e(2),t.e(59)]).then(function(){var e=[t(685)];(function(e){(new e).show({title:"ERROR!",text:n.response,notifyType:"error"})}).apply(null,e)}).catch(t.oe))},l.send(JSON.stringify(r))},exportCurrentNode:function(e,n,a,o,s,i,r){var l={nodeId:e,fileFormat:n,numberFormat:a,columnFormat:o,compressed:s,nodeQuery:i},c=new XMLHttpRequest;c.responseType="arraybuffer",c.open("POST","".concat(__apiURL,"/modelManager/exportCurrentNode/")),c.setRequestHeader("Authorization","Token ".concat(__currentToken)),c.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),c.setRequestHeader("Content-type","application/json;charset=utf-8"),c.onreadystatechange=function(e){var n=e.currentTarget;n.readyState==n.DONE&&(200==n.status?r(n):Promise.all([t.e(2),t.e(59)]).then(function(){var e=[t(685)];(function(e){(new e).show({title:"ERROR!",text:n.response,notifyType:"error"})}).apply(null,e)}).catch(t.oe))},c.send(JSON.stringify(l))},getDepartments:function(e,n){(0,l.send)("departments/by_current_company/",null,{type:"GET"},e,n)},getDeniedDepartments:function(e,n){(0,l.send)("departments/denied/?module=".concat(e),null,{type:"GET"},n)},setDeniedModule:function(e,n){(0,l.send)("departments/deny_items/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8"},n)},openParallelModel:function(e,n){(0,l.send)("ModelManager/openParallelModel/?file="+e,null,{type:"GET"},n)},closeParallelModel:function(e,n){(0,l.send)("ModelManager/closeParallelModel/?parallelToken="+e,null,{type:"GET"},n)},moveNodes:function(e,n,t){(0,l.send)("modelManager/moveNodes/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},copyNodes:function(e,n,t){(0,l.send)("modelManager/copyNodes/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},copyAsValues:function(e,n,t,o){(0,l.send)("modelManager/copyAsValues/",JSON.stringify({nodeId:e,asNewNode:n}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=t&&t(e)},o)},setNodePosition:function(e,n,t){(0,l.send)("modelManager/setNodesPosition/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},setNodeSize:function(e,n,t){(0,l.send)("modelManager/setNodesSize/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},setNodeZ:function(e,n,t){(0,l.send)("modelManager/setNodeZ/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},changeSession:function(e,a){var o=this;(0,l.send)("modelManager/changeToOtherModelSession/",{new_session_key:e},null,function(e){Promise.all([t.e(2),t.e(4),t.e(58)]).then(function(){var s=[t(684)];(function(t){(new t).clearUI(),n(e,a,!0,o)}).apply(null,s)}).catch(t.oe)})},getSharedNode:function(e,n){(0,l.send)("result/by_node_id/".concat(e,"/"),null,{type:"GET"},function(e){e&&n(e)},function(e,t){e&&n&&n(e)})},setSharedNode:function(e,n){(0,l.send)("result/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8"},function(e){e&&n&&n(e)})},exportModuleToFile:function(e,n,t,a){var o={moduleId:e,exportType:n},s=new XMLHttpRequest;s.responseType="arraybuffer",s.open("POST","".concat(__apiURL,"/modelManager/exportModuleToFile/")),s.setRequestHeader("Authorization","Token ".concat(__currentToken)),s.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),s.setRequestHeader("Content-type","application/json;charset=utf-8"),s.onreadystatechange=function(e){var n=e.currentTarget;n.readyState==n.DONE&&(200==n.status?t(n):a(n.response))},s.send(JSON.stringify(o))},importModuleFromFile:function(e,n,t){(0,l.send)("modelManager/importModuleFromFile/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){a("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},getProfile:function(e,n,t,a){(0,l.send)("modelManager/getNodeProfile/",{nodeId:e},{type:"GET"},n,t,!0,a)},previewNode:function(e,n,t){var a={node:e};(0,l.send)("modelManager/previewNode/",a,{type:"POST"},n,t)},stopProcess:function(e,n){(0,l.send)("modelManager/stop/",null,{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},e,n,!1,!1)},listShortcuts:function(e){(0,l.send)("diagramShortcut/",null,{type:"GET"},e)},createShortcut:function(e,n){(0,l.send)("diagramShortcut/?node_id=".concat(e),null,{type:"POST"},function(e){void 0!=n&&n(e)})},deleteShortcut:function(e,n){(0,l.send)("diagramShortcut/".concat(e,"/"),null,{type:"DELETE"},function(e){void 0!=n&&n(e)})},getToolbars:function(e){(0,l.send)("modelManager/getToolbars/",null,{type:"GET"},e)},callWizard:function(e,n,t){(0,l.send)("modelManager/callWizard/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n,t)},getFilesForImportWizard:function(e,n){(0,l.send)("modelManager/getFilesForImportWizard/",{extension:e},{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},installLibrary:function(e,n){(0,l.send)("modelManager/installLibrary/",JSON.stringify({lib:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n)},listInstalledLibraries:function(e){(0,l.send)("modelManager/listInstalledLibraries/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},uninstallLibrary:function(e,n,t){(0,l.send)("modelManager/uninstallLibrary/",JSON.stringify({lib:e,target:n}),{type:"DELETE",contentType:"application/json;charset=utf-8",dataType:"text"},t)},getInstallProgress:function(e,n,t){(0,l.send)("modelManager/getInstallProgress/",{from_line:e},{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n,t,!0,!0)}})}.apply(n,s))||(e.exports=i)}).call(this,t(1),t(218))},686:function(e,n,t){"use strict";(function(a,o){var s,i,r=t(18);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=(l(i={},0,"info"),l(i,1,"success"),l(i,2,"error"),i);void 0===(s=function(){return a.Controller.extend({name:"ws",socket:void 0,changeSessionKey:function(e,n){this.socket?(this.socket.send(JSON.stringify({command:"leave",room:e,message:"Leaving!"})),this.socket.send(JSON.stringify({command:"join",room:n,message:"Joining!"}))):this.start()},start:function(){var e=__currentSession.company_code;this.socket=new WebSocket("".concat(__wsURL,"/notifications/").concat(e,"/?apiKey=").concat(__currentToken)),this.events()},events:function(){var e=this,n=__currentSession.session_key;this.socket.onopen=function(t){e.socket.send(JSON.stringify({command:"join",room:n,message:"Joining!"}))},this.socket.onmessage=this.processMessage,this.socket.onclose=function(n){console.log("Client notified socket has closed",n),setTimeout(function(){e.start()},5e3)}},triggerEvent:function(e,n){this.socket&&this.socket.connected&&this.socket.send({type:e,session_key:__currentSession.session_key,message:n})},processMessage:function(e){var n,a=function(e){(0,r.showMessage)(e.message?(0,r.translate)(e.message):"",e.title?(0,r.translate)(e.title):"",e.not_level?c[e.not_level]:"info",-1,!1)},s=(l(n={},0,function(e){a(e)}),l(n,1,function(e){a(e),setTimeout(function(){location.reload()},2e3)}),l(n,4,function(e){!function(e){Promise.all([t.e(2),t.e(4),t.e(55)]).then(function(){var n=[t(696)];(function(n){(new n).showProgressBar(e)}).apply(null,n)}).catch(t.oe)}(e)}),l(n,5,function(e){o("#main-modal").trigger("progress",e)}),n);if(e){var i=JSON.parse(e.data);i&&(i.title||i.message||"number"==typeof i.progress)&&"number"==typeof i.msg_type&&s[i.msg_type]&&s[i.msg_type](i)}},to_delete_processMessage:function(e){if(e){var n=JSON.parse(e.data);switch(n.msg_type){case"MemoryQuotaExceeded":o("body").trigger("memoryQuotaExceeded",[n.body]);break;case"ProcessCancelByMemoryQuotaExceeded":var a=(0,r.translate)("process_cancel_by_quota").replace("##quota##",n.body.memoryQuota).replace("##current##",n.body.modelMemory);(0,r.showMessage)(a,void 0,"error");break;case"modelmsgbox":Promise.all([t.e(2),t.e(4),t.e(55)]).then(function(){var e=[t(696)];(function(e){(new e).showMsgBox(n.body)}).apply(null,e)}).catch(t.oe);break;case"DashboardShareAfterSave":o("#model-summary").trigger("reloadShared",[n.body]);break;case"loadInputTemplate":case"unloadInputTemplate":case"setInputTemplatePos":case"setInputTemplateValues":o(".inputFormTask").trigger("collabMessage",[n.event,n.body]);break;case"ModelEditionAvailable":n&&n.body&&n.body.message&&((0,r.showMessage)(n.body.message,void 0,"info"),__currentSession.modelInfo&&__currentSession.modelInfo.uri==n.body.modelfile&&t.e(106).then(function(){var e=[t(219)];(function(e){(new e).canEdit()&&(o("#navigation li.modelopened[data-key='btnSaveModel']").show(),o("#navigation li.modelopened[data-key='btnSaveModelAs']").show())}).apply(null,e)}).catch(t.oe))}}}})}.apply(n,[]))||(e.exports=s)}).call(this,t(694),t(1))},713:function(e,n,t){"use strict";(function(a){var o,s=t(693);void 0===(o=function(){return a.Model.extend({list:function(e,n){(0,s.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},listByCompany:function(e){(0,s.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},get:function(e,n){(0,s.send)("users/".concat(e,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},update:function(e,n,t){(0,s.send)("users/".concat(e,"/"),n,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},partialUpdateUser:function(e,n,t){(0,s.send)("users/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},EditProfile:function(e,n){(0,s.send)("users/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)},create:function(e,n){(0,s.send)("usercompanies/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n)},partialUpdate:function(e,n,t){(0,s.send)("usercompanies/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},deleteUser:function(e,n){(0,s.send)("users/".concat(e,"/"),null,{type:"DELETE"},n)},deleteUserCompany:function(e,n){(0,s.send)("usercompanies/".concat(e,"/"),null,{type:"DELETE"},n)},getUserCompany:function(e,n){(0,s.send)("usercompanies/".concat(e,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},UpdateUserPreference:function(e,n){var t={userCompanyId:__currentSession.userId,preferenceCode:e,value:n};(0,s.send)("user/UpdateUserPreference",t,{type:"PUT"})},GetUserPreference:function(e,n){(0,s.send)("usercompanies/preference_by_code/?code=".concat(e),null,{type:"GET"},n)},GetRelatedDashboard:function(e){(0,s.send)("user/GetRelatedDashboard",null,null,e)}})}.apply(n,[]))||(e.exports=o)}).call(this,t(218))},722:function(e,n,t){"use strict";(function(a){var o,s=t(18),i=t(693);void 0===(o=function(){var e=function(e,n,a){null!==e.companySettingFile&&""!==e.companySettingFile&&t.e(39).then(function(){var n=[t(712)("./".concat(e.companySettingFile))];(function(){Promise.resolve().then(function(){t(221)}).catch(t.oe)}).apply(null,n)}).catch(t.oe),__currentSession=e,(0,s.setProcessDictionary)(e.process),(0,i.ajaxSetup)(),Promise.all([t.e(2),t.e(4),t.e(40)]).then(function(){var a=[t(684)];(function(t){(new t).clearUI(),n(e)}).apply(null,a)}).catch(t.oe)};return a.Model.extend({isConnected:function(){return""!=__currentToken&&null!==__currentSession},connect:function(e,n,t,a,o){var s={error:function(e,n,t){alert("Could not contact server ".concat(__apiURL))},type:"POST"};(0,i.send)("token-auth/",{username:e,password:n},s,function(e){e&&e.token&&(__currentToken=e.token,(0,i.ajaxSetup)(),a(e))},o,!0,!0)},createSession:function(n,t,a){(0,i.send)("security/createSession",{companyId:n,appVersion:__appVersion},{type:"POST"},function(n){e(n,t)},a)},getUserCompanies:function(e,n,t){(0,i.send)("security/getUserCompanies",{user:e,password:n},null,function(e){t(e)})},getUserCompaniesFromUserId:function(e,n){(0,i.send)("security/GetUserCompaniesFromUserId/?userId=".concat(e),null,null,function(e){n(e)})},logout:function(e){(0,i.send)("security/logout/",null,{dataType:"text"},function(n){void 0!=e&&e(n)})},getAllSessions:function(e){(0,i.send)("security/getAllSessions/",null,null,e,null,!0)},getMySessions:function(e){(0,i.send)("security/getMySessions/",null,null,e,null,!0)},getAllProcess:function(e){(0,i.send)("security/getAllProcess",null,null,e)},createFromToken:function(e,n,t){__currentToken=e,__currentSession={},(0,s.setProcessDictionary)([]),(0,i.ajaxSetup)(),(0,s.setLanguageDictionary)({}),n()},useExternalLink:function(e,n){(0,i.send)("security/useExternalLink/?guid=".concat(e),null,null,function(e,a){200===a.status?(null!==e.session.companySettingFile&&""!==e.session.companySettingFile&&t.e(39).then(function(){var n=[t(712)("./".concat(e.session.companySettingFile))];(function(){Promise.resolve().then(function(){t(221)}).catch(t.oe)}).apply(null,n)}).catch(t.oe),n(e,a)):n(e,a)})},killSessionByKey:function(e,n){(0,i.send)("security/killSessionByKey/",{session_key:e},{type:"GET",dataType:"text"},n)},createNewSession:function(n,t){(0,i.send)("security/createNewSession/",null,null,function(t){e(t,n)})},requireLogoutSessionByToken:function(e,n){(0,i.send)("security/requireLogout/",{session_key:e},{type:"GET",dataType:"text"},n)},ssoTest:function(){(0,i.send)("security/ssoTest",null,null,function(e){console.log(e)})},ssoCheckUser:function(e,n){(0,i.send)("security/SSOCheckUser/",null,null,e,n)},loginas:function(n,t,a,o,s){var r={error:function(e,n,t){alert("Could not contact server ".concat(__apiURL))}};(0,i.send)("security/loginas",{userId:n,token:t,companyId:a},r,function(n){e(n,o)})},loginFromToken:function(n,t,a){var o={error:function(e,n,t){alert("Could not contact server ".concat(__apiURL))}};(0,i.send)("security/loginFromToken",{token:n},o,function(n){e(n,t)})}})}.apply(n,[]))||(e.exports=o)}).call(this,t(218))},990:function(e,n,t){"use strict";(function(a,o){var s,i;s=[t(991)],void 0===(i=function(e){return a.View.extend({el:o("#main"),imageChange:!1,render:function(n){var t=e(n);this.$el.append(t),this.addHandlers()},addHandlers:function(){var e=this;this.$el.find(".fileupload").on("change.bs.fileinput",function(n){e.imageChange=!0})},getSrc:function(){return this.$el.find(".fileinput-preview.thumbnail img").attr("src")}})}.apply(n,s))||(e.exports=i)}).call(this,t(218),t(1))},991:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,a,o,s){var i,r=e.escapeExpression;return'<label for="textfield" class="control-label col-sm-2"></label>\n\n<div class="fileinput fileinput-new col-sm-10" data-provides="fileinput">\n  <div class="input-group">\n    <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 113px; height: 150px;">\n      \x3c!--img src="'+r(function(e){return e&&(e.__esModule?e.default:e)}(t(718)).call(null!=n?n:e.nullContext||{},{name:"baseURL",hash:{},data:s,loc:{start:{line:6,column:19},end:{line:6,column:30}}}))+"thumbs/view.ashx?img=users-"+r(e.lambda(null!=(i=null!=n?n.user:n)?i.imageUrl:i,n))+'&w=113&h=150&t=cropt" /--\x3e\n    </div>\n\n    <div>\n\n      <span class="btn btn-default btn-file">\n        <span class="fileinput-new">Select image</span>\n        <span class="fileinput-exists">Change</span>\n        <input type="file" name="imagefile" class="valid fileupload">\n      </span>\n\n      <a href="#" class="btn fileinput-exists" data-dismiss="fileinput">Remove</a>\n    </div>\n  </div>\n</div>'},useData:!0})}}]);