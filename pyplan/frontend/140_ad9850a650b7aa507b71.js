/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{1238:function(n,t,e){"use strict";(function(a){var l,i=e(679);void 0===(l=function(){return a.Model.extend({list:function(n){(0,i.send)("departments/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},getDepartment:function(n,t){(0,i.send)("departments/"+n+"/",null,null,t)},update:function(n,t,e){(0,i.send)("departments/"+n+"/",JSON.stringify(t),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},e)},partialUpdate:function(n,t,e){(0,i.send)("departments/"+n+"/",JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e)},create:function(n,t){(0,i.send)("departments/",JSON.stringify(n),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},t)},delete:function(n,t){(0,i.send)("departments/"+n+"/",null,{type:"DELETE"},t)}})}.apply(t,[]))||(n.exports=l)}).call(this,e(219))},2246:function(n,t,e){"use strict";(function(a,l){var i,o,d=e(18);i=[e(1238),e(703),e(773),e(2247)],void 0===(o=function(n,t,i,o){return a.View.extend({el:l("#main"),_uId:"",render:function(){l("#mainLoading").show(),l("div[data-rel='abm-department']").remove();var e=new n,a=this;this._uId=l.uuid(),e.list((function(n){l.each(n,(function(n,t){t.engine_definitions=JSON.stringify(t.engine_definitions),t.login_action=JSON.stringify(t.login_action),t.denied_items=JSON.stringify(t.denied_items)}));var e={id:a._uId,dataRel:"abm-department",tmpClass:"department-manager",title:(0,d.translate)("department_manager")},r={headers:[(0,d.translate)("_company"),(0,d.translate)("_name"),(0,d.translate)("_code"),(0,d.translate)("_engineDefinitions"),(0,d.translate)("_loginAction"),(0,d.translate)("_deniedItems"),(0,d.translate)("_options")]};__currentSession.userIsSuperUser||r.headers.shift();var s={data:n,isSuper:__currentSession.userIsSuperUser},c=t(e),u=i(r),p=o(s);a.$el.append(c),l("div[data-id='"+a._uId+"']").find("div.abm-content").append(u),l("div[data-id='"+a._uId+"']").find("tbody").append(p),a.addTableHandlers(l("div[data-id='"+a._uId+"']").find("table")),l("div[data-id='"+a._uId+"']").find("table").cubeTable(null,null,"companyManager"),l("div[data-id='"+a._uId+"']").find("div.data-table-options").append(l('<a href="#" class="btn btn-adddepartment" rel="tooltip" data-title="'+(0,d.translate)("_newDepartment")+'"><i class="fa fa-plus"></i></a>')),a.addHandlers(),l("#mainLoading").hide(),(0,d.postRender)(a.$el.find("div[data-id='"+a._uId+"']"))}))},edit:function(n){var t=l(n.currentTarget).closest("tr").attr("data-id");Promise.resolve().then((function(){var n=[e(843)];(function(n){(new n).showEdit(t)}).apply(null,n)})).catch(e.oe)},editPreferences:function(n){var t=l(n.currentTarget).closest("tr").attr("data-id");e.e(83).then((function(){var n=[e(764)];(function(n){(new n).showEditPref(t)}).apply(null,n)})).catch(e.oe)},deleteCompany:function(t){var a=l(t.currentTarget).closest("tr").attr("data-id");e.e(6).then((function(){var t=[e(663)];(function(t){(new t).show({title:(0,d.translate)("_deleteCompany"),text:(0,d.translate)("_sure_delete_company"),buttons:[{title:(0,d.translate)("cancel"),code:"no"},{title:(0,d.translate)("delete"),css:"red",code:"yes"}],callback:function(t){if("yes"==t){var i=new n;l("#mainLoading").show(),i.delete(a,(function(){l("#mainLoading").hide(),Promise.resolve().then((function(){var n=[e(843)];(function(n){(new n).show()}).apply(null,n)})).catch(e.oe)}))}}})}).apply(null,t)})).catch(e.oe)},addDepartment:function(){Promise.resolve().then((function(){var n=[e(843)];(function(n){(new n).addDepartment()}).apply(null,n)})).catch(e.oe)},close:function(){var n=l("#currentTask").attr("data-rel");Promise.resolve().then((function(){var t=[e(664)];(function(t){(new t).removeTask(n)}).apply(null,t)})).catch(e.oe)},addTableHandlers:function(n){l(n).find("button.btn-edit").on("click",this.edit),l(n).find("button.btn-preference").on("click",this.editPreferences),l(n).find("button.btn-delete").on("click",this.deleteCompany)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-adddepartment").on("click",this.addDepartment),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.close)}})}.apply(t,i))||(n.exports=o)}).call(this,e(219),e(1))},2247:function(n,t,e){var a=e(670);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(a.default||a).template({1:function(n,t,a,i,o,d,r){var s,c=n.lambda,u=n.escapeExpression,p=null!=t?t:n.nullContext||{},f=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<tr data-id="'+u(c(null!=t?f(t,"id"):t,t))+'">\n'+(null!=(s=f(a,"if").call(p,null!=r[1]?f(r[1],"isSuper"):r[1],{name:"if",hash:{},fn:n.program(2,o,0,d,r),inverse:n.noop,data:o,loc:{start:{line:3,column:8},end:{line:5,column:15}}}))?s:"")+"        <td>"+u(c(null!=t?f(t,"name"):t,t))+"</td>\n        <td>"+u(c(null!=t?f(t,"code"):t,t))+"</td>\n        <td>"+u(c(null!=t?f(t,"engine_definitions"):t,t))+"</td>\n        <td>"+u(c(null!=t?f(t,"login_action"):t,t))+"</td>\n        <td>"+u(c(null!=t?f(t,"denied_items"):t,t))+"</td>\n        <td>\n"+(null!=(s=l(e(681)).call(p,"change_department",{name:"haveAccess",hash:{},fn:n.program(4,o,0,d,r),inverse:n.noop,data:o,loc:{start:{line:12,column:16},end:{line:15,column:31}}}))?s:"")+(null!=(s=l(e(681)).call(p,"delete_department",{name:"haveAccess",hash:{},fn:n.program(6,o,0,d,r),inverse:n.noop,data:o,loc:{start:{line:16,column:16},end:{line:19,column:31}}}))?s:"")+"        </td>\n</tr>\n"},2:function(n,t,e,a,l){var i,o=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'        <td class="companyName">'+n.escapeExpression(n.lambda(null!=(i=null!=t?o(t,"company"):t)?o(i,"name"):i,t))+"</td>\n"},4:function(n,t,a,i,o){return'                <button class="btn btn-mini btn-green btn-edit" rel="tooltip" data-title=\''+n.escapeExpression(l(e(668)).call(null!=t?t:n.nullContext||{},"_editCompany",{name:"L",hash:{},data:o,loc:{start:{line:13,column:90},end:{line:13,column:110}}}))+'\'><i\n                                class="fa fa-pencil-square-o"></i></button>\n'},6:function(n,t,a,i,o){return'                \x3c!--button class="btn btn-mini btn-red btn-delete" rel="tooltip" data-title=\''+n.escapeExpression(l(e(668)).call(null!=t?t:n.nullContext||{},"_deleteDepartment",{name:"L",hash:{},data:o,loc:{start:{line:17,column:93},end:{line:17,column:118}}}))+'\'><i\n                                class="fa fa-trash"></i></button--\x3e\n'},compiler:[8,">= 4.3.0"],main:function(n,t,e,a,l,i,o){var d,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return null!=(d=r(e,"each").call(null!=t?t:n.nullContext||{},null!=t?r(t,"data"):t,{name:"each",hash:{},fn:n.program(1,l,0,i,o),inverse:n.noop,data:l,loc:{start:{line:1,column:0},end:{line:22,column:9}}}))?d:""},useData:!0,useDepths:!0})},703:function(n,t,e){var a=e(670);n.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(n,t,e,a,l){var i,o=null!=t?t:n.nullContext||{},d=n.hooks.helperMissing,r=n.escapeExpression,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div class="abm-base-tmp '+r("function"==typeof(i=null!=(i=s(e,"tmpClass")||(null!=t?s(t,"tmpClass"):t))?i:d)?i.call(o,{name:"tmpClass",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):i)+' container-fluid mainTask" data-id="'+r("function"==typeof(i=null!=(i=s(e,"id")||(null!=t?s(t,"id"):t))?i:d)?i.call(o,{name:"id",hash:{},data:l,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):i)+'" data-rel="'+r("function"==typeof(i=null!=(i=s(e,"dataRel")||(null!=t?s(t,"dataRel"):t))?i:d)?i.call(o,{name:"dataRel",hash:{},data:l,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):i)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+r("function"==typeof(i=null!=(i=s(e,"title")||(null!=t?s(t,"title"):t))?i:d)?i.call(o,{name:"title",hash:{},data:l,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):i)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},773:function(n,t,e){var a=e(670);n.exports=(a.default||a).template({1:function(n,t,e,a,l){return"      <th>"+n.escapeExpression(n.lambda(t,t))+"</th>\n"},compiler:[8,">= 4.3.0"],main:function(n,t,e,a,l){var i,o=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<table class="table table-hover table-nomargin table-bordered">\n  <thead>\n    <tr>\n'+(null!=(i=o(e,"each").call(null!=t?t:n.nullContext||{},null!=t?o(t,"headers"):t,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:4,column:6},end:{line:6,column:15}}}))?i:"")+"    </tr>\n  </thead>\n  <tbody>\n\n  </tbody>\n</table>"},useData:!0})}}]);