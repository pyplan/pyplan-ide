/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[156,238],{750:function(t,e,i){"use strict";(function(n){var s,r=i(693);void 0===(s=function(){return n.Model.extend({url:"inputModule",defaults:{formsViewList:[]},get:function(t,e){(0,r.send)("inputModule/get/"+t,null,{type:"GET"},e)},list:function(t,e){(0,r.send)("inputTemplates/list/",null,{type:"GET"},t,e)},create:function(t,e){(0,r.send)("inputModule/create",t,{type:"POST"},e)},update:function(t,e){(0,r.send)("inputModule/update",t,{type:"PUT"},e)},delete:function(t,e){(0,r.send)("inputModule/delete/"+t,null,{type:"DELETE"},e)},getMetadata:function(t,e){(0,r.send)("inputTemplates/getMetadata/",{id:t},{type:"GET"},e)},generate:function(t,e){(0,r.send)("inputModule/generate/"+t,null,{type:"GET"},e)},getData:function(t,e){(0,r.send)("inputTemplates/getData/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},e)},setData:function(t,e,i){(0,r.send)("inputTemplates/setData/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},e,i)},getHistoryChanges:function(t,e){(0,r.send)("inputModule/getHistoryChanges",t,{type:"POST"},e)},addItemToModel:function(t){this.get("formsViewList").push(t)},getItemsModel:function(){return this.get("formsViewList")},getItemModel:function(t){var e,i=this.getItemsModel();for(e=0;e<i.length;e++)if(i[e].tagId==t)return i[e]},removeItemModel:function(t){var e,i=this.getItemsModel();for(e=0;e<i.length;e++)if(i[e].tagId==t.tagId){i.splice(e,1);break}this.set({formsViewList:i})},removeAllItemsModel:function(){this.set("formsViewList",[])},changeItemModel:function(t,e){this.removeItemModel(t),this.addItemToModel(e)},onClick:function(t,e,i,n){(0,r.send)("inputModule/onClick",{param1:t,param2:e},{type:"POST"},i,n)}})}.apply(e,[]))||(t.exports=s)}).call(this,i(218))},835:function(t,e,i){"use strict";(function(n){var s,r,o=i(18);s=[i(730),i(887),i(219)],void 0===(r=function(t,e,i){return t.extend({el:n("#n_o_n_e"),diagram:void 0,render:function(t){var e=this;this.baseRender(t),this.drawItem(),n(this.tagId).find(".item-title .dashAddRow").on("click",function(){e.form.addNewRow()}),this.form.$el.on("onUpdateMetadata",function(t,i){n(e.tagId).find(".item-title span.title").attr("title",i.name),n(e.tagId).find(".item-title span.title").text(i.name),e.setTitle(i.name)}),n(this.tagId).on("onFiltersChange",function(t,i){var s=[];n.each(i,function(t,e){if(e&&e.nodeFilterId){var i={};i.field=e.nodeFilterId,i.values=[],n.each(e.idxValues,function(t,e){"All"===e.text?i.values.push([]):i.values.push({value:n.trim(e.text),selected:!0})}),s.push(i)}}),e.model.onFiltersChange(s)})},isDiagramView:function(){return!0},needRefresh:function(){return!0},refreshItemDash:function(){this.form.getTemplateData(),this.form.refreshFiltersToIndex()},drawItem:function(){this.options.model=new i;var t=this;n(this.tagId).find(".item-area").addClass("extrafullSize"),this.setDefaultOptions(),n(this.tagId).find(".item-area").empty(),this.form=new e(this.currentResult.itemProperties),this.form.setElement(n(this.tagId).find(".item-area")),this.form.render(this.tagId),n(this.tagId).on("setAddButton",function(e){n(t.tagId).find("i.dashAddRow").show()})},onRemoveItemView:function(){this.form&&(this.form.onRemoveView(),this.form=null)},updateSize:function(){n(this.tagId).find(".item-area").height(n(this.tagId).parent().height()-7),this.form&&this.form.onBaseResize()},setDefaultOptions:function(){this.currentResult.itemProperties?this.currentResult.itemProperties.diagramOptions?void 0==this.currentResult.itemProperties.diagramOptions.showBreadcrumb&&(this.currentResult.itemProperties.diagramOptions.showBreadcrumb=!0):this.currentResult.itemProperties.diagramOptions={showBreadcrumb:!0}:this.currentResult.itemProperties={diagramOptions:{showBreadcrumb:!0}}},updateProperties:function(t){t&&this.currentResult&&(this.setDefaultOptions(),this.currentResult.itemProperties.diagramOptions=n.extend(!0,this.currentResult.itemProperties.diagramOptions,t))},setTitle:function(t){this.currentResult&&this.currentResult.itemProperties&&this.currentResult.itemProperties.title&&(this.currentResult.itemProperties.title.text=t,this.currentResult.itemProperties.title.isCustom=!0)},getOptionsMenu:function(){var t=this,e={callback:function(e){switch(e){case"_full":t.fullScreen();break;case"_toggle_filters":t.form.toggleFilters();break;case"_workflow":t.form.showWorkflow(event);break;case"_showHistory":t.form.includeHistory=!t.form.includeHistory,t.form.getTemplateData()}},items:{_full:{type:"icon_text",name:(0,o.translate)("fullscreen"),iconClass:"fa fa-expand"},_toggle_filters:{type:"icon_text",name:(0,o.translate)("toggle_filters"),iconClass:"fa fa-filter"},sep1:"---------"}};return t.form.templateMetadata.enableHistoryChanges&&(e.items._showHistory={type:"icon_text",name:(0,o.translate)("task_history_show"),iconClass:"fa fa-exclamation-triangle"}),(0,o.haveAnyAccess)("LISTASSIGNEDWORKFLOWTASKS,LISTALLWORKFLOWTASKS")&&(e.items._workflow={type:"icon_text",name:(0,o.translate)("workflow"),iconClass:"fa fa-tasks"}),t.fromEmbedded&&(delete e.items._export,delete e.items.sep2,delete e.items._splitBy,delete e.items._knowledge,delete e.items._workflow,delete e.items._view_in_diagram),e},getRelatedNoQuery:function(){var t=[];if(this.form&&this.form.templateMetadata&&this.form.templateMetadata.filters){for(var e=[],i=0;i<this.form.templateMetadata.filters.length;i++){var s=this.form.templateMetadata.filters[i];s.nodeFilterId&&-1==e.indexOf(s.nodeFilterId)&&e.push(s.nodeFilterId)}if(e.length>0){var r=this.form;n.each(this.model.getItemsModel(),function(i,s){if(s.currentResult&&s.currentResult.dims&&s.form!=r){var o=!1;n.each(s.currentResult.dims,function(t,i){e.indexOf(i.field.split(".")[0])>=0&&(o=!0)}),o||n.each(s.currentResult.rows,function(t,i){e.indexOf(i.field.split(".")[0])>=0&&(o=!0)}),o||n.each(s.currentResult.columns,function(t,i){e.indexOf(i.field.split(".")[0])>=0&&(o=!0)}),o&&t.push(s.currentResult.nodeId)}}),r=null}}return t}})}.apply(e,s))||(t.exports=r)}).call(this,i(1))}}]);