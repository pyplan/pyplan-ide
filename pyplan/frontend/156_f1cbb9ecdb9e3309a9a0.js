/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[156,6],{2372:function(e,n,t){"use strict";(function(o,a){var i,c,r=t(18);i=[t(662),t(2373),t(707)],void 0===(c=function(e,n,t){return o.View.extend({el:a("#main"),render:function(o,i){var c=this,s=n({source:o});(new e).show({title:"Duplicate",html:s,modalClass:"shortModal",buttons:[{title:(0,r.translate)("cancel"),code:"close"},{title:(0,r.translate)("duplicate"),css:"primary",code:"yes"}],callback:function(e,n){if("yes"==e){var s=a("#right-column > div.fm-highlight-toolbar > div.pull-left a").not('[disabled="disabled"]');s.attr("disabled","disabled"),n.modal("hide");var l=new t;return(0,r.haveAccess)("add_file_public")&&o.some((function(e){return c.isInPublic(e)}))||!o.some((function(e){return c.isInPublic(e)}))?l.duplicateFiles(o,(function(){i(o),s.removeAttr("disabled")})):(s.removeAttr("disabled"),(0,r.showMessage)("".concat((0,r.translate)("no_permission_to_perform_action")," - ").concat((0,r.translate)("permission"),": add_file_public"),(0,r.translate)("_duplicate_files"),"error")),!1}},onLoad:function(){setTimeout((function(){}),500)}})},isInPublic:function(e){return e.toLowerCase().indexOf("/public/")>=0||e.toLowerCase().endsWith("/public")}})}.apply(n,i))||(e.exports=c)}).call(this,t(219),t(1))},2373:function(e,n,t){var o=t(669);e.exports=(o.default||o).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,o,a){return'<div class="box">\n\n       <span>Are you sure you want to duplicate the selected item at the same directory?</span>\n\n   <div class="box-content">\n\n\n\n</div>\n'},useData:!0})},662:function(e,n,t){"use strict";(function(o){var a;void 0===(a=function(){return o.Controller.extend({name:"showModal",show:function(e){Promise.all([t.e(2),t.e(229)]).then((function(){var n=[t(685)];(function(n){(new n).render(e)}).apply(null,n)})).catch(t.oe)}})}.apply(n,[]))||(e.exports=a)}).call(this,t(676))},707:function(e,n,t){"use strict";(function(o){var a,i=t(678);void 0===(a=function(){return o.Model.extend({url:"myFileManager",getMainFolders:function(e){(0,i.send)("fileManager/getMainFolders/",null,{type:"GET"},e)},getFiles:function(e,n){(0,i.send)("fileManager/getFiles/?folder=".concat(encodeURIComponent(e)),null,{type:"GET"},n)},createFolder:function(e,n,t){(0,i.send)("fileManager/createFolder/",{folder_path:e,folder_name:n},{type:"POST"},t)},deleteFiles:function(e,n){(0,i.send)("fileManager/deleteFiles/",JSON.stringify({sources:e}),{type:"DELETE",contentType:"application/json",dataType:"text"},n)},renameFiles:function(e,n,t){(0,i.send)("fileManager/renameFile/?source=".concat(encodeURIComponent(e),"&newName=").concat(n),null,{type:"GET"},t)},unzipFile:function(e,n,t){(0,i.send)("fileManager/unzipFile/?source=".concat(e,"&targetFolder=").concat(encodeURIComponent(n)),null,{type:"GET",dataType:"text"},t)},moveFiles:function(e,n,t){var o=e.map((function(e){return"sources=".concat(e)})).join("&");(0,i.send)("fileManager/moveFiles/?".concat(o,"&target=").concat(encodeURIComponent(n)),null,{type:"GET",dataType:"text"},t)},copyToMyWorkspace:function(e,n){(0,i.send)("fileManager/copyToMyWorkspace/?source="+encodeURIComponent(e),null,{type:"GET",dataType:"text"},n)},copyFiles:function(e,n,t){var o=e.map((function(e){return"sources=".concat(e)})).join("&");(0,i.send)("fileManager/copyFiles/?".concat(o,"&target=").concat(encodeURIComponent(n)),null,{type:"GET",dataType:"text"},t)},duplicateFiles:function(e,n){var t=e.map((function(e){return"sources=".concat(e)})).join("&");(0,i.send)("fileManager/duplicateFiles/?".concat(t),null,{type:"GET"},n)},zipFiles:function(e,n){var t=e.map((function(e){return"sources=".concat(e)})).join("&");(0,i.send)("fileManager/zipFiles/?".concat(t),null,{type:"GET",dataType:"text"},n)},downloadFiles:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},r=e.map((function(e){return"sources=".concat(e)})).join("&"),s=new XMLHttpRequest;s.responseType="arraybuffer",s.open("GET","".concat(__apiURL,"/fileManager/download/?").concat(r),!0),s.setRequestHeader("Authorization","Token ".concat(__currentToken)),s.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),s.onloadstart=o,s.onreadystatechange=function(e){var o=e.currentTarget;o.onprogress=a,o.onerror=c,o.onloadend=i,o.readyState==o.DONE&&(200==o.status?n(o):t.e(18).then((function(){var e=[t(664)];(function(e){(new e).show({title:"ERROR!",text:o.response,notifyType:"error"})}).apply(null,e)})).catch(t.oe))},s.send()},getDepartments:function(e){(0,i.send)("departments/by_current_company/",null,{type:"GET"},e)},getDeniedDepartments:function(e,n){(0,i.send)("departments/denied/?folder=".concat(encodeURIComponent(e)),null,{type:"GET"},n)},setDeniedPath:function(e,n){(0,i.send)("departments/deny_items/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8"},n)},optimzeTemplates:function(e,n,t){var o=e.map((function(e){return"sources=".concat(e)})).join("&");(0,i.send)("fileManager/optimizeTemplates/?".concat(o),null,{type:"GET",dataType:"text"},n,t)}})}.apply(n,[]))||(e.exports=a)}).call(this,t(219))}}]);