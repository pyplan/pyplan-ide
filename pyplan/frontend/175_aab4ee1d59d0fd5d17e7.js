/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[175],{1035:function(t,e,i){"use strict";(function(n){var a,r,o=i(18);i(2180),a=[i(904),i(716),i(687),i(2182)],void 0===(r=function(t,e,a,r){return e.extend({numberFormat:[],numberFormatter:[],blackLabels:!1,arrRows:[],arrDims:[],disabledColor:"#ccc",assignedDepartments:[],render:function(t){var e=this;n.isEmptyObject(this.currentResult.itemProperties)&&(this.currentResult.itemProperties.menuDefinition=[],this.currentResult.itemProperties.generalSettings={menuTitle:"Menu",menuTitleSize:"14px",menuTitleColor:"#cccccc",itemsPerRow:3,itemsAlign:"centerAlign",textAlign:"centerAlign",backgroundColor:"#7798bf",hoverBackgroundColor:"#7cb5ec",textColor:"#ffffff",titleSize:"22px",subtitleSize:"15px",titleMargin:"0px",subtitleMargin:"30px",itemsHeight:"20%",iconSize:"150px",iconColor:"#ffffff",iconMarginTop:"25%"});var a=JSON.stringify(this.currentResult.itemProperties.menuDefinition).indexOf("hiddenDpts")>0;new Promise(a?function(t){i.e(27).then((function(){var e=[i(712)];(function(e){(new e).getUserCompany(__currentSession.userCompanyId,(function(e){t(e.departments)}))}).apply(null,e)})).catch(i.oe)}:function(t){t([])}).then((function(i){i.forEach((function(t){e.assignedDepartments.push(t.toString())})),e.baseRender(t),e.drawItem(),e.addStyleHandlers(),e.updateSize()}))},updateSize:function(t,e,i){n(this.tagId).find(".item-area").height(n(this.tagId).find(".item-area").parent().height()-25),n(this.tagId).find(".menuWidget").height(n(this.tagId).find(".item-area").height()),n(this.tagId).find("nav").height(n(this.tagId).find(".item-area").height()-2)},baseUpdateSize:function(){n(this.tagId).find(".item-area").height(n(this.tagId).find(".item-area").parent().height()-25),n(this.tagId).find(".menuWidget").height(n(this.tagId).find(".item-area").height()),n(this.tagId).find("nav").height(n(this.tagId).find(".item-area").height()-2)},drawItem:function(){var t=this,e=this.currentResult.itemProperties.generalSettings.itemsAlign,i="<ul class='".concat(e,"'>");n.each(this.currentResult.itemProperties.menuDefinition,(function(e,n){i+=t.buildItem(n)})),i+="</ul>";var a=r();n(this.tagId).find(".item-area").html(a),n(this.tagId).find(".btnMenu").hide(),n(this.tagId).find(".item-area").addClass("fullSize"),n(this.tagId).find(".menuWidget nav").html(i),n(this.tagId).find(".menuWidget nav").mmenu({offCanvas:!1,extensions:["theme-white"],navbars:[{position:"bottom",content:["breadcrumb"]}],onClick:{setSelected:!1}}),n(this.tagId).find(".mm-title").first().html(this.currentResult.itemProperties.generalSettings.menuTitle),n(this.tagId).find(".mm-title").css("font-size",this.currentResult.itemProperties.generalSettings.menuTitleSize),n(this.tagId).find(".mm-title").css("color",this.currentResult.itemProperties.generalSettings.menuTitleColor),this.updateSize(),this.addActionHandlers()},buildItem:function(t){var e=this,i="",a=!!t.hiddenDpts&&this.assignedDepartments.some((function(e){return t.hiddenDpts.toString().split(",").indexOf(e)>=0})),r=window.location.href.indexOf("/#shared/")>0,o=["openDiagram","openFileManager","openTaskLog"].indexOf(t.action)>=0;if(!(a||r&&o)){var s=this.currentResult.itemProperties.generalSettings,l=s.itemsPerRow,d=s.itemsAlign,c=s.textColor,u=s.titleSize,m=s.titleMargin,g=s.subtitleMargin,h=s.subtitleSize,p=s.textAlign,f=s.iconColor,b=s.iconSize,v=s.iconMarginTop,x=90/l,w="noAction"==t.action?this.disabledColor:this.currentResult.itemProperties.generalSettings.backgroundColor;i="<li class='"+p+"'style='width:"+x+"%;padding-bottom:"+x+"%;background-color:"+w+";color:"+c+";font-size:"+u+";'data-id='"+t.id+"'data-title='"+t.title+"'data-subtitle='"+t.subtitle+"'data-icon='"+t.icon+"'data-action='"+t.action+"'data-dash-id='"+t.dashId+"'data-tasklog-id='"+t.tasklogId+"'data-url='"+t.url+"'data-tasklog-has-params='"+t.tasklogHasParams+"'data-blank-target='"+t.blankTarget+"'><span style='top:"+m+";'>"+t.title+"</span><span style='font-size:"+h+"; padding-top:"+g+"'>"+t.subtitle+"</span><span class='iconWrapper'><i class='"+t.icon+"' style='color:"+f+"; font-size:"+b+"; margin-top:"+v+";'></i></span>",t.children&&(i+="<ul style='width:100%;' class='"+d+"'>",n.each(t.children,(function(t,n){i+=e.buildItem(n)})),i+="</ul>"),i+="</li>"}return i},addStyleHandlers:function(){var t=this;n(this.tagId).on("mouseover",".mm-listview li",(function(){var e="noAction"==n(this).attr("data-action")?t.disabledColor:t.currentResult.itemProperties.generalSettings.hoverBackgroundColor;n(this).css("background-color",e)})),n(this.tagId).on("mouseout",".mm-listview li",(function(){var e="noAction"==n(this).attr("data-action")?t.disabledColor:t.currentResult.itemProperties.generalSettings.backgroundColor;n(this).css("background-color",e)}))},addActionHandlers:function(){n(this.tagId).find(".menuWidget li").on("click",(function(){var t=n(this),e=t.attr("data-action"),a=t.attr("data-dash-id"),r=t.attr("data-url");switch(e){case"openDash":var s=!1;"true"===n(this).attr("data-blank-target")&&(s=!0),s||n(".tabs-area .dash-tabs li a.active").closest("li").find("i.fa.fa-close").click(),Promise.resolve().then((function(){var t=[i(687)];(function(t){(new t).showDashboard(a,null,"",!1,!0,null,null),n(".tabs-area .nav-tabs li a").removeClass("active"),n(".tabs-area .nav-tabs li a[data-rel=\"'".concat(a,"'\"]")).addClass("active")}).apply(null,t)})).catch(i.oe);break;case"openTaskLog":var l={periodic_task_id:t.attr("data-tasklog-id"),scheduleSubTask:null,scheduleTaskSessionId:0,hasParam:"true"===t.attr("data-tasklog-has-params"),headerInfo:{}};i.e(35).then((function(){var t=[i(747)];(function(t){(new t).showTaskLogs(l)}).apply(null,t)})).catch(i.oe);break;case"openDiagram":Promise.resolve().then((function(){var t=[i(663)];(function(t){(new t).addTask("influence_diagram",(0,o.translate)("model"))}).apply(null,t)})).catch(i.oe);break;case"openFileManager":Promise.resolve().then((function(){var t=[i(663)];(function(t){(new t).addTask("file-manager2",(0,o.translate)("file_manager"))}).apply(null,t)})).catch(i.oe);break;case"openUrl":var d="true"===n(this).attr("data-blank-target")?"_blank":"_self",c=["http://","https://"].find((function(t){return r.indexOf(t)>-1}));r=c?r:"http://".concat(r),window.open(r,d)}}))},onRemoveItemView:function(){n(this.tagId).find(".item-area .colorpick").spectrum("destroy")},getOptionsMenu:function(){var t=this;return{callback:function(e){switch(e){case"_full":t.fullScreen()}},items:{_full:{type:"icon_text",name:(0,o.translate)("fullscreen"),iconClass:"fa fa-expand"}}}}})}.apply(e,a))||(t.exports=r)}).call(this,i(1))},2180:function(t,e,i){var n=i(2181);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(224)(n,a);n.locals&&(t.exports=n.locals)},2181:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,".menuWidget .mm-navbar-bottom{border-top:0px solid transparent;border-bottom:none;top:auto;bottom:0;height:0}.menuWidget .mm-menu>.mm-panel>.mm-listview{margin:10px 0px 0px 0px !important}.menuWidget .iconWrapper{text-align:center !important}.menuWidget .mm-listview .mm-next.mm-fullsubopen+span{padding-right:20px;margin-right:0;width:100%;height:100%;position:absolute}.menuWidget .mm-listview>li>span{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:inherit;display:block;padding:10px 10px 10px 10px;margin:0;width:100%;position:absolute}.menuWidget .mm-listview>li.leftAlign>span{text-align:left}.menuWidget .mm-listview>li.centerAlign>span{text-align:center}.menuWidget .mm-listview>li.rightAlign>span{text-align:right}.menuWidget .mm-hasnavbar-bottom-1 .mm-panel{bottom:0;height:auto}.menuWidget ul{width:100%}.menuWidget ul.leftAlign li{float:left;margin:5px}.menuWidget ul.centerAlign{text-align:center}.menuWidget ul.centerAlign li{display:inline-block;*display:inline;*zoom:1;margin:2px 5px}.menuWidget ul.rightAlign li{float:right;margin:5px}.menuWidget .mm-menu>.mm-panel:before,.menuWidget .mm-menu>.mm-panel:after{height:0}.dd-dragel{z-index:999999}.btnRemoveItem{float:right;padding:3px 4px;position:absolute;top:5px;right:5px}.btnRemoveItem:hover{background-color:#ccc}.dd-handle.selected{border-color:#4aaae3;background-color:#f7fdff}.btnEditItem{float:right;padding:3px 4px;position:absolute;top:5px;right:25px}.btnEditItem:hover{background-color:#ccc}.dd-dragel{z-index:999999 !important}",""])},2182:function(t,e,i){var n=i(669);t.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(t,e,i,n,a){return'<div class="menuWidget" style="width:100%;">\n  <nav style="height: auto;">\n\n  </nav>\n</div>'},useData:!0})}}]);