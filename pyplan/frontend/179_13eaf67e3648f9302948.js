/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{1060:function(e,n,a){"use strict";(function(t,l){var o,c,i=a(18),r=a(732);o=[a(220),a(1251),a(1252)],void 0===(c=function(e,n,a){return t.View.extend({el:l("#main"),render:function(){var a=this;this.$el.append(n({title:this.options.title,max_height:"".concat(l(window).height()-200,"px")}));var t=l("#wizardDataarrayFromPandas"),o=t.find(".modal-footer .btnSave");t.on("hidden.bs.modal",(function(){t.off("hidden.bs.modal"),t.remove(),t.find(".selectors").select2("destroy")})).modal("show"),t.on("ifToggled",'input[data-action="create_index"]',(function(e){var n=l(e.currentTarget).closest("tr"),o=n.find("select.selectors"),c=n.find('input[data-action!="create_index"]');l(e.currentTarget).is(":checked")?(o.select2("val","None"),o.prop("disabled",!0),c.iCheck("disable"),c.iCheck("uncheck")):(o.prop("disabled",!1),c.iCheck("enable")),a.showSelected(t)})),t.on("ifToggled",'input[data-action!="create_index"]',(function(e){var n=l(e.currentTarget).closest("tr"),o=n.find('input[data-action="create_index"]'),c=n.find("select.selectors");n.find('input[data-action!="create_index"]:checked').length>0?(c.select2("val","None"),c.prop("disabled",!0),o.iCheck("disable"),o.iCheck("uncheck"),n.addClass("selected")):(o.iCheck("enable"),c.prop("disabled",!1)),a.showSelected(t)})),o.on("click",(function(){var n=l("#wizardDataarrayFromPandas .optList input[type=checkbox]:checked"),o=l("#wizardDataarrayFromPandas .optList input[type=radio]:checked"),c=a.options.confirm.params,r=c.indexes,s=c.agg;o.length>0?(n.each((function(e,n){var a=l(n).val();r.push({field:a,model_index:""})})),l("#wizardDataarrayFromPandas .optList select.selectors").each((function(e,n){var a=l(n);"None"!=a.val()&&r.push({field:a.closest("tr").attr("data-field"),model_index:a.val()})})),s.field=o.attr("value"),s.calc=o.attr("data-action"),(new e).callWizard(a.options.confirm,(function(e){t.modal("hide"),a.options.callback(e)}))):(0,i.showMessage)((0,i.translate)("must_select_aggregation"),void 0,"error")})),this.getData()},showSelected:function(e){e.find("tbody tr").each((function(e,n){var a=l(n);a.find("input.icheck-me:checked").length>0||"None"!=a.find("select.selectors").val()?a.addClass("selected"):a.removeClass("selected")}))},getData:function(){var n=this,t=l("#wizardDataarrayFromPandas .optList"),o=l("#wizardDataarrayFromPandas .optList tbody");(new e).callWizard(this.options.bodyParams,(function(e){e.columns.forEach((function(n){var t=n.field,l=n.type,c=n.dtype;o.append(a({indexes:e.model_indexes,field:t,dtype:c,checked:l===r.TYPES.INDEX}))})),o.find("tr").each((function(n,a){var t=l(a).attr("data-field").trim().toLowerCase(),o=e.model_indexes.filter((function(e){return e.id.toLowerCase()==t||String(e.title).toLowerCase()==t}));o&&o.length>0&&l(a).find("td select.selectors").val(o[0].id)})),(0,i.postRender)(o);o.find(".selectors").select2({width:"resolve",dropdownAutoWidth:!0,formatResult:function(e){var n=l("<span/>").attr("class","node");return l("<span/>").attr("class","nodeTitle").text(e.text).appendTo(n),l("<span/>").attr("class","nodeId").text(e.id).appendTo(n),n},formatSelection:function(e){return e.id},dropdownCssClass:"indexlist",escapeMarkup:function(e){return e},matcher:function(e,n,a){return n.toUpperCase().includes(e.toUpperCase())||a.val().toUpperCase().includes(e.toUpperCase())}}),o.find(".selectors").on("change",(function(){n.showSelected(t)})),t.show(),n.showSelected(t)}))}})}.apply(n,o))||(e.exports=c)}).call(this,a(219),a(1))},1251:function(e,n,a){var t=a(670);function l(e){return e&&(e.__esModule?e.default:e)}e.exports=(t.default||t).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,o,c){var i=e.lambda,r=e.escapeExpression,s=null!=n?n:e.nullContext||{},d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"<div id='wizardDataarrayFromPandas' class='modal fade' tabindex='-1' role='dialog' aria-labelledby='Wizard'\n  aria-hidden='true'>\n  <div class='modal-dialog'>\n    <div class='modal-content'>\n      <div class='modal-header'>\n        <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>x</button>\n        <h4>"+r(i(null!=n?d(n,"title"):n,n))+"</h4>\n      </div>\n      <div class='modal-body nopadding' style=\"max-height:"+r(i(null!=n?d(n,"max_height"):n,n))+'">\n\n        <div class="col-sm-12">\n          <h5>'+r(l(a(668)).call(s,"wizard_dataarrayfrompadnas_detail",{name:"L",hash:{},data:c,loc:{start:{line:12,column:14},end:{line:12,column:55}}}))+"</h5>\n        </div>\n\n        <div class='nodisplay optList'>\n          <table class='table table-nomargin'>\n            <thead>\n              <tr>\n                <th rowspan=\"2\">"+r(l(a(668)).call(s,"column",{name:"L",hash:{},data:c,loc:{start:{line:19,column:32},end:{line:19,column:46}}}))+'</th>\n                <th rowspan="2">'+r(l(a(668)).call(s,"_dtype",{name:"L",hash:{},data:c,loc:{start:{line:20,column:32},end:{line:20,column:46}}}))+'</th>\n                <th rowspan="2" class="group-by">'+r(l(a(668)).call(s,"select_model_index",{name:"L",hash:{},data:c,loc:{start:{line:21,column:49},end:{line:21,column:75}}}))+'</th>\n                <th rowspan="2" class="centered group-by">'+r(l(a(668)).call(s,"create_new_index",{name:"L",hash:{},data:c,loc:{start:{line:22,column:58},end:{line:22,column:82}}}))+'</th>\n                <th class="centered" colspan="5">'+r(l(a(668)).call(s,"aggregate",{name:"L",hash:{},data:c,loc:{start:{line:23,column:49},end:{line:23,column:66}}}))+'</th>\n              </tr>\n              <tr>\n                <th class="centered selectable">'+r(l(a(668)).call(s,"count",{name:"L",hash:{},data:c,loc:{start:{line:26,column:48},end:{line:26,column:61}}}))+'</th>\n                <th class="centered selectable">'+r(l(a(668)).call(s,"sum",{name:"L",hash:{},data:c,loc:{start:{line:27,column:48},end:{line:27,column:59}}}))+'</th>\n                <th class="centered selectable">'+r(l(a(668)).call(s,"_max",{name:"L",hash:{},data:c,loc:{start:{line:28,column:48},end:{line:28,column:60}}}))+'</th>\n                <th class="centered selectable">'+r(l(a(668)).call(s,"_min",{name:"L",hash:{},data:c,loc:{start:{line:29,column:48},end:{line:29,column:60}}}))+'</th>\n                <th class="centered selectable">'+r(l(a(668)).call(s,"_mean",{name:"L",hash:{},data:c,loc:{start:{line:30,column:48},end:{line:30,column:61}}}))+"</th>\n              </tr>\n            </thead>\n            <tbody>\n            </tbody>\n          </table>\n        </div>\n      </div>\n      <div class='modal-footer'>\n        <button type='button' class='btn btn-default' data-dismiss='modal'>"+r(l(a(668)).call(s,"cancel",{name:"L",hash:{},data:c,loc:{start:{line:39,column:75},end:{line:39,column:89}}}))+"</button>\n        <button type='button' class='btn btn-primary btnSave'>"+r(l(a(668)).call(s,"_create",{name:"L",hash:{},data:c,loc:{start:{line:40,column:62},end:{line:40,column:77}}}))+"</button>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0})},1252:function(e,n,a){var t=a(670);function l(e){return e&&(e.__esModule?e.default:e)}e.exports=(t.default||t).template({1:function(e,n,a,t,l){var o=e.lambda,c=e.escapeExpression,i=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'      <option value="'+c(o(null!=n?i(n,"id"):n,n))+'">'+c(o(null!=n?i(n,"title"):n,n))+"</option>\n"},3:function(e,n,a,t,l){return" checked "},5:function(e,n,a,t,l){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"    <input type='radio' class='icheck-me' data-skin='square' data-color='blue' value='"+e.escapeExpression(e.lambda(null!=n?o(n,"field"):n,n))+"' data-action='count'\n      name=\"calc\" />\n"},7:function(e,n,a,t,l){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"    <input type='radio' class='icheck-me' data-skin='square' data-color='blue' value='"+e.escapeExpression(e.lambda(null!=n?o(n,"field"):n,n))+"' data-action='sum'\n      name=\"calc\" />\n"},9:function(e,n,a,t,l){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"    <input type='radio' class='icheck-me' data-skin='square' data-color='blue' value='"+e.escapeExpression(e.lambda(null!=n?o(n,"field"):n,n))+"' data-action='max'\n      name=\"calc\" />\n"},11:function(e,n,a,t,l){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"    <input type='radio' class='icheck-me' data-skin='square' data-color='blue' value='"+e.escapeExpression(e.lambda(null!=n?o(n,"field"):n,n))+"' data-action='min'\n      name=\"calc\" />\n"},13:function(e,n,a,t,l){var o=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return"    <input type='radio' class='icheck-me' data-skin='square' data-color='blue' value='"+e.escapeExpression(e.lambda(null!=n?o(n,"field"):n,n))+"' data-action='mean'\n      name=\"calc\" />\n"},compiler:[8,">= 4.3.0"],main:function(e,n,t,o,c){var i,r=e.lambda,s=e.escapeExpression,d=null!=n?n:e.nullContext||{},u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<tr data-field="'+s(r(null!=n?u(n,"field"):n,n))+'">\n  <td class="wizard-field">\n    <i class="fa fa-check"></i>\n    <span>'+s(r(null!=n?u(n,"field"):n,n))+"</span>\n  </td>\n  <td>"+s(r(null!=n?u(n,"dtype"):n,n))+'</td>\n  <td class="selectable">\n    <select class=\'selectors\' style="width:200px">\n      <option value="None">'+s(l(a(668)).call(d,"_none",{name:"L",hash:{},data:c,loc:{start:{line:9,column:27},end:{line:9,column:40}}}))+"</option>\n"+(null!=(i=u(t,"each").call(d,null!=n?u(n,"indexes"):n,{name:"each",hash:{},fn:e.program(1,c,0),inverse:e.noop,data:c,loc:{start:{line:10,column:6},end:{line:12,column:15}}}))?i:"")+"    </select>\n  </td>\n  <td class=\"centered selectable group-by\">\n    <input type='checkbox' class='icheck-me' data-skin='square' data-color='blue' "+(null!=(i=u(t,"if").call(d,null!=n?u(n,"checked"):n,{name:"if",hash:{},fn:e.program(3,c,0),inverse:e.noop,data:c,loc:{start:{line:16,column:82},end:{line:16,column:113}}}))?i:"")+"\n      value='"+s(r(null!=n?u(n,"field"):n,n))+"' data-action='create_index' />\n  </td>\n  <td class=\"centered selectable with-calc\">\n"+(null!=(i=l(a(669)).call(d,null!=n?u(n,"dtype"):n,"==","numeric",{name:"ifCond",hash:{},fn:e.program(5,c,0),inverse:e.noop,data:c,loc:{start:{line:20,column:4},end:{line:23,column:15}}}))?i:"")+'  </td>\n  <td class="centered selectable with-calc">\n'+(null!=(i=l(a(669)).call(d,null!=n?u(n,"dtype"):n,"==","numeric",{name:"ifCond",hash:{},fn:e.program(7,c,0),inverse:e.noop,data:c,loc:{start:{line:26,column:4},end:{line:29,column:15}}}))?i:"")+'  </td>\n  <td class="centered selectable with-calc">\n'+(null!=(i=l(a(669)).call(d,null!=n?u(n,"dtype"):n,"==","numeric",{name:"ifCond",hash:{},fn:e.program(9,c,0),inverse:e.noop,data:c,loc:{start:{line:32,column:4},end:{line:35,column:15}}}))?i:"")+'  </td>\n  <td class="centered selectable with-calc">\n'+(null!=(i=l(a(669)).call(d,null!=n?u(n,"dtype"):n,"==","numeric",{name:"ifCond",hash:{},fn:e.program(11,c,0),inverse:e.noop,data:c,loc:{start:{line:38,column:4},end:{line:41,column:15}}}))?i:"")+'  </td>\n  <td class="centered selectable with-calc">\n'+(null!=(i=l(a(669)).call(d,null!=n?u(n,"dtype"):n,"==","numeric",{name:"ifCond",hash:{},fn:e.program(13,c,0),inverse:e.noop,data:c,loc:{start:{line:44,column:4},end:{line:47,column:15}}}))?i:"")+"  </td>\n</tr>"},useData:!0})},732:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TYPES=n.DTYPES=void 0;n.DTYPES={STRING:"string",NUMERIC:"numeric",BOOLEAN:"boolean",DATE:"date",OBJECT:"object",VOID:"void"};n.TYPES={INDEX:"index",COLUMN:"column"}}}]);