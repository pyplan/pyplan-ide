/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{1825:function(e,n,t){var a=t(690);function o(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({1:function(e,n,a,s,l){return"                "+e.escapeExpression(o(t(688)).call(null!=n?n:e.nullContext||{},"about_to_publish_interface",{name:"L",hash:{},data:l}))+"\n"},3:function(e,n,a,s,l){return"                "+e.escapeExpression(o(t(688)).call(null!=n?n:e.nullContext||{},"about_to_publish_application",{name:"L",hash:{},data:l}))+"\n"},5:function(e,n,t,a,o){var s,l=e.lambda,i=e.escapeExpression;return'        <button class="btn btn-'+i(l(null!=n?n.css:n,n))+" "+i(l(null!=n?n.extraClass:n,n))+'" data-code="'+i(l(null!=n?n.code:n,n))+'" data-dismiss="modal"\n          aria-hidden="true">'+(null!=(s=t.if.call(null!=n?n:e.nullContext||{},null!=n?n.icon:n,{name:"if",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o}))?s:"")+" "+i(l(null!=n?n.title:n,n))+"</button>\n"},6:function(e,n,t,a,o){var s;return null!=(s=e.lambda(null!=n?n.icon:n,n))?s:""},compiler:[7,">= 4.0.0"],main:function(e,n,a,s,l){var i,r=e.lambda,d=e.escapeExpression,c=null!=n?n:e.nullContext||{};return'<div id="main-modal" class="modal fade publishToMyPyplanModal" tabindex="-1" role="dialog"\n  aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false" style="display: none;">\n  <div class="modal-dialog '+d(r(null!=n?n.modalClass:n,n))+'">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h4 class="modal-title" id="myModalLabel">'+d(r(null!=n?n.title:n,n))+'</h4>\n      </div>\n\n      <div class="modal-body" style="overflow-y:auto; overflow-x: hidden;">\n        <div class="container-fluid">\n          <div class="publishToMyPyplanModalContent">\n            <div class="row publishToMyPyplanTextContent">\n              <div class="col-md-12 col-lg-12">\n'+(null!=(i=o(t(689)).call(c,null!=n?n.itemType:n,"==","dashboard",{name:"ifCond",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+(null!=(i=o(t(689)).call(c,null!=n?n.itemType:n,"==","report",{name:"ifCond",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l}))?i:"")+'              </div>\n              <div\n                class="col-md-6 col-lg-6 col-md-offset-3 col-lg-offset-3 colalert alert-warning alertModelWillBeSaved"\n                role="alert">\n                <b>'+d(o(t(688)).call(c,"_warning",{name:"L",hash:{},data:l}))+"</b> "+d(o(t(688)).call(c,"model_will_be_saved",{name:"L",hash:{},data:l}))+'\n              </div>\n            </div>\n            <div class="row progressPublishToMyPyplan nodisplay">\n              <div><b>'+d(o(t(688)).call(c,"this_may_take_a_few_minutes",{name:"L",hash:{},data:l}))+'</b></div>\n              <div class="progress progress-striped active ">\n                <div class="progress-bar" style="width: 100%;">\n                </div>\n              </div>\n            </div>\n            <div class="row externalLinkRow">\n              <div class="row">\n                <div class="col-md-10 col-lg-10 col-md-offset-1 col-lg-offset-1">\n                  <input class="publishedItemLinkInput" disabled="true" />\n                </div>\n              </div>\n              <div class="row">\n                <div class="col-md-2 col-lg-2 col-md-offset-5 col-lg-offset-5">\n                  <button class="btn btn-small btnCopyToClipboard" data-placement="top" rel="tooltip"\n                    data-title="'+d(o(t(688)).call(c,"copy_to_clipboard",{name:"L",hash:{},data:l}))+'"><i class="fad fa-copy" /></button>\n                  <button class="btn btn-small btnOpenExternalLink" data-placement="top" rel="tooltip"\n                    data-title="'+d(o(t(688)).call(c,"open_link_new_window",{name:"L",hash:{},data:l}))+'"><i class="fad fa-external-link-alt" /></button>\n                </div>\n              </div>\n            </div>\n\n\n\n          </div>\n        </div>\n      </div>\n\n      <div class="modal-footer">\n'+(null!=(i=a.each.call(c,null!=n?n.buttons:n,{name:"each",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l}))?i:"")+"      </div>\n    </div>\n  </div>\n</div>"},useData:!0})},811:function(e,n,t){"use strict";(function(a){var o,s=t(693);void 0===(o=function(){return a.Model.extend({url:"inputModule",defaults:{formsViewList:[]},search:function(e,n){(0,s.send)("reportManager/search/?text=".concat(e),null,{type:"GET"},n)},getMyReports:function(e,n){(0,s.send)("reportManager/myReports/?parent=".concat(e),null,{type:"GET"},n)},getFavsReports:function(e,n){(0,s.send)("reportManager/myReports/?favs=true",null,{type:"GET"},n)},getReportsSharedWithMe:function(e,n){(0,s.send)("reportManager/sharedWithMe/?parent=".concat(e),null,{type:"GET"},n)},getMySharedReports:function(e,n){(0,s.send)("reportManager/mySharedReports/",null,{type:"GET"},n)},getRecentsReports:function(e,n){(0,s.send)("reportManager/recents/?parent=".concat(e),null,{type:"GET"},n)},exportDashboards:function(e,n){var a=new XMLHttpRequest;a.responseType="arraybuffer",a.open("PUT","".concat(__apiURL,"/reportManager/exportItems/"),!0),a.setRequestHeader("Authorization","Token ".concat(__currentToken)),a.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=function(e){var a=e.currentTarget;a.readyState==a.DONE&&(200==a.status?n(a):t.e(18).then(function(){var e=[t(685)];(function(e){(new e).show({title:"ERROR!",text:a.response,notifyType:"error"})}).apply(null,e)}).catch(t.oe))},a.send(JSON.stringify(e))},exportItemsAndPublish:function(e,n,t,a,o,l,i){(0,s.send)("reportManager/exportItemsAndPublish/",JSON.stringify({username:e,uuid:n,model_folder:t,model_id:a,dashboard_ids:o,report_ids:l}),{type:"PUT",contentType:"application/json;charset=utf-8"},i)},importDashboards:function(e,n){(0,s.send)("reportManager/importItems/",JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8"},n)},create:function(e,n){(0,s.send)("reportManager/",e,{type:"POST"},function(e){void 0!=n&&n(e)})},createReport:function(e,n){(0,s.send)("reportManager/",e,{type:"POST"},function(e){void 0!=n&&n(e)})},dropOnReport:function(e,n){(0,s.send)("reportManager/dropOnReport/",JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8"},n)},updateOrder:function(e){(0,s.send)("reportManager/changeOrder/",JSON.stringify({values:e}),{type:"PUT",contentType:"application/json;charset=utf-8"},function(e){})},setAsFav:function(e,n,t){(0,s.send)("reportManager/setAsFav/",JSON.stringify({report_ids:e.report_ids,dashboard_ids:e.dashboard_ids,is_fav:n}),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},updateName:function(e,n,t){(0,s.send)("reportManager/".concat(e,"/"),{name:n},{type:"PUT",dataType:"text"},function(e){void 0!=t&&t(e)})},deleteItems:function(e,n){(0,s.send)("reportManager/bulkDelete/",JSON.stringify({values:e}),{type:"DELETE",contentType:"application/json;charset=utf-8"},function(e){void 0!=n&&n(e)})},createTempId:function(){return"tmp-".concat(parseInt(5e5*Math.random()))},copyToMyReports:function(e,n){(0,s.send)("reportManager/copyToMyReports/",JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){void 0!=n&&n(e)})},duplicateItems:function(e,n){(0,s.send)("reportManager/duplicateItems/",JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){n&&n(e)})}})}.apply(n,[]))||(e.exports=o)}).call(this,t(218))},950:function(e,n,t){"use strict";(function(a,o){var s,l,i=t(18);s=[t(811),t(219),t(1825)],void 0===(l=function(e,n,t){return a.View.extend({el:o("#main"),render:function(e){if(!(this.$el.find(".publishToMyPyplanModal").length>0)){this.itemId=e.itemId,this.itemType=e.itemType,e.buttons=[{css:"primary",extraClass:"btnPublishToMyPyplan",title:(0,i.translate)("accept"),code:"publish"},{title:(0,i.translate)("close"),code:"cancel"}];var n=t(e);this.$el.append(n);var a=o(".publishToMyPyplanModal");a.find(".modal-footer button").click(function(n){n.preventDefault();var t=o(n.target).attr("data-code");return(!e.callback||!1!==e.callback.call(n.target,t,a))&&"cancel"==t&&(a.off("shown"),a.modal("hide")),!1}),a.on("show.bs.modal",function(){if(0===o(".publishToMyPyplanModal:visible").length){var n=100014+10*o(".modal:visible").length;a.css("z-index",n),setTimeout(function(){o(".modal-backdrop").not(".modal-stack").css("z-index",n-10).addClass("modal-stack")},0),e.hasOwnProperty("onLoad")&&e.onLoad(a),!0!==e.okOnEnter&&void 0!==e.okOnEnter||a.keyup(function(e){13==e.keyCode&&a.find("button.btn-primary").click()})}}),a.on("hidden.bs.modal",function(){a.off("hidden"),e.hasOwnProperty("onClose")&&e.onClose(a),a.remove()}),a.modal(e.backdrop?{backdrop:"static",keyboard:!1}:null),this.addHandlers(a)}},addHandlers:function(t){var a=this,s=t.find(".btnPublishToMyPyplan"),l=t.find(".progressPublishToMyPyplan"),r=t.find(".publishToMyPyplanTextContent"),d=t.find(".externalLinkRow"),c=t.find(".publishedItemLinkInput"),p=t.find(".btnCopyToClipboard"),u=t.find(".btnOpenExternalLink");d.hide(),s.on("click",function(t){t.preventDefault(),l.show();var p=new e,u=__currentSession.modelInfo.uri.substring(0,__currentSession.modelInfo.uri.lastIndexOf("/")),f="dashboard"==a.itemType?[a.itemId]:[],y="report"==a.itemType?[a.itemId]:[];o("body").find(".mainTask.influence-diagram").length>0?o(".dockInfluenceDiagramProperty").trigger("saveModelChanges",[!1,function(e){e?p.exportItemsAndPublish(__currentSession.my_username,__currentSession.my_uuid,u,__currentSession.modelInfo.modelId,f,y,function(e){var n="https://my.pyplan.org/#shared/".concat(e.id);c.val(n),l.hide(),s.hide(),r.hide(),d.show()}):(0,i.showMessage)((0,i.translate)("error_saving_the_model"),(0,i.translate)("saving_error"))}]):(new n).saveModel(function(){o("body").trigger("pendingChanges",[!1]),(0,i.showMessage)((0,i.translate)("model_successfully_saved")," ","success",!0),p.exportItemsAndPublish(__currentSession.my_username,__currentSession.my_uuid,u,f,y,function(e){var n="https://my.pyplan.org/#shared/".concat(e.id);c.val(n),l.hide(),s.hide(),r.hide(),d.show()})})}),p.on("click",function(e){var n=document.createElement("textarea");return n.value=c.val(),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),(0,i.showMessage)((0,i.translate)("copied_to_clipboard"),(0,i.translate)("copied"),"success"),!1}),u.on("click",function(e){open(c.val(),"_blank")})}})}.apply(n,s))||(e.exports=l)}).call(this,t(218),t(1))}}]);