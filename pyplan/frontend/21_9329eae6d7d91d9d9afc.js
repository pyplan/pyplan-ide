/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1983:function(e,n,t){var i=t(690);e.exports=(i.default||i).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,i,a){return'<div class="overlapDisable">\n</div>\n<div class=\'row\' style="border-width: 0 0 1px 0; border-style: solid; border-color: #ccc;">\n  <div style=\'padding-right: 15px; padding-left: 15px;\'>\n    <ul class="tabs tabs-inline tabs-top icon-nav" style="border-width: 0;">\n      <li style="display:none;">\n        <div id="nodeTypeIcon"></div>\n      </li>\n      <li class="active">\n        <a href="#nodePropertiesTab" class="btnTabProperties" data-toggle="tab">Properties</a>\n      </li>\n      <li>\n        <a href="#nodeWizardTab" class="btnTabWizard" data-toggle="tab">Code <i class="far fa-code"></i></a>\n      </li>\n      <li>\n        <a href="#nodeDocumentationTab" class="btnTabDocumentation" data-toggle="tab">Docs</a>\n      </li>\n\n      <li style="border-width:1px; margin-left:15px;">\n        <div style="display:none;" class="btnsConfirmChanges">\n          <button class="btn btn-small btnSave">\n            <i class=\'fa fa-check\' />\n          </button>\n          <button class="btn btn-small btnCancel">\n            <i class=\'fa fa-times\' />\n          </button>\n        </div>\n      </li>\n\n    </ul>\n  </div>\n  <div class=\'col-sm-7\'>\n    <ul class="tabs tabs-inline tabs-top icon-nav no-border">\n      \x3c!-- li>\n        <div style="display:none;" class="btnsConfirmChanges">\n          <button class="btn btn-small btn-success btnSave">\n            <i class=\'fa fa-check\' />\n          </button>\n          <button class="btn btn-small btn-danger btnCancel">\n            <i class=\'fa fa-times\' />\n          </button>\n        </div>\n      </li --\x3e\n\n      <li class="dropdown pull-right errorsList nodisplay" style="border-width: 1px;">\n        <a href="#" class="dropdown-toggle" data-toggle="" style="background-color:#FFF;">\n          <i class="fa fa-exclamation-triangle no-error"></i>\n          <span class="label label-default errorCount">0</span>\n        </a>\n        <ul class="dropdown-menu pull-right message-ul">\n          <li>\n            <div class="details" style="width:370px;">\n              <div class="message" style="word-wrap: break-word; padding: 5px;">\n              </div>\n            </div>\n          </li>\n        </ul>\n      </li>\n\n    </ul>\n  </div>\n</div>\n\n<div class="form-horizontal form-bordered nodePropertiesForm">\n  <div class="tab-content" id="nodePropertiesDock">\n    <div class="tab-pane active" id="nodePropertiesTab">\n    </div>\n    <div class="tab-pane" id="nodeWizardTab">\n    </div>\n    <div class="tab-pane" id="nodeDocumentationTab">\n    </div>\n  </div>\n</div>'},useData:!0})},743:function(e,n,t){"use strict";(function(i,a){var o,r,d=t(18);o=[t(1983)],void 0===(r=function(e){return i.View.extend({el:a("#nodePropertiesDock"),diagram:void 0,$dockParent:null,dic:{},render:function(){var n=this,i=e(),o=n.getCookie(__currentSession.modelInfo.newToken+"-dictionary");if(o.length>2)try{var r=JSON.parse(o);n.dic=r,o=__currentSession.modelInfo.newToken+"-dictionary"+"=",document.cookie=o}catch(e){}else a(".moreChangesContainer").hide(),n.dic=[];this.$el=a("#nodePropertiesDock");var s=a(".influence-diagram .dockInfluenceDiagramProperty");s.hide(),s.find(".box-content.dock-container").append(i),t.e(286).then(function(){var e=[t(2084)];(function(e){new e({dic:n.dic}).render()}).apply(null,e)}).catch(t.oe),t.e(287).then(function(){var e=[t(2088)];(function(e){new e({dic:n.dic}).render()}).apply(null,e)}).catch(t.oe),t.e(288).then(function(){var e=[t(2090)];(function(e){new e({dic:n.dic}).render()}).apply(null,e)}).catch(t.oe),t.e(289).then(function(){var e=[t(2092)];(function(e){(new e).render()}).apply(null,e)}).catch(t.oe),a(".mainTask.influence-diagram").on("diagramClick",function(e){a(".nodePropertiesForm").find("input, textarea, button, select, div").attr("disabled",!1),n.hideEditor()}),a(".mainTask.influence-diagram").on("clearSelect",function(e){a(".nodePropertiesForm").find("input, textarea, button, select, div").attr("disabled",!1),n.hideEditor()}),a("#nodePropertiesDock").on("shortcutTabProps",function(e,n){switch(n){case"1":a(".dockInfluenceDiagramProperty .btnTabProperties").click();break;case"2":a(".dockInfluenceDiagramProperty .btnTabWizard").click();break;case"3":a(".dockInfluenceDiagramProperty .btnTabDocumentation").click()}}),a("#nodePropertiesDock").on("refreshNodeDefinition",function(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(".nodeIdTitle").data("id")===i&&Promise.resolve().then(function(){var e=[t(219)];(function(e){(new e).getNodeProperties(i,[{name:"identifier"},{name:"title"},{name:"nodeClass"},{name:"units"},{name:"definition"},{name:"defErrorDetail"},{name:"errorInDef"},{name:"description"},{name:"isCalc"},{name:"resultType"}],function(e){var t={id:i,title:e.properties[1].value,originalId:i,nodeClass:e.properties[2].value},r="decision"===t.nodeClass;o||(n.dic[i]=e),a(".nodeWizardTab").trigger("clickNode",{nodeFullData:t,nodeProperties:e,forcePreview:!0,isDecision:r}),r||(a(".nodeDocumentationTab").trigger("clickNode",{nodeFullData:t,nodeProperties:e}),a(".nodePropertiesTab").trigger("clickNode",{nodeFullData:t,nodeProperties:e}));var d=store.getState().toJS().selectedTab;n.triggerTabSelection(d),a(d).tab("show"),n.showEditor(),a(".overlapDisable").hide()})}).apply(null,e)}).catch(t.oe)});var c=function(e){var n=store.getState().toJS().nodeData.nodeClass;["module","text"].includes(n)||store.dispatch({type:"UPDATE_SELECTED_TAB",selectedTab:e})};a(".btnTabDocumentation").on("click",function(){n.triggerTabSelection(".btnTabDocumentation"),c(".btnTabDocumentation")}),a(".btnTabInputOutput").on("click",function(){n.triggerTabSelection(".btnTabInputOutput"),c(".btnTabInputOutput")}),a(".btnTabProperties").on("click",function(){n.triggerTabSelection(".btnTabProperties"),c(".btnTabProperties")}),a(".btnTabWizard").on("click",function(){a(".nodeWizardTab").trigger("updateSizes"),c(".btnTabWizard"),a(".btnTabWizard").hasClass("isNewNode")&&a(".btnTabWizard").removeClass("isNewNode");var e=ace.edit("nodeWizardDef");e.focus(),e.navigateFileEnd()}),(0,d.registerResizeEvents)("nodeDefinitionResize",function(){a(".nodeDocumentationTab").trigger("updateSizes"),a(".nodeInputOutputTab").trigger("updateSizes"),a(".nodePropertiesTab").trigger("updateSizes"),a(".nodeWizardTab").is(":visible")&&a(".nodeWizardTab").trigger("updateSizes")}),a(".dockInfluenceDiagramProperty").on("updateSizesOnDock",function(e,t){n.updateSizesOnDock()})},getCookie:function(e){for(var n=e+"=",t=decodeURIComponent(document.cookie).split(";"),i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(n))return a.substring(n.length,a.length)}return""},loadDefinitionTab:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this,d=a(".dock.dockItem .nodeTextTitle"),s=a(".btnTabWizard"),c=a(".btnGoToCode").parent(),l=e.id,u=e.title,b=e.originalId,p=e.nodeClass;a(".box-title.header .nodeIdTitle").remove(),"text"===e.nodeClass?d.html(e.description?e.description:"(".concat(l,")")):(d.html(u?"".concat(u):""),d.after('<h3 class="nodeIdTitle" data-id="'.concat(l,'">(').concat(l,")</h3>")));var g=a(".mainTask.influence-diagram .diagram-area .diagram-toolbar");if((0==g.length||g.hasClass("browser-mode"))&&(n||(n=[]),n.push("txtNodeTitle","txtNodeIdentifier","txtNodeUnits","nodeDef","btnDiagramNodeNumberFormat","txtNodeShortDesc")),void 0!==p){var f=p.toLowerCase(),m=!["text"].includes(f);a("li a.btnTabDocumentation").toggle(m),a("li a.btnTabInputOutput").toggle(m),["text","module"].includes(f)?(s.hide(),c.hide(),i=".btnTabProperties"):(s.show(),c.show());a(".group-units").show(),["module","button","linkmodule","model","function"].includes(f)&&a(".group-units").hide(),"module"===p&&a(".group-units").hide()}a("#nodePropertiesDock").attr("node-id",l),Promise.resolve().then(function(){var d=[t(219)];(function(t){var d=b||l;(new t).getNodeProperties(d,[{name:"identifier"},{name:"title"},{name:"nodeClass"},{name:"units"},{name:"definition"},{name:"defErrorDetail"},{name:"errorInDef"},{name:"description"},{name:"isCalc"},{name:"resultType"}],function(t){t.disabledFields=n,a(".nodeWizardTab").trigger("clickNode",{nodeFullData:e,nodeProperties:t,forcePreview:o}),a(".nodeDocumentationTab").trigger("clickNode",{nodeFullData:e,nodeProperties:t}),a(".nodePropertiesTab").trigger("clickNode",{nodeFullData:e,nodeProperties:t});var d=i||store.getState().toJS().selectedTab;r.triggerTabSelection(d),a(d).tab("show"),a(".overlapDisable").show(),r.showEditor(),a(".overlapDisable").hide()})}).apply(null,d)}).catch(t.oe)},triggerTabSelection:function(e){switch(e){case".btnTabInputOutput":setTimeout(function(){a(".nodeInputOutputTab").trigger("loadInputOutputTab")},10);break;case".btnTabDocumentation":setTimeout(function(){a(".nodeDocumentationTab").trigger("updateSizes")},10),setTimeout(function(){a(".nodeDocumentationTab").trigger("loadDocumentationTab")},10);break;case".btnTabProperties":setTimeout(function(){a(".nodePropertiesTab").trigger("loadInitialProperty")},10);break;case".btnTabWizard":setTimeout(function(){a(".nodeWizardTab").trigger("updateSizes")},10)}},updateSizesOnDock:function(){var e=a(".mainTask.influence-diagram .dockInfluenceDiagramProperty");if(e.hasClass("docked")&&a("#nodeWizardDef")&&a("#nodeWizardDef").length>0){var n=ace.edit("nodeWizardDef"),t=e.height(),i=e.width()-100,o=e.parent().width()-100,r=a(".leftCol").width(),d=0;if(a("canvas").height()>a(window).height()&&(d=15),e.width(o+d-5),a(".aceWrapper").is(":visible")){var s=n.container;a(s).height(t-80),a(s).find(".ace_content").height(t-80),a(s).find(".ace_content").width(i-(r+50))}a(".nodeDocumentationTab").trigger("updateSizes"),n.resize()}},hideEditor:function(){a(".influence-diagram .dockInfluenceDiagramProperty").fadeOut(300)},showEditor:function(){a(".influence-diagram .dockInfluenceDiagramProperty").fadeIn(300,function(){a(".nodePropertiesTab").trigger("setTitleFocus")})},onRemoveView:function(){(0,d.removeResizeEvent)("nodeDefinitionResize"),this.diagram&&(this.diagram.destroy(),this.diagram=null)}})}.apply(n,o))||(e.exports=r)}).call(this,t(218),t(1))}}]);