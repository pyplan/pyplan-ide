/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[220,28],{1924:function(n,e,t){"use strict";(function(a,l){var i,s,o=t(18);i=[t(719),t(710),t(786),t(1925)],void 0===(s=function(n,e,i,s){return a.View.extend({el:l("#main"),_uId:"",render:function(){l("#mainLoading").show(),l("div[data-rel='abm-user']").remove();var t=new n,a=this;this._uId=l.uuid(),t.list(void 0,function(n){var t={id:a._uId,dataRel:"abm-user",tmpClass:"user-manager",title:(0,o.translate)("_userManager")},c={headers:[(0,o.translate)("_name"),(0,o.translate)("_login"),(0,o.translate)("_email"),(0,o.translate)("_companies"),(0,o.translate)("_options")]},r={data:n,token:__currentSession.token},d=e(t),u=i(c),p=s(r);a.$el.append(d),l("div[data-id='"+a._uId+"']").find("div.abm-content").append(u),l("div[data-id='"+a._uId+"']").find("tbody").append(p),(0,o.postRender)(a.$el.find("div[data-id='"+a._uId+"']")),a.addTableHandlers(l("div[data-id='"+a._uId+"']").find("table")),l("div[data-id='"+a._uId+"']").find("table").cubeTable(null,null,"userManagerSuper"),l("div[data-id='"+a._uId+"']").find("div.data-table-options").append(l('<a href="#" class="btn btn-adduser" rel="tooltip" data-title="'+(0,o.translate)("_newUser")+'"><i class="fa fa-plus"></i></a>')),a.addHandlers(),l("#mainLoading").hide()})},edit:function(n){var e=l(n.currentTarget).closest("tr").attr("data-id");Promise.resolve().then(function(){var n=[t(764)];(function(n){(new n).showEdit(e)}).apply(null,n)}).catch(t.oe)},editPreferences:function(n){var e=l(n.currentTarget).closest("tr").attr("data-id");Promise.resolve().then(function(){var n=[t(764)];(function(n){(new n).showEditPref(e)}).apply(null,n)}).catch(t.oe)},deleteUser:function(e){var a=l(e.currentTarget).closest("tr").attr("data-id");t.e(5).then(function(){var e=[t(683)];(function(e){(new e).show({title:(0,o.translate)("_deleteUser"),text:(0,o.translate)("_sure_delete_user"),buttons:[{title:(0,o.translate)("yes"),css:"primary",code:"yes"},{title:(0,o.translate)("no"),code:"no"}],callback:function(e){if("yes"==e){var i=new n;l("#mainLoading").show(),i.deleteUser(a,function(){l("#mainLoading").hide(),Promise.resolve().then(function(){var n=[t(764)];(function(n){(new n).show()}).apply(null,n)}).catch(t.oe)})}}})}).apply(null,e)}).catch(t.oe)},changeState:function(e){var t=l(this).closest("tr").attr("data-id"),a={user:{id:t,active:this.checked}};(new n).partialUpdate(t,a,function(){})},addUser:function(){Promise.resolve().then(function(){var n=[t(764)];(function(n){(new n).addUser()}).apply(null,n)}).catch(t.oe)},close:function(){var n=l("#currentTask").attr("data-rel");Promise.resolve().then(function(){var e=[t(684)];(function(e){(new e).removeTask(n)}).apply(null,e)}).catch(t.oe)},addTableHandlers:function(n){l(n).find("button.btn-edit").on("click",this.edit),l(n).find("button.btn-preference").on("click",this.editPreferences),l(n).find("input.user-state").on("ifToggled",this.changeState),l(n).find("button.btn-delete").on("click",this.deleteUser)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-adduser").on("click",this.addUser),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.close),l(".iCheck-helper").attr("title",(0,o.translate)("_changeState")).tooltip()}})}.apply(e,i))||(n.exports=s)}).call(this,t(218),t(1))},1925:function(n,e,t){var a=t(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(a.default||a).template({1:function(n,e,a,i,s,o,c){var r,d=n.lambda,u=n.escapeExpression,p=null!=e?e:n.nullContext||{};return'<tr data-id="'+u(d(null!=e?e.id:e,e))+'">\n  <td class="userName">'+u(d(null!=e?e.first_name:e,e))+" "+u(d(null!=e?e.last_name:e,e))+"</td>\n  <td>"+u(d(null!=e?e.username:e,e))+"</td>\n  <td>"+u(d(null!=e?e.email:e,e))+"</td>\n  <td>\n"+(null!=(r=a.each.call(p,null!=e?e.companies:e,{name:"each",hash:{},fn:n.program(2,s,0,o,c),inverse:n.noop,data:s,loc:{start:{line:7,column:4},end:{line:9,column:13}}}))?r:"")+'  </td>\n  <td>\n    <div class="options">\n'+(null!=(r=l(t(695)).call(p,"impersonate_user",{name:"haveAccess",hash:{},fn:n.program(4,s,0,o,c),inverse:n.noop,data:s,loc:{start:{line:13,column:6},end:{line:17,column:21}}}))?r:"")+(null!=(r=l(t(695)).call(p,"change_user",{name:"haveAccess",hash:{},fn:n.program(6,s,0,o,c),inverse:n.noop,data:s,loc:{start:{line:18,column:6},end:{line:21,column:21}}}))?r:"")+'      \x3c!--button class="btn btn-mini btn-blue btn-preference" data-original-title=\''+u(l(t(688)).call(p,"_editUserPreferences",{name:"L",hash:{},data:s,loc:{start:{line:22,column:83},end:{line:22,column:111}}}))+"'\n        rel=\"tooltip\" data-title='"+u(l(t(688)).call(p,"_editUserPreferences",{name:"L",hash:{},data:s,loc:{start:{line:23,column:34},end:{line:23,column:62}}}))+'\'><i class="fa fa-list-ol"></i></button--\x3e\n'+(null!=(r=l(t(689)).call(p,null!=e?e.active:e,"==",!0,{name:"ifCond",hash:{},fn:n.program(8,s,0,o,c),inverse:n.program(10,s,0,o,c),data:s,loc:{start:{line:24,column:6},end:{line:28,column:17}}}))?r:"")+(null!=(r=l(t(695)).call(p,"delete_user",{name:"haveAccess",hash:{},fn:n.program(12,s,0,o,c),inverse:n.noop,data:s,loc:{start:{line:29,column:6},end:{line:32,column:21}}}))?r:"")+"    </div>\n  </td>\n</tr>\n"},2:function(n,e,t,a,l){return"    <li>"+n.escapeExpression(n.lambda(null!=e?e.name:e,e))+"</li>\n"},4:function(n,e,a,i,s,o,c){var r=n.lambda,d=n.escapeExpression,u=null!=e?e:n.nullContext||{};return'      <a class="btn btn-mini btn-darkblue" target="_blank" href="./#loginas/'+d(r(null!=c[1]?c[1].userId:c[1],e))+"/"+d(r(null!=c[2]?c[2].token:c[2],e))+"\"\n        data-original-title='"+d(l(t(688)).call(u,"login_as",{name:"L",hash:{},data:s,loc:{start:{line:15,column:29},end:{line:15,column:45}}}))+"' rel=\"tooltip\" data-title='"+d(l(t(688)).call(u,"login_as",{name:"L",hash:{},data:s,loc:{start:{line:15,column:73},end:{line:15,column:89}}}))+'\'><i\n          class="fa fa-external-link"></i></a>\n'},6:function(n,e,a,i,s){var o=null!=e?e:n.nullContext||{},c=n.escapeExpression;return'      <button class="btn btn-mini btn-green btn-edit" data-original-title=\''+c(l(t(688)).call(o,"_editUser",{name:"L",hash:{},data:s,loc:{start:{line:19,column:75},end:{line:19,column:92}}}))+"' rel=\"tooltip\"\n        data-title='"+c(l(t(688)).call(o,"_editUser",{name:"L",hash:{},data:s,loc:{start:{line:20,column:20},end:{line:20,column:37}}}))+'\'><i class="fa fa-pencil-square-o"></i></button>\n'},8:function(n,e,t,a,l){return'      <input type="checkbox" name="remember" class="icheck-me user-state" data-skin="square" data-color="blue" checked>\n'},10:function(n,e,t,a,l){return'      <input type="checkbox" name="remember" class="icheck-me user-state" data-skin="square" data-color="blue">\n'},12:function(n,e,a,i,s){var o=null!=e?e:n.nullContext||{},c=n.escapeExpression;return'      \x3c!--button class="btn btn-mini btn-red btn-delete" data-original-title=\''+c(l(t(688)).call(o,"_deleteUser",{name:"L",hash:{},data:s,loc:{start:{line:30,column:78},end:{line:30,column:97}}}))+"' rel=\"tooltip\"\n        data-title='"+c(l(t(688)).call(o,"_deleteUser",{name:"L",hash:{},data:s,loc:{start:{line:31,column:20},end:{line:31,column:39}}}))+'\'><i class="fa fa-trash"></i></button--\x3e\n'},compiler:[8,">= 4.3.0"],main:function(n,e,t,a,l,i,s){var o;return null!=(o=t.each.call(null!=e?e:n.nullContext||{},null!=e?e.data:e,{name:"each",hash:{},fn:n.program(1,l,0,i,s),inverse:n.noop,data:l,loc:{start:{line:1,column:0},end:{line:36,column:9}}}))?o:""},useData:!0,useDepths:!0})},710:function(n,e,t){var a=t(690);n.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(n,e,t,a,l){var i,s=null!=e?e:n.nullContext||{},o=n.hooks.helperMissing,c=n.escapeExpression;return'<div class="abm-base-tmp '+c("function"==typeof(i=null!=(i=t.tmpClass||(null!=e?e.tmpClass:e))?i:o)?i.call(s,{name:"tmpClass",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):i)+' container-fluid mainTask" data-id="'+c("function"==typeof(i=null!=(i=t.id||(null!=e?e.id:e))?i:o)?i.call(s,{name:"id",hash:{},data:l,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):i)+'" data-rel="'+c("function"==typeof(i=null!=(i=t.dataRel||(null!=e?e.dataRel:e))?i:o)?i.call(s,{name:"dataRel",hash:{},data:l,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):i)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+c("function"==typeof(i=null!=(i=t.title||(null!=e?e.title:e))?i:o)?i.call(s,{name:"title",hash:{},data:l,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):i)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},719:function(n,e,t){"use strict";(function(a){var l,i=t(693);void 0===(l=function(){return a.Model.extend({list:function(n,e){(0,i.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},listByCompany:function(n){(0,i.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},get:function(n,e){(0,i.send)("users/".concat(n,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},update:function(n,e,t){(0,i.send)("users/".concat(n,"/"),e,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},EditProfile:function(n,e){(0,i.send)("users/".concat(n.id,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e)},create:function(n,e){(0,i.send)("usercompanies/",JSON.stringify(n),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},e)},partialUpdate:function(n,e,t){(0,i.send)("usercompanies/".concat(n,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},deleteUser:function(n,e){(0,i.send)("users/".concat(n,"/"),null,{type:"DELETE"},e)},deleteUserCompany:function(n,e){(0,i.send)("usercompanies/".concat(n,"/"),null,{type:"DELETE"},e)},UpdateUserPreference:function(n,e){var t={userCompanyId:__currentSession.userId,preferenceCode:n,value:e};(0,i.send)("user/UpdateUserPreference",t,{type:"PUT"})},GetUserPreference:function(n,e){(0,i.send)("usercompanies/preference_by_code/?code=".concat(n),null,{type:"GET"},e)},GetRelatedDashboard:function(n){(0,i.send)("user/GetRelatedDashboard",null,null,n)}})}.apply(e,[]))||(n.exports=l)}).call(this,t(218))},786:function(n,e,t){var a=t(690);n.exports=(a.default||a).template({1:function(n,e,t,a,l){return"      <th>"+n.escapeExpression(n.lambda(e,e))+"</th>\n"},compiler:[8,">= 4.3.0"],main:function(n,e,t,a,l){var i;return'<table class="table table-hover table-nomargin table-bordered">\n  <thead>\n    <tr>\n'+(null!=(i=t.each.call(null!=e?e:n.nullContext||{},null!=e?e.headers:e,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l,loc:{start:{line:4,column:6},end:{line:6,column:15}}}))?i:"")+"    </tr>\n  </thead>\n  <tbody>\n\n  </tbody>\n</table>"},useData:!0})}}]);