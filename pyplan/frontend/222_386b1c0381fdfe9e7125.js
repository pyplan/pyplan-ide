/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[222,28],{1120:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({1:function(e,n,t,a,s){var i=e.lambda,r=e.escapeExpression;return"                <option value='"+r(i(null!=n?n.moduleId:n,n))+"'>"+r(i(null!=n?n.description:n,n))+"</option>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,s,i){var r,l=null!=n?n:e.nullContext||{};return'<div class="form-group">\n    <label for="textfield" class="control-label col-sm-3">'+e.escapeExpression(function(e){return e&&(e.__esModule?e.default:e)}(t(688)).call(l,"_prefModule",{name:"L",hash:{},data:i}))+'</label>\n    <div class="pref-module-selection col-sm-9">\n        <select class="select2-me input-xlarge">\n'+(null!=(r=a.each.call(l,null!=n?n.prefModule:n,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+'        </select>\n    </div>\n</div>\n<div class="pref-content">\n\n</div>\n'},useData:!0})},1121:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({1:function(e,n,t,a,s){var i,r=null!=n?n:e.nullContext||{},l=t.helperMissing,o=e.escapeExpression;return'    <div class="form-group" hidden="hidden">\n        <label for="textfield" class="control-label col-sm-3">'+o("function"==typeof(i=null!=(i=t.description||(null!=n?n.description:n))?i:l)?i.call(r,{name:"description",hash:{},data:s}):i)+" (by "+o("function"==typeof(i=null!=(i=t.type||(null!=n?n.type:n))?i:l)?i.call(r,{name:"type",hash:{},data:s}):i)+')</label>\n        <div class="col-sm-9">\n            <input type="text" value="'+o("function"==typeof(i=null!=(i=t.defaultValue||(null!=n?n.defaultValue:n))?i:l)?i.call(r,{name:"defaultValue",hash:{},data:s}):i)+'" class="form-control" name="value"\n                data-id="'+o("function"==typeof(i=null!=(i=t.preferenceId||(null!=n?n.preferenceId:n))?i:l)?i.call(r,{name:"preferenceId",hash:{},data:s}):i)+'" >\n        </div>\n    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,n,t,a,s){var i;return(null!=(i=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.data:n,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?i:"")+"\n"},useData:!0})},1931:function(e,n,t){"use strict";(function(a,s){var i,r,l=t(18);i=[t(719),t(857),t(710),t(725),t(1120),t(1932),t(1121)],void 0===(r=function(e,n,i,r,o,d,u){return a.View.extend({el:s("#main"),_uId:"",_user:{},_prevSel:{companyId:"",moduleId:""},render:function(){s("#mainLoading").show(),s("div[data-rel='abm-user']").remove();var t=new e,a=new n,u=this;this._uId=s.uuid(),t.GetUser(this.options.userId,function(e){u._user=e,a.ListPrefModules(function(n){var t={id:u._uId,dataRel:"abm-user",tmpClass:"user-pref-edit",title:(0,l.translate)("_editUserPreferences")},a={prefModule:n},c={company:e.userCompanies},p=i(t),f=r(),m=d(c),v=o(a);u.$el.append(p),s("div[data-id='"+u._uId+"']").find("div.abm-content").append(f),s("div[data-id='"+u._uId+"']").find("div.form-content").append(m),s("div[data-id='"+u._uId+"']").find("div.form-content").append(v),(0,l.postRender)(u.$el.find("div[data-id='"+u._uId+"']")),u.firstValues(),u.addHandlers(),s("#mainLoading").hide()})})},firstValues:function(){var e=this;e._prevSel={companyId:s("div[data-id='"+e._uId+"']").find("div.combo-company-selection select").val(),moduleId:s("div[data-id='"+e._uId+"']").find("div.pref-module-selection select").val()},(new n).List(void 0,function(n){if(e._user&&e._user.userCompanies.length>0)for(var t=0;t<e._user.userCompanies.length;t++)if(e._user.userCompanies[t].preferences&&e._user.userCompanies[t].preferences.length>0)for(var a=0;a<e._user.userCompanies[t].preferences.length;a++)for(var s=0;s<n.length;s++){if(n[s].preferenceId==e._user.userCompanies[t].preferences[a].preferenceId){""!=e._user.userCompanies[t].preferences[a].value&&void 0!=e._user.userCompanies[t].preferences[a].value||(e._user.userCompanies[t].preferences[a].value=n[s].defaultValue);break}s+1==n.length&&e._user.userCompanies[t].preferences.push(n[s])}else for(var i=0;i<n.length;i++)e._user.userCompanies[t].preferences[i]={value:n[i].defaultValue,moduleId:n[i].moduleId,preferenceId:n[i].preferenceId};e.changeList(e._prevSel)})},reRender:function(){var e=this;e.saveCurrentItems(function(){var n={companyId:s("div[data-id='"+e._uId+"']").find("div.combo-company-selection select").val(),moduleId:s("div[data-id='"+e._uId+"']").find("div.pref-module-selection select").val()},t=s("div[data-id='"+e._uId+"']").find("div.pref-content").children();s(t).length>0?s(t).fadeOut(100,"linear",function(){e.changeList(n)}):e.changeList(n)})},saveCurrentItems:function(e){var n=s("div[data-id='"+this._uId+"']").find("div.pref-content input");if(n.length>0){for(var t=[{}],a=0;a<n.length;a++)t[a]={preferenceId:s(n[a]).attr("data-id"),value:n[a].value,moduleId:this._prevSel.moduleId};if(t.length>0)for(var i=0;i<this._user.userCompanies.length;i++)if(this._user.userCompanies[i].companyId==this._prevSel.companyId)if(this._user.userCompanies[i].preferences.length>0)for(a=0;a<t.length;a++)for(var r=0;r<this._user.userCompanies[i].preferences.length;r++){if(this._user.userCompanies[i].preferences[r].preferenceId==t[a].preferenceId){this._user.userCompanies[i].preferences[r].value=t[a].value;break}r+1==this._user.userCompanies[i].preferences.length&&this._user.userCompanies[i].preferences.push(t[a])}else this._user.userCompanies[i].preferences=t}e()},changeList:function(e){var t=this;(new n).List(e.moduleId,function(n){for(var a=0;a<t._user.userCompanies.length;a++)if(t._user.userCompanies[a].companyId==e.companyId)for(var i=0;i<n.length;i++)for(var r=0;r<t._user.userCompanies[a].preferences.length;r++)if(n[i].preferenceId==t._user.userCompanies[a].preferences[r].preferenceId){n[i].defaultValue=t._user.userCompanies[a].preferences[r].value;break}var l=u({data:n}),o=s("div[data-id='"+t._uId+"']").find("div.pref-content");s(o).children().remove(),s(o).append(l),s(o).children().fadeIn(100,"linear",function(){}),t._prevSel={companyId:e.companyId,moduleId:e.moduleId}})},save:function(){this._uId;var n=this,a=new e;n.saveCurrentItems(function(){a.Update(n._user,function(){Promise.resolve().then(function(){var e=[t(766)];(function(e){(new e).show()}).apply(null,e)}).catch(t.oe)})})},cancel:function(){Promise.resolve().then(function(){var e=[t(766)];(function(e){(new e).show()}).apply(null,e)}).catch(t.oe)},addHandlers:function(){s("div[data-id='"+this._uId+"']").find("form").on("submit",s.proxy(function(){return this.save(),!1},this)),s("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",s.proxy(function(){return this.cancel(),!1},this)),s("div[data-id='"+this._uId+"']").find("div.pref-module-selection select").on("change",s.proxy(function(){return this.reRender(),!1},this)),s("div[data-id='"+this._uId+"']").find("div.combo-company-selection select").on("change",s.proxy(function(){return this.reRender(),!1},this)),s("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(n,i))||(e.exports=r)}).call(this,t(218),t(1))},1932:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({1:function(e,n,t,a,s){var i,r=e.lambda,l=e.escapeExpression;return"                <option value='"+l(r(null!=n?n.companyId:n,n))+"'>"+l(r(null!=(i=null!=n?n.company:n)?i.name:i,n))+"</option>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,s,i){var r,l=null!=n?n:e.nullContext||{};return'<div class="form-group">\n    <label for="textfield" class="control-label col-sm-3">'+e.escapeExpression(function(e){return e&&(e.__esModule?e.default:e)}(t(688)).call(l,"_company",{name:"L",hash:{},data:i}))+'</label>\n    <div class="combo-company-selection col-sm-9">\n        <select class="select2-me input-xlarge">\n'+(null!=(r=a.each.call(l,null!=n?n.company:n,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?r:"")+"        </select>\n    </div>\n</div>\n"},useData:!0})},710:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,n,t,a,s){var i,r=null!=n?n:e.nullContext||{},l=t.helperMissing,o=e.escapeExpression;return'<div class="abm-base-tmp '+o("function"==typeof(i=null!=(i=t.tmpClass||(null!=n?n.tmpClass:n))?i:l)?i.call(r,{name:"tmpClass",hash:{},data:s}):i)+' container-fluid mainTask" data-id="'+o("function"==typeof(i=null!=(i=t.id||(null!=n?n.id:n))?i:l)?i.call(r,{name:"id",hash:{},data:s}):i)+'" data-rel="'+o("function"==typeof(i=null!=(i=t.dataRel||(null!=n?n.dataRel:n))?i:l)?i.call(r,{name:"dataRel",hash:{},data:s}):i)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+o("function"==typeof(i=null!=(i=t.title||(null!=n?n.title:n))?i:l)?i.call(r,{name:"title",hash:{},data:s}):i)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},719:function(e,n,t){"use strict";(function(a){var s,i=t(693);void 0===(s=function(){return a.Model.extend({list:function(e,n){(0,i.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},listByCompany:function(e){(0,i.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},get:function(e,n){(0,i.send)("users/".concat(e,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},update:function(e,n,t){(0,i.send)("users/".concat(e,"/"),n,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},EditProfile:function(e,n){(0,i.send)("users/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)},create:function(e,n){(0,i.send)("usercompanies/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n)},partialUpdate:function(e,n,t){(0,i.send)("usercompanies/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},deleteUser:function(e,n){(0,i.send)("users/".concat(e,"/"),null,{type:"DELETE"},n)},deleteUserCompany:function(e,n){(0,i.send)("usercompanies/".concat(e,"/"),null,{type:"DELETE"},n)},UpdateUserPreference:function(e,n){var t={userCompanyId:__currentSession.userId,preferenceCode:e,value:n};(0,i.send)("user/UpdateUserPreference",t,{type:"PUT"})},GetUserPreference:function(e,n){(0,i.send)("usercompanies/preference_by_code/?code=".concat(e),null,{type:"GET"},n)},GetRelatedDashboard:function(e){(0,i.send)("user/GetRelatedDashboard",null,null,e)}})}.apply(n,[]))||(e.exports=s)}).call(this,t(218))},725:function(e,n,t){var a=t(690);function s(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(e,n,a,i,r){var l=null!=n?n:e.nullContext||{},o=e.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+o(s(t(688)).call(l,"_save",{name:"L",hash:{},data:r}))+'</button>\n        <button type="button" class="btn btn-cancel">'+o(s(t(688)).call(l,"cancel",{name:"L",hash:{},data:r}))+"</button>\n    </div>\n</form>\n"},useData:!0})},857:function(e,n,t){"use strict";(function(a){var s,i=t(693);void 0===(s=function(){return a.Model.extend({List:function(e,n){(0,i.send)("preference/List",{moduleId:e},null,n)},GetPreference:function(e,n){(0,i.send)("preference/Get/"+e,null,null,n)},Update:function(e,n){(0,i.send)("preference/Update",e,{type:"PUT"},n)},Create:function(e,n){(0,i.send)("preference/Create",e,{type:"POST"},n)},DeletePreference:function(e,n){(0,i.send)("preference/Delete/"+e,null,{type:"DELETE"},n)},ListPrefModules:function(e){(0,i.send)("preferenceModule/List",null,null,e)}})}.apply(n,[]))||(e.exports=s)}).call(this,t(218))}}]);