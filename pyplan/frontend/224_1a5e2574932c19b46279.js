/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[224,24],{1083:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({1:function(e,n,t,a,l){var o=e.lambda,i=e.escapeExpression;return"                <option value='"+i(o(null!=n?n.moduleId:n,n))+"'>"+i(o(null!=n?n.description:n,n))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,a,l,o){var i,c=null!=n?n:e.nullContext||{};return'<div class="form-group">\n    <label for="textfield" class="control-label col-sm-3">'+e.escapeExpression(function(e){return e&&(e.__esModule?e.default:e)}(t(688)).call(c,"_prefModule",{name:"L",hash:{},data:o,loc:{start:{line:2,column:58},end:{line:2,column:77}}}))+'</label>\n    <div class="pref-module-selection col-sm-9">\n        <select class="select2-me input-xlarge">\n'+(null!=(i=a.each.call(c,null!=n?n.prefModule:n,{name:"each",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:5,column:12},end:{line:7,column:21}}}))?i:"")+'        </select>\n    </div>\n</div>\n<div class="pref-content">\n\n</div>\n'},useData:!0})},1084:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({1:function(e,n,t,a,l){var o,i=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,d=e.escapeExpression;return'    <div class="form-group" hidden="hidden">\n        <label for="textfield" class="control-label col-sm-3">'+d("function"==typeof(o=null!=(o=t.description||(null!=n?n.description:n))?o:c)?o.call(i,{name:"description",hash:{},data:l,loc:{start:{line:3,column:62},end:{line:3,column:77}}}):o)+" (by "+d("function"==typeof(o=null!=(o=t.type||(null!=n?n.type:n))?o:c)?o.call(i,{name:"type",hash:{},data:l,loc:{start:{line:3,column:82},end:{line:3,column:90}}}):o)+')</label>\n        <div class="col-sm-9">\n            <input type="text" value="'+d("function"==typeof(o=null!=(o=t.defaultValue||(null!=n?n.defaultValue:n))?o:c)?o.call(i,{name:"defaultValue",hash:{},data:l,loc:{start:{line:5,column:38},end:{line:5,column:54}}}):o)+'" class="form-control" name="value"\n                data-id="'+d("function"==typeof(o=null!=(o=t.preferenceId||(null!=n?n.preferenceId:n))?o:c)?o.call(i,{name:"preferenceId",hash:{},data:l,loc:{start:{line:6,column:25},end:{line:6,column:41}}}):o)+'" >\n        </div>\n    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var o;return(null!=(o=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.data:n,{name:"each",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:0},end:{line:9,column:9}}}))?o:"")+"\n"},useData:!0})},1949:function(e,n,t){"use strict";(function(a,l){var o,i,c=t(18);o=[t(725),t(817),t(709),t(723),t(1083),t(1084)],void 0===(i=function(e,n,o,i,d,r){return a.View.extend({el:l("#main"),_uId:"",_company:{},_prevSel:{moduleId:""},render:function(){l("#mainLoading").show(),l("div[data-rel='abm-company']").remove();var t=new e,a=new n,r=this;this._uId=l.uuid(),t.GetCompany(this.options.companyId,function(e){r._company=e,a.ListPrefModules(function(e){var n={id:r._uId,dataRel:"abm-company",tmpClass:"company-pref-edit",title:(0,c.translate)("_editCompanyPreferences")},t={prefModule:e},a=o(n),s=i(),u=d(t);r.$el.append(a),l("div[data-id='"+r._uId+"']").find("div.abm-content").append(s),l("div[data-id='"+r._uId+"']").find("div.form-content").append(u),(0,c.postRender)(r.$el.find("div[data-id='"+r._uId+"']")),r.firstValues(),r.addHandlers(),l("#mainLoading").hide()})})},firstValues:function(){var e=this;e._prevSel={moduleId:l("div[data-id='"+e._uId+"']").find("div.pref-module-selection select").val()},(new n).List(void 0,function(n){if(e._company.preferences&&e._company.preferences.length>0)for(var t=0;t<e._company.preferences.length;t++)for(var a=0;a<n.length;a++){if(n[a].preferenceId==e._company.preferences[t].preferenceId){""!=e._company.preferences[t].value&&void 0!=e._company.preferences[t].value||(e._company.preferences[t].value=n[a].defaultValue);break}a+1==n.length&&e._company.preferences.push(n[a])}else for(t=0;t<n.length;t++)e._company.preferences[t]={value:n[t].defaultValue,moduleId:n[t].moduleId,preferenceId:n[t].preferenceId};e.changeList(e._prevSel)})},reRender:function(){var e=this;e.saveCurrentItems(function(){var n={moduleId:l("div[data-id='"+e._uId+"']").find("div.pref-module-selection select").val()},t=l("div[data-id='"+e._uId+"']").find("div.pref-content").children();l(t).length>0?l(t).fadeOut(100,"linear",function(){e.changeList(n)}):e.changeList(n)})},saveCurrentItems:function(e){var n=l("div[data-id='"+this._uId+"']").find("div.pref-content input");if(n.length>0){for(var t=[{}],a=0;a<n.length;a++)t[a]={preferenceId:l(n[a]).attr("data-id"),value:n[a].value,moduleId:this._prevSel.moduleId};if(t.length>0)if(0==this._company.preferences.length)this._company.preferences=t;else for(a=0;a<t.length;a++)for(var o=0;o<this._company.preferences.length;o++){if(this._company.preferences[o].preferenceId==t[a].preferenceId){this._company.preferences[o].value=t[a].value;break}o+1==this._company.preferences.length&&this._company.preferences.push(t[a])}}e()},changeList:function(e){var t=this;(new n).List(e.moduleId,function(n){for(var a=0;a<n.length;a++)for(var o=0;o<t._company.preferences.length;o++)if(n[a].preferenceId==t._company.preferences[o].preferenceId){n[a].defaultValue=t._company.preferences[o].value;break}var i=r({data:n}),c=l("div[data-id='"+t._uId+"']").find("div.pref-content");l(c).children().remove(),l(c).append(i),l(c).children().fadeIn(100,"linear",function(){}),t._prevSel.moduleId=e.moduleId})},save:function(){this._uId;var n=this,a=new e;n.saveCurrentItems(function(){a.Update(n._company,function(){Promise.resolve().then(function(){var e=[t(745)];(function(e){(new e).show()}).apply(null,e)}).catch(t.oe)})})},cancel:function(){Promise.resolve().then(function(){var e=[t(745)];(function(e){(new e).show()}).apply(null,e)}).catch(t.oe)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("form").on("submit",l.proxy(function(){return this.save(),!1},this)),l("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",l.proxy(function(){return this.cancel(),!1},this)),l("div[data-id='"+this._uId+"']").find("div.pref-module-selection select").on("change",l.proxy(function(){return this.reRender(),!1},this)),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(n,o))||(e.exports=i)}).call(this,t(218),t(1))},709:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){var o,i=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,d=e.escapeExpression;return'<div class="abm-base-tmp '+d("function"==typeof(o=null!=(o=t.tmpClass||(null!=n?n.tmpClass:n))?o:c)?o.call(i,{name:"tmpClass",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):o)+' container-fluid mainTask" data-id="'+d("function"==typeof(o=null!=(o=t.id||(null!=n?n.id:n))?o:c)?o.call(i,{name:"id",hash:{},data:l,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):o)+'" data-rel="'+d("function"==typeof(o=null!=(o=t.dataRel||(null!=n?n.dataRel:n))?o:c)?o.call(i,{name:"dataRel",hash:{},data:l,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):o)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+d("function"==typeof(o=null!=(o=t.title||(null!=n?n.title:n))?o:c)?o.call(i,{name:"title",hash:{},data:l,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):o)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},723:function(e,n,t){var a=t(690);function l(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,a,o,i){var c=null!=n?n:e.nullContext||{},d=e.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+d(l(t(688)).call(c,"_save",{name:"L",hash:{},data:i,loc:{start:{line:6,column:63},end:{line:6,column:76}}}))+'</button>\n        <button type="button" class="btn btn-cancel">'+d(l(t(688)).call(c,"cancel",{name:"L",hash:{},data:i,loc:{start:{line:7,column:53},end:{line:7,column:67}}}))+"</button>\n    </div>\n</form>\n"},useData:!0})},725:function(e,n,t){"use strict";(function(a){var l,o=t(693);void 0===(l=function(){return a.Model.extend({list:function(e){(0,o.send)("companies/?limit=1000&offset=0",null,null,e)},getCompany:function(e,n){(0,o.send)("companies/".concat(e,"/"),null,null,n)},update:function(e,n,t){(0,o.send)("companies/".concat(e,"/"),JSON.stringify(n),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},t)},partialUpdate:function(e,n,t){(0,o.send)("companies/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},create:function(e,n){(0,o.send)("companies/",e,{type:"POST"},n)},delete:function(e,n){(0,o.send)("companies/".concat(e,"/"),null,{type:"DELETE"},n)},UpdateCompanyPreference:function(e,n,t){var a={companyId:__currentSession.companyId,preferenceCode:e,value:n};(0,o.send)("company/UpdateCompanyPreference",a,{type:"PUT"},t)},GetCompanyPreference:function(e,n){(0,o.send)("companies/preference_by_code/?code=".concat(e),null,{type:"GET"},n)},sendTestEmail:function(e,n){(0,o.send)("company/SendTestEmail",e,{type:"PUT"},n)},getLicenceKey:function(e,n){(0,o.send)("company/GetLK/"+e,null,null,n)},setLicenceKey:function(e,n){(0,o.send)("company/SetLK/",e,{type:"POST"},n)}})}.apply(n,[]))||(e.exports=l)}).call(this,t(218))},817:function(e,n,t){"use strict";(function(a){var l,o=t(693);void 0===(l=function(){return a.Model.extend({List:function(e,n){(0,o.send)("preference/List",{moduleId:e},null,n)},GetPreference:function(e,n){(0,o.send)("preference/Get/"+e,null,null,n)},Update:function(e,n){(0,o.send)("preference/Update",e,{type:"PUT"},n)},Create:function(e,n){(0,o.send)("preference/Create",e,{type:"POST"},n)},DeletePreference:function(e,n){(0,o.send)("preference/Delete/"+e,null,{type:"DELETE"},n)},ListPrefModules:function(e){(0,o.send)("preferenceModule/List",null,null,e)}})}.apply(n,[]))||(e.exports=l)}).call(this,t(218))}}]);