/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[227,285],{1932:function(n,t,a){"use strict";(function(e,l){var i,o,s=a(18);i=[a(763),a(710),a(792),a(1933)],void 0===(o=function(n,t,i,o){return e.View.extend({el:l("#main"),_uId:"",render:function(){l("#mainLoading").show(),l("div[data-rel='abm-group']").remove();var a=new n,e=this;this._uId=l.uuid(),a.list(null,function(n){var a={id:e._uId,dataRel:"abm-group",tmpClass:"group-manager",title:(0,s.translate)("_groupManager")},d={headers:[(0,s.translate)("_company"),(0,s.translate)("_name"),(0,s.translate)("_options")]};__currentSession.userIsSuperUser||d.headers.shift();var r={data:n,isSuper:__currentSession.userIsSuperUser},u=t(a),c=i(d),p=o(r);e.$el.append(u),l("div[data-id='"+e._uId+"']").find("div.abm-content").append(c),l("div[data-id='"+e._uId+"']").find("tbody").append(p),e.addTableHandlers(l("div[data-id='"+e._uId+"']").find("table")),l("div[data-id='"+e._uId+"']").find("table").cubeTable(null,null,"groupManagerSuper");var f=l("div[data-id='"+e._uId+"']").find("div.data-table-options");l('<a href="#" class="btn btn-addgroup" rel="tooltip" data-title="'+(0,s.translate)("_newGroup")+'"><i class="fa fa-plus"></i></a>').appendTo(f),e.addHandlers(),l("#mainLoading").hide()})},edit:function(n){var t=l(n.currentTarget).closest("tr").attr("data-id");Promise.resolve().then(function(){var n=[a(786)];(function(n){(new n).showEdit(t)}).apply(null,n)}).catch(a.oe)},deleteGroup:function(t){var e=l(t.currentTarget).closest("tr").attr("data-id");a.e(5).then(function(){var t=[a(684)];(function(t){(new t).show({title:(0,s.translate)("_deleteGroup"),text:(0,s.translate)("_sure_delete_group"),buttons:[{title:(0,s.translate)("yes"),css:"primary",code:"yes"},{title:(0,s.translate)("no"),code:"no"}],callback:function(t){if("yes"==t){var i=new n;l("#mainLoading").show(),i.delete(e,function(){l("#mainLoading").hide(),Promise.resolve().then(function(){var n=[a(786)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)})}}})}).apply(null,t)}).catch(a.oe)},addGroup:function(){Promise.resolve().then(function(){var n=[a(786)];(function(n){(new n).addGroup()}).apply(null,n)}).catch(a.oe)},close:function(){var n=l("#currentTask").attr("data-rel");Promise.resolve().then(function(){var t=[a(683)];(function(t){(new t).removeTask(n)}).apply(null,t)}).catch(a.oe)},addTableHandlers:function(n){l(n).find("button.btn-edit").on("click",this.edit),l(n).find("button.btn-delete").on("click",this.deleteGroup)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-addgroup").on("click",this.addGroup),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.close)}})}.apply(t,i))||(n.exports=o)}).call(this,a(218),a(1))},1933:function(n,t,a){var e=a(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(e.default||e).template({1:function(n,t,e,i,o,s,d){var r,u=n.lambda,c=n.escapeExpression,p=null!=t?t:n.nullContext||{};return'<tr data-id="'+c(u(null!=t?t.id:t,t))+'">\n'+(null!=(r=e.if.call(p,null!=d[1]?d[1].isSuper:d[1],{name:"if",hash:{},fn:n.program(2,o,0,s,d),inverse:n.noop,data:o}))?r:"")+'        <td class="groupName">'+c(u(null!=t?t.name:t,t))+"</td>\n        <td> "+(null!=(r=l(a(695)).call(p,"change_group",{name:"haveAccess",hash:{},fn:n.program(4,o,0,s,d),inverse:n.noop,data:o}))?r:"")+(null!=(r=l(a(695)).call(p,"delete_group",{name:"haveAccess",hash:{},fn:n.program(6,o,0,s,d),inverse:n.noop,data:o}))?r:"")+"        </td>\n</tr>\n"},2:function(n,t,a,e,l){var i;return'        <td class="companyName">'+n.escapeExpression(n.lambda(null!=(i=null!=t?t.company:t)?i.name:i,t))+"</td>\n"},4:function(n,t,e,i,o){return'\n                <button class="btn btn-mini btn-green btn-edit" rel="tooltip" data-title=\''+n.escapeExpression(l(a(688)).call(null!=t?t:n.nullContext||{},"_editGroup",{name:"L",hash:{},data:o}))+'\'><i\n                                class="fa fa-pencil-square-o"></i></button>\n'},6:function(n,t,e,i,o){return'                \x3c!--button class="btn btn-mini btn-red btn-delete" rel="tooltip" data-title=\''+n.escapeExpression(l(a(688)).call(null!=t?t:n.nullContext||{},"_deleteGroup",{name:"L",hash:{},data:o}))+'\'><i\n                                class="fa fa-trash"></i></button--\x3e\n'},compiler:[7,">= 4.0.0"],main:function(n,t,a,e,l,i,o){var s;return null!=(s=a.each.call(null!=t?t:n.nullContext||{},null!=t?t.data:t,{name:"each",hash:{},fn:n.program(1,l,0,i,o),inverse:n.noop,data:l}))?s:""},useData:!0,useDepths:!0})},710:function(n,t,a){var e=a(690);n.exports=(e.default||e).template({compiler:[7,">= 4.0.0"],main:function(n,t,a,e,l){var i,o=null!=t?t:n.nullContext||{},s=a.helperMissing,d=n.escapeExpression;return'<div class="abm-base-tmp '+d("function"==typeof(i=null!=(i=a.tmpClass||(null!=t?t.tmpClass:t))?i:s)?i.call(o,{name:"tmpClass",hash:{},data:l}):i)+' container-fluid mainTask" data-id="'+d("function"==typeof(i=null!=(i=a.id||(null!=t?t.id:t))?i:s)?i.call(o,{name:"id",hash:{},data:l}):i)+'" data-rel="'+d("function"==typeof(i=null!=(i=a.dataRel||(null!=t?t.dataRel:t))?i:s)?i.call(o,{name:"dataRel",hash:{},data:l}):i)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+d("function"==typeof(i=null!=(i=a.title||(null!=t?t.title:t))?i:s)?i.call(o,{name:"title",hash:{},data:l}):i)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},763:function(n,t,a){"use strict";(function(e){var l,i=a(693);void 0===(l=function(){return e.Model.extend({list:function(n,t){var a=null!=n?"?company_id=".concat(n):"";(0,i.send)("groups/".concat(a),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},t)},get:function(n,t){(0,i.send)("groups/".concat(n,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},t)},update:function(n,t,a){(0,i.send)("groups/".concat(n,"/"),JSON.stringify(t),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},a)},create:function(n,t){(0,i.send)("groups/",JSON.stringify(n),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},t)},delete:function(n,t){(0,i.send)("groups/".concat(n,"/"),null,{type:"DELETE"},t)},listPermissions:function(n){(0,i.send)("permissions/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},updateGroupPermissions:function(n,t){(0,i.send)("groups/update_groups_permissions/",JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)}})}.apply(t,[]))||(n.exports=l)}).call(this,a(218))},792:function(n,t,a){var e=a(690);n.exports=(e.default||e).template({1:function(n,t,a,e,l){return"      <th>"+n.escapeExpression(n.lambda(t,t))+"</th>\n"},compiler:[7,">= 4.0.0"],main:function(n,t,a,e,l){var i;return'<table class="table table-hover table-nomargin table-bordered">\n  <thead>\n    <tr>\n'+(null!=(i=a.each.call(null!=t?t:n.nullContext||{},null!=t?t.headers:t,{name:"each",hash:{},fn:n.program(1,l,0),inverse:n.noop,data:l}))?i:"")+"    </tr>\n  </thead>\n  <tbody>\n\n  </tbody>\n</table>"},useData:!0})}}]);