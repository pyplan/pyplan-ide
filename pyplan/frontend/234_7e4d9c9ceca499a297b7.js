/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[234],{1969:function(n,l,t){"use strict";(function(e,a){var i,o;t(18);i=[t(219),t(1970)],void 0===(o=function(n,l){return e.View.extend({el:a("#main"),render:function(){var n=this,l={wizard:this.options.bodyParams.wizard,action:this.options.bodyParams.action,params:{nodeId:this.options.bodyParams.params.nodeId}};Promise.resolve().then(function(){var e=[t(219)];(function(t){(new t).callWizard(l,function(l){l&&n.loadView(l)},function(){})}).apply(null,e)}).catch(t.oe)},loadView:function(t){var e=this;this.$el.append(l({title:this.options.title,fields:t,max_height:"".concat(a(window).height()-250,"px")}));var i=a("#wizardCalculatedField"),o=i.find(".modal-footer .btnSave"),d=i.find(".btnAddField"),s=a("#wizardCalculatedField .listFields");i.on("hidden.bs.modal",function(){i.off("hidden.bs.modal"),i.remove()}).modal("show"),o.on("click",function(){if(!i.find("form").valid())return!1;e.options.confirm.params.name=i.find(".txtFormulaName").val(),e.options.confirm.params.formula=i.find(".txtFormula").val(),(new n).callWizard(e.options.confirm,function(){i.modal("hide"),e.options.callback()})}),d.on("click",function(){e.addFieldInFormula(s),event.preventDefault()}),s.find("option").on("dblclick",function(){e.addFieldInFormula(s),event.preventDefault()})},addFieldInFormula:function(n){var l=n.val(),t=a(".txtFormula").val(),e=a(".txtFormula").prop("selectionStart"),i=t.substring(0,e)+"#"+l+"#"+t.substring(e,t.length);a(".txtFormula").val(i),a(".txtFormula").focus();var o=this.indexOfEnd(i,"#"+l+"#");this.setCaretPosition(a(".txtFormula").get(0),o)},setCaretPosition:function(n,l){if(n.setSelectionRange)n.focus(),n.setSelectionRange(l,l);else if(n.createTextRange){var t=n.createTextRange();t.collapse(!0),t.moveEnd("character",l),t.moveStart("character",l),t.select()}},indexOfEnd:function(n,l){var t=n.indexOf(l);return-1==t?-1:t+l.length}})}.apply(l,i))||(n.exports=o)}).call(this,t(218),t(1))},1970:function(n,l,t){var e=t(690);n.exports=(e.default||e).template({1:function(n,l,t,e,a){var i,o=null!=l?l:n.nullContext||{},d=n.hooks.helperMissing,s=n.escapeExpression;return'                <option value="'+s("function"==typeof(i=null!=(i=t.field||(null!=l?l.field:l))?i:d)?i.call(o,{name:"field",hash:{},data:a,loc:{start:{line:31,column:31},end:{line:31,column:40}}}):i)+'">'+s("function"==typeof(i=null!=(i=t.field||(null!=l?l.field:l))?i:d)?i.call(o,{name:"field",hash:{},data:a,loc:{start:{line:31,column:42},end:{line:31,column:51}}}):i)+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,a){var i,o,d=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression;return'<div id="wizardCalculatedField" class="modal fade nodeWizardDialog" tabindex="-1" role="dialog" aria-labelledby="Wizard"\n  aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n        <h4>'+r("function"==typeof(o=null!=(o=t.title||(null!=l?l.title:l))?o:s)?o.call(d,{name:"title",hash:{},data:a,loc:{start:{line:7,column:12},end:{line:7,column:21}}}):o)+'</h4>\n      </div>\n      <div class="modal-body form-horizontal" style="max-height:'+r("function"==typeof(o=null!=(o=t.max_height||(null!=l?l.max_height:l))?o:s)?o.call(d,{name:"max_height",hash:{},data:a,loc:{start:{line:9,column:64},end:{line:9,column:78}}}):o)+'">\n        <form action="#" class="form-validate">\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">Name</label>\n            <div class="col-sm-7">\n              <input type="text" placeholder="Your field name..." class="form-control txtFormulaName"\n                data-rule-required="true" aria-required="true" aria-invalid="true" aria-describedby="field-error">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">Formula</label>\n            <div class="col-sm-10">\n              <input type="text" placeholder="" class="form-control txtFormula">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-12" style="text-align: left;">Fields</label>\n            <div class="col-sm-12">\n              <select class="form-control listFields" size="6">\n'+(null!=(i=t.each.call(d,null!=l?l.fields:l,{name:"each",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:30,column:16},end:{line:32,column:25}}}))?i:"")+'              </select>\n            </div>\n          </div>\n\n          <div class="row" style="text-align: right;">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btnAddField">Add field</button>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\n        <button type="button" class="btn btn-primary btnSave">Ok</button>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0})}}]);