/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{1972:function(n,t,l){"use strict";(function(a,e){var i,o;l(18);i=[l(219),l(1973)],void 0===(o=function(n,t){return a.View.extend({el:e("#main"),render:function(){var n=this,t={wizard:this.options.bodyParams.wizard,action:this.options.bodyParams.action,params:{nodeId:this.options.bodyParams.params.nodeId}};Promise.resolve().then(function(){var a=[l(219)];(function(l){(new l).callWizard(t,function(t){t&&n.loadView(t)},function(){})}).apply(null,a)}).catch(l.oe)},loadView:function(l){var a=this;this.$el.append(t({title:this.options.title,fields:l,max_height:"".concat(e(window).height()-250,"px")}));var i=e("#wizardCalculatedField"),o=i.find(".modal-footer .btnSave"),d=i.find(".btnAddField"),s=e("#wizardCalculatedField .listFields");i.on("hidden.bs.modal",function(){i.off("hidden.bs.modal"),i.remove()}).modal("show"),o.on("click",function(){if(!i.find("form").valid())return!1;a.options.confirm.params.name=i.find(".txtFormulaName").val(),a.options.confirm.params.formula=i.find(".txtFormula").val(),(new n).callWizard(a.options.confirm,function(){i.modal("hide"),a.options.callback()})}),d.on("click",function(){a.addFieldInFormula(s),event.preventDefault()}),s.find("option").on("dblclick",function(){a.addFieldInFormula(s),event.preventDefault()})},addFieldInFormula:function(n){var t=n.val(),l=e(".txtFormula").val(),a=e(".txtFormula").prop("selectionStart"),i=l.substring(0,a)+"#"+t+"#"+l.substring(a,l.length);e(".txtFormula").val(i),e(".txtFormula").focus();var o=this.indexOfEnd(i,"#"+t+"#");this.setCaretPosition(e(".txtFormula").get(0),o)},setCaretPosition:function(n,t){if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,t);else if(n.createTextRange){var l=n.createTextRange();l.collapse(!0),l.moveEnd("character",t),l.moveStart("character",t),l.select()}},indexOfEnd:function(n,t){var l=n.indexOf(t);return-1==l?-1:l+t.length}})}.apply(t,i))||(n.exports=o)}).call(this,l(218),l(1))},1973:function(n,t,l){var a=l(690);n.exports=(a.default||a).template({1:function(n,t,l,a,e){var i,o=null!=t?t:n.nullContext||{},d=l.helperMissing,s=n.escapeExpression;return'                <option value="'+s("function"==typeof(i=null!=(i=l.field||(null!=t?t.field:t))?i:d)?i.call(o,{name:"field",hash:{},data:e}):i)+'">'+s("function"==typeof(i=null!=(i=l.field||(null!=t?t.field:t))?i:d)?i.call(o,{name:"field",hash:{},data:e}):i)+"</option>\n"},compiler:[7,">= 4.0.0"],main:function(n,t,l,a,e){var i,o,d=null!=t?t:n.nullContext||{},s=l.helperMissing,r=n.escapeExpression;return'<div id="wizardCalculatedField" class="modal fade nodeWizardDialog" tabindex="-1" role="dialog" aria-labelledby="Wizard"\n  aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n        <h4>'+r("function"==typeof(o=null!=(o=l.title||(null!=t?t.title:t))?o:s)?o.call(d,{name:"title",hash:{},data:e}):o)+'</h4>\n      </div>\n      <div class="modal-body form-horizontal" style="max-height:'+r("function"==typeof(o=null!=(o=l.max_height||(null!=t?t.max_height:t))?o:s)?o.call(d,{name:"max_height",hash:{},data:e}):o)+'">\n        <form action="#" class="form-validate">\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">Name</label>\n            <div class="col-sm-7">\n              <input type="text" placeholder="Your field name..." class="form-control txtFormulaName"\n                data-rule-required="true" aria-required="true" aria-invalid="true" aria-describedby="field-error">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">Formula</label>\n            <div class="col-sm-10">\n              <input type="text" placeholder="" class="form-control txtFormula">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-12" style="text-align: left;">Fields</label>\n            <div class="col-sm-12">\n              <select class="form-control listFields" size="6">\n'+(null!=(i=l.each.call(d,null!=t?t.fields:t,{name:"each",hash:{},fn:n.program(1,e,0),inverse:n.noop,data:e}))?i:"")+'              </select>\n            </div>\n          </div>\n\n          <div class="row" style="text-align: right;">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btnAddField">Add field</button>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\n        <button type="button" class="btn btn-primary btnSave">Ok</button>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0})}}]);