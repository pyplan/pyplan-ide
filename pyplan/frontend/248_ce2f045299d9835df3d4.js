/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[248,23,27],{1996:function(e,t,n){"use strict";(function(i,a,s,o){var l,r,d=n(18);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l=[n(684),n(1101),n(717),n(714),n(725),n(1997)],void 0===(r=function(e,t,l,r,u,f){return i.View.extend({el:a("#main"),myFileManager:new t,userManagerModel:new r,companyManagerModel:new u,currentPath:"",selectedFiles:[],selectedItem:[],currentNodeId:null,disableDragAndDrop:!1,myWorkspaceId:"",showHiddenFiles:!1,initialize:function(){},render:function(){var t=new e,i=f({showHiddenFiles:this.showHiddenFiles,notDesktop:!1});this.$el.append(i);var s=this;s.optimizableTemplates=[],t.hideAllTasks(),t.selectTask("file-manager2");var o=a("#tree-container"),r=a("#file-list"),d=a("#file-manager-wrapper .box-content"),c=a("#right-column");function p(){var e=a(window).height();e-=95,o.height(e-a(".page-header").height()),r.height(e-(a(".page-header").height()+120)),d.height(e-a(".page-header").height()),c.height(e+20),o.perfectScrollbar("update"),r.perfectScrollbar("update")}o.resizable({minWidth:100,maxWidth:450,handles:"e",resize:function(e,t){var n=a("#file-manager-wrapper");a("#right-column").css({width:n.width()-(t.size.width+20)})}}),o.perfectScrollbar(),r.perfectScrollbar(),a(window).resize(p),p(),this.getThis().on("removeView",function(){s.onRemoveView()}),this.getThis().on("beforeRemoveView",function(e,t){s.onBeforeRemoveView(e,t)}),this.disableAllActionsButtons();var u=new l;a("#tree").jstree({plugins:["wholerow","types"],types:{default:{icon:"fa fa-folder"},folder:{icon:"fa fa-folder"},shared:{icon:"fa fa-users"},recent:{icon:"fa fa-clock"},favs:{icon:"fa fa-star"},trash:{icon:"fa fa-trash"},file:{icon:"fa fa-file"},myfolder:{icon:"fa fa-user"},public:{icon:"fa fa-globe"},zip:{icon:"fa-file-archive-o"},modelsPath:{icon:"fa fa-cubes"},model:{icon:"fa fa-cube"}},core:{check_callback:!0,themes:{name:"proton",responsive:!0},data:function(e,t){"#"===e.id?u.getMainFolders(function(e){for(var n,i=0;i<e.length;i++)n=e[i].data.fullPath,e[i].id="anchor_".concat(n),0===i&&(s.currentNodeId=e[i].id);null!==e&&(e=s.optimizeStructureForTree(e,"tree"),t.call(this,e),s.openRootNodes(e))}):u.getFiles(e.data.fullPath,function(e){if(null!==e){var n=s.optimizeStructureForTree(e,"tree");t.call(this,n)}})}},sort:function(e,t){var n=this.get_node(e),i=this.get_node(t);return["public","folder"].includes(n.type)&&"#"!==n.parent&&"public"===n.text.toLowerCase()?-1:["public","folder"].includes(i.type)&&"#"!==i.parent&&"public"===i.text.toLowerCase()?1:n.icon==i.icon?n.text>i.text?1:-1:n.icon>i.icon?1:-1}}).on("changed.jstree",function(e,t){if(t.node){var n=t.node.data.fullPath;s.updateBreadcrumb(n),s.normalizeSelection(),u.getFiles(n,function(e){null!==e&&(e=s.optimizeStructureForTree(e,"list"),s.getFolders(e))}),s.disableAllActionsButtons()}}).on("create_node.jstree",function(e,t){}),this.createUploader(),n.e(294).then(function(){var e=[n(2099)];(function(e){e.initialize()}).apply(null,e)}).catch(n.oe),this.addHandlers(),this.getViewModePreference()},addHandlers:function(){var e=this,t=this,n=this.getThis();n.find("#btnNewFolder").on("click",function(){return t.newFolder(t),!1}),n.find(".rename").on("click",function(){return t.rename(t),!1}),n.find(".download").on("click",function(){return t.download(t),!1}),n.find(".delete-file").on("click",function(){return t.deleteFile(t),!1}),n.find(".unzip").on("click",function(){return t.unzip(t),!1}),n.find(".zip").on("click",function(){return t.zip(t),!1}),n.find(".move").on("click",function(){return t.moveTo(t),!1}),n.find(".copyFilesTo").on("click",function(){return t.copyFiles(t),!1}),a(".duplicate").on("click",function(){return t.duplicateFiles(t),!1}),n.find(".copyIntoMyWorkspace").on("click",function(){return t.copyIntoMyWorkspace(t),!1}),n.find(".btn.permissions").on("click",function(){return t.setPermissions(t),!1}),n.find(".btn.btnSetDefaultCompanyModel").on("click",function(){return t.setDefaultcompanyModel(t),!1}),n.find(".btn.toggleHiddenFiles").on("click",function(t){var n=t.currentTarget,i="false"===n.getAttribute("data-value");return e.showHiddenFiles=i,e.refreshFileManager(e.currentPath),a("#tree").jstree("refresh_node",e.myWorkspaceId),n.setAttribute("data-value",i),n.style.color=i?"green":"",!1}),n.find(".header-name").on("click",function(){var e=a(this).attr("data-rel");return t.orderList(t,e),"true"===e?a(this).attr("data-rel","false"):a(this).attr("data-rel","true"),!1})},getViewModePreference:function(){this.userManagerModel.GetUserPreference("fileManagerViewMode",function(e){a(".btn."+e+"-view").addClass("active"),"grid"===e&&(a("#cbp-vm").removeClass("cbp-vm-view-list"),a("#cbp-vm").addClass("cbp-vm-view-"+e))})},setPermissions:function(){var e=this,t=this.selectedFiles[0];t&&(t=t.substring(t.lastIndexOf("/")+1)),this.myFileManager.showPermissionsModal(t,function(t,n){e.refreshFileManager(e.currentPath)})},setDefaultcompanyModel:function(){var e=this;n.e(5).then(function(){var t=[n(683)];(function(t){(new t).show({title:"Set Default Company Model",text:(0,d.translate)("sure_request_set_as_default_company_model"),buttons:[{title:"Yes",css:"primary",code:"yes"},{title:"No",code:"no"}],callback:function(t){if("yes"==t){var n=e.selectedFiles[0];e.companyManagerModel.UpdateCompanyPreference("autoload_model",{value:n},function(){(0,d.showMessage)((0,d.translate)("model_successfully_set_as_default"),"info","info")})}}})}).apply(null,t)}).catch(n.oe)},refreshFileManager:function(e){var t=this,n=new l,i=e;"anchor_"===e.substring(0,7)&&(i=e.substring(7,e.length)),this.updateBreadcrumb(e),n.getFiles(i,function(e){null!==e&&(e=t.optimizeStructureForTree(e,"list"),t.getFolders(e),a("#tree").jstree("refresh_node",t.currentNodeId))})},goToPath:function(){var e=this,t=a(event.currentTarget).attr("data-rel"),n=new l;this.updateBreadcrumb(t),e.currentNodeId=t.substr(0,t.length-1),a("#tree").jstree("deselect_all"),a("#tree").jstree("open_node",e.currentNodeId),a("#tree").jstree("select_node",e.currentNodeId),n.getFiles(t,function(t){null!==t&&(t=e.optimizeStructureForTree(t,"list"),e.getFolders(t))})},openModel:function(e){var t=this,n=a(e.currentTarget).attr("data-rel"),i=a(e.currentTarget).attr("data-type");if("folder"===i){var s=new l;this.updateBreadcrumb(n),a("#tree").jstree("deselect_all"),a("#tree").jstree("open_node",t.currentNodeId),a("#tree").jstree("select_node",t.currentNodeId),s.getFiles(n,function(e){null!==e&&(e=t.optimizeStructureForTree(e,"list"),t.getFolders(e))})}else"model"===i?(0,d.checkBeforeCloseModel)(function(){t.tryOpenModel(n)}):"file"===i&&(n.toLowerCase().endsWith(".xlsx")||n.toLowerCase().endsWith(".xlsm")||n.toLowerCase().endsWith(".xls")||n.toLowerCase().endsWith(".xlsb"))&&this.optimzeTemplates([n])},deleteFile:function(e){var t=this;t.myFileManager.showConfirmationModal(t.selectedFiles,function(){var e,n,i;a(t.selectedItem).each(function(){e=a(this).attr("data-type"),n=a(this).attr("data-rel"),"folder"===e&&(i=a("#tree").jstree("get_parent",n),a("#tree").jstree("select_node",i[0]),a("#tree").jstree("delete_node",n)),a(this).remove()})})},download:function(e){var t=this.selectedFiles[0].substring(this.selectedFiles[0].lastIndexOf("/")+1),n=this.selectedFiles.map(function(e){return"sources=".concat(e)});n.push("auth_token=".concat(__currentToken)),n.push("session_key=".concat(__currentSession.session_key));var i="".concat(__apiURL,"/fileManager/download/?").concat(n.join("&")),a=document.createElement("a");document.body.appendChild(a),a.style="display: none",a.href=i,a.download=t,a.click(),window.URL.revokeObjectURL(i),(0,d.showMessage)(this.selectedFiles.join("\n"),(0,d.translate)("starting_download"),"info")},rename:function(e){var t=this,n=t.selectedFiles[0],i=n.split("/");i="/"===n.slice(-1)?i[i.length-2]:i[i.length-1],this.myFileManager.showRenameModal(n,i,function(e,n){t.refreshFileManager(t.currentPath)})},unzip:function(e){var t=this,n=t.selectedFiles[0],i=n.split("/");i=i[i.length-1],this.myFileManager.showUnzipModal(n,t.currentPath,function(e,n){t.refreshFileManager(t.currentPath)})},moveTo:function(e){var t=this;a(".moveAndCopyTo").removeClass("open"),this.normalizeSelection(),this.myFileManager.showMoveToModal(this.selectedFiles,!0,function(e){t.refreshFileManager(t.currentPath),a("#tree").jstree("refresh_node",e)})},copyFiles:function(e){var t=this;a(".moveAndCopyTo").removeClass("open"),this.normalizeSelection(),this.myFileManager.showMoveToModal(this.selectedFiles,!1,function(e){t.refreshFileManager(t.currentPath),t.refreshFileManager(t.myWorkspaceId),a("#tree").jstree("refresh_node",e)})},copyIntoMyWorkspace:function(e){var t=this;this.normalizeSelection();var n=t.selectedFiles[0];this.myFileManager.showCopyToMyWorkspaceModal(n,function(e,n){t.refreshFileManager(t.currentPath),a("#tree").jstree("refresh_node",t.myWorkspaceId)})},duplicateFiles:function(e){var t=this;a(".moveAndCopyTo").removeClass("open"),this.normalizeSelection(),this.myFileManager.showDuplicateModal(this.selectedFiles,function(e){t.refreshFileManager(t.currentNodeId),a("#tree").jstree("refresh_node",e),t.selectFirstItem()})},zip:function(e){var t=this;this.normalizeSelection();var n=JSON.stringify(t.selectedFiles);this.myFileManager.showZipModal(n,function(e,n){t.refreshFileManager(t.currentPath)})},getFiles:function(e,t){(new l).getFiles(e,function(e){t.call(this,e)})},getFolders:function(e){var t,n,i,l,r=this,d=a("#file-list");d.html("");for(var c=0;c<e.length;c++){if(l="",i="0001-01-01T00:00:00"!==(i=e[c].data.lastUpdateTime)?s(i.toString()).format("YYYY-MM-DD HH:mm:ss"):" ",e[c].data.fileSize){var p=e[c].data.fileSize;l=p<1024?e[c].data.fileSize+" b":p>1048576?parseFloat(e[c].data.fileSize/1024/1024).toFixed(2)+" Mb":parseFloat(e[c].data.fileSize/1024).toFixed(2)+" Kb"}var u=a("#item_template");if(u){t={name:e[c].name,type:e[c].type,size:l,updateDate:i,hasDenied:e[c].data.hasDenied},n=o.template(u.html(),{item:t});var f=a(n);f.attr("data-type",e[c].type),d.append(f.attr("data-rel",e[c].data.fullPath))}}d.perfectScrollbar("update"),r.selectFirstItem(d),a("#file-list").selectable({unselecting:function(){},stop:function(){r.normalizeSelection()}}),a("#file-list li").mousedown(function(e){if(1==e.which){if(1==a(e.currentTarget).data("oneclck"))return r.openModel(e),!1;a(this).data("oneclck",1),setTimeout(function(){a(e.currentTarget).data("oneclck",0)},250)}})},normalizeSelection:function(){this.selectedFiles=[],this.selectedItem=[];var e=a("li.ui-selectee.ui-selected"),t=this;o.each(e,function(e){var n=a(e).attr("data-rel");t.selectedFiles.push(n),t.selectedItem.push(e)}),this.manageActionsButton(e.length)},selectFirstItem:function(e){e||(e=a("#file-list"));var t=e.find("li").first();t.addClass("ui-selectee ui-selected"),this.selectedFiles=[],this.selectedItem=[],this.selectedFiles.push(a(t).attr("data-rel")),this.selectedItem.push(t),this.manageActionsButton(1)},manageActionsButton:function(e){0===e?(this.getThis().find(".rename").attr("disabled",!0),this.getThis().find(".download").attr("disabled",!0),this.getThis().find(".delete-file").attr("disabled",!0),this.getThis().find(".unzip").attr("disabled",!0),this.getThis().find(".moveAndCopyTo a").attr("disabled",!0),this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!0),this.getThis().find(".zip").attr("disabled",!0),this.getThis().find(".permissions").attr("disabled",!0),this.getThis().find(".btnSetDefaultCompanyModel").attr("disabled",!0)):1===e?(this.getThis().find(".rename").attr("disabled",!1),this.getThis().find(".download").attr("disabled",!1),this.getThis().find(".delete-file").attr("disabled",!1),this.enableUnzipButton(this.selectedItem),this.getThis().find(".moveAndCopyTo a").attr("disabled",!1),this.enableCopyToMyWorkspaceButton(this.selectedItem),this.enableZipButton(this.selectedItem),this.enablePermissionsButton(this.selectedItem),this.enableSetDefaultCompanyModelButton(this.selectedItem)):(this.getThis().find(".rename").attr("disabled",!0),this.getThis().find(".download").attr("disabled",!1),this.getThis().find(".delete-file").attr("disabled",!1),this.getThis().find(".unzip").attr("disabled",!0),this.getThis().find(".moveAndCopyTo a").attr("disabled",!1),this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!0),this.getThis().find(".zip").attr("disabled",!1),this.getThis().find(".permissions").attr("disabled",!0),this.getThis().find(".btnSetDefaultCompanyModel").attr("disabled",!0)),this.currentNodeId.indexOf(this.myWorkspaceId)>=0&&this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!0),-1!==this.currentNodeId.toLowerCase().indexOf("/public")?((0,d.haveAccess)("add_file_public")||(this.getThis().find("#btnNewFolder").attr("disabled",!0),this.getThis().find(".zip").attr("disabled",!0),this.getThis().find(".unzip").attr("disabled",!0),this.getThis().find(".move").hide(),this.getThis().find(".duplicate").hide()),(0,d.haveAccess)("delete_file_public")||this.getThis().find(".delete-file").attr("disabled",!0),(0,d.haveAccess)("change_file_name_public")||this.getThis().find(".rename").attr("disabled",!0),(0,d.haveAccess)("upload_file_public")||(this.getThis().find("#plupload_browse").attr("disabled",!0),this.disableDragAndDrop=!0)):(this.getThis().find("#btnNewFolder").attr("disabled",!1),this.getThis().find("#plupload_browse").attr("disabled",!1),this.getThis().find(".move").show(),this.getThis().find(".duplicate").show(),this.disableDragAndDrop=!1)},disableAllActionsButtons:function(){this.getThis().find(".rename").attr("disabled",!0),this.getThis().find(".download").attr("disabled",!0),this.getThis().find(".delete-file").attr("disabled",!0),this.getThis().find(".unzip").attr("disabled",!0),this.getThis().find(".moveAndCopyTo a").attr("disabled",!0),this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!0),this.getThis().find(".zip").attr("disabled",!0),this.getThis().find(".permissions").attr("disabled",!0)},enableUnzipButton:function(e){"zip"===a(e).attr("data-type")?this.getThis().find(".unzip").attr("disabled",!1):this.getThis().find(".unzip").attr("disabled",!0)},enableZipButton:function(e){"zip"===a(e).attr("data-type")?this.getThis().find(".zip").attr("disabled",!0):this.getThis().find(".zip").attr("disabled",!1)},enableCopyToMyWorkspaceButton:function(e){var t=a(e).attr("data-type");if(!(0,d.haveAccess)("copy_model_to_my_workspace"))return this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!0),!1;"folder"===t?this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!1):this.getThis().find(".copyIntoMyWorkspace").attr("disabled",!0),this.myWorkspaceId.split("_")[1]+"/"===a(".cbp-vm-switcher ol li.active span").attr("data-rel")&&a(".copyIntoMyWorkspace").attr("disabled",!0)},enablePermissionsButton:function(e){"folder"===a(e).attr("data-type")?this.getThis().find(".permissions").attr("disabled",!1):this.getThis().find(".permissions").attr("disabled",!0)},enableSetDefaultCompanyModelButton:function(e){Array.isArray(e)&&(e=e[0]),"model"===a(e).attr("data-type")?this.getThis().find(".btnSetDefaultCompanyModel").attr("disabled",!1):this.getThis().find(".btnSetDefaultCompanyModel").attr("disabled",!0)},orderList:function(e,t){var n=a("#file-list"),i=n.children("li");i.sort(function(e,n){var i=a(e).find(".item-name").html().toUpperCase(),s=a(n).find(".item-name").html().toUpperCase();return"true"===t?i>s?1:i<s?-1:0:i<s?1:i>s?-1:0}),i.detach().appendTo(n)},newFolder:function(){var e=this;e.myFileManager.showCreateFolderModal(e.currentPath,"Folder name...",function(t,n,i){var s=a("#tree").jstree("get_selected");0==s[0].indexOf("anchor_")?a("#tree").jstree("refresh_node",s):a("#tree").jstree("refresh_node",e.currentNodeId);var l=a("#file-list"),r={name:n,type:"folder",size:"",updateDate:""},d=o.template(a("#item_template").html(),{item:r});(d=a(d)).attr("data-type","folder"),d.attr("data-rel",i+"/"),l.prepend(d),a("#file-list li").mousedown(function(t){if(1==t.which){if(1==a(t.currentTarget).data("oneclck"))return e.openModel(t),!1;a(this).data("oneclck",1),setTimeout(function(){a(t.currentTarget).data("oneclck",0)},200)}})})},updateBreadcrumb:function(e){var t=this;this.currentPath=e,this.currentNodeId=this.currentPath;var n=a("#breadcrumb");n.empty();for(var i,s=e.split("/"),o="",l=0;l<s.length;l++)if(o=o+s[l]+"/",l>0){var r=l===s.length-1?'class="active"':"",d=l===(s.length-1||0)?"<span>"+s[l]+"</span>":'<a href="">'+s[l]+"</a>";(d=a(d)).attr("data-rel",o),(i=a(i="<li "+r+"></li>")).append(d),n.append(i)}a("#breadcrumb li a").on("click",function(){return event.preventDefault(),t.goToPath(t),!1})},sortByName:function(e,t){for(var n=[{prop:"isFolder",direction:-1},{prop:"text",direction:1}],i=0,a=0;i<n.length&&0===a;)a=n[i].direction*(e[n[i].prop].toString()<t[n[i].prop].toString()?-1:e[n[i].prop].toString()>t[n[i].prop].toString()?1:0),i++;return a},optimizeStructureForTree:function(e,t){var n=this,i=[],a="";e=e.filter(function(e){return e.show||n.showHiddenFiles}).map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach(function(t){p(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:e.data.fullPath},e)});for(var s=0;s<e.length;s++){if(a=e[s].text,e[s].name=a,e[s].data.hasDenied&&(e[s].text='<i class="fa fa-lock"></i>'+a),1===e[s].type||0===e[s].type?(e[s].children=!0,e[s].type="folder",e[s].isFolder=1):"tree"===t?(i.push(s),e[s].isFolder=0):e[s].isFolder=0,0!==e[s].data.specialFolderType)switch(e[s].children=!0,e[s].data.specialFolderType){case 0:e[s].type="folder";break;case 1:e[s].type="myfolder",this.myWorkspaceId=e[s].id;break;case 2:e[s].type="public";break;case 3:e[s].type="company";break;case 4:e[s].type="modelsPath";break;case 5:e[s].type="shared";break;default:e[s].type="folder"}if(["public","folder"].includes(e[s].type)&&"public"===e[s].text.toLowerCase()&&(e[s].text='<span class="text-bold">'+a+"</span>"),0===e[s].type||2===e[s].type)switch(e[s].data.specialFileType){case 0:e[s].type="file";break;case 1:e[s].type="model";break;case 2:e[s].type="zip";break;default:e[s].type="file"}}if("tree"===t)for(s=0;s<i.length;s++)e.splice(i[i.length-(s+1)],1);return e.sort(this.sortByName),e},openRootNodes:function(e){var t=a("#tree"),n=setInterval(function(){var i=t.find(".jstree-container-ul li");i.length===e.length&&t.jstree().is_parent(i[0])&&(clearInterval(n),i.each(function(e,n){0===e&&t.jstree("select_node",n,!1,!0),t.jstree("open_node",n)}))},10)},showUploader:function(){a("#plupload").css("display","block");var e=a("#cbp-vm").height();a(".plupload_content").height(e),a(".plupload_filelist").height(e)},hideUploader:function(){a("#plupload").css("display","none")},createUploader:function(){var e=this,t=a("#plupload");a("#plupload").css("position","absolute"),a("#plupload").css("display","none"),a("#plupload").css("z-index","1000"),a("#plupload").css("width","100%"),a("#plupload").css("height","100%"),t.pluploadQueue({runtimes:"html5",url:"".concat(__apiURL,"/fileManager/upload/"),headers:{Authorization:"Token ".concat(__currentToken),"session-key":__currentSession.session_key},file_data_name:"files",max_file_size:"0",chunk_size:"10mb",unique_names:!1,resize:{width:320,height:240,quality:90},filters:[{title:"Image files",extensions:"jpg,gif,png"},{title:"Compressed files",extensions:"zip,rar,z"},{title:"data",extensions:"txt,db"},{title:"models",extensions:"ana,cbpy,ppl"},{title:"adobe",extensions:"pdf"},{title:"media",extensions:"mp3,mp4,avi,mpeg"},{title:"msOffice",extensions:"xls,xlsx,xlsm,xlsb,csv,doc,docx,ppt,pptx,mdb,accdb,json"}],flash_swf_url:"js/plupload/plupload.flash.swf",silverlight_xap_url:"js/plupload/plupload.silverlight.xap",multipart_params:{folder_path:"Novix/Public"},init:{FilesAdded:function(t,n){this.setOption({multipart_params:{folder_path:e.currentPath}}),t.start(),a("#plupload_browse").prop("disabled",!0),a("#plupload_browse").hide(),a("#uploading").show(),e.showUploader()},UploadComplete:function(t,n){e.hideUploader(),e.refreshFileManager(e.currentPath),t.splice(),t.refresh(),t.destroy(),e.createUploader(),a("#plupload_browse").prop("disabled",!1),a("#plupload_browse").show(),a("#uploading").hide()},FileUploaded:function(t,n,i){if(200==i.status){(0,d.showMessage)("".concat(n.name," uploaded!"),"File Uploader","success");var a=/[.]/.exec(n.name)?/[^.]+$/.exec(n.name)[0]:"";["xls","xlsx","xlsm","xlsb"].includes(a)&&e.optimizableTemplates.push(e.currentPath+"/"+n.name),0==t.total.queued&&e.optimizableTemplates.length>0&&setTimeout(function(){e.optimzeTemplates(e.optimizableTemplates)},500)}else(0,d.showMessage)(i.response,"File Uploader","error")}}}),a(".plupload_header").remove(),a(".plupload_progress_container").addClass("progress").addClass("progress-striped"),a(".plupload_progress_bar").addClass("bar"),a(".plupload_button").each(function(){a(this).hasClass("plupload_add")?a(this).attr("class","btn plupload_add btn-primary").html("<i class='fa fa-plus-circle'></i> "+a(this).html()):a(this).attr("class","btn plupload_start btn-success").html("<i class='fa fa-cloud-upload'></i> "+a(this).html())}),a("#cbp-vm").bind("dragover",function(t){return e.disableDragAndDrop||e.showUploader(),!1}),a("#plupload_filelist").bind("drop",function(n){var i=(t=a("#plupload")).pluploadQueue();i.splice(),i.refresh(),i.settings.multipart_params.folder_path=e.currentPath}).bind("dragleave",function(t){return e.hideUploader(),!1})},getThis:function(){return this.$el.find(".mainTask[data-rel='file-manager2']")},onRemoveView:function(){this.el=a("#main"),this.events={}},onBeforeRemoveView:function(e,t){},tryOpenModel:function(e){n.e(11).then(function(){var t=[n(696)];(function(t){(new t).open(e,!0)}).apply(null,t)}).catch(n.oe)},optimzeTemplates:function(e){var t=this;t.optimizableTemplates=[];var i=new l;n.e(295).then(function(){var a=[n(771)];(function(n){var a=new n({title:"Optimizing templates. Please wait...",text:"",notifyClass:"ademsg",progressBar:50,timeOut:-1}).render();i.optimzeTemplates(e,function(e){a.find(".toast-close-button").click(),t.refreshFileManager(t.currentPath)},function(e){a.find(".toast-close-button").click()})}).apply(null,a)}).catch(n.oe)}})}.apply(t,l))||(e.exports=r)}).call(this,n(218),n(1),n(134),n(220))},1997:function(e,t,n){var i=n(690);function a(e){return e&&(e.__esModule?e.default:e)}e.exports=(i.default||i).template({1:function(e,t,n,i,a){return'                    <div class="btn-group">\n                      <a href="#" class="btn download" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Download">\n                        <i class="fa fa-download"></i>\n                      </a>\n                    </div>\n'},3:function(e,t,n,i,a){return'                    <div class="btn-group">\n                      <a href="#" class="btn copyIntoMyWorkspace" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Copy to my workspace">\n                        <i class="fas fa-paste"></i>\n                      </a>\n                    </div>\n'},5:function(e,t,i,s,o){var l,r=null!=t?t:e.nullContext||{};return'                    <div class="btn-group">\n'+(null!=(l=a(n(695)).call(r,"change_group_permissions",{name:"haveAccess",hash:{},fn:e.program(6,o,0),inverse:e.noop,data:o,loc:{start:{line:135,column:22},end:{line:140,column:37}}}))?l:"")+"                    </div>\n"+(null!=(l=a(n(695)).call(r,"change_default_company_model",{name:"haveAccess",hash:{},fn:e.program(8,o,0),inverse:e.noop,data:o,loc:{start:{line:142,column:20},end:{line:149,column:35}}}))?l:"")},6:function(e,t,n,i,a){return'                      <a href="#" class="btn permissions" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Set restrictions">\n                        <i class="fa fa-lock"></i>\n                      </a>\n'},8:function(e,t,i,s,o){return'                    <div class="btn-group">\n                      <a href="#" class="btn btnSetDefaultCompanyModel" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="'+e.escapeExpression(a(n(688)).call(null!=t?t:e.nullContext||{},"set_as_default_company_model",{name:"L",hash:{},data:o,loc:{start:{line:145,column:45},end:{line:145,column:81}}}))+'">\n                        <i class="fa fa-magnet"></i>\n                      </a>\n                    </div>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,i,s,o){var l,r=null!=t?t:e.nullContext||{},d=e.escapeExpression;return'<div class="container-fluid mainTask" data-rel="file-manager2" data-type="tab-content">\n  <script type="text/template" id="item_template">\n    <li>\n      <span class="icon-folder">\n        <% if(item.type == "folder") { %>\n        <i class="fas fa-folder"></i>\n        <% } else if(item.type == "file") { %>\n        <i class="far fa-file"></i>\n        <% } else if(item.type == "model") { %>\n        <i class="fa fa-cube"></i>\n        <% } else if(item.type == "zip") { %>\n        <i class="far fa-file-archive"></i>\n        <% } %>\n      </span>\n      <span class="item-name"><%= item.name %></span>\n      <div class="cbp-vm-access">\n        <% if(item.hasDenied == true) { %>\n        <i class="fa fa-lock"></i>\n        <% } %>\n      </div>\n      <div class="cbp-vm-type"><%= item.type %></div>\n      <div class="cbp-vm-filesize"><%= item.size %></div>\n      <div class="cbp-vm-date"><%= item.updateDate %></div>\n    </li>\n  <\/script>\n  <script type="text/template" id="actions_template">\n    <a href="#" class="btn btn-mini btn-satblue" rel="tooltip" title="Edit" data-original-title="Edit"\n      style="width:30px; height:28px; padding:4px 4px;">\n      <i class="fa fa-edit"></i>\n    </a>\n    <a href="#" class="btn btn-mini btn-satgreen" rel="tooltip" title="Download" data-original-title="Download"\n      style="width:30px; height:28px; padding:4px 4px;">\n      <i class="fa fa-download"></i>\n    </a>\n    <a href="#" class="btn btn-mini btn-lightred" rel="tooltip" title="Delete" data-original-title="Delete"\n      style="width:30px; height:28px; padding:4px 4px;">\n      <i class="fa fa-trash"></i>\n    </a>\n  <\/script>\n\n  <div class="page-header">\n  </div>\n\n  <div class="row">\n    <div class="col-sm-12">\n      <div id="file-manager-wrapper" class="box">\n        <div class="box-content nopadding-top">\n          <div class="row row__fix-margin">\n            \x3c!-- START: Left column --\x3e\n            <div id="tree-container" class="col-sm-3 nopadding">\n              <div id="tree"></div>\n            </div>\n            \x3c!-- END: Left column --\x3e\n            \x3c!-- START: Right column --\x3e\n            <div id="right-column" class="col-sm-9"\n              style="border-width: 0 0 0 1px; border-style: solid; border-color: #ccc;">\n              <div class="fm-highlight-toolbar">\n                <div class="pull-left">\n                  <div class="btn-toolbar">\n\n                    <div class="btn-group pullright">\n                      <button id="btnNewFolder" class="btn btn-lightgrey btn--icon">\n                        <i class="fa fa-plus-square"></i>New folder</button>\n                      <button id="plupload_browse" class="btn btn-success btn--icon">\n                        <i class="fa fa-upload"></i>Upload</button>\n\n                      <button id="uploading" class="btn btn-success btn--icon" style="display:none;" disabled="true">\n                        <i class="fa fa-spinner fa-pulse"></i>Uploading...</button>\n                    </div>\n\n                    <div class="btn-group">\n                      <a href="#" class="btn rename" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Rename">\n                        <i class="fa fa-edit"></i>\n                      </a>\n                    </div>\n'+(null!=(l=a(n(695)).call(r,"download_files",{name:"haveAccess",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o,loc:{start:{line:77,column:20},end:{line:84,column:35}}}))?l:"")+'                    <div class="btn-group">\n                      <a href="#" class="btn delete-file" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Delete">\n                        <i class="fa fa-trash"></i>\n                      </a>\n                    </div>\n                    <div class="btn-group">\n                      <a href="#" class="btn unzip" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Unzip here">\n                        <i class="fa fa-archive"></i>\n                      </a>\n                    </div>\n                    <div class="btn-group">\n                      <a href="#" class="btn zip" rel="tooltip" data-placement="bottom" title=""\n                        data-original-title="Zip here">\n                        <i class="fa fa-file-archive-o"></i>\n                      </a>\n                    </div>\n                    \x3c!--div class="btn-group">\n                      <a href="#" class="btn move" rel="tooltip" data-placement="bottom" title="" data-original-title="Move to...">\n                        <i class="fa fa-folder"></i>\n                      </a>\n                    </div--\x3e\n'+(null!=(l=i.if.call(r,null!=t?t.notDesktop:t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o,loc:{start:{line:108,column:20},end:{line:115,column:27}}}))?l:"")+'                    <div class="btn-group moveAndCopyTo">\n                      <a href="#" data-toggle="dropdown" class="btn dropdown-toggle">\n                        <i class="fa fa-folder"></i>\n                        <span class="caret"></span>\n                      </a>\n                      <ul class="dropdown-menu">\n                        <li>\n                          <a href="#" class="copyFilesTo">Copy in...</a>\n                        </li>\n                        <li>\n                          <a href="#" class="move">Move to...</a>\n                        </li>\n                        <li>\n                          <a href="#" class="duplicate">Duplicate</a>\n                        </li>\n                      </ul>\n                    </div>\n'+(null!=(l=i.if.call(r,null!=t?t.notDesktop:t,{name:"if",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:133,column:20},end:{line:150,column:27}}}))?l:"")+'                    <div class="btn-group">\n                      <a href="#" class="btn toggleHiddenFiles" rel="tooltip" data-value='+d(e.lambda(null!=t?t.showHiddenFiles:t,t))+'\n                        data-placement="bottom" title="" data-original-title="'+d(a(n(688)).call(r,"show_hidden_files",{name:"L",hash:{},data:o,loc:{start:{line:153,column:78},end:{line:153,column:103}}}))+'">\n                        <i class="fa fa-eye"></i>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \x3c!-- START: File Uploader --\x3e\n              <div id="plupload">\n                <p>Your browser doesn\'t have Flash, Silverlight or HTML5 support.</p>\n              </div>\n              \x3c!-- END: File Uploader --\x3e\n              \x3c!-- START: File list --\x3e\n              <div id="cbp-vm" class="cbp-vm-switcher cbp-vm-view-list">\n                <ol id="breadcrumb" class="breadcrumb">\n                </ol>\n                <div class="file-list-header">\n                  <div class="header-name" data-rel="true">\n                    Name\n                    <i class="fa fa-sort"></i>\n                  </div>\n                  <div class="header-access">Access</div>\n                  <div class="header-type">Type</div>\n                  <div class="header-size">Size</div>\n                  <div class="header-updated">Date</div>\n                </div>\n                <ul id="file-list" class="always-visible" style="position: relative;"></ul>\n              </div>\n              \x3c!-- END: File list --\x3e\n            </div>\n            \x3c!-- END: Right column --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0})},714:function(e,t,n){"use strict";(function(i){var a,s=n(693);void 0===(a=function(){return i.Model.extend({list:function(e,t){(0,s.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},t)},listByCompany:function(e){(0,s.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},get:function(e,t){(0,s.send)("users/".concat(e,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},t)},update:function(e,t,n){(0,s.send)("users/".concat(e,"/"),t,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},n)},partialUpdateUser:function(e,t,n){(0,s.send)("users/".concat(e,"/"),JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)},EditProfile:function(e,t){(0,s.send)("users/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t)},create:function(e,t){(0,s.send)("usercompanies/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},t)},partialUpdate:function(e,t,n){(0,s.send)("usercompanies/".concat(e,"/"),JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)},deleteUser:function(e,t){(0,s.send)("users/".concat(e,"/"),null,{type:"DELETE"},t)},deleteUserCompany:function(e,t){(0,s.send)("usercompanies/".concat(e,"/"),null,{type:"DELETE"},t)},UpdateUserPreference:function(e,t){var n={userCompanyId:__currentSession.userId,preferenceCode:e,value:t};(0,s.send)("user/UpdateUserPreference",n,{type:"PUT"})},GetUserPreference:function(e,t){(0,s.send)("usercompanies/preference_by_code/?code=".concat(e),null,{type:"GET"},t)},GetRelatedDashboard:function(e){(0,s.send)("user/GetRelatedDashboard",null,null,e)}})}.apply(t,[]))||(e.exports=a)}).call(this,n(218))},717:function(e,t,n){"use strict";(function(i){var a,s=n(693);void 0===(a=function(){return i.Model.extend({url:"myFileManager",getMainFolders:function(e){(0,s.send)("fileManager/getMainFolders/",null,{type:"GET"},e)},getFiles:function(e,t){(0,s.send)("fileManager/getFiles/?folder=".concat(encodeURIComponent(e)),null,{type:"GET"},t)},createFolder:function(e,t,n){(0,s.send)("fileManager/createFolder/",{folder_path:e,folder_name:t},{type:"POST"},n)},deleteFiles:function(e,t){(0,s.send)("fileManager/deleteFiles/",JSON.stringify({sources:e}),{type:"DELETE",contentType:"application/json",dataType:"text"},t)},renameFiles:function(e,t,n){(0,s.send)("fileManager/renameFile/?source=".concat(encodeURIComponent(e),"&newName=").concat(t),null,{type:"GET"},n)},unzipFile:function(e,t,n){(0,s.send)("fileManager/unzipFile/?source=".concat(e,"&targetFolder=").concat(encodeURIComponent(t)),null,{type:"GET",dataType:"text"},n)},moveFiles:function(e,t,n){var i=e.map(function(e){return"sources=".concat(e)}).join("&");(0,s.send)("fileManager/moveFiles/?".concat(i,"&target=").concat(encodeURIComponent(t)),null,{type:"GET",dataType:"text"},n)},copyToMyWorkspace:function(e,t){(0,s.send)("fileManager/copyToMyWorkspace/?source="+encodeURIComponent(e),null,{type:"GET",dataType:"text"},t)},copyFiles:function(e,t,n){var i=e.map(function(e){return"sources=".concat(e)}).join("&");(0,s.send)("fileManager/copyFiles/?".concat(i,"&target=").concat(encodeURIComponent(t)),null,{type:"GET",dataType:"text"},n)},duplicateFiles:function(e,t){var n=e.map(function(e){return"sources=".concat(e)}).join("&");(0,s.send)("fileManager/duplicateFiles/?".concat(n),null,{type:"GET"},t)},zipFiles:function(e,t){var n=e.map(function(e){return"sources=".concat(e)}).join("&");(0,s.send)("fileManager/zipFiles/?".concat(n),null,{type:"GET",dataType:"text"},t)},downloadFiles:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){},l=e.map(function(e){return"sources=".concat(e)}).join("&"),r=new XMLHttpRequest;r.responseType="arraybuffer",r.open("GET","".concat(__apiURL,"/fileManager/download/?").concat(l),!0),r.setRequestHeader("Authorization","Token ".concat(__currentToken)),r.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),r.onloadstart=i,r.onreadystatechange=function(e){var i=e.currentTarget;i.onprogress=a,i.onerror=o,i.onloadend=s,i.readyState==i.DONE&&(200==i.status?t(i):n.e(18).then(function(){var e=[n(685)];(function(e){(new e).show({title:"ERROR!",text:i.response,notifyType:"error"})}).apply(null,e)}).catch(n.oe))},r.send()},getDepartments:function(e){(0,s.send)("departments/by_current_company/",null,{type:"GET"},e)},getDeniedDepartments:function(e,t){(0,s.send)("departments/denied/?folder=".concat(encodeURIComponent(e)),null,{type:"GET"},t)},setDeniedPath:function(e,t){(0,s.send)("departments/deny_items/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8"},t)},optimzeTemplates:function(e,t,n){var i=e.map(function(e){return"sources=".concat(e)}).join("&");(0,s.send)("fileManager/optimizeTemplates/?".concat(i),null,{type:"GET",dataType:"text"},t,n)}})}.apply(t,[]))||(e.exports=a)}).call(this,n(218))},725:function(e,t,n){"use strict";(function(i){var a,s=n(693);void 0===(a=function(){return i.Model.extend({list:function(e){(0,s.send)("companies/?limit=1000&offset=0",null,null,e)},getCompany:function(e,t){(0,s.send)("companies/".concat(e,"/"),null,null,t)},update:function(e,t,n){(0,s.send)("companies/".concat(e,"/"),JSON.stringify(t),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},n)},partialUpdate:function(e,t,n){(0,s.send)("companies/".concat(e,"/"),JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)},create:function(e,t){(0,s.send)("companies/",e,{type:"POST"},t)},delete:function(e,t){(0,s.send)("companies/".concat(e,"/"),null,{type:"DELETE"},t)},UpdateCompanyPreference:function(e,t,n){var i={companyId:__currentSession.companyId,preferenceCode:e,value:t};(0,s.send)("company/UpdateCompanyPreference",i,{type:"PUT"},n)},GetCompanyPreference:function(e,t){(0,s.send)("companies/preference_by_code/?code=".concat(e),null,{type:"GET"},t)},sendTestEmail:function(e,t){(0,s.send)("company/SendTestEmail",e,{type:"PUT"},t)},getLicenceKey:function(e,t){(0,s.send)("company/GetLK/"+e,null,null,t)},setLicenceKey:function(e,t){(0,s.send)("company/SetLK/",e,{type:"POST"},t)}})}.apply(t,[]))||(e.exports=a)}).call(this,n(218))}}]);