/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[256,34],{1345:function(t,n,e){"use strict";(function(a,o){var l,i;l=[e(703),e(707),e(2078),e(2079)],void 0===(i=function(t,n,l,i){return a.View.extend({el:o("#main"),workflowModel:new n,workflowController:new t,_uId:"",initialize:function(){},render:function(){o('.container-fluid.mainTask[data-rel="abm-states"]').remove(),this._uId=o.uuid();var t={id:this._uId},n=l(t);this.$el.append(n);var e=this,a=o("#states-manager-content");function i(){var t=o(window).height();e.h=t-280,a.height(e.h-o(".page-header").height())}o(window).resize(i),i(),o("div[data-id='"+e._uId+"']").find("div.data-table-options").append(o('<a href="#" class="btn btn-addState"><i class="fa fa-plus"></i> Add status</a>')),o("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-addState").on("click",function(){return e.addState(e),!1}),this.listStates()},saveOrder:function(t){for(var n=o("div[data-id='"+t._uId+"']").find("table tbody tr"),e=[],a=0;a<n.length;a++)e.push(o(n[a]).attr("data-id"));t.workflowModel.updateOrder(e,function(n){t.listStates()})},listStates:function(){var t=this,n=o("#states-manager-content");this.workflowModel.listStates(function(e){o("div[data-id='"+t._uId+"']").find("table").remove();var a=i({data:e});n.append(a),o("div[data-id='"+t._uId+"']").find("table").cubeTable(),o("div[data-id='"+t._uId+"']").find(".dataTables_scrollBody").css("height",t.h+"px"),t.addTableHandlers(o("div[data-id='"+t._uId+"']").find("table")),t.addHandlers(),o("div[data-id='"+t._uId+"']").find("table tbody").sortable({axis:"y",placeholder:"ui-state-highlight ui-sort-position",update:function(n,e){t.saveOrder(t)},helper:function(t,n){return n.children().each(function(){o(this).width(o(this).width())}),n}}).disableSelection(),o('.container-fluid.mainTask[data-rel="abm-states"]').show()})},addHandlers:function(){var t=this;o("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",function(){return t.close(t),!1})},addTableHandlers:function(t){var n=this;o(t).find("button.btn-edit").on("click",function(t){return n.editState(t,n),!1}),o(t).find("button.btn-delete").on("click",function(t){return n.deleteState(t,n),!1})},editState:function(t,n){var e=o(t.currentTarget).closest("tr").attr("data-id");n.workflowController.editState(e)},deleteState:function(t,n){var e=o(t.currentTarget).closest("tr").attr("data-id");n.workflowModel.deleteState(e,function(t){n.workflowController.showStatesManager()})},addState:function(t){t.workflowController.addState()},close:function(){var t=o("#currentTask").attr("data-rel");Promise.resolve().then(function(){var n=[e(684)];(function(n){(new n).removeTask(t)}).apply(null,n)}).catch(e.oe)},getThis:function(){return this.$el.find(".mainTask[data-rel='abm-states']")},onRemoveView:function(){this.el=o("#main"),this.events={}},onBeforeRemoveView:function(t,n){}})}.apply(n,l))||(t.exports=i)}).call(this,e(218),e(1))},2078:function(t,n,e){var a=e(690);t.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(t,n,e,a,o){var l;return'<div class="container-fluid mainTask" data-rel="abm-states" data-id="'+t.escapeExpression("function"==typeof(l=null!=(l=e.id||(null!=n?n.id:n))?l:t.hooks.helperMissing)?l.call(null!=n?n:t.nullContext||{},{name:"id",hash:{},data:o,loc:{start:{line:1,column:69},end:{line:1,column:75}}}):l)+'" data-type="tab-content">\n\n  <div class="page-header">\n  </div>\n\n  <div class="row">\n\n    <div class="col-sm-12">\n      <div class="box">\n        <div class="box-title">\n\n          <h3><i class="fa fa-th-list"></i>Status Manager</h3>\n          <div class="actions abm-top-options">\n            <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n          </div>\n        </div>\n\n        <div class="data-table-options" style="height: 50px;"></div>\n\n        <div id="states-manager-content" class="box-content nopadding abm-content">\n\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},2079:function(t,n,e){var a=e(690);t.exports=(a.default||a).template({1:function(t,n,e,a,o){var l,i=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,d="function",r=t.escapeExpression;return'      <tr data-id="'+r(typeof(l=null!=(l=e.taskStateId||(null!=n?n.taskStateId:n))?l:s)===d?l.call(i,{name:"taskStateId",hash:{},data:o,loc:{start:{line:14,column:19},end:{line:14,column:34}}}):l)+'" id="'+r(typeof(l=null!=(l=e.taskStateId||(null!=n?n.taskStateId:n))?l:s)===d?l.call(i,{name:"taskStateId",hash:{},data:o,loc:{start:{line:14,column:40},end:{line:14,column:55}}}):l)+'" data-position="">\n        <td class="order">'+r(typeof(l=null!=(l=e.pos||(null!=n?n.pos:n))?l:s)===d?l.call(i,{name:"pos",hash:{},data:o,loc:{start:{line:15,column:26},end:{line:15,column:33}}}):l)+'</td>\n        <td class="stateId">'+r(typeof(l=null!=(l=e.taskStateId||(null!=n?n.taskStateId:n))?l:s)===d?l.call(i,{name:"taskStateId",hash:{},data:o,loc:{start:{line:16,column:28},end:{line:16,column:43}}}):l)+'</td>\n        <td class="stateName">'+r(typeof(l=null!=(l=e.name||(null!=n?n.name:n))?l:s)===d?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:17,column:30},end:{line:17,column:38}}}):l)+'</td>\n        <td class="stateName"><div style="width:20px; height:20px; background-color:#'+r(typeof(l=null!=(l=e.color||(null!=n?n.color:n))?l:s)===d?l.call(i,{name:"color",hash:{},data:o,loc:{start:{line:18,column:85},end:{line:18,column:94}}}):l)+'"></div></td>\n        <td>\n            <button class="btn btn-green btn-edit" data-original-title="Edit Satus">\n            <i class="fa fa-pencil-square-o"></i></button>\n            <button class="btn btn-red btn-delete" data-original-title="Delete Status">\n            <i class="fa fa-trash"></i></button>\n        </td>\n      </tr>\n'},compiler:[8,">= 4.3.0"],main:function(t,n,e,a,o){var l,i,s=null!=n?n:t.nullContext||{};return'<table id="'+t.escapeExpression("function"==typeof(i=null!=(i=e.id||(null!=n?n.id:n))?i:t.hooks.helperMissing)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:1,column:11},end:{line:1,column:17}}}):i)+'" class="table table-hover table-nomargin table-bordered dataTable\ndataTable-row-reorder dataTable-noheader dataTable-nofooter">\n  <thead>\n    <tr>\n      <th>Order</th>\n      <th>Status id</th>\n      <th>Name</th>\n      <th>Color</th>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n'+(null!=(l=e.each.call(s,null!=n?n.data:n,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:13,column:4},end:{line:26,column:13}}}))?l:"")+"  </tbody>\n</table>\n"},useData:!0})},707:function(t,n,e){"use strict";(function(a){var o,l=e(693);void 0===(o=function(){return a.Model.extend({url:"myFileManager",getWorkflow:function(t,n){var e="Workflow/getWorkflow";t&&(e="Workflow/getWorkflow/"+t),(0,l.send)(e,null,{type:"GET"},n)},createTask:function(t,n){(0,l.send)("Workflow/createTask",t,{type:"POST"},n)},updateTask:function(t,n){(0,l.send)("Workflow/updateTask",t,{type:"PUT"},n)},updateTasksProperty:function(t,n){(0,l.send)("Workflow/updateTasksProperty",t,{type:"PUT"},n)},deleteTask:function(t,n){(0,l.send)("Workflow/deleteTask/"+t,null,{type:"DELETE"},n)},getTask:function(t,n){(0,l.send)("Workflow/getTask/"+t,null,null,n)},createState:function(t,n){(0,l.send)("Workflow/createState/",t,{type:"POST"},n)},listStates:function(t){(0,l.send)("Workflow/listStates",null,{type:"GET"},t)},getState:function(t,n){(0,l.send)("Workflow/getState/"+t,null,{type:"GET"},n)},updateState:function(t,n){(0,l.send)("Workflow/updateState",t,{type:"PUT"},n)},deleteState:function(t,n){(0,l.send)("Workflow/deleteState/"+t,null,{type:"DELETE"},n)},listTransitions:function(t){(0,l.send)("Workflow/listTransitions",null,{type:"GET"},t)},createTransition:function(t,n){(0,l.send)("Workflow/createTransition",t,{type:"POST"},n)},updateTransition:function(t,n){(0,l.send)("Workflow/updateTransition",t,{type:"PUT"},n)},deleteTransition:function(t,n){(0,l.send)("Workflow/deleteTransition/"+t,null,{type:"DELETE"},n)},listUsers:function(t){(0,l.send)("Workflow/listUsers",null,null,t)},getTaskGroup:function(t,n){(0,l.send)("Workflow/getTaskGroup/"+t,null,{type:"GET"},n)},listTaskGroups:function(t){(0,l.send)("Workflow/listTaskGroups",null,{type:"GET"},t)},createTaskGroup:function(t,n){(0,l.send)("Workflow/createTaskGroup",t,{type:"POST"},n)},updateTaskGroup:function(t,n){(0,l.send)("Workflow/updateTaskGroup",t,{type:"PUT"},n)},deleteTaskGroup:function(t,n){(0,l.send)("Workflow/DeleteTaskGroup/"+t,null,{type:"DELETE"},n)},updateOrder:function(t,n){(0,l.send)("Workflow/ChangeOrder",{values:t},{type:"PUT"},n)},updateRolTransitions:function(t,n){(0,l.send)("Workflow/updateRolTransitions",t,{type:"PUT"},n)},getWorkflowByGroups:function(t,n){(0,l.send)("Workflow/getWorkflowByGroups/",{values:t},{type:"POST"},n)},createComment:function(t,n){(0,l.send)("Workflow/createComment/",t,{type:"POST"},n)}})}.apply(n,[]))||(t.exports=o)}).call(this,e(218))}}]);