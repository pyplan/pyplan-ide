/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[257],{1057:function(n,t,l){"use strict";(function(e,a){var o,i;l(18);o=[l(221),l(1231)],void 0===(i=function(n,t){return e.View.extend({el:a("#main"),render:function(){var n=this,t={wizard:this.options.bodyParams.wizard,action:this.options.bodyParams.action,params:{nodeId:this.options.bodyParams.params.nodeId}};Promise.resolve().then((function(){var e=[l(221)];(function(l){(new l).callWizard(t,(function(t){t&&n.loadView(t)}),(function(){}))}).apply(null,e)})).catch(l.oe)},loadView:function(l){var e=this;this.$el.append(t({title:this.options.title,fields:l,max_height:"".concat(a(window).height()-250,"px")}));var o=a("#wizardCalculatedField"),i=o.find(".modal-footer .btnSave"),d=o.find(".btnAddField"),r=a("#wizardCalculatedField .listFields");o.on("hidden.bs.modal",(function(){o.off("hidden.bs.modal"),o.remove()})).modal("show"),i.on("click",(function(){if(!o.find("form").valid())return!1;e.options.confirm.params.name=o.find(".txtFormulaName").val(),e.options.confirm.params.formula=o.find(".txtFormula").val(),(new n).callWizard(e.options.confirm,(function(){o.modal("hide"),e.options.callback()}))})),d.on("click",(function(){e.addFieldInFormula(r),event.preventDefault()})),r.find("option").on("dblclick",(function(){e.addFieldInFormula(r),event.preventDefault()}))},addFieldInFormula:function(n){var t=n.val(),l=a(".txtFormula").val(),e=a(".txtFormula").prop("selectionStart"),o=l.substring(0,e)+"#"+t+"#"+l.substring(e,l.length);a(".txtFormula").val(o),a(".txtFormula").focus();var i=this.indexOfEnd(o,"#"+t+"#");this.setCaretPosition(a(".txtFormula").get(0),i)},setCaretPosition:function(n,t){if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,t);else if(n.createTextRange){var l=n.createTextRange();l.collapse(!0),l.moveEnd("character",t),l.moveStart("character",t),l.select()}},indexOfEnd:function(n,t){var l=n.indexOf(t);return-1==l?-1:l+t.length}})}.apply(t,o))||(n.exports=i)}).call(this,l(220),l(1))},1231:function(n,t,l){var e=l(681);n.exports=(e.default||e).template({1:function(n,t,l,e,a){var o,i=null!=t?t:n.nullContext||{},d=n.hooks.helperMissing,r=n.escapeExpression,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'                <option value="'+r("function"==typeof(o=null!=(o=s(l,"field")||(null!=t?s(t,"field"):t))?o:d)?o.call(i,{name:"field",hash:{},data:a,loc:{start:{line:31,column:31},end:{line:31,column:40}}}):o)+'">'+r("function"==typeof(o=null!=(o=s(l,"field")||(null!=t?s(t,"field"):t))?o:d)?o.call(i,{name:"field",hash:{},data:a,loc:{start:{line:31,column:42},end:{line:31,column:51}}}):o)+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(n,t,l,e,a){var o,i,d=null!=t?t:n.nullContext||{},r=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div id="wizardCalculatedField" class="modal fade nodeWizardDialog" tabindex="-1" role="dialog" aria-labelledby="Wizard"\n  aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n        <h4>'+s("function"==typeof(i=null!=(i=c(l,"title")||(null!=t?c(t,"title"):t))?i:r)?i.call(d,{name:"title",hash:{},data:a,loc:{start:{line:7,column:12},end:{line:7,column:21}}}):i)+'</h4>\n      </div>\n      <div class="modal-body form-horizontal" style="max-height:'+s("function"==typeof(i=null!=(i=c(l,"max_height")||(null!=t?c(t,"max_height"):t))?i:r)?i.call(d,{name:"max_height",hash:{},data:a,loc:{start:{line:9,column:64},end:{line:9,column:78}}}):i)+'">\n        <form action="#" class="form-validate">\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">Name</label>\n            <div class="col-sm-7">\n              <input type="text" placeholder="Your field name..." class="form-control txtFormulaName"\n                data-rule-required="true" aria-required="true" aria-invalid="true" aria-describedby="field-error">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">Formula</label>\n            <div class="col-sm-10">\n              <input type="text" placeholder="" class="form-control txtFormula">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-12" style="text-align: left;">Fields</label>\n            <div class="col-sm-12">\n              <select class="form-control listFields" size="6">\n'+(null!=(o=c(l,"each").call(d,null!=t?c(t,"fields"):t,{name:"each",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:30,column:16},end:{line:32,column:25}}}))?o:"")+'              </select>\n            </div>\n          </div>\n\n          <div class="row" style="text-align: right;">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btnAddField">Add field</button>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>\n        <button type="button" class="btn btn-primary btnSave">Ok</button>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0})}}]);