/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{1056:function(n,l,t){"use strict";(function(a,e){var o,i;t(18);o=[t(220),t(1243)],void 0===(i=function(n,l){return a.View.extend({el:e("#main"),render:function(){var n=this,l={wizard:this.options.bodyParams.wizard,action:this.options.bodyParams.action,params:{nodeId:this.options.bodyParams.params.nodeId}};Promise.resolve().then((function(){var a=[t(220)];(function(t){(new t).callWizard(l,(function(l){l&&n.loadView(l)}),(function(){}))}).apply(null,a)})).catch(t.oe)},loadView:function(t){var a=this;this.$el.append(l({title:this.options.title,fields:t,max_height:"".concat(e(window).height()-250,"px")}));var o=e("#wizardCalculatedField"),i=o.find(".modal-footer .btnSave"),d=o.find(".btnAddField"),r=e("#wizardCalculatedField .listFields");o.on("hidden.bs.modal",(function(){o.off("hidden.bs.modal"),o.remove()})).modal("show"),i.on("click",(function(){if(!o.find("form").valid())return!1;a.options.confirm.params.name=o.find(".txtFormulaName").val(),a.options.confirm.params.formula=o.find(".txtFormula").val(),(new n).callWizard(a.options.confirm,(function(){o.modal("hide"),a.options.callback()}))})),d.on("click",(function(){a.addFieldInFormula(r),event.preventDefault()})),r.find("option").on("dblclick",(function(){a.addFieldInFormula(r),event.preventDefault()}))},addFieldInFormula:function(n){var l=n.val(),t=e(".txtFormula").val(),a=e(".txtFormula").prop("selectionStart"),o=t.substring(0,a)+"#"+l+"#"+t.substring(a,t.length);e(".txtFormula").val(o),e(".txtFormula").focus();var i=this.indexOfEnd(o,"#"+l+"#");this.setCaretPosition(e(".txtFormula").get(0),i)},setCaretPosition:function(n,l){if(n.setSelectionRange)n.focus(),n.setSelectionRange(l,l);else if(n.createTextRange){var t=n.createTextRange();t.collapse(!0),t.moveEnd("character",l),t.moveStart("character",l),t.select()}},indexOfEnd:function(n,l){var t=n.indexOf(l);return-1==t?-1:t+l.length}})}.apply(l,o))||(n.exports=i)}).call(this,t(219),t(1))},1243:function(n,l,t){var a=t(670);function e(n){return n&&(n.__esModule?n.default:n)}n.exports=(a.default||a).template({1:function(n,l,t,a,e){var o=n.lambda,i=n.escapeExpression,d=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'                <option value="'+i(o(null!=l?d(l,"field"):l,l))+'">'+i(o(null!=l?d(l,"field"):l,l))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,a,o,i){var d,r=n.lambda,s=n.escapeExpression,c=null!=l?l:n.nullContext||{},u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div id="wizardCalculatedField" class="modal fade nodeWizardDialog" tabindex="-1" role="dialog" aria-labelledby="Wizard"\n  aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n        <h4>'+s(r(null!=l?u(l,"title"):l,l))+'</h4>\n      </div>\n      <div class="modal-body form-horizontal" style="max-height:'+s(r(null!=l?u(l,"max_height"):l,l))+'">\n        <form action="#" class="form-validate">\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">'+s(e(t(668)).call(c,"_name",{name:"L",hash:{},data:i,loc:{start:{line:12,column:92},end:{line:12,column:105}}}))+'</label>\n            <div class="col-sm-7">\n              <input type="text" placeholder="Your field name..." class="form-control txtFormulaName"\n                data-rule-required="true" aria-required="true" aria-invalid="true" aria-describedby="field-error">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-2" style="text-align: left;">'+s(e(t(668)).call(c,"_formula",{name:"L",hash:{},data:i,loc:{start:{line:20,column:92},end:{line:20,column:108}}}))+'</label>\n            <div class="col-sm-10">\n              <input type="text" placeholder="" class="form-control txtFormula">\n            </div>\n          </div>\n\n          <div class="form-group">\n            <label for="textfield" class="control-label col-sm-12" style="text-align: left;">'+s(e(t(668)).call(c,"_fields",{name:"L",hash:{},data:i,loc:{start:{line:27,column:93},end:{line:27,column:108}}}))+'</label>\n            <div class="col-sm-12">\n              <select class="form-control listFields" size="6">\n'+(null!=(d=u(a,"each").call(c,null!=l?u(l,"fields"):l,{name:"each",hash:{},fn:n.program(1,i,0),inverse:n.noop,data:i,loc:{start:{line:30,column:16},end:{line:32,column:25}}}))?d:"")+'              </select>\n            </div>\n          </div>\n\n          <div class="row" style="text-align: right;">\n            <div class="col-sm-12">\n              <button type="button" class="btn btn-primary btnAddField">'+s(e(t(668)).call(c,"_add_field",{name:"L",hash:{},data:i,loc:{start:{line:39,column:72},end:{line:39,column:90}}}))+'</button>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" data-dismiss="modal">'+s(e(t(668)).call(c,"cancel",{name:"L",hash:{},data:i,loc:{start:{line:45,column:75},end:{line:45,column:89}}}))+'</button>\n        <button type="button" class="btn btn-primary btnSave">'+s(e(t(668)).call(c,"_save",{name:"L",hash:{},data:i,loc:{start:{line:46,column:62},end:{line:46,column:75}}}))+"</button>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0})}}]);