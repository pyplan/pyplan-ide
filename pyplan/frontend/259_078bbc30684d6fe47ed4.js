/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[259,34],{1348:function(n,t,e){"use strict";(function(a,o){var l,i,s=e(18);l=[e(703),e(707),e(2083),e(2084)],void 0===(i=function(n,t,l,i){return a.View.extend({el:o("#main"),workflowModel:new t,workflowController:new n,_uId:"",initialize:function(){},render:function(){o('.container-fluid.mainTask[data-rel="abm-task-groups"]').remove(),this._uId=o.uuid();var n={id:this._uId},t=l(n);this.$el.append(t);var e=this,a=o("#group-manager-content");function i(){var n=o(window).height();e.h=n-280,a.height(e.h-o(".page-header").height())}o(window).resize(i),i(),this.listStates()},listStates:function(){var n=this,t=o("#group-manager-content");this.workflowModel.listTaskGroups(function(e){var a=i({data:e});t.append(a),n.addTableHandlers(o("div[data-id='"+n._uId+"']").find("table")),o("div[data-id='"+n._uId+"']").find("table").cubeTable(),o("div[data-id='"+n._uId+"']").find(".dataTables_scrollBody").css("height",n.h+"px"),o("div[data-id='"+n._uId+"']").find("div.data-table-options").append(o('<a href="#" class="btn btn-addTaskGroup"><i class="fa fa-plus"></i> Add task group</a>')),n.addHandlers()})},addHandlers:function(){var n=this;o("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-addTaskGroup").on("click",function(){return n.addTaskGroup(n),!1}),o("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",function(){return n.close(n),!1})},addTableHandlers:function(n){var t=this;o(n).find("button.btn-edit").on("click",function(n){return t.editTaskGroup(n,t),!1}),o(n).find("button.btn-delete").on("click",function(n){return t.deleteTaskGroup(n,t),!1})},editTaskGroup:function(n,t){var e=o(n.currentTarget).closest("tr").attr("data-id");t.workflowController.editTaskGroup(e)},deleteTaskGroup:function(n,t){var a=o(n.currentTarget).closest("tr").attr("data-id");e.e(4).then(function(){var n=[e(683)];(function(n){(new n).show({title:(0,s.translate)("_deleteTaskGroup"),text:(0,s.translate)("_confirmDeleteTaskGroup"),buttons:[{title:(0,s.translate)("yes"),css:"primary",code:"yes"},{title:(0,s.translate)("no"),code:"no"}],callback:function(n){"yes"==n&&(o("#mainLoading").show(),t.workflowModel.deleteTaskGroup(a,function(n){o("#mainLoading").hide(),t.workflowController.showTaskGroupManager()}))}})}).apply(null,n)}).catch(e.oe)},addTaskGroup:function(n){n.workflowController.addTaskGroup()},close:function(){var n=o("#currentTask").attr("data-rel");Promise.resolve().then(function(){var t=[e(684)];(function(t){(new t).removeTask(n)}).apply(null,t)}).catch(e.oe)},getThis:function(){return this.$el.find(".mainTask[data-rel='abm-states']")},onRemoveView:function(){this.el=o("#main"),this.events={}},onBeforeRemoveView:function(n,t){}})}.apply(t,l))||(n.exports=i)}).call(this,e(218),e(1))},2083:function(n,t,e){var a=e(690);n.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(n,t,e,a,o){var l;return'<div class="container-fluid mainTask" data-rel="abm-task-groups" data-id="'+n.escapeExpression("function"==typeof(l=null!=(l=e.id||(null!=t?t.id:t))?l:n.hooks.helperMissing)?l.call(null!=t?t:n.nullContext||{},{name:"id",hash:{},data:o,loc:{start:{line:1,column:74},end:{line:1,column:80}}}):l)+'" data-type="tab-content">\n\n  <div class="page-header">\n  </div>\n\n  <div class="row">\n\n    <div class="col-sm-12">\n      <div class="box">\n        <div class="box-title">\n\n          <h3><i class="fa fa-th-list"></i>Task Group Manager</h3>\n          <div class="actions abm-top-options">\n            <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n          </div>\n        </div>\n\n        <div id="group-manager-content" class="box-content nopadding abm-content">\n\n\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},2084:function(n,t,e){var a=e(690);n.exports=(a.default||a).template({1:function(n,t,e,a,o){var l,i=null!=t?t:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression;return'      <tr data-id="'+r("function"==typeof(l=null!=(l=e.taskGroupId||(null!=t?t.taskGroupId:t))?l:s)?l.call(i,{name:"taskGroupId",hash:{},data:o,loc:{start:{line:11,column:19},end:{line:11,column:34}}}):l)+'" >\n        <td class="stateId">'+r("function"==typeof(l=null!=(l=e.taskGroupId||(null!=t?t.taskGroupId:t))?l:s)?l.call(i,{name:"taskGroupId",hash:{},data:o,loc:{start:{line:12,column:28},end:{line:12,column:43}}}):l)+'</td>\n        <td class="stateName">'+r("function"==typeof(l=null!=(l=e.name||(null!=t?t.name:t))?l:s)?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:13,column:30},end:{line:13,column:38}}}):l)+'</td>\n        <td>\n            <button class="btn btn-green btn-edit" data-original-title="Edit Group">\n            <i class="fa fa-pencil-square-o"></i></button>\n            <button class="btn btn-red btn-delete" data-original-title="Delete Group">\n            <i class="fa fa-trash"></i></button>\n        </td>\n      </tr>\n'},compiler:[8,">= 4.3.0"],main:function(n,t,e,a,o){var l,i,s=null!=t?t:n.nullContext||{};return'<table id="'+n.escapeExpression("function"==typeof(i=null!=(i=e.id||(null!=t?t.id:t))?i:n.hooks.helperMissing)?i.call(s,{name:"id",hash:{},data:o,loc:{start:{line:1,column:11},end:{line:1,column:17}}}):i)+'" class="table table-hover table-nomargin table-bordered dataTable">\n  <thead>\n    <tr>\n      <th>Group Id</th>\n      <th>Name</th>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n'+(null!=(l=e.each.call(s,null!=t?t.data:t,{name:"each",hash:{},fn:n.program(1,o,0),inverse:n.noop,data:o,loc:{start:{line:10,column:4},end:{line:21,column:13}}}))?l:"")+"  </tbody>\n</table>\n"},useData:!0})},707:function(n,t,e){"use strict";(function(a){var o,l=e(693);void 0===(o=function(){return a.Model.extend({url:"myFileManager",getWorkflow:function(n,t){var e="Workflow/getWorkflow";n&&(e="Workflow/getWorkflow/"+n),(0,l.send)(e,null,{type:"GET"},t)},createTask:function(n,t){(0,l.send)("Workflow/createTask",n,{type:"POST"},t)},updateTask:function(n,t){(0,l.send)("Workflow/updateTask",n,{type:"PUT"},t)},updateTasksProperty:function(n,t){(0,l.send)("Workflow/updateTasksProperty",n,{type:"PUT"},t)},deleteTask:function(n,t){(0,l.send)("Workflow/deleteTask/"+n,null,{type:"DELETE"},t)},getTask:function(n,t){(0,l.send)("Workflow/getTask/"+n,null,null,t)},createState:function(n,t){(0,l.send)("Workflow/createState/",n,{type:"POST"},t)},listStates:function(n){(0,l.send)("Workflow/listStates",null,{type:"GET"},n)},getState:function(n,t){(0,l.send)("Workflow/getState/"+n,null,{type:"GET"},t)},updateState:function(n,t){(0,l.send)("Workflow/updateState",n,{type:"PUT"},t)},deleteState:function(n,t){(0,l.send)("Workflow/deleteState/"+n,null,{type:"DELETE"},t)},listTransitions:function(n){(0,l.send)("Workflow/listTransitions",null,{type:"GET"},n)},createTransition:function(n,t){(0,l.send)("Workflow/createTransition",n,{type:"POST"},t)},updateTransition:function(n,t){(0,l.send)("Workflow/updateTransition",n,{type:"PUT"},t)},deleteTransition:function(n,t){(0,l.send)("Workflow/deleteTransition/"+n,null,{type:"DELETE"},t)},listUsers:function(n){(0,l.send)("Workflow/listUsers",null,null,n)},getTaskGroup:function(n,t){(0,l.send)("Workflow/getTaskGroup/"+n,null,{type:"GET"},t)},listTaskGroups:function(n){(0,l.send)("Workflow/listTaskGroups",null,{type:"GET"},n)},createTaskGroup:function(n,t){(0,l.send)("Workflow/createTaskGroup",n,{type:"POST"},t)},updateTaskGroup:function(n,t){(0,l.send)("Workflow/updateTaskGroup",n,{type:"PUT"},t)},deleteTaskGroup:function(n,t){(0,l.send)("Workflow/DeleteTaskGroup/"+n,null,{type:"DELETE"},t)},updateOrder:function(n,t){(0,l.send)("Workflow/ChangeOrder",{values:n},{type:"PUT"},t)},updateRolTransitions:function(n,t){(0,l.send)("Workflow/updateRolTransitions",n,{type:"PUT"},t)},getWorkflowByGroups:function(n,t){(0,l.send)("Workflow/getWorkflowByGroups/",{values:n},{type:"POST"},t)},createComment:function(n,t){(0,l.send)("Workflow/createComment/",n,{type:"POST"},t)}})}.apply(t,[]))||(n.exports=o)}).call(this,e(218))}}]);