/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[260,33],{1327:function(t,e,n){"use strict";(function(a,o){var l,i;l=[n(703),n(707),n(2039),n(2040)],void 0===(i=function(t,e,l,i){return a.View.extend({el:o("#main"),workflowModel:new e,workflowController:new t,_uId:"",initialize:function(){},render:function(){o('.container-fluid.mainTask[data-rel="abm-states"]').remove(),this._uId=o.uuid();var t={id:this._uId},e=l(t);this.$el.append(e);var n=this,a=o("#states-manager-content");function i(){var t=o(window).height();n.h=t-280,a.height(n.h-o(".page-header").height())}o(window).resize(i),i(),o("div[data-id='"+n._uId+"']").find("div.data-table-options").append(o('<a href="#" class="btn btn-addState"><i class="fa fa-plus"></i> Add status</a>')),o("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-addState").on("click",function(){return n.addState(n),!1}),this.listStates()},saveOrder:function(t){for(var e=o("div[data-id='"+t._uId+"']").find("table tbody tr"),n=[],a=0;a<e.length;a++)n.push(o(e[a]).attr("data-id"));t.workflowModel.updateOrder(n,function(e){t.listStates()})},listStates:function(){var t=this,e=o("#states-manager-content");this.workflowModel.listStates(function(n){o("div[data-id='"+t._uId+"']").find("table").remove();var a=i({data:n});e.append(a),o("div[data-id='"+t._uId+"']").find("table").cubeTable(),o("div[data-id='"+t._uId+"']").find(".dataTables_scrollBody").css("height",t.h+"px"),t.addTableHandlers(o("div[data-id='"+t._uId+"']").find("table")),t.addHandlers(),o("div[data-id='"+t._uId+"']").find("table tbody").sortable({axis:"y",placeholder:"ui-state-highlight ui-sort-position",update:function(e,n){t.saveOrder(t)},helper:function(t,e){return e.children().each(function(){o(this).width(o(this).width())}),e}}).disableSelection(),o('.container-fluid.mainTask[data-rel="abm-states"]').show()})},addHandlers:function(){var t=this;o("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",function(){return t.close(t),!1})},addTableHandlers:function(t){var e=this;o(t).find("button.btn-edit").on("click",function(t){return e.editState(t,e),!1}),o(t).find("button.btn-delete").on("click",function(t){return e.deleteState(t,e),!1})},editState:function(t,e){var n=o(t.currentTarget).closest("tr").attr("data-id");e.workflowController.editState(n)},deleteState:function(t,e){var n=o(t.currentTarget).closest("tr").attr("data-id");e.workflowModel.deleteState(n,function(t){e.workflowController.showStatesManager()})},addState:function(t){t.workflowController.addState()},close:function(){var t=o("#currentTask").attr("data-rel");Promise.resolve().then(function(){var e=[n(684)];(function(e){(new e).removeTask(t)}).apply(null,e)}).catch(n.oe)},getThis:function(){return this.$el.find(".mainTask[data-rel='abm-states']")},onRemoveView:function(){this.el=o("#main"),this.events={}},onBeforeRemoveView:function(t,e){}})}.apply(e,l))||(t.exports=i)}).call(this,n(218),n(1))},2039:function(t,e,n){var a=n(690);t.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(t,e,n,a,o){var l;return'<div class="container-fluid mainTask" data-rel="abm-states" data-id="'+t.escapeExpression("function"==typeof(l=null!=(l=n.id||(null!=e?e.id:e))?l:n.helperMissing)?l.call(null!=e?e:t.nullContext||{},{name:"id",hash:{},data:o}):l)+'" data-type="tab-content">\n\n  <div class="page-header">\n  </div>\n\n  <div class="row">\n\n    <div class="col-sm-12">\n      <div class="box">\n        <div class="box-title">\n\n          <h3><i class="fa fa-th-list"></i>Status Manager</h3>\n          <div class="actions abm-top-options">\n            <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n          </div>\n        </div>\n\n        <div class="data-table-options" style="height: 50px;"></div>\n\n        <div id="states-manager-content" class="box-content nopadding abm-content">\n\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},2040:function(t,e,n){var a=n(690);t.exports=(a.default||a).template({1:function(t,e,n,a,o){var l,i=null!=e?e:t.nullContext||{},s=n.helperMissing,d="function",r=t.escapeExpression;return'      <tr data-id="'+r(typeof(l=null!=(l=n.taskStateId||(null!=e?e.taskStateId:e))?l:s)===d?l.call(i,{name:"taskStateId",hash:{},data:o}):l)+'" id="'+r(typeof(l=null!=(l=n.taskStateId||(null!=e?e.taskStateId:e))?l:s)===d?l.call(i,{name:"taskStateId",hash:{},data:o}):l)+'" data-position="">\n        <td class="order">'+r(typeof(l=null!=(l=n.pos||(null!=e?e.pos:e))?l:s)===d?l.call(i,{name:"pos",hash:{},data:o}):l)+'</td>\n        <td class="stateId">'+r(typeof(l=null!=(l=n.taskStateId||(null!=e?e.taskStateId:e))?l:s)===d?l.call(i,{name:"taskStateId",hash:{},data:o}):l)+'</td>\n        <td class="stateName">'+r(typeof(l=null!=(l=n.name||(null!=e?e.name:e))?l:s)===d?l.call(i,{name:"name",hash:{},data:o}):l)+'</td>\n        <td class="stateName"><div style="width:20px; height:20px; background-color:#'+r(typeof(l=null!=(l=n.color||(null!=e?e.color:e))?l:s)===d?l.call(i,{name:"color",hash:{},data:o}):l)+'"></div></td>\n        <td>\n            <button class="btn btn-green btn-edit" data-original-title="Edit Satus">\n            <i class="fa fa-pencil-square-o"></i></button>\n            <button class="btn btn-red btn-delete" data-original-title="Delete Status">\n            <i class="fa fa-trash"></i></button>\n        </td>\n      </tr>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,n,a,o){var l,i,s=null!=e?e:t.nullContext||{};return'<table id="'+t.escapeExpression("function"==typeof(i=null!=(i=n.id||(null!=e?e.id:e))?i:n.helperMissing)?i.call(s,{name:"id",hash:{},data:o}):i)+'" class="table table-hover table-nomargin table-bordered dataTable\ndataTable-row-reorder dataTable-noheader dataTable-nofooter">\n  <thead>\n    <tr>\n      <th>Order</th>\n      <th>Status id</th>\n      <th>Name</th>\n      <th>Color</th>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n'+(null!=(l=n.each.call(s,null!=e?e.data:e,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?l:"")+"  </tbody>\n</table>\n"},useData:!0})},707:function(t,e,n){"use strict";(function(a){var o,l=n(693);void 0===(o=function(){return a.Model.extend({url:"myFileManager",getWorkflow:function(t,e){var n="Workflow/getWorkflow";t&&(n="Workflow/getWorkflow/"+t),(0,l.send)(n,null,{type:"GET"},e)},createTask:function(t,e){(0,l.send)("Workflow/createTask",t,{type:"POST"},e)},updateTask:function(t,e){(0,l.send)("Workflow/updateTask",t,{type:"PUT"},e)},updateTasksProperty:function(t,e){(0,l.send)("Workflow/updateTasksProperty",t,{type:"PUT"},e)},deleteTask:function(t,e){(0,l.send)("Workflow/deleteTask/"+t,null,{type:"DELETE"},e)},getTask:function(t,e){(0,l.send)("Workflow/getTask/"+t,null,null,e)},createState:function(t,e){(0,l.send)("Workflow/createState/",t,{type:"POST"},e)},listStates:function(t){(0,l.send)("Workflow/listStates",null,{type:"GET"},t)},getState:function(t,e){(0,l.send)("Workflow/getState/"+t,null,{type:"GET"},e)},updateState:function(t,e){(0,l.send)("Workflow/updateState",t,{type:"PUT"},e)},deleteState:function(t,e){(0,l.send)("Workflow/deleteState/"+t,null,{type:"DELETE"},e)},listTransitions:function(t){(0,l.send)("Workflow/listTransitions",null,{type:"GET"},t)},createTransition:function(t,e){(0,l.send)("Workflow/createTransition",t,{type:"POST"},e)},updateTransition:function(t,e){(0,l.send)("Workflow/updateTransition",t,{type:"PUT"},e)},deleteTransition:function(t,e){(0,l.send)("Workflow/deleteTransition/"+t,null,{type:"DELETE"},e)},listUsers:function(t){(0,l.send)("Workflow/listUsers",null,null,t)},getTaskGroup:function(t,e){(0,l.send)("Workflow/getTaskGroup/"+t,null,{type:"GET"},e)},listTaskGroups:function(t){(0,l.send)("Workflow/listTaskGroups",null,{type:"GET"},t)},createTaskGroup:function(t,e){(0,l.send)("Workflow/createTaskGroup",t,{type:"POST"},e)},updateTaskGroup:function(t,e){(0,l.send)("Workflow/updateTaskGroup",t,{type:"PUT"},e)},deleteTaskGroup:function(t,e){(0,l.send)("Workflow/DeleteTaskGroup/"+t,null,{type:"DELETE"},e)},updateOrder:function(t,e){(0,l.send)("Workflow/ChangeOrder",{values:t},{type:"PUT"},e)},updateRolTransitions:function(t,e){(0,l.send)("Workflow/updateRolTransitions",t,{type:"PUT"},e)},getWorkflowByGroups:function(t,e){(0,l.send)("Workflow/getWorkflowByGroups/",{values:t},{type:"POST"},e)},createComment:function(t,e){(0,l.send)("Workflow/createComment/",t,{type:"POST"},e)}})}.apply(e,[]))||(t.exports=o)}).call(this,n(218))}}]);