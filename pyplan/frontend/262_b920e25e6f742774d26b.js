/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[262],{1049:function(e,t,n){"use strict";(function(a,o){var i,s,c=n(18);i=[n(220),n(663),n(2206)],void 0===(s=function(e,t,n){return a.View.extend({el:o("#main"),cumTime:0,categories:[],currentTable:void 0,points:[],pos:0,debugData:[],chart:void 0,render:function(){var e=this,a=n(this.options);(new t).show({title:"".concat((0,c.translate)("debug_node"),": ").concat(this.options.nodeTitle," (").concat(this.options.nodeId,")"),html:a,modalClass:"debugNodeView",onLoad:function(){var t=o("#main-modal"),n=t.find(".debugLog"),a=parseInt(.9*o(window).height()-200).toString();n.css("height","".concat(a,"px")),t.on("debug_info",(function(a,o){e.updateDebugInfo(t,n,o)})),t.find(".btnStartDebug").on("click",(function(){e.startDebug(t,n)})),n.on("click",".viewtable",(function(){e.showTable(t)})),(0,c.postRender)(t)},onClose:function(){e.points=[],e.categories=[],e.debugData=void 0,e.chart=void 0,e.currentTable&&e.currentTable.destroy()}})},startDebug:function(t,n){t.find(".btnStartDebug").attr("disabled",!0),t.find(".tableLog").hide(),n.text("").show(),t.find(".cumMem").text("-"),t.find(".cumTime").text("-"),t.find(".progressChartContainer").hide(),this.points=[],this.categories=[],this.cumTime=0,this.pos=0,this.debugData=[],this.currentTable&&this.currentTable.destroy(),(new e).previewNode(this.options.nodeId,(function(e){t.find(".btnStartDebug").attr("disabled",!1)}),(function(){t.find(".btnStartDebug").attr("disabled",!1)}),t.find("#reset_model_option_node").is(":checked")?"node":"model")},updateDebugInfo:function(e,t,n){if("endPreview"==n.action)o("<br>").appendTo(t),o("<span></span>").text("".concat((0,c.translate)("process_completed")," ")).appendTo(t),o('<a href="#"></a>').addClass("viewtable").text((0,c.translate)("view_table")).appendTo(t),t.scrollTop(t.prop("scrollHeight")),this.createChart(e);else{var a="<code ".concat("endCalc"==n.action?"title='Time:".concat(n.time,"'"):""," class='").concat(n.action,"'>").concat(n.action,"</code> ").concat(n.fromDynamic?'<code class="dynamic">dynamic</code>':""," <span>").concat(n.title," (").concat(n.node,")</span>");if(o("".concat(a,"<br>")).appendTo(t),t.scrollTop(t.prop("scrollHeight")),"endCalc"==n.action){this.cumTime+=parseFloat(n.time);var i=n.totalMemory>0?parseFloat(n.usedMemory/n.totalMemory*100):0;e.find(".cumMem").text("".concat(n.usedMemory.toFixed(2)," Gb - ").concat(i.toFixed(0),"%")),e.find(".cumTime").text("".concat(this.cumTime.toFixed(2)," sec.")),this.categories.push(n.node),this.points.push(n.usedMemory),n.pos=this.pos,n.fromDynamic&&(n.title='<code class="dynamic">dyn</code>'.concat(" ",n.title)),this.debugData.push(n),this.pos++}}},showTable:function(e){var t=this,n=e.find(".debugLog"),a=n.height()-50;n.hide();var i=e.find(".tableLog").show(),s=i.DataTable({searching:!0,scrollY:"".concat(a,"px"),scrollX:"100%",paging:!1,ordering:!0,info:!1,data:this.debugData,columns:[{name:"Pos",title:"Pos",data:"pos",width:"5%"},{name:"Node",title:"Node",data:"title",width:"40%"},{name:"Identifier",title:"Identifier",data:"node",width:"25%"},{name:"Time",title:"Time",data:"time",width:"15%",type:"num",render:function(e){return parseFloat(e).toFixed(3)}},{name:"Memory",title:"Mem",data:"usedMemory",width:"15%",type:"num",render:function(e){return parseFloat(e).toFixed(2)}}]});i.on("mouseover","tbody tr",(function(e){var n=parseInt(o(e.currentTarget).find("td").first().text());t.chart.tooltip.refresh(t.chart.series[0].data[n])})),e.find(".btnCopyToClipboad").show().on("click",(function(e){var n=t.debugData.map((function(e){return"".concat(e.pos,"\t").concat(e.title,"\t").concat(e.node,"\t").concat(e.time,"\t").concat(e.usedMemory)})).join("\n");document.createElement("textarea");(0,c.copyTextToClipboard)("Pos\tNode\tIdentifier\tTime\tContainer Memory\n".concat(n)),(0,c.showMessage)((0,c.translate)("copied_to_clipboard"),(0,c.translate)("_successfully_copied"),"success")})),this.currentTable=s},createChart:function(e){e.find(".progressChartContainer").show(),this.$el.find(".progress_chart").highcharts({chart:{type:"area",zoomType:"xy",height:e.find(".debugLog").height()-e.find(".cumTime").closest(".box").height()-60,marginTop:10},title:!1,xAxis:{categories:this.categories,labels:{enabled:!1}},yAxis:{title:{text:"Memory (gb)"}},legend:!1,exporting:{enabled:!1},credits:!1,series:[{name:"Memory (gb)",data:this.points,tooltip:{valueDecimals:2,valueSuffix:" gb"}}]}),this.chart=this.$el.find(".progress_chart").highcharts()}})}.apply(t,i))||(e.exports=s)}).call(this,n(219),n(1))},2206:function(e,t,n){var a=n(670);function o(e){return e&&(e.__esModule?e.default:e)}e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,t,a,i,s){var c=null!=t?t:e.nullContext||{},l=e.escapeExpression;return'<div class="row withBottomMargin">\n  <div class="col-sm-12">\n    <button class="btn btn-orange btn--icon btnStartDebug"><i class="fa fa-stopwatch"></i>'+l(o(n(668)).call(c,"start_debug",{name:"L",hash:{},data:s,loc:{start:{line:3,column:90},end:{line:3,column:109}}}))+'</button>\n\n    <input type="radio" class=\'icheck-me checked\' id="reset_model_option_node" name="reset_model_option"\n      data-skin="square" data-color="blue" checked="checked">\n    <label class=\'inline\' for="reset_model_option_node">'+l(o(n(668)).call(c,"reset_this_node",{name:"L",hash:{},data:s,loc:{start:{line:7,column:56},end:{line:7,column:79}}}))+'</label>\n\n    <input type="radio" class=\'icheck-me\' id="reset_model_option_model" name="reset_model_option" data-skin="square"\n      data-color="blue">\n    <label class=\'inline\' for="reset_model_option_model">'+l(o(n(668)).call(c,"reset_entire_model",{name:"L",hash:{},data:s,loc:{start:{line:11,column:57},end:{line:11,column:83}}}))+'</label>\n  </div>\n\n</div>\n\n<div class="row">\n  <div class="col-sm-6">\n    <pre class="debugLog"></pre>\n    <table class="table table-hover table-nomargin table-condensed tableLog nodisplay" width="100%"></table>\n    <a href="#" class="btnCopyToClipboad nodisplay">'+l(o(n(668)).call(c,"copy_to_clipboard",{name:"L",hash:{},data:s,loc:{start:{line:20,column:52},end:{line:20,column:77}}}))+'</a>\n  </div>\n  <div class="col-sm-6">\n\n    <div class="row">\n\n      <div class="col-sm-6">\n        <div class="box">\n          <div class="box-title">\n            <h3>\n              <i class="fa fa-clock"></i>\n              '+l(o(n(668)).call(c,"acc_calc_time",{name:"L",hash:{},data:s,loc:{start:{line:31,column:14},end:{line:31,column:35}}}))+'\n            </h3>\n          </div>\n          <div class="box-content">\n            <div class="row text-center">\n              <h2 class="name cumTime">-</h2>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="col-sm-6">\n        <div class="box">\n          <div class="box-title">\n            <h3>\n              <i class="fa fa-bars"></i>\n              '+l(o(n(668)).call(c,"container_memory",{name:"L",hash:{},data:s,loc:{start:{line:47,column:14},end:{line:47,column:38}}}))+'\n            </h3>\n          </div>\n          <div class="box-content">\n            <div class="row text-center">\n              <h2 class="name cumMem">-</h2>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="row">\n\n      <div class="col-sm-12 progressChartContainer nodisplay ">\n        <div class="box">\n          <div class="box-title">\n            <h3>\n              <i class="fa fa-chart-line"></i>\n              '+l(o(n(668)).call(c,"memory_progress",{name:"L",hash:{},data:s,loc:{start:{line:66,column:14},end:{line:66,column:37}}}))+'\n            </h3>\n          </div>\n          <div class="box-content">\n            <div class="row">\n              <div class="progress_chart">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</div>'},useData:!0})}}]);