/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[264,32],{1330:function(t,n,e){"use strict";(function(a,o){var l,i,s=e(18);l=[e(704),e(707),e(2044),e(2045)],void 0===(i=function(t,n,l,i){return a.View.extend({el:o("#main"),workflowModel:new n,workflowController:new t,_uId:"",initialize:function(){},render:function(){o('.container-fluid.mainTask[data-rel="abm-task-groups"]').remove(),this._uId=o.uuid();var t={id:this._uId},n=l(t);this.$el.append(n);var e=this,a=o("#group-manager-content");function i(){var t=o(window).height();e.h=t-280,a.height(e.h-o(".page-header").height())}o(window).resize(i),i(),this.listStates()},listStates:function(){var t=this,n=o("#group-manager-content");this.workflowModel.listTaskGroups(function(e){var a=i({data:e});n.append(a),t.addTableHandlers(o("div[data-id='"+t._uId+"']").find("table")),o("div[data-id='"+t._uId+"']").find("table").cubeTable(),o("div[data-id='"+t._uId+"']").find(".dataTables_scrollBody").css("height",t.h+"px"),o("div[data-id='"+t._uId+"']").find("div.data-table-options").append(o('<a href="#" class="btn btn-addTaskGroup"><i class="fa fa-plus"></i> Add task group</a>')),t.addHandlers()})},addHandlers:function(){var t=this;o("div[data-id='"+this._uId+"']").find("div.data-table-options a.btn-addTaskGroup").on("click",function(){return t.addTaskGroup(t),!1}),o("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",function(){return t.close(t),!1})},addTableHandlers:function(t){var n=this;o(t).find("button.btn-edit").on("click",function(t){return n.editTaskGroup(t,n),!1}),o(t).find("button.btn-delete").on("click",function(t){return n.deleteTaskGroup(t,n),!1})},editTaskGroup:function(t,n){var e=o(t.currentTarget).closest("tr").attr("data-id");n.workflowController.editTaskGroup(e)},deleteTaskGroup:function(t,n){var a=o(t.currentTarget).closest("tr").attr("data-id");e.e(5).then(function(){var t=[e(683)];(function(t){(new t).show({title:(0,s.translate)("_deleteTaskGroup"),text:(0,s.translate)("_confirmDeleteTaskGroup"),buttons:[{title:(0,s.translate)("yes"),css:"primary",code:"yes"},{title:(0,s.translate)("no"),code:"no"}],callback:function(t){"yes"==t&&(o("#mainLoading").show(),n.workflowModel.deleteTaskGroup(a,function(t){o("#mainLoading").hide(),n.workflowController.showTaskGroupManager()}))}})}).apply(null,t)}).catch(e.oe)},addTaskGroup:function(t){t.workflowController.addTaskGroup()},close:function(){var t=o("#currentTask").attr("data-rel");Promise.resolve().then(function(){var n=[e(684)];(function(n){(new n).removeTask(t)}).apply(null,n)}).catch(e.oe)},getThis:function(){return this.$el.find(".mainTask[data-rel='abm-states']")},onRemoveView:function(){this.el=o("#main"),this.events={}},onBeforeRemoveView:function(t,n){}})}.apply(n,l))||(t.exports=i)}).call(this,e(218),e(1))},2044:function(t,n,e){var a=e(690);t.exports=(a.default||a).template({compiler:[7,">= 4.0.0"],main:function(t,n,e,a,o){var l;return'<div class="container-fluid mainTask" data-rel="abm-task-groups" data-id="'+t.escapeExpression("function"==typeof(l=null!=(l=e.id||(null!=n?n.id:n))?l:e.helperMissing)?l.call(null!=n?n:t.nullContext||{},{name:"id",hash:{},data:o}):l)+'" data-type="tab-content">\n\n  <div class="page-header">\n  </div>\n\n  <div class="row">\n\n    <div class="col-sm-12">\n      <div class="box">\n        <div class="box-title">\n\n          <h3><i class="fa fa-th-list"></i>Task Group Manager</h3>\n          <div class="actions abm-top-options">\n            <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n          </div>\n        </div>\n\n        <div id="group-manager-content" class="box-content nopadding abm-content">\n\n\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n'},useData:!0})},2045:function(t,n,e){var a=e(690);t.exports=(a.default||a).template({1:function(t,n,e,a,o){var l,i=null!=n?n:t.nullContext||{},s=e.helperMissing,r=t.escapeExpression;return'      <tr data-id="'+r("function"==typeof(l=null!=(l=e.taskGroupId||(null!=n?n.taskGroupId:n))?l:s)?l.call(i,{name:"taskGroupId",hash:{},data:o}):l)+'" >\n        <td class="stateId">'+r("function"==typeof(l=null!=(l=e.taskGroupId||(null!=n?n.taskGroupId:n))?l:s)?l.call(i,{name:"taskGroupId",hash:{},data:o}):l)+'</td>\n        <td class="stateName">'+r("function"==typeof(l=null!=(l=e.name||(null!=n?n.name:n))?l:s)?l.call(i,{name:"name",hash:{},data:o}):l)+'</td>\n        <td>\n            <button class="btn btn-green btn-edit" data-original-title="Edit Group">\n            <i class="fa fa-pencil-square-o"></i></button>\n            <button class="btn btn-red btn-delete" data-original-title="Delete Group">\n            <i class="fa fa-trash"></i></button>\n        </td>\n      </tr>\n'},compiler:[7,">= 4.0.0"],main:function(t,n,e,a,o){var l,i,s=null!=n?n:t.nullContext||{};return'<table id="'+t.escapeExpression("function"==typeof(i=null!=(i=e.id||(null!=n?n.id:n))?i:e.helperMissing)?i.call(s,{name:"id",hash:{},data:o}):i)+'" class="table table-hover table-nomargin table-bordered dataTable">\n  <thead>\n    <tr>\n      <th>Group Id</th>\n      <th>Name</th>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n'+(null!=(l=e.each.call(s,null!=n?n.data:n,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o}))?l:"")+"  </tbody>\n</table>\n"},useData:!0})},707:function(t,n,e){"use strict";(function(a){var o,l=e(693);void 0===(o=function(){return a.Model.extend({url:"myFileManager",getWorkflow:function(t,n){var e="Workflow/getWorkflow";t&&(e="Workflow/getWorkflow/"+t),(0,l.send)(e,null,{type:"GET"},n)},createTask:function(t,n){(0,l.send)("Workflow/createTask",t,{type:"POST"},n)},updateTask:function(t,n){(0,l.send)("Workflow/updateTask",t,{type:"PUT"},n)},updateTasksProperty:function(t,n){(0,l.send)("Workflow/updateTasksProperty",t,{type:"PUT"},n)},deleteTask:function(t,n){(0,l.send)("Workflow/deleteTask/"+t,null,{type:"DELETE"},n)},getTask:function(t,n){(0,l.send)("Workflow/getTask/"+t,null,null,n)},createState:function(t,n){(0,l.send)("Workflow/createState/",t,{type:"POST"},n)},listStates:function(t){(0,l.send)("Workflow/listStates",null,{type:"GET"},t)},getState:function(t,n){(0,l.send)("Workflow/getState/"+t,null,{type:"GET"},n)},updateState:function(t,n){(0,l.send)("Workflow/updateState",t,{type:"PUT"},n)},deleteState:function(t,n){(0,l.send)("Workflow/deleteState/"+t,null,{type:"DELETE"},n)},listTransitions:function(t){(0,l.send)("Workflow/listTransitions",null,{type:"GET"},t)},createTransition:function(t,n){(0,l.send)("Workflow/createTransition",t,{type:"POST"},n)},updateTransition:function(t,n){(0,l.send)("Workflow/updateTransition",t,{type:"PUT"},n)},deleteTransition:function(t,n){(0,l.send)("Workflow/deleteTransition/"+t,null,{type:"DELETE"},n)},listUsers:function(t){(0,l.send)("Workflow/listUsers",null,null,t)},getTaskGroup:function(t,n){(0,l.send)("Workflow/getTaskGroup/"+t,null,{type:"GET"},n)},listTaskGroups:function(t){(0,l.send)("Workflow/listTaskGroups",null,{type:"GET"},t)},createTaskGroup:function(t,n){(0,l.send)("Workflow/createTaskGroup",t,{type:"POST"},n)},updateTaskGroup:function(t,n){(0,l.send)("Workflow/updateTaskGroup",t,{type:"PUT"},n)},deleteTaskGroup:function(t,n){(0,l.send)("Workflow/DeleteTaskGroup/"+t,null,{type:"DELETE"},n)},updateOrder:function(t,n){(0,l.send)("Workflow/ChangeOrder",{values:t},{type:"PUT"},n)},updateRolTransitions:function(t,n){(0,l.send)("Workflow/updateRolTransitions",t,{type:"PUT"},n)},getWorkflowByGroups:function(t,n){(0,l.send)("Workflow/getWorkflowByGroups/",{values:t},{type:"POST"},n)},createComment:function(t,n){(0,l.send)("Workflow/createComment/",t,{type:"POST"},n)}})}.apply(n,[]))||(t.exports=o)}).call(this,e(218))}}]);