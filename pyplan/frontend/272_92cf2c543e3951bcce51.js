/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[272,33],{1303:function(t,n,e){"use strict";(function(a,o){var l,i;l=[e(703),e(706),e(783),e(709),e(723),e(2073)],void 0===(i=function(t,n,l,i,s,r){return a.View.extend({el:o("#main"),_uId:"",permisions:[],processLength:null,workflowModel:new n,workflowController:new t,render:function(t){o("div[data-rel='abm-transitions-rol']").remove();var n=this;this._uId=o.uuid(),this.workflowModel.listTransitions(function(e){var a={id:n._uId,dataRel:"abm-transitions-rol",tmpClass:"rol-edit",title:"Transitions by rol"},l={transitions:e},d=i(a),u=s(),c=r(l);function p(){var t=o(window).height();n.h=t-320,o("div[data-id='"+n._uId+"']").find(".dataTables_scrollBody").css("height",n.h+"px")}n.$el.append(d),o("div[data-id='"+n._uId+"']").find("div.abm-content").append(u),o("div[data-id='"+n._uId+"']").find("div.form-content").append(c),t&&o("div[data-rel='abm-transitions-rol']").css("display","none"),n.addHandlers(o("div[data-id='"+n._uId+"']")),n.initRoles(e),o(window).resize(p),p()})},initRoles:function(t){var n=this,e=__currentSession.companyId;(new l).List(e,function(e){if(e.length>0){for(var a,l=[],i=[{value:"",text:""}],s=0;s<e.length;s++)i[s]={value:e[s].rolId,text:e[s].name},l.push(e[s].rolId);o("div[data-id='"+n._uId+"']").find("table").dataTable({fnRowCallback:function(n,e,l,s){a=[];for(var r=this.fnGetPosition(n),d=0;d<t[r].roles.length;d++)a.push(t[r].roles[d].rolId);return o("td:eq(1) a",n).attr("data-value",a.toString()),o("td:eq(1) a",n).editable({pk:1,value:a,source:i,mode:"inline",success:function(t,n){o(this).attr("data-value",n)}}),n}})}})},refreshList:function(t){var n=o('div[data-rel="abm-transitions-rol"]').find("table tbody").empty();(n=o('div[data-rel="abm-transitions-rol"] .processByRol').dataTable()).fnClearTable(),n.fnDestroy(),o("div[data-rel='abm-transitions-rol'] .processByRol").remove();var e=r({transitions:t});o("div[data-rel='abm-transitions-rol']").find("div.form-content").append(e),o("div[data-rel='abm-transitions-rol']").find("table").cubeTable(),this.addHandlers(o("div[data-rel='abm-transitions-rol']"))},save:function(t){var n,e={values:[]};o("div[data-id='"+(t=this)._uId+"']").find("table").DataTable().rows().nodes().each(function(t,a){var l=t,i=o(l).attr("from-id"),s=o(l).attr("to-id"),r=o(l).attr("transition-id");n={taskTransitionId:r,fromStateId:i,toStateId:s,roles:[]};var d=o(l).find("a.editable").attr("data-value");if(d&&d.length>0)for(var u=d.split(","),c=0;c<u.length;c++){var p={rolId:u[c]};n.roles.push(p)}e.values.push(n)}),t.workflowModel.updateRolTransitions(e,function(n){t.cancel()})},cancel:function(){var t=o("#currentTask").attr("data-rel");Promise.resolve().then(function(){var n=[e(684)];(function(n){(new n).removeTask(t)}).apply(null,n)}).catch(e.oe)},addHandlers:function(t){var n=this;o("div[data-id='"+this._uId+"']").find("form").on("submit",o.proxy(function(){return event.preventDefault(),this.save(n),!1},this)),o("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",o.proxy(function(){return this.cancel(),!1},this)),o("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(n,l))||(t.exports=i)}).call(this,e(218),e(1))},2073:function(t,n,e){var a=e(690);t.exports=(a.default||a).template({1:function(t,n,e,a,o){var l,i,s=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,d="function",u=t.escapeExpression;return'                <tr from-id="'+u(typeof(i=null!=(i=e.fromStateId||(null!=n?n.fromStateId:n))?i:r)===d?i.call(s,{name:"fromStateId",hash:{},data:o,loc:{start:{line:12,column:29},end:{line:12,column:44}}}):i)+'" to-id="'+u(typeof(i=null!=(i=e.toStateId||(null!=n?n.toStateId:n))?i:r)===d?i.call(s,{name:"toStateId",hash:{},data:o,loc:{start:{line:12,column:53},end:{line:12,column:66}}}):i)+'" transition-id="'+u(typeof(i=null!=(i=e.taskTransitionId||(null!=n?n.taskTransitionId:n))?i:r)===d?i.call(s,{name:"taskTransitionId",hash:{},data:o,loc:{start:{line:12,column:83},end:{line:12,column:103}}}):i)+'" data-sortable="false">\n                  <td>\n                    From <strong>'+u(typeof(i=null!=(i=e.fromStateName||(null!=n?n.fromStateName:n))?i:r)===d?i.call(s,{name:"fromStateName",hash:{},data:o,loc:{start:{line:14,column:33},end:{line:14,column:50}}}):i)+"</strong> to <strong>"+u(typeof(i=null!=(i=e.toStateName||(null!=n?n.toStateName:n))?i:r)===d?i.call(s,{name:"toStateName",hash:{},data:o,loc:{start:{line:14,column:71},end:{line:14,column:86}}}):i)+'</strong>\n                  </td>\n\n                  <td>\n                    <a href="#" class="editable editable-click rolesList" data-type="checklist" data-original-title=\'Roles\'>\n'+(null!=(l=e.each.call(s,null!=n?n.roles:n,{name:"each",hash:{},fn:t.program(2,o,0),inverse:t.noop,data:o,loc:{start:{line:19,column:24},end:{line:21,column:33}}}))?l:"")+"                    </a>\n                  </td>\n\n                </tr>\n\n"},2:function(t,n,e,a,o){var l,i=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,r=t.escapeExpression;return'                            <div data-value="'+r("function"==typeof(l=null!=(l=e.rolId||(null!=n?n.rolId:n))?l:s)?l.call(i,{name:"rolId",hash:{},data:o,loc:{start:{line:20,column:45},end:{line:20,column:54}}}):l)+'">'+r("function"==typeof(l=null!=(l=e.name||(null!=n?n.name:n))?l:s)?l.call(i,{name:"name",hash:{},data:o,loc:{start:{line:20,column:56},end:{line:20,column:64}}}):l)+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(t,n,e,a,o){var l;return'\n\n          <table class="table table-hover table-condensed dataTable dataTable-scroll-x processByRol dataTable-nosort">\n            <thead>\n              <tr>\n                <th width="60%">Transitions</th>\n                <th width="40%">Roles</th>\n              </tr>\n            </thead>\n            <tbody>\n'+(null!=(l=e.each.call(null!=n?n:t.nullContext||{},null!=n?n.transitions:n,{name:"each",hash:{},fn:t.program(1,o,0),inverse:t.noop,data:o,loc:{start:{line:11,column:14},end:{line:27,column:23}}}))?l:"")+"            </tbody>\n          </table>\n"},useData:!0})},706:function(t,n,e){"use strict";(function(a){var o,l=e(693);void 0===(o=function(){return a.Model.extend({url:"myFileManager",getWorkflow:function(t,n){var e="Workflow/getWorkflow";t&&(e="Workflow/getWorkflow/"+t),(0,l.send)(e,null,{type:"GET"},n)},createTask:function(t,n){(0,l.send)("Workflow/createTask",t,{type:"POST"},n)},updateTask:function(t,n){(0,l.send)("Workflow/updateTask",t,{type:"PUT"},n)},updateTasksProperty:function(t,n){(0,l.send)("Workflow/updateTasksProperty",t,{type:"PUT"},n)},deleteTask:function(t,n){(0,l.send)("Workflow/deleteTask/"+t,null,{type:"DELETE"},n)},getTask:function(t,n){(0,l.send)("Workflow/getTask/"+t,null,null,n)},createState:function(t,n){(0,l.send)("Workflow/createState/",t,{type:"POST"},n)},listStates:function(t){(0,l.send)("Workflow/listStates",null,{type:"GET"},t)},getState:function(t,n){(0,l.send)("Workflow/getState/"+t,null,{type:"GET"},n)},updateState:function(t,n){(0,l.send)("Workflow/updateState",t,{type:"PUT"},n)},deleteState:function(t,n){(0,l.send)("Workflow/deleteState/"+t,null,{type:"DELETE"},n)},listTransitions:function(t){(0,l.send)("Workflow/listTransitions",null,{type:"GET"},t)},createTransition:function(t,n){(0,l.send)("Workflow/createTransition",t,{type:"POST"},n)},updateTransition:function(t,n){(0,l.send)("Workflow/updateTransition",t,{type:"PUT"},n)},deleteTransition:function(t,n){(0,l.send)("Workflow/deleteTransition/"+t,null,{type:"DELETE"},n)},listUsers:function(t){(0,l.send)("Workflow/listUsers",null,null,t)},getTaskGroup:function(t,n){(0,l.send)("Workflow/getTaskGroup/"+t,null,{type:"GET"},n)},listTaskGroups:function(t){(0,l.send)("Workflow/listTaskGroups",null,{type:"GET"},t)},createTaskGroup:function(t,n){(0,l.send)("Workflow/createTaskGroup",t,{type:"POST"},n)},updateTaskGroup:function(t,n){(0,l.send)("Workflow/updateTaskGroup",t,{type:"PUT"},n)},deleteTaskGroup:function(t,n){(0,l.send)("Workflow/DeleteTaskGroup/"+t,null,{type:"DELETE"},n)},updateOrder:function(t,n){(0,l.send)("Workflow/ChangeOrder",{values:t},{type:"PUT"},n)},updateRolTransitions:function(t,n){(0,l.send)("Workflow/updateRolTransitions",t,{type:"PUT"},n)},getWorkflowByGroups:function(t,n){(0,l.send)("Workflow/getWorkflowByGroups/",{values:t},{type:"POST"},n)},createComment:function(t,n){(0,l.send)("Workflow/createComment/",t,{type:"POST"},n)}})}.apply(n,[]))||(t.exports=o)}).call(this,e(218))},709:function(t,n,e){var a=e(690);t.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(t,n,e,a,o){var l,i=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,r=t.escapeExpression;return'<div class="abm-base-tmp '+r("function"==typeof(l=null!=(l=e.tmpClass||(null!=n?n.tmpClass:n))?l:s)?l.call(i,{name:"tmpClass",hash:{},data:o,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):l)+' container-fluid mainTask" data-id="'+r("function"==typeof(l=null!=(l=e.id||(null!=n?n.id:n))?l:s)?l.call(i,{name:"id",hash:{},data:o,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):l)+'" data-rel="'+r("function"==typeof(l=null!=(l=e.dataRel||(null!=n?n.dataRel:n))?l:s)?l.call(i,{name:"dataRel",hash:{},data:o,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):l)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+r("function"==typeof(l=null!=(l=e.title||(null!=n?n.title:n))?l:s)?l.call(i,{name:"title",hash:{},data:o,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):l)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},723:function(t,n,e){var a=e(690);function o(t){return t&&(t.__esModule?t.default:t)}t.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(t,n,a,l,i){var s=null!=n?n:t.nullContext||{},r=t.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+r(o(e(688)).call(s,"_save",{name:"L",hash:{},data:i,loc:{start:{line:6,column:63},end:{line:6,column:76}}}))+'</button>\n        <button type="button" class="btn btn-cancel">'+r(o(e(688)).call(s,"cancel",{name:"L",hash:{},data:i,loc:{start:{line:7,column:53},end:{line:7,column:67}}}))+"</button>\n    </div>\n</form>\n"},useData:!0})},783:function(t,n,e){"use strict";(function(a){var o,l=e(693);void 0===(o=function(){return a.Model.extend({list:function(t,n){var e=null!=t?"?company_id=".concat(t):"";(0,l.send)("groups/".concat(e),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},get:function(t,n){(0,l.send)("groups/".concat(t,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},update:function(t,n,e){(0,l.send)("groups/".concat(t,"/"),JSON.stringify(n),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},e)},create:function(t,n){(0,l.send)("groups/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n)},delete:function(t,n){(0,l.send)("groups/".concat(t,"/"),null,{type:"DELETE"},n)},listPermissions:function(t){(0,l.send)("permissions/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},t)},updateGroupPermissions:function(t,n){(0,l.send)("groups/update_groups_permissions/",JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n)}})}.apply(n,[]))||(t.exports=o)}).call(this,e(218))}}]);