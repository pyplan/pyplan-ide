/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{2119:function(e,n,a){"use strict";(function(t,i){var o,d,r=a(18);a(2120),o=[a(219),a(752),a(2122)],void 0===(d=function(e,n,o){return t.View.extend({$el:null,currentNodeId:"",diagram:void 0,dic:{},currentNode:null,fromWindowResize:!1,render:function(){var e=this,n=o();i("#nodeWizardTab").append(n),this.$el=i(".nodeWizardTab"),e.createEditor(),e.dockedWindowWidth=i(".mainTask.influence-diagram .dockInfluenceDiagramProperty").width();e.maxCodeWidth=70*e.dockedWindowWidth/100,i(".codeArea").resizable({minWidth:200,maxWidth:e.maxCodeWidth,handles:"e",create:function(n,a){i("#nodeWizardEval").width(e.dockedWindowWidth-e.maxCodeWidth-12),e.$el.find(".resultArea").width(e.dockedWindowWidth-e.maxCodeWidth-12)},resize:function(n,a){i("#nodeWizardEval").width(e.dockedWindowWidth-e.$el.find(".codeArea").width()-12),e.$el.find(".resultArea").width(e.dockedWindowWidth-e.$el.find(".codeArea").width()-12)},stop:function(n,a){i("#nodeWizardEval").width(e.dockedWindowWidth-e.$el.find(".codeArea").width()-12),e.$el.find(".resultArea").width(e.dockedWindowWidth-e.$el.find(".codeArea").width()-12),i.cookie("resultAreaWidth",e.dockedWindowWidth-e.$el.find(".codeArea").width()-12,{expires:365})}}),(0,r.isIE)()&&(i(".mainTask.influence-diagram").off("diagramClick"),i(".mainTask.influence-diagram").on("diagramClick",function(n){var a=ace.edit("nodeWizardDef");if(a&&e.nodeData&&e.currentValue){var t=a.getValue();if(e.currentValue!==t&&null!==t&&t){var o=i(".nodeWizardDef").attr("data-rel");e.updateNodePropertyNew(e.nodeData,o,t)}}})),i.isEmptyObject(e.options.dic)?i(".moreChangesContainer").hide():i(".moreChangesContainer").show(),i(".dropdownPending").perfectScrollbar(),this.$el.on("updateNodeId",function(n,a){e.nodeFullData.id=a}),this.$el.on("clickNode",function(n,a){var t=a.nodeFullData,o=a.nodeProperties,d=a.forcePreview,r=a.isDecision;e.$el.find(".save, .cancel").attr("disabled",!0),e.nodeFullData=t,e.currentNode=o;var l="true"===e.getNodeProperty(o.properties,"isCalc").value.toLowerCase();!0===r&&delete e.options.dic[e.currentNode.node];var s=function(){return e.previewNode(d)};e.options.dic[e.currentNode.node]?(e.currentNode.properties.forEach(function(n){var a=e.options.dic[e.currentNode.node].properties.find(function(e){return e.name===n.name});a&&(n.value=a.value)}),e.populateData(e.currentNode,s),i(".btnsConfirmChanges").show(),i('.btn[data-action="run"]').addClass("btn-warning").removeClass("btn-info"),i(".resultPreview").css("color","#999"),i(".moreChangesContainer").show(),i(".btnDataFrame").hide(),i("body").trigger("pendingChanges",[!0])):(e.populateData(e.currentNode,s),i(".btnsConfirmChanges").hide(),i.isEmptyObject(e.options.dic)&&i(".moreChangesContainer").hide()),l?(i('.btn[data-action="run"]').addClass("btn-info").removeClass("btn-warning"),i(".resultPreview").css("color","inherit")):(i('.btn[data-action="run"]').addClass("btn-warning").removeClass("btn-info"),i(".resultPreview").css("color","#999"))}),this.$el.on("deleteSelectedNodes",function(n,a){i.each(a,function(n,a){delete e.options.dic[a]}),i.isEmptyObject(e.options.dic)&&i(".moreChangesContainer").hide()}),i(".mainTask.influence-diagram").on("addNodeToWizardDefinition",function(n,a){if(i(".nodeWizardTab").is(":visible")){var t=ace.edit("nodeWizardDef");t&&(t.insert(a),e.updateNodePropertyNew(e.nodeData,"definition",t.getValue()))}}),this.$el.on("updateSizes",function(n,a){e.fromWindowResize=!1,e.updateSizes()}),i(window).on("resize",function(){event.target==window&&"resize"==event.type&&(e.fromWindowResize=!0,e.updateSizes(event,{tipo:"windowResize"}))}),this.updateSizes(),this.addHandlers()},previewNode:function(n){var a=this,t=i("#nodeWizardEval"),o=this.nodeData.node,d=t.find(".btnDataFrame"),r=t.find(".btnStopProcess"),l=t.find(".btnIndex"),s=t.find(".btnCopyAsValues"),c=t.find(".atomic"),u=c.find("pre");(d.hide(),s.hide(),l.hide(),c.hide(),u.empty(),n||"true"===this.getNodeProperty(this.nodeData.properties,"isCalc").value.toLowerCase())?(i('button[data-action="debug"]').attr("disabled",!0),r.show(),(new e).previewNode(o,function(e){if(i('button[data-action="run"]').removeClass("btn-warning").addClass("btn-info"),i('button[data-action="debug"]').attr("disabled",!1),i(".resultPreview").css("color","inherit"),r.hide(),t.find(".evaluating").hide(),e){c.show();var n="";if(n=e.console?e.console+e.preview:e.preview,u.text(n),e.resultType){if(d.toggle(!a.options.dic[a.currentNode.node]&&["<class 'pandas.core.frame.dataframe'>"].includes(e.resultType.toLowerCase())),["<class 'pandas.core.indexes.base.index'>"].includes(e.resultType.toLowerCase())){var o=a.getNodeProperty(a.nodeData.properties,"definition").value.replace(/ /g,"").replace(/'/g,'"');l.toggle(o.startsWith('result=pd.Index(["'))}s.toggle(["<class 'xarray.core.dataarray.dataarray'>","<class 'pandas.core.indexes.base.index'>"].includes(e.resultType.toLowerCase()))}}},function(e){t.find(".evaluating").hide(),t.find(".error div").text(e),t.find(".error").show(),r.hide(),i('button[data-action="debug"]').attr("disabled",!1)})):(r.hide(),d.hide(),l.hide(),s.hide())},updateSizes:function(e){if(this.$el){var n=this;if(0==i("#nodeWizardDef").length)return;var a=ace.edit("nodeWizardDef"),t=i(".mainTask.influence-diagram .dockInfluenceDiagramProperty").height();n.dockedWindowWidth=i(".mainTask.influence-diagram .dockInfluenceDiagramProperty").width();var o=i(".leftCol").width(),d=t-70;i(a.container).height(d),i(a.container).find(".ace_content").height(d),i(a.container).find(".ace_content").width(n.dockedWindowWidth-(o+50)),a.resize();var r=0;n.maxCodeWidth=70*n.dockedWindowWidth/100,r=n.maxCodeWidth,i(".codeArea").resizable("option","maxWidth",n.maxCodeWidth);var l=i.cookie("resultAreaWidth")?n.dockedWindowWidth-parseInt(i.cookie("resultAreaWidth")):r;i.cookie("resultAreaWidth")&&parseInt(i.cookie("resultAreaWidth"))<=n.maxCodeWidth&&(r=l),0===n.$el.find(".codeArea").width()?n.$el.find(".codeArea").width(r):(i(".dockInfluenceDiagramProperty").trigger("updateWidth"),1==n.fromWindowResize&&(setTimeout(function(){i(".codeArea").resizable("option","maxWidth",n.maxCodeWidth),n.$el.find(".codeArea").width(r),n.dockedWindowWidth=i(".mainTask.influence-diagram .dockInfluenceDiagramProperty").width(),n.maxCodeWidth=70*n.dockedWindowWidth/100,i("#nodeWizardEval").width(n.dockedWindowWidth-r-12),n.$el.find(".resultArea").width(n.dockedWindowWidth-r-12),i(".dockInfluenceDiagramProperty").trigger("updateWidth")},800),n.fromWindowResize=!1)),this.$el.find(".resultArea").height(d),this.$el.find(".resultPreview").height(d-20)}},populateData:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,t=ace.edit("nodeWizardDef");if(t&&t.blur(),setTimeout(function(){a.loadData(e),"function"==typeof n&&n()},500),e.disabledFields)for(var i=0;i<e.disabledFields.length;i++)this.$el.find("#"+e.disabledFields[i]).prop("disabled",!0),t&&"nodeWizardDef"==e.disabledFields[i]&&a.disableEditor(t)},loadData:function(e){this.nodeData=e,i("#nodeTypeIcon").removeClass(function(e,n){return(n.match(/(^|\s)nodeClassIcon-\S+/g)||[]).join(" ")}),i("#nodeTypeIcon").addClass("nodeClassIcon-"+e.properties[2].value.toLowerCase());var n=e.properties[4].value,a=ace.edit("nodeWizardDef");a.setValue(""),a.getSession().setUseWrapMode(!0);var t=e.properties[2].value.toUpperCase();["MODULE","LIBRARY","LINKMODULE","MODEL","TEXT","PICTURE"].includes(t)?this.disableEditor(a):(this.onBrowserMode()?this.disableEditor(a):this.enableEditor(a),null===n&&(n=""),a.setValue(n,1),this.currentValue=n,a.session.setValue(n),a.renderer.updateFull()),""!==e.properties[6].value?this.loadErrorTab(e.properties[5].value):this.cleanErrorTab(),this.updateSizes()},disableEditor:function(e){e.setReadOnly(!0),i(e.container).addClass("aceDisabled")},enableEditor:function(e){e.setReadOnly(!1),i(e.container).removeClass("aceDisabled")},createEditor:function(){var n=this,a=i(".nodeWizardDef").get()[0],t=ace.require("ace/ext/language_tools"),o=ace.edit(a);o.on("change",function(e){var a=o.getValue(),t=i(".nodeWizardDef").attr("data-rel");o.curOp&&o.curOp.command.name?n.updateNodePropertyNew(n.nodeData,t,a):i(".ace_replacebtn").is(":visible")&&(n.updateNodePropertyNew(n.nodeData,t,a),o.focus())}),o.setTheme("ace/theme/cubeplan"),o.session.setMode("ace/mode/python"),o.$blockScrolling=1/0,o.setHighlightActiveLine(!1),o.commands.addCommand({name:"saveDefinition",bindKey:{win:"Ctrl-s",mac:"Command-s"},exec:function(e){setTimeout(function(){e.focus(),i(".btnSaveModel").is(":visible")&&i(".btnSaveModel").trigger("click")},100)}}),o.commands.addCommand({name:"saveDefinitionEnter",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:function(e){setTimeout(function(){e.focus(),n.options.dic[n.currentNode.node]?n.saveModel(function(){n.previewNode(!0)}):n.previewNode(!0)},100)}}),o.commands.addCommand({name:"onlySaveDefinitionEnter",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:function(e){setTimeout(function(){e.focus(),n.options.dic[n.currentNode.node]&&n.saveModel(function(){})},100)}}),o.commands.addCommand({name:"toggleShowIdentifier",bindKey:{win:"Ctrl-y",mac:"Command-y"},exec:function(e){i(".mainTask.influence-diagram").trigger("onKeyDown",["ctrl+y"])}}),o.commands.addCommand({name:"gotoDef",bindKey:{win:"Ctrl-h",mac:"Command-h"},exec:function(e){if(e.getValue()){var a=e.getSelection(),t=e.getSession();if(a){var i=a.getWordRange();try{var o=t.getTextRange(i);o&&n.$el.closest(".influence-diagram").find(".diagram-area").trigger("navigateToNode",[o])}catch(e){}}}}});var d=o.completers?o.completers.slice(0):[],r={getCompletions:function(n,a,t,i,o){for(var r=[],l=0;l<d.length;l++)d[l].getCompletions(n,a,t,i,function(e,n){n&&(r=r.concat(n))});(new e).SearchForAutocomplete(i,function(e){var n=a.$mode.$highlightRules.completions;n||(n=[]);var t=n.concat(r);e&&((t=t.concat(e.map(function(e){return{caption:e.id,value:e.completeText,meta:e.nodeClass,docHTML:"function"==e.nodeClass||"class"==e.nodeClass||"helper"==e.nodeClass||"method"==e.nodeClass?"<b>"+(e.params?e.params:e.name)+"</b><hr>"+(e.description?e.description:""):"<b>"+e.name+"</b>",params:e.params}}))).forEach(function(e){if(!e.snippet){var n=null;if("function"!=e.meta&&"class"!=e.meta&&"SysFunction"!=e.meta&&"helper"!=e.meta&&"method"!=e.meta||!e.params)"index value"!=e.meta&&"cube axis"!=e.meta&&"dataframe column"!=e.meta||!e.params||(n=e.value+e.params,e.snippet=n);else{n=e.value+"( ";for(var a=1,t=e.params.split(";"),i=0;i<t.length;i++){var o=t[i];if(o)for(var d=o.split(","),r=0;r<d.length;r++){var l=d[r];if(l&&-1==l.toLowerCase().indexOf("hidden")){a>1&&(n+=", ");var s=l.replace("(","").replace(")","").trim();s.indexOf(":")>=0&&(s=s.split(":")[0]),n+="${"+a+":"+s+"}",a++}}}n+=" )",e.snippet=n}}}),o(null,t))})},getDocTooltip:function(e){"snippet"!=e.type||e.docHTML||(e.docHTML=["<b>",e.caption,"</b>","<hr></hr>",e.snippet].join(""))}};t.addCompleter(r),o.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!1,showPrintMargin:!1})},addHandlers:function(){var n=this,t=this;this.$el.find(".commandBtns .btn").on("click",function(o){switch(i(o.currentTarget).attr("data-action")){case"run":i(o.currentTarget).removeClass("btn-warning").addClass("btn-info"),t.currentNode&&(t.options.dic[t.currentNode.node]?n.saveModel(function(){n.previewNode(!0)}):n.previewNode(!0));break;case"debug":a.e(11).then(function(){var e=[a(695)];(function(e){var a=new e,t=n.nodeData.node,i=n.nodeData.properties.find(function(e){return"title"===e.name}).value||"";a.debugNode({nodeId:t,nodeTitle:i})}).apply(null,e)}).catch(a.oe);break;case"stop":i(o.currentTarget).hide(),(new e).stopProcess();break;case"wiz-columns":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).selectColumsWizard({title:"Select Columns",bodyParams:{wizard:"SelectColumns",action:"getColumnList",params:{nodeId:t.currentNode.node}},confirm:{wizard:"SelectColumns",action:"generateDefinition",params:{nodeId:t.currentNode.node,columns:[]}}},function(){Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData,!1,".btnTabWizard",!0)}).apply(null,e)}).catch(a.oe)})}).apply(null,e)}).catch(a.oe);break;case"wiz-rows":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).selectRowsWizard({title:"Filter",bodyParams:{wizard:"SelectRows",action:"getColumnList",params:{nodeId:t.currentNode.node,includeColumnList:!0}},confirm:{wizard:"SelectRows",action:"generateDefinition",params:{nodeId:t.currentNode.node,filters:[]}}},function(){Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData,!1,".btnTabWizard",!0)}).apply(null,e)}).catch(a.oe)})}).apply(null,e)}).catch(a.oe);break;case"wiz-calc":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).calculatedFieldWizard({title:"Calculated field",bodyParams:{wizard:"CalculatedField",action:"getColumnList",params:{nodeId:t.currentNode.node}},confirm:{wizard:"CalculatedField",action:"generateDefinition",params:{nodeId:t.currentNode.node}}},function(){Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData,!1,".btnTabWizard",!0)}).apply(null,e)}).catch(a.oe)})}).apply(null,e)}).catch(a.oe);break;case"wiz-pd-index":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).pandasIndexWizard({title:"Edit Index",definition:t.getNodeProperty(t.nodeData.properties,"definition").value,onBrowserMode:t.onBrowserMode()},function(e){t.updateNodeProperty(t.nodeData,"definition",e,function(){return t.previewNode(!0)})})}).apply(null,e)}).catch(a.oe);break;case"wiz-copyasvalues":(new e).copyAsValues(t.currentNode.node,!o.ctrlKey,function(e){t.$el.closest(".influence-diagram").trigger("refreshView"),o.ctrlKey&&Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData,!1,".btnTabWizard",!0)}).apply(null,e)}).catch(a.oe)});break;case"wiz-dataframe-index":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).setDataframeIndex({title:"Set  Index",bodyParams:{wizard:"DataframeIndex",action:"getColumnList",params:{nodeId:t.currentNode.node}},confirm:{wizard:"DataframeIndex",action:"generateDefinition",params:{nodeId:t.currentNode.node,columns:[]}}},function(){Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData,!1,".btnTabWizard",!0)}).apply(null,e)}).catch(a.oe)})}).apply(null,e)}).catch(a.oe);break;case"wiz-dataframe-groupby":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).dataframeGroupby({title:"Group/Aggregate",bodyParams:{wizard:"DataframeGroupby",action:"getColumnList",params:{nodeId:t.currentNode.node}},confirm:{wizard:"DataframeGroupby",action:"generateDefinition",params:{nodeId:t.currentNode.node,columns:[],agg:{}}}},function(){Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData,!1,".btnTabWizard",!0)}).apply(null,e)}).catch(a.oe)})}).apply(null,e)}).catch(a.oe);break;case"wiz-dataarray-from-pandas":Promise.resolve().then(function(){var e=[a(713)];(function(e){(new e).dataarrayFromPandas({title:"Create Dataarray",bodyParams:{wizard:"DataarrayFromPandas",action:"getDataframeSchema",params:{nodeId:t.currentNode.node}},confirm:{wizard:"DataarrayFromPandas",action:"generateDefinition",params:{nodeId:t.currentNode.node,indexes:[],agg:{}}}},function(e){i(".mainTask.influence-diagram .diagram-area").trigger("navigateToNode",[e,!0])})}).apply(null,e)}).catch(a.oe)}}),i(".dockInfluenceDiagramProperty").find(".btnCancel").on("click",function(e){delete t.options.dic[t.currentNode.node],Promise.resolve().then(function(){var e=[a(739)];(function(e){(new e).loadDefinitionTab(t.nodeFullData)}).apply(null,e)}).catch(a.oe)}),i(".dockInfluenceDiagramProperty .btnSave").on("click",function(){return n.saveModel()}),i(".dockInfluenceDiagramProperty").on("saveCurrentNode",function(){var n=new e,a=[];t.currentNode&&t.options.dic[t.currentNode.node]&&(i.each(t.options.dic[t.currentNode.node].properties,function(e,n){["defErrorDetail","errorInDef","class","isCalc","resultType"].includes(n.name)||a.push(n)}),n.setNodeProperties(t.currentNode.node,a,function(e){delete t.options.dic[t.currentNode.node],i(".btnsConfirmChanges").hide(),i.isEmptyObject(t.options.dic)&&i(".moreChangesContainer").hide(),i(".mainTask.influence-diagram").trigger("refreshView"),t.cleanErrorTab()},function(e){t.loadErrorTab(e),delete t.options.dic[t.currentNode.node],i(".mainTask.influence-diagram").trigger("refreshView"),i(".overlapDisable").hide(),i(".btnsConfirmChanges").hide(),i.isEmptyObject(t.options.dic)&&i(".moreChangesContainer").hide()},!0,!0))}),i(".dockInfluenceDiagramProperty").on("saveModelChanges",function(n,o,d){var l,s,c=new e,u=[];if(i.isEmptyObject(t.options.dic)&&!o)Promise.resolve().then(function(){var e=[a(219)];(function(e){(new e).saveModel(function(){i("body").trigger("pendingChanges",[!1]),(0,r.showMessage)((0,r.translate)("model_successfully_saved")," ","success",!0),d&&d(!0)})}).apply(null,e)}).catch(a.oe);else if(i.isEmptyObject(t.options.dic)&&o&&d)d(!0);else for(var p in t.options.dic)u=[],i.each(t.options.dic[p].properties,function(e,n){["defErrorDetail","errorInDef","class","isCalc","resultType","Text"].includes(n.name)||u.push(n)}),l=t.nodeFullData.id,s=t.nodeFullData.nodeClass,c.setNodeProperties(t.options.dic[p].node,u,function(e){delete t.options.dic[p],i(".btnsConfirmChanges").hide(),"text"===s&&(i(".box-title.header .nodeIdTitle").remove(),i(".dock.dockItem .nodeTextTitle").html("(".concat(l,")"))),i.isEmptyObject(t.options.dic)&&i(".moreChangesContainer").hide(),i(".mainTask.influence-diagram").trigger("refreshView"),t.cleanErrorTab(),i.isEmptyObject(t.options.dic)&&!o&&Promise.resolve().then(function(){var e=[a(219)];(function(e){(new e).saveModel(function(){i("body").trigger("pendingChanges",[!1]),(0,r.showMessage)((0,r.translate)("model_successfully_saved")," ","success",!0),d&&d(!0)})}).apply(null,e)}).catch(a.oe)},function(e){t.loadErrorTab(e),delete t.options.dic[t.currentNode.node],i(".mainTask.influence-diagram").trigger("refreshView"),i(".overlapDisable").hide(),i(".btnsConfirmChanges").hide(),i.isEmptyObject(t.options.dic)&&i(".moreChangesContainer").hide(),d&&d(!1)},!0,!1)})},saveModel:function(n){var a=new e,t=[],o=this;i.each(this.options.dic[o.currentNode.node].properties,function(e,n){["defErrorDetail","errorInDef","class","isCalc","resultType"].includes(n.name)||t.push(n)});var d=o.currentNode.properties[0].value,r=o.currentNode.properties[2].value;a.setNodeProperties(o.currentNode.node,t,function(e){i(".mainTask.influence-diagram").trigger("refreshView"),i(".dashboard-tabs").trigger("refreshNodeChanges",[{nodeId:o.currentNode.node}]),"text"===r&&(i(".box-title.header .nodeIdTitle").remove(),i(".dock.dockItem .nodeTextTitle").html("(".concat(d,")"))),delete o.options.dic[o.currentNode.node],i(".btnsConfirmChanges").hide(),i.isEmptyObject(o.options.dic)&&i(".moreChangesContainer").hide(),o.cleanErrorTab(),"function"==typeof n&&n()},function(e){o.loadErrorTab(e),delete o.options.dic[o.currentNode.node],i(".mainTask.influence-diagram").trigger("refreshView"),i(".overlapDisable").hide(),i(".btnsConfirmChanges").hide(),i.isEmptyObject(o.options.dic)&&i(".moreChangesContainer").hide()},!0,!0)},setNumberFormat:function(e){if((t=this).nodeData.properties[0].value){var n=t.nodeData.properties[0].value,t=this;Promise.resolve().then(function(){var o=[a(219)];(function(a){var o=[{name:"numberFormat",value:e}](new a).setNodeProperties(n,o,function(){t.numberFormat=e,t.numberFormatter=null,i(".dashboardTask").trigger("changeNumberFormat",[n]),i(".mainTask.influence-diagram").trigger("refreshView")})}).apply(null,o)}).catch(a.oe)}},showNumberFormatPopup:function(e){var n=this;Promise.resolve().then(function(){var t=[a(219)];(function(t){var i=[{name:"numberFormat"}](new t).getNodeProperties(n.nodeData.properties[0].value,i,function(n){var t=n.properties[0];a.e(48).then(function(){var n=[a(777)];(function(n){(new n).render(t,e)}).apply(null,n)}).catch(a.oe)})}).apply(null,t)}).catch(a.oe)},updateNodeInDic:function(e,n){this.nodeData&&this.nodeData.properties&&this.nodeData.properties[0]&&this.nodeData.properties[0].value&&this.options.dic[e]&&(this.options.dic[n]=this.options.dic[e],delete this.options.dic[e],this.currentNodeId=n,this.nodeData.node=n,this.nodeData.properties[0].value=n,i("#nodePropertiesDock").attr("node-id",n))},getNodeProperty:function(e,n){return e.find(function(e){return e.name===n})},updateNodePropertyNew:function(e,n,a){var t=this;i.each(e.properties,function(o,d){d.name===n&&(d.value!==a&&(t.options.dic[e.node]||(t.options.dic[e.node]={node:e.node,properties:[]},i(".btnsConfirmChanges").show(),i(".moreChangesContainer").show(),i('.btn[data-action="run"]').addClass("btn-warning").removeClass("btn-info"),i(".resultPreview").css("color","#999"),i(".btnDataFrame").hide(),i(".btnCopyAsValues").hide(),i(".btnCopyAsValues").hide(),i(".btnIndex").hide(),i("body").trigger("pendingChanges",[!0])),t.options.dic[e.node].properties.some(function(e){return e.name===n})?t.options.dic[e.node].properties.find(function(e){return e.name===n}).value=a:t.options.dic[e.node].properties.push({name:n,value:a})))})},updateNodeProperty:function(n,a,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=this,r=n.properties[0].value;""!==r&&(new e).setNodeProperties(r,[{name:a,value:t}],function(){(i(".mainTask.influence-diagram").trigger("refreshView"),d.cleanErrorTab(),"definition"===a)&&ace.edit("nodeWizardDef").setValue(t);n.properties.find(function(e){return e.name===a}).value=t,"function"==typeof o&&o()},function(e){d.loadErrorTab(e),i(".mainTask.influence-diagram").trigger("refreshView")},!0,!0)},onBrowserMode:function(){return 0==i(".mainTask.influence-diagram .diagram-area .diagram-toolbar").length||i(".mainTask.influence-diagram .diagram-area .diagram-toolbar").hasClass("browser-mode")},loadErrorTab:function(e){var n=i(".errorsList");n.find("i.no-error").addClass("error"),n.find(".errorCount").html("1"),n.find(".message-ul .details .message").html(e),n.find("a").attr("data-toggle","dropdown")},cleanErrorTab:function(){var e=i(".errorsList");e.find("i.no-error").removeClass("error"),e.find(".errorCount").html("0"),e.find(".message-ul .details .message").html(""),e.find("a").attr("data-toggle","")},onRemoveView:function(){(0,r.removeResizeEvent)("updateSizes"),this.diagram&&(this.diagram.destroy(),this.diagram=null)}})}.apply(n,o))||(e.exports=d)}).call(this,a(218),a(1))},2120:function(e,n,a){var t=a(2121);"string"==typeof t&&(t=[[e.i,t,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(222)(t,i);t.locals&&(e.exports=t.locals)},2121:function(e,n,a){(e.exports=a(2)(!1)).push([e.i,".nodeWizardTab .commandBtns {\n  width: 100%;\n  padding-left: 0px;\n  margin: -31px 0 2px 4px;\n}\n.nodeWizardTab .commandBtns button {\n  margin-right: 0px;\n  border-radius: 0px;\n  width: 30px;\n}\n.nodeWizardTab .resultArea {\n  margin-top: 7px;\n  margin-right: 0;\n  margin-left: 0;\n}\n.nodeWizardTab .resultPreview {\n  margin: 0 0 0 6px;\n}\n#wizardColSelection .modal-body {\n  overflow-y: auto;\n}\n#wizardColSelection .modal-body .optList ul {\n  list-style: none;\n}\n#wizardColSelection .modal-body .optList ul li {\n  margin: 1px 0;\n}\n#wizardColSelection .commandButtons {\n  padding: 5px;\n  border-top: 1px solid #e5e5e5;\n}\n#wizardRowSelection .modal-dialog {\n  width: 80%;\n  max-width: 800px;\n}\n#wizardRowSelection .modal-body {\n  overflow-y: auto;\n}\n#wizardRowSelection .table .select2-container {\n  width: 100%;\n}\n#wizardRowSelection .table .conditionValue input {\n  width: 100%;\n}\n#wizardRowSelection .table .conditionValue.double input {\n  width: 45%;\n}\n#wizardRowSelection .table .conditionValue.double input:nth-child(2) {\n  float: right;\n}\n#wizardRowSelection .commandButtons {\n  padding: 5px;\n  border-top: 1px solid #e5e5e5;\n}\n#wizardPandasIndex .modal-body {\n  overflow-y: auto;\n  min-height: 300px;\n  text-align: center;\n  padding: 10px;\n}\n#wizardPandasIndex .modal-body .handsonWrapper {\n  display: inline-block;\n}\n#wizardPandasIndex .tableDef .ht_master .wtHolder {\n  overflow-x: hidden;\n}\n#wizardSetDataframeIndex .modal-body {\n  overflow-y: auto;\n}\n#wizardSetDataframeIndex .modal-body .optList ul {\n  list-style: none;\n}\n#wizardSetDataframeIndex .modal-body .optList ul li {\n  margin: 1px 0;\n}\n#wizardSetDataframeIndex .commandButtons {\n  padding: 5px;\n  border-top: 1px solid #e5e5e5;\n}\n#wizardDataframeGroupby .modal-dialog {\n  width: 80%;\n  max-width: 800px;\n}\n#wizardDataframeGroupby .modal-dialog .modal-body {\n  overflow-y: auto;\n}\n#wizardDataframeGroupby .modal-dialog .modal-body .centered {\n  text-align: center;\n}\n#wizardDataframeGroupby .modal-dialog .modal-body .selectable {\n  width: 60px;\n}\n#wizardDataframeGroupby .modal-dialog .modal-body .group-by {\n  width: 130px;\n}\n#wizardDataframeGroupby .modal-dialog .modal-body .optList ul {\n  list-style: none;\n}\n#wizardDataframeGroupby .modal-dialog .modal-body .optList ul li {\n  margin: 1px 0;\n}\n#wizardCalculatedField .modal-dialog {\n  max-width: 800px;\n}\n#wizardDataarrayFromPandas .modal-dialog {\n  width: 85%;\n  max-width: 1000px;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body {\n  overflow-y: auto;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .centered {\n  text-align: center;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .selectable {\n  width: 60px;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .group-by {\n  width: 130px;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .optList ul {\n  list-style: none;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .optList ul li {\n  margin: 1px 0;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .optList tr td.wizard-field i {\n  display: none;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .optList tr.selected td.wizard-field i {\n  display: inline;\n}\n#wizardDataarrayFromPandas .modal-dialog .modal-body .optList tr.selected td.wizard-field span {\n  color: #378ee0;\n}\n.indexlist li {\n  padding: 0;\n  cursor: pointer;\n  border-bottom: 1px solid #ccc;\n  display: block;\n}\n.indexlist li:hover {\n  background: #e7f1fb;\n  color: #333;\n}\n.indexlist li.j-focused {\n  background: #e7f1fb;\n}\n.indexlist li.j-selected {\n  background: #dcebf9;\n}\n.indexlist li .node {\n  padding: 1px 2px 2px 0px;\n  display: block;\n}\n.indexlist li span.nodeTitle {\n  display: block;\n  margin-left: 5px;\n}\n.indexlist li span.nodeId {\n  display: block;\n  margin-left: 5px;\n  font-style: italic;\n  font-size: 0.9em;\n}\n",""])},2122:function(e,n,a){var t=a(690);e.exports=(t.default||t).template({1:function(e,n,a,t,i){return"      <button class='btn btn-small btn-lightred btnStopProcess nodisplay' rel='tooltip' data-original-title='Stop'\n        data-action='stop'>\n        <i class='fa fa-stop'></i>\n      </button>\n"},compiler:[8,">= 4.3.0"],main:function(e,n,a,t,i){var o;return"<div class='row nodeWizardTab nomargin'>\n  <div class='nopadding codeArea' style=\"float: left;\">\n    <div class='aceWrapper'>\n      <div id='nodeWizardDef' class='nodeWizardDef' data-rel='definition' style='width:100%; height:170px;'></div>\n    </div>\n  </div>\n  <div id='nodeWizardEval' class='leftCol nopadding' style=\"right:0; float: left;\">\n    <div class='commandBtns'>\n      <button class='btn btn-small btn-warning' rel='tooltip' data-original-title='Run' data-action='run'>\n        <i class='fa fa-play'></i>\n      </button>\n      <button class='btn btn-small btn-lightgrey' rel='tooltip' data-original-title='Performance analysis'\n        data-action='debug'>\n        <i class='fa fa-stopwatch'></i>\n      </button>\n"+(null!=(o=a.if.call(null!=n?n:e.nullContext||{},null!=n?n.notDesktop:n,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:16,column:6},end:{line:21,column:13}}}))?o:"")+"      <button class='btn btn-small btn-lightgrey btnDataFrame nodisplay' rel='tooltip'\n        data-original-title='Select Columns' data-action='wiz-columns'>\n        <i class=\"fad fa-line-columns\"></i>\n      </button>\n      <button class='btn btn-small btn-lightgrey btnDataFrame nodisplay' rel='tooltip' data-original-title='Filter'\n        data-action='wiz-rows'>\n        <i class='far fa-filter'></i>\n      </button>\n      <button class='btn btn-small btn-lightgrey btnDataFrame nodisplay' rel='tooltip'\n        data-original-title='Calculated Field' data-action='wiz-calc'>\n        <i class=\"fal fa-calculator-alt\"></i>\n      </button>\n      <button class=\"btn btn-small btn-lightgrey btnDataFrame nodisplay\" rel=\"tooltip\" data-original-title=\"Set Index\"\n        data-action=\"wiz-dataframe-index\" style=\"height:26px; padding:0\">\n        <span class=\"fa-stack\" style=\"\n            height: 26px;\n            width: 30px;\n            display: inline-block;\n            height: 2em;\n            line-height: 2em;\n            position: relative;\n            vertical-align: middle;\n            width: 2.5em;\">\n          <i class=\"fal fa-table fa-stack-1x\"\n            style=\"font-size:16px; color:#9c9c9c; width:30px; top:-1px; left:0px;\"></i>\n          <i class=\"fas fa-sort-down fa-stack-1x fa-inverse\" style=\"\n              font-size: 14px;\n              top: -11px;\n              left: -5px;\n              width: 30px;\"></i>\n        </span>\n      </button>\n      <button class='btn btn-small btn-lightgrey btnDataFrame nodisplay' rel='tooltip'\n        data-original-title='Group/Aggregate' data-action='wiz-dataframe-groupby'>\n        <i class=\"fal fa-layer-group\"></i>\n      </button>\n      <button class='btn btn-small btn-lightgrey btnDataFrame nodisplay' rel='tooltip'\n        data-original-title='Create Datarray' data-action='wiz-dataarray-from-pandas'>\n        <i class=\"fal fa-cube\"></i>\n      </button>\n\n      <button class='btn btn-small btn-lightgrey btnIndex nodisplay' rel='tooltip' data-original-title='Edit Index'\n        data-action='wiz-pd-index' style=\"height:26px; padding:0\">\n        <span class=\"fa-stack\" style=\"\n            height: 26px;\n            width: 30px;\n            display: inline-block;\n            height: 2em;\n            line-height: 2em;\n            position: relative;\n            vertical-align: middle;\n            width: 2.5em;\">\n          <i class=\"far fa-bars fa-stack-1x\" style=\"font-size:16px; color:#9c9c9c; width:30px; top:-1px; left:0px;\"></i>\n          <i class=\"fas fa-pencil fa-stack-1x fa-inverse\" style=\"\n              font-size: 11px;\n              top: 1px;\n              left: 3px;\n              width: 30px;\n              \"></i>\n        </span>\n      </button>\n      <button class='btn btn-small btn-lightgrey btnCopyAsValues nodisplay' rel='tooltip'\n        data-original-title='Copy as values' data-action='wiz-copyasvalues' style=\"height:26px; padding:0\">\n        <span class=\"fa-stack\" style=\"\n            height: 26px;\n            width: 30px;\n            display: inline-block;\n            height: 2em;\n            line-height: 2em;\n            position: relative;\n            vertical-align: middle;\n            width: 2.5em;\">\n          <i class=\"far fa-clipboard fa-stack-1x\" style=\"font-size:16px; width:30px; top:-1px; left:-2px;\"></i>\n          <strong class=\"fa-stack-1x\" style=\"\n            font-size: 7px;\n            left: 12px;\n            top: 11px;\n            font-weight: 100;\n            width: 13px;\n            height: 8px;\n            background-color: #fff;\n            color: #333;\n            line-height: 1.3em;\n            letter-spacing: 0px;\">123</strong>\n        </span>\n      </button>\n\n    </div>\n    <div class='resultArea row'>\n      <div class='col-sm-12 atomic nodisplay' style=\"padding: 0;\">\n        <pre class='resultPreview'></pre>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0})},752:function(e,n,a){"use strict";(function(t){var i,o=a(693);void 0===(i=function(){return t.Model.extend({url:"knowledgeBase",getPost:function(e,n){(0,o.send)("KnowledgeBase/getPost?nodeId="+e,null,{type:"GET"},n)},search:function(e,n){(0,o.send)("KnowledgeBase/search",e,{type:"POST"},n)},generatePost:function(e,n){(0,o.send)("KnowledgeBase/generatePost?nodeId="+e,null,{type:"POST"},n)},updatePost:function(e,n){(0,o.send)("KnowledgeBase/updatePost",e,{type:"PUT"},n)},deleteAttachedFile:function(e,n){(0,o.send)("KnowledgeBase/deleteDocument?url="+e,null,{type:"DELETE"},n)}})}.apply(n,[]))||(e.exports=i)}).call(this,a(218))}}]);