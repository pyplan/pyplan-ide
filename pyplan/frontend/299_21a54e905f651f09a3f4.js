/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[299,5],{2100:function(e,l,t){"use strict";(function(n,s){var a,i,c=t(18);a=[t(707),t(719),t(684),t(2101),t(2102),t(2103)],void 0===(i=function(e,l,t,a,i,r){return n.View.extend({el:s("#n_o_n_e"),field:"",tagId:"",currentView:void 0,render:function(l,n,u){var o=this,d=a();(new t).show({title:"Filter tasks",html:d,modalClass:"filterviewModal",buttons:[{title:"OK",css:"primary",code:"ok"},{title:(0,c.translate)("cancel"),code:"cancel"}],callback:function(e,t){"ok"==e&&o.applyFilters(l,n,t,u)},onClose:function(e){o.removeView(e)},onLoad:function(l){(0,c.postRender)(l),o.addHandlers(l);var t=new e;t.listUsers(function(e){var t=i({items:e}),a=s("#users.filterlist ul");a.selectonic({multi:!0,keyboard:!0,keyboardMode:"toggle",mouseMode:"toggle",focusOnHover:!0,selectionBlur:!1,focusBlur:!1,select:function(e,l){},unselectAll:function(e,l){}}),l.find("#users.filterlist ul").append(t),a.perfectScrollbar(),o.initializeSelectedFilters(n,l)}),t.listStates(function(e){var t=r({items:e}),a=s("#status.filterlist ul");a.selectonic({multi:!0,keyboard:!0,keyboardMode:"toggle",mouseMode:"toggle",focusOnHover:!0,selectionBlur:!1,focusBlur:!1,select:function(e,l){},unselectAll:function(e,l){}}),l.find("#status.filterlist ul").append(t),a.perfectScrollbar(),o.initializeSelectedFilters(n,l)})}})},removeView:function(e){this.currentView=null},addHandlers:function(e){e.find(".selectAll").on("click",function(){e.find("#users.filterlist ul li:visible").each(function(e,l){s(l).addClass("j-selected")})}),e.find(".selectNone").on("click",function(){e.find("#users.filterlist ul li").each(function(e,l){s("#users.filterlist ul").selectonic("unselect",l)})}),e.find(".selectAllStatus").on("click",function(){e.find("#status.filterlist ul li:visible").each(function(e,l){s(l).addClass("j-selected")})}),e.find(".selectNoneStatus").on("click",function(){e.find("#status.filterlist ul li").each(function(e,l){s("#status.filterlist ul").selectonic("unselect",l)})})},initializeSelectedFilters:function(e,l){var t=e;t&&(s(t.usersSelected).each(function(e,t){l.find("#users.filterlist ul li").each(function(e,l){parseInt(s(l).attr("data-id"))===t&&s("#users.filterlist ul").selectonic("select",l)})}),s(t.statusSelected).each(function(e,t){l.find("#status.filterlist ul li").each(function(e,l){parseInt(s(l).attr("data-id"))===t&&s("#status.filterlist ul").selectonic("select",l)})})),l.find(".info .filtered").html(l.find("#users.filterlist ul li").length),l.find(".info .total").html(l.find("#users.filterlist ul li").length)},setFiltersPreference:function(e){(new l).UpdateUserPreference("workflowFilters",JSON.stringify(e))},applyFilters:function(e,l,t,n){for(var a=e,i=(l={usersSelected:[],statusSelected:[]},t.find("#users.filterlist ul li.j-selected")),c=0;c<i.length;c++)l.usersSelected.push(parseInt(s(i[c]).attr("data-id")));var r=t.find("#status.filterlist ul li.j-selected");for(c=0;c<r.length;c++)l.statusSelected.push(parseInt(s(r[c]).attr("data-id")));if(l.usersSelected.length>0)for(c=0;c<a.length;c++){for(var u,o=[],d=0;d<l.usersSelected.length;d++)(u=a[c].tasks.filter(function(e){return e.userId===l.usersSelected[d]})).length>0&&o.push(u);o.length>0?a[c].tasks=o[0]:a[c].tasks=[]}if(l.statusSelected.length>0)for(c=0;c<a.length;c++){var f,p=[];for(d=0;d<l.statusSelected.length;d++)(f=a[c].tasks.filter(function(e){return e.stateId===l.statusSelected[d]})).length>0&&p.push(f);p.length>0?a[c].tasks=p[0]:a[c].tasks=[]}this.setFiltersPreference(l),n(l)}})}.apply(l,a))||(e.exports=i)}).call(this,t(218),t(1))},2101:function(e,l,t){var n=t(690);function s(e){return e&&(e.__esModule?e.default:e)}e.exports=(n.default||n).template({compiler:[7,">= 4.0.0"],main:function(e,l,n,a,i){var c=null!=l?l:e.nullContext||{},r=e.escapeExpression;return'<div class="filterview unselectable">\n\n    <div class="row" style="padding: 10px 0;">\n      <div class="col-sm-6">\n        <div class="form-group">\n          <label for="textfield" class="control-label col-sm-2" style="padding-top: 4px;">Users:</label>\n          <div class="col-sm-10">\n            <a href="#" class="btn btn-small btn-lime selectAll">'+r(s(t(688)).call(c,"_all",{name:"L",hash:{},data:i}))+'</a>\n\n            <a href="#" class="btn btn-small btn-lime selectNone">'+r(s(t(688)).call(c,"_none",{name:"L",hash:{},data:i}))+'</a>\n          </div>\n        </div>\n      </div>\n\n      <div class="col-sm-6">\n        <div class="form-group">\n          <label for="textfield" class="control-label col-sm-2" style="padding-top: 4px;">Status:</label>\n          <div class="col-sm-10">\n            <a href="#" class="btn btn-small btn-lime selectAllStatus">'+r(s(t(688)).call(c,"_all",{name:"L",hash:{},data:i}))+'</a>\n\n            <a href="#" class="btn btn-small btn-lime selectNoneStatus">'+r(s(t(688)).call(c,"_none",{name:"L",hash:{},data:i}))+'</a>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="row" style="padding: 10px 0;">\n      <div id="users" class="col-sm-6 filterlist">\n          <ul></ul>\n      </div>\n\n      <div id="status" class="col-sm-6 filterlist">\n          <ul></ul>\n      </div>\n    </div>\n\n    <div class="info">\n        '+r(s(t(688)).call(c,"filtered",{name:"L",hash:{},data:i}))+' <span class="number filtered">4</span> '+r(s(t(688)).call(c,"from",{name:"L",hash:{},data:i}))+' <span class="number total">8</span>\n    </div>\n\n\n</div>\n\n\n'},useData:!0})},2102:function(e,l,t){var n=t(690);e.exports=(n.default||n).template({1:function(e,l,t,n,s){var a,i=null!=l?l:e.nullContext||{},c=t.helperMissing,r=e.escapeExpression;return'<li data-id="'+r("function"==typeof(a=null!=(a=t.userId||(null!=l?l.userId:l))?a:c)?a.call(i,{name:"userId",hash:{},data:s}):a)+'">\n    <span>'+r("function"==typeof(a=null!=(a=t.fullName||(null!=l?l.fullName:l))?a:c)?a.call(i,{name:"fullName",hash:{},data:s}):a)+"</span>\n</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,l,t,n,s){var a;return null!=(a=t.each.call(null!=l?l:e.nullContext||{},null!=l?l.items:l,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?a:""},useData:!0})},2103:function(e,l,t){var n=t(690);e.exports=(n.default||n).template({1:function(e,l,t,n,s){var a,i=null!=l?l:e.nullContext||{},c=t.helperMissing,r=e.escapeExpression;return'<li data-id="'+r("function"==typeof(a=null!=(a=t.taskStateId||(null!=l?l.taskStateId:l))?a:c)?a.call(i,{name:"taskStateId",hash:{},data:s}):a)+'">\n    <span>'+r("function"==typeof(a=null!=(a=t.name||(null!=l?l.name:l))?a:c)?a.call(i,{name:"name",hash:{},data:s}):a)+"</span>\n</li>\n"},compiler:[7,">= 4.0.0"],main:function(e,l,t,n,s){var a;return null!=(a=t.each.call(null!=l?l:e.nullContext||{},null!=l?l.items:l,{name:"each",hash:{},fn:e.program(1,s,0),inverse:e.noop,data:s}))?a:""},useData:!0})},684:function(e,l,t){"use strict";(function(n){var s;void 0===(s=function(){return n.Controller.extend({name:"showModal",show:function(e){Promise.all([t.e(2),t.e(120)]).then(function(){var l=[t(700)];(function(l){(new l).render(e)}).apply(null,l)}).catch(t.oe)}})}.apply(l,[]))||(e.exports=s)}).call(this,t(694))}}]);