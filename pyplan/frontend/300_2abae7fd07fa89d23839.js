/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[300],{1033:function(e,t,i){"use strict";(function(s){var r,n;i(909),L.Icon.Default.imagePath="leaflet",r=[i(717),i(1432),i(1433)],void 0===(n=function(e,t,i){return e.extend({el:s("#n_o_n_e"),mapView:void 0,rememberRefresh:!1,render:function(e){this.baseRender(e),this.drawItem()},editModeChanged:function(){this.editMode?this.rememberRefresh=!0:(this.rememberRefresh&&this.refreshItemDash(),this.rememberRefresh=!1)},refreshItemDash:function(){this.fullRefresh()},getNodesOfView:function(){if(this.currentResult&&this.currentResult.itemProperties&&this.currentResult.itemProperties.mapOptions&&this.currentResult.itemProperties.mapOptions.layers&&this.currentResult.itemProperties.mapOptions.layers.length>0){for(var e=[],t=this.currentResult.itemProperties.mapOptions.layers,i=0;i<t.length;i++)t[i].options&&t[i].options.node&&e.push(t[i].options.node);return t=null,e}},needRefresh:function(e){if(this.currentResult&&this.currentResult.itemProperties&&this.currentResult.itemProperties.mapOptions&&this.currentResult.itemProperties.mapOptions.layers&&this.currentResult.itemProperties.mapOptions.layers.length>0){for(var t=this.currentResult.itemProperties.mapOptions.layers,i=0;i<e.length;i++)for(var s=0;s<t.length;s++)if(t[s].options&&t[s].options.node&&e[i].toLowerCase()==t[s].options.node.toLowerCase())return!0;t=null}return!1},baseUpdateSize:function(){s(this.tagId).find(".item-area").height(s(this.tagId).find(".item-area").parent().height()-30)},drawItem:function(){s(this.tagId).find(".item-area").addClass("extrafullSize"),this.setDefaultOptions();var e=this.currentResult.itemProperties.mapOptions;e&&(e.startBaseMap=0);var r=this.tagId.substr(1)+"_map",n=i({mapElementId:r});s(this.tagId).find(".item-area").html(n),this.updateSize(),this.mapView=new t(e),this.mapView.setElement("#"+r),this.mapView.setDashboardMoldel(this.model),this.mapView.render(),this.addHandlers(),this.isReady=!0},fullRefresh:function(){if(this.mapView){this.setDefaultOptions();var e=this.currentResult.itemProperties.mapOptions;e.initLat&&e.initLng&&(e.startBaseMap=0,e.center={lat:e.initLat,lng:e.initLng},e.autCenter=e.autCenter,this.mapView.setOptions(e)),e&&e.layers&&e.layers&&(e.startBaseMap=0,this.mapView.setOptions(e),this.mapView.drawLayers())}},onRemoveItemView:function(){this.mapView&&(this.mapView.destroy(),this.mapView=null)},updateValues:function(e){},_evaluateNode:function(e,t,i,s,r){},updateSize:function(){s(this.tagId).find(".item-area").height(s(this.tagId).find(".item-area").parent().height()-30),this.mapView&&this.mapView.onResize()},setDefaultOptions:function(){this.currentResult||(this.currentResult={}),this.currentResult.itemProperties||(this.currentResult.itemProperties={}),this.currentResult.itemProperties.mapOptions||(this.currentResult.itemProperties.mapOptions={maxZoom:17,initZoom:10,initLat:"auto",initLng:"auto",showControlLayer:!0,startBaseMap:0,autCenter:!0},this.currentResult.itemProperties.mapOptions.autCenter||(this.currentResult.itemProperties.mapOptions.autCenter=!0))},addHandlers:function(){var e=this;s(this.tagId).find(".btn-maximize-map").on("click",(function(){s(this).closest("div.main-fullscreen").length>0?s(this).closest("div.main-fullscreen").find("button[data-rel='close-screen']").click():e.fullScreen()}))}})}.apply(t,r))||(e.exports=n)}).call(this,i(1))}}]);