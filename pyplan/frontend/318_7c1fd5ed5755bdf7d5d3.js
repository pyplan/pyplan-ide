/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{1798:function(e,t,n){"use strict";(function(a,i){var s,r,o=n(18);s=[n(905),n(1140),n(1141),n(1142)],void 0===(r=function(e,t,s,r){return a.View.extend({el:i("#n_o_n_e"),tagId:void 0,currentData:void 0,render:function(e,n){var a=t();i('[data-rel="dashboard-manager"]').append(a),this.addBaseHandlers(),this.drawMenu()},removeView:function(){this.currentData=null,this.getMenu().find(".spectrum-colors").each((function(e,t){i(this).spectrum("destroy")})),this.getMenu().find("select").each((function(e,t){i(this).data("select2")&&i(this).select2("destroy")})),this.getMenu().remove(),this.removeToolbar()},reloadMenu:function(){var e=this.currentData,t=this.tagId;this.removeView(),this.render(e,t),this.getMenu().removeClass("nodisplay")},drawMenu:function(){var e=this;(0,o.translate)("properties");this.currentData&&this.currentData.nodeId;var t=this.getMenu().find("nav")[0];t.mmenu({offCanvas:!1,extensions:["theme-white"],navbars:[{position:"bottom",content:["breadcrumb"]}],onClick:{setSelected:!1}}),t.find(".skipmm").removeClass("mm-listview"),t.find(".select2-choices, select2-results").removeClass("mm-listview");var n=t.data("mmenu");n&&n.bind("openPanel",(function(t){a(t),e.openPanel(t)})),this.getMenu().on("closeAll",(function(){n&&n.closeAllPanels()}));var a=function(e){var n="";!function e(a,i){if(a&&a.attr("id")){var s=a.attr("id"),r=t.find("li a[href='#"+s+"']");if(r&&r.length>0){var o=r.first().text();return r.hasClass("mm-fullsubopen")&&(o=r.parent().find("span").text()),""!=n&&(n=" / "+n),n=1==i?" <span class='bread'>"+o+"</span>"+n:" <a class='bread' href='#"+s+"'>"+o+"</a>"+n,void e(r.closest(".mm-panel"),i+1)}}""!=n&&(n=" / "+n);s="";a&&a.attr("id")&&(s=a.attr("id")),n=1!=i&&s?"<a class='bread' href='#"+s+"'>Menu</a>"+n:"<span class='bread'>Menu</span>"+n}(e,1),t.find(".mm-navbar-bottom").html(n)};if(a(),"1"==this.getMenu().closest(".dock").attr("data-autoopenfirst")){this.getMenu().closest(".dock").removeAttr("data-autoopenfirst");var s=t.find(".menu-main-screen li").first().find("a"),r=i(s.attr("href"));r.css({"-webkit-transition":"-webkit-transform 0s ease","-moz-transition":"-moz-transform 0s ease","-ms-transition":"-ms-transform 0s ease","-o-transition":"-o-transform 0s ease",transition:"transform 0s ease"}),n?n.openPanel(r):s.click(),setTimeout((function(){r.css({"-webkit-transition":"-webkit-transform 0.4s ease","-moz-transition":"-moz-transform 0.4s ease","-ms-transition":"-ms-transform 0.4s ease","-o-transition":"-o-transform 0.4s ease",transition:"transform 0.4s ease"})}),1e3)}},getMenu:function(){return i(this.$el)},formatMenu:function(){var e=this.getMenu(),t=e.find(".menu-main-screen"),n=e.find(".advanced-menu-screen"),a=e.find(".format-menu-screen");e.find(".toMainMenu li").each((function(e,n){t.append(i(n).detach())})),e.find(".toMainMenu").remove(),e.find(".toAdvancedMenu li").length>0&&e.find(".toAdvancedMenu li").each((function(e,t){n.append(i(t).detach())})),e.find(".toAdvancedMenu").remove(),e.find(".commonMenu").length>0&&e.find(".commonMenu li").each((function(e,s){i(s).hasClass("showIn_main")?t.append(i(s).detach()):i(s).hasClass("showIn_format")?a.append(i(s).detach()):i(s).hasClass("showIn_advanced")&&n.append(i(s).detach())})),e.find(".commonMenu").remove(),n.find("li").length>0&&(t.find(".btnNumberFormat").length>0?t.find(".btnNumberFormat").before(e.find(".advanced-template li").remove()):t.append(e.find(".advanced-template li").remove())),a.find("li").length>0&&(t.find(".btnNumberFormat").length>0?t.find(".btnNumberFormat").before(e.find(".format-template li").remove()):t.append(e.find(".format-template li").remove())),e.find(".advanced-template").remove(),e.find(".format-template").remove(),e.find(".moveout").detach().appendTo(this.getMenu())},addToMenu:function(e){this.getMenu().find(".left-menu-app").append(e)},addIndexZone:function(){},addChartZone:function(e){var t={currentData:this.currentData,options:e},n=s(t);this.addToMenu(n),this.addChartHandlers(),this.addIndexHandlers()},addFormatZone:function(e){return i("<div/>")},addCommonOptions:function(e){e||(e=new Object),e.itemProperties=this.currentData.itemProperties,e.itemData=this.currentData;var t=r(e);this.addToMenu(t),this.addCommonOptionsHandlers()},addBaseHandlers:function(){var e=this;this.getMenu().on("removeToolbar",(function(){e.removeView()}))},addIndexHandlers:function(){var e=this.getMenu(),t=function(){e.find(".free-container li").length>0?e.find(".aggregate-container").show():e.find(".aggregate-container").hide()};e.find(".dim-sort").sortable({connectWith:".dim-sort",stop:function(n,a){var s=i(this),r=i(a.item).parent();if(i(s)[0]!=i(r)[0]){if(!i(r).hasClass("free-container")){if(r.find("li").length>1)for(var o=i(r).find("li"),l=o.length-1;l>=0;l--)if(o[l]!=a.item[0]){i(s).append(i(o[l]).detach());break}}t();var d,c,f=i(s).closest(".left-menu").attr("data-rel");e.find(".rowList li").length>0&&(d=e.find(".rowList li").first().attr("data-field")),e.find(".colList li").length>0&&(c=e.find(".colList li").first().attr("data-field")),i(f).trigger("updateOriginalRowCol",[d,c]),i(f).trigger("evaluateNode",[d,c,!0])}}}).disableSelection();var a=this.tagId,s=this.getView();e.find("button.indexfilter").click((function(){var e=i(this).closest("li").attr("data-field"),t=i(this).closest("li").find("span").html(),r=i(this).closest("li");n.e(32).then((function(){var i=[n(687)];(function(n){(new n).getFilterView((function(n){var i=new n;i.setElement(r),i.render(e,t,a,s)}))}).apply(null,i)})).catch(n.oe)})),e.find("select[data-key='summaryBy']").on("change",(function(){s.setSummaryBy(i(this).val())})),t()},addChartHandlers:function(){var e=this.getMenu();e.find("ul.chart-list li").on("click",(function(){i(this).closest(".dock").attr("data-autoopenfirst","1");var t=e.attr("data-rel");i(t).trigger("changeType",[i(this).attr("data-rel"),i(this).attr("data-object-type")])}))},getView:function(){var e=this.model.getItemModel(this.tagId);if(e&&e.currentResult&&e.currentResult.itemProperties)return e},toolbarRender:function(){},removeToolbar:function(){},addCommonOptionsHandlers:function(){var e=this.getMenu(),t=this.getView(),a=this;e.find("li.btnNumberFormat").on("click",(function(){a.showNumberFormatPopup((function(e){t.setNumberFormat(e)}))})),e.find(".spectrum-colors").colorPicker("",{allowEmpty:!0,chooseText:"Ok",cancelText:"",change:function(n){var a=i(this).attr("data-format-key"),s="transparent";if(n&&(s=n.toHexString()),t){switch(a){case"title-color":t.changeTitleColor(s);break;case"subtitle-color":t.changeSubtitleColor(s);break;case"general-background-color":t.setBackgroundColor(s)}e.find(".inline-color[data-format-key='"+a+"']").css("background-color",s),e.find(".color-selector[data-format-key='"+a+"']").css("background-color",s)}}}),e.find("input.format-checkbox").on("change",(function(){var n=i(this).attr("data-format-key"),a=i(this).is(":checked");if(t)switch(n){case"item-title":t.setTitleEnabled(a);break;case"zoom":t.setChartZoom(a);break;case"labels":t.setChartLabel(a);break;case"markers":t.setChartMarkers(a);break;case"axesRange":t.setAxisRange(e.find("div.data-axis"),a);break;case"time.graph":t.changeToTimeGraph(a);break;case"emptytotal":t.setEmptyTotal(a);break;case"detail":t.setViewDetail(a);break;case"donut":t.setDonut(a);break;case"drilldown":t.setChartDrilldown(a);break;case"visibility_x":t.setAxisLabelsVisibility("x",a);break;case"visibility_y":t.setAxisLabelsVisibility("y",a);break;case"title_x":t.setAxisTitleVisibility("x",a);break;case"title_y":t.setAxisTitleVisibility("y",a);break;case"x_as_values":t.setXAsValues(a);break;case"grouping":t.setChartGrouping(a);break;case"showRowTotal":t.setShowRowTotal(a);break;case"showColumnTotal":t.setShowColumnTotal(a)}})),e.find(".menu-selector").on("click","li",(function(){var n=i(this).closest("ul").attr("data-format-key"),a=i(this).attr("data-value"),s=i(this).find("span").text();if(t){switch(n){case"legend.position":var r=!0;"none"==a&&(r=!1),t.setChartLegendPosition(r,a);break;case"labels.inside":r=!0;"none"==a&&(r=!1),t.setChartLabel(r,"inside"==a);break;case"color.serie.library":t.setCustomColorSerie(a)}i(this).closest("ul").find("li").removeClass("selected"),i(this).addClass("selected"),e.find("em [data-format-key='"+n+"']").text(s),i(this).closest(".mm-panel").find(".mm-prev.mm-btn").click()}})),e.find("select.format-select").on("change",(function(e,n){var a=i(this).attr("data-format-key"),s=i(this).val();if(t)switch(a){case"color.serie.library":t.setCustomColorSerie(s)}})),e.find("div.slider-xAxis-width").slider({min:-90,max:90,step:2,value:e.find("div.slider-xAxis-width").attr("data-value"),stop:function(n,a){var i=e.find("div.slider-xAxis-width").slider("value"),s=0==i;t.setAxisLabelsAngle(s,i,"x")}}),e.find("div.slider-yAxis-width").slider({min:-90,max:90,step:2,value:e.find("div.slider-yAxis-width").attr("data-value"),stop:function(n,a){var i=e.find("div.slider-yAxis-width").slider("value"),s=0==i;t.setAxisLabelsAngle(s,i,"y")}}),e.find(".axes_reset").on("click",(function(){var n=i(this).attr("data-axis");t.setAxisLabelsAngle(!0,0,n),e.find("div.slider-"+n+"Axis-width").slider("value",0)})),e.find(".data-axis input").on("change",(function(){t.setAxisRange(i(this).closest(".data-axis"))})),e.find(".axes_range_reset").on("click",(function(){e.find(".data-axis input").val(""),e.find(".data-axis input").first().change()}));var s=e.find(".labels-width");s.slider({value:50,min:50,max:500,step:10,slide:function(e,n){s.closest(".size-selector").find(".labels_width").text(n.value),t.setLabelsWidth(n.value)},stop:function(t,n){var a=s.attr("data-format-key");e.find("em [data-format-key='"+a+"']").text(n.value)},create:function(e,t){s.closest(".size-selector").find(".labels_width").text(50)}});var r=function(n){var a=e.find("select[data-format-key='color.serie.library']"),s=a.val();a.find("optgroup[data-name='custom']").empty(),i.each(t.model.getStyleLibraries(),(function(e,t){3==t.libraryType&&a.find("optgroup[data-name='custom']").append(i("<option />").val(t.styleLibraryId).text(this.name))})),a.val(s),n&&t.updateStyleLibraries(n)};(e.find("a.styleLibraryButton[data-format-key='colorserie_style_library']").on("click",(function(){var e=[];i.each(t.model.getItemsModel(),(function(t,n){var a=n.getIndexes();i.each(a,(function(t,n){(function(e,t){for(var n=0;n<t.length;n++)if(t[n].field==e)return!0;return!1})(n.field,e)||e.push(n)}))})),n.e(5).then((function(){var a=[n(718)];(function(n){(new n).showColorSeries(e,(function(){t.model.refreshStyleLibraries(r)}))}).apply(null,a)})).catch(n.oe)})),r(),t&&t.currentResult&&t.currentResult.itemProperties&&t.currentResult.itemProperties.colorSerie)&&e.find("select[data-format-key='color.serie.library']").val(t.currentResult.itemProperties.colorSerie);e.find(".indexEventsContent input").on("change",(function(){var e=i(this).attr("data-field"),n=i(this).is(":checked");t.setIndexEvent(e,n)}))},showConfigCategoriesPopup:function(e){n.e(73).then((function(){var t=[n(875)];(function(t){(new t).render(e)}).apply(null,t)})).catch(n.oe)},showConditionalFormatPopup:function(e){var t=this;n.e(72).then((function(){var a=[n(874)];(function(n){(new n).render(t,e)}).apply(null,a)})).catch(n.oe)},showMapEventsPopup:function(){var e=this;n.e(71).then((function(){var t=[n(873)];(function(t){(new t).render(e)}).apply(null,t)})).catch(n.oe)},showNumberFormatPopup:function(e){var t=this;n.e(70).then((function(){var a=[n(814)];(function(n){(new n).render(t,e)}).apply(null,a)})).catch(n.oe)},openPanel:function(e){},_createNewLayer:function(e,t,n){}})}.apply(t,s))||(e.exports=r)}).call(this,n(219),n(1))}}]);