/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[36,4],{1520:function(t,e,n){(function(t){(function(){var e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=[].slice,i=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;(function(t){t(n(1))})(function(n){var s,l,o,u,c,d,h,f,p,m,v,g,b,x,w,C,A,y;return l=function(t,e,n){var r,i,a,s;for(a=(i=(t+="").split("."))[0],s=i.length>1?n+i[1]:"",r=/(\d+)(\d{3})/;r.test(a);)a=a.replace(r,"$1"+e+"$2");return a+s},w=(v=function(t){var e;return e={digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:"",showZero:!1},t=n.extend(e,t),function(e){var n;return isNaN(e)||!isFinite(e)?"":0!==e||t.showZero?(n=l((t.scaler*e).toFixed(t.digitsAfterDecimal),t.thousandsSep,t.decimalSep),""+t.prefix+n+t.suffix):""}})(),C=v({digitsAfterDecimal:0}),A=v({digitsAfterDecimal:1,scaler:100,suffix:"%"}),u=function(t){return{Count:t.count(C),"Count Unique Values":t.countUnique(C),"List Unique Values":t.listUnique(", "),Sum:t.sum(w),"Integer Sum":t.sum(C),Average:t.average(w),Minimum:t.min(w),Maximum:t.max(w),"Sum over Sum":t.sumOverSum(w),"80% Upper Bound":t.sumOverSumBound80(!0,w),"80% Lower Bound":t.sumOverSumBound80(!1,w),"Sum as Fraction of Total":t.fractionOf(t.sum(),"total",A),"Sum as Fraction of Rows":t.fractionOf(t.sum(),"row",A),"Sum as Fraction of Columns":t.fractionOf(t.sum(),"col",A),"Count as Fraction of Total":t.fractionOf(t.count(),"total",A),"Count as Fraction of Rows":t.fractionOf(t.count(),"row",A),"Count as Fraction of Columns":t.fractionOf(t.count(),"col",A)}}(o={count:function(t){return null==t&&(t=C),function(){return function(e,n,r){return{count:0,push:function(){return this.count++},value:function(){return this.count},format:t}}}},countUnique:function(t){return null==t&&(t=C),function(n){var r;return r=n[0],function(n,i,a){return{uniq:[],push:function(t){var n;if(n=t[r],e.call(this.uniq,n)<0)return this.uniq.push(t[r])},value:function(){return this.uniq.length},format:t,numInputs:null!=r?0:1}}}},listUnique:function(t){return function(n){var r;return r=n[0],function(n,i,a){return{uniq:[],push:function(t){var n;if(n=t[r],e.call(this.uniq,n)<0)return this.uniq.push(t[r])},value:function(){return this.uniq.join(t)},format:function(t){return t},numInputs:null!=r?0:1}}}},sum:function(t){return null==t&&(t=w),function(e){var n;return n=e[0],function(e,r,i){return{sum:null,push:function(t){if(!isNaN(parseFloat(t[n])))return this.sum+=parseFloat(t[n])},value:function(){return this.sum},format:t,numInputs:null!=n?0:1}}}},genericSum:function(t){return null==t&&(t=w),function(e){var n;return n=e[0],function(e,r,i){return{sum:null,text:null,push:function(t){return isNaN(parseFloat(t[n]))?t[n]?(this.text=t[n],null):void 0:this.sum+=parseFloat(t[n])},value:function(){return null===this.sum?null===this.text?null:this.text:this.sum},format:t,numInputs:null!=n?0:1}}}},min:function(t){return null==t&&(t=w),function(e){var n;return n=e[0],function(e,r,i){return{val:null,push:function(t){var e,r;if(r=parseFloat(t[n]),!isNaN(r))return this.val=Math.min(r,null!=(e=this.val)?e:r)},value:function(){return this.val},format:t,numInputs:null!=n?0:1}}}},max:function(t){return null==t&&(t=w),function(e){var n;return n=e[0],function(e,r,i){return{val:null,push:function(t){var e,r;if(r=parseFloat(t[n]),!isNaN(r))return this.val=Math.max(r,null!=(e=this.val)?e:r)},value:function(){return this.val},format:t,numInputs:null!=n?0:1}}}},average:function(t){return null==t&&(t=w),function(e){var n;return n=e[0],function(e,r,i){return{sum:0,len:0,push:function(t){if(!isNaN(parseFloat(t[n])))return this.sum+=parseFloat(t[n]),this.len++},value:function(){return this.sum/this.len},format:t,numInputs:null!=n?0:1}}}},sumOverSum:function(t){return null==t&&(t=w),function(e){var n,r;return r=e[0],n=e[1],function(e,i,a){return{sumNum:0,sumDenom:0,push:function(t){if(isNaN(parseFloat(t[r]))||(this.sumNum+=parseFloat(t[r])),!isNaN(parseFloat(t[n])))return this.sumDenom+=parseFloat(t[n])},value:function(){return this.sumNum/this.sumDenom},format:t,numInputs:null!=r&&null!=n?0:2}}}},sumOverSumBound80:function(t,e){return null==t&&(t=!0),null==e&&(e=w),function(n){var r,i;return i=n[0],r=n[1],function(n,a,s){return{sumNum:0,sumDenom:0,push:function(t){if(isNaN(parseFloat(t[i]))||(this.sumNum+=parseFloat(t[i])),!isNaN(parseFloat(t[r])))return this.sumDenom+=parseFloat(t[r])},value:function(){var e;return e=t?1:-1,(.821187207574908/this.sumDenom+this.sumNum/this.sumDenom+1.2815515655446004*e*Math.sqrt(.410593603787454/(this.sumDenom*this.sumDenom)+this.sumNum*(1-this.sumNum/this.sumDenom)/(this.sumDenom*this.sumDenom)))/(1+1.642374415149816/this.sumDenom)},format:e,numInputs:null!=i&&null!=r?0:2}}}},fractionOf:function(t,e,n){return null==e&&(e="total"),null==n&&(n=A),function(){var i;return i=1<=arguments.length?r.call(arguments,0):[],function(r,a,s){return{selector:{total:[[],[]],row:[a,[]],col:[[],s]}[e],inner:t.apply(null,i)(r,a,s),push:function(t){return this.inner.push(t)},format:n,value:function(){return this.inner.value()/r.getAggregator.apply(r,this.selector).inner.value()},numInputs:t.apply(null,i)().numInputs}}}}}),f={en:{aggregators:u,renderers:b={Table:function(t,e){return g(t,e)},"Table Barchart":function(t,e){return n(g(t,e)).barchart()},Heatmap:function(t,e){return e.onDrawTable&&e.onDrawTable(),n(g(t,e)).heatmap()},"Row Heatmap":function(t,e){return e.onDrawTable&&e.onDrawTable(),n(g(t,e)).heatmap("rowheatmap")},"Col Heatmap":function(t,e){return e.onDrawTable&&e.onDrawTable(),n(g(t,e)).heatmap("colheatmap")}},localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter results",totals:"Totals",vs:"vs",by:"by"}}},p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],y=function(t){return("0"+t).substr(-2,2)},d={bin:function(t,e){return function(n){return n[t]-n[t]%e}},dateFormat:function(t,e,n,r,i){var a;return null==n&&(n=!1),null==r&&(r=p),null==i&&(i=c),a=n?"UTC":"",function(n){var s;return s=new Date(Date.parse(n[t])),isNaN(s)?"":e.replace(/%(.)/g,function(t,e){switch(e){case"y":return s["get"+a+"FullYear"]();case"m":return y(s["get"+a+"Month"]()+1);case"n":return r[s["get"+a+"Month"]()];case"d":return y(s["get"+a+"Date"]());case"w":return i[s["get"+a+"Day"]()];case"x":return s["get"+a+"Day"]();case"H":return y(s["get"+a+"Hours"]());case"M":return y(s["get"+a+"Minutes"]());case"S":return y(s["get"+a+"Seconds"]());default:return"%"+e}})}}},m=function(t,e){var n,r,i,a,s,l,o;if(l=/(\d+)|(\D+)/g,s=/\d/,o=/^0/,"number"==typeof t||"number"==typeof e)return isNaN(t)?1:isNaN(e)?-1:t-e;if((n=String(t).toLowerCase())===(i=String(e).toLowerCase()))return 0;if(!s.test(n)||!s.test(i))return n>i?1:-1;for(n=n.match(l),i=i.match(l);n.length&&i.length;)if((r=n.shift())!==(a=i.shift()))return s.test(r)&&s.test(a)?r.replace(o,".0")-a.replace(o,".0"):r>a?1:-1;return n.length-i.length},x=function(t){var e,n,r;for(e in n={},t)r=t[e],n[r]=e;return function(t,e){return null!=n[t]&&null!=n[e]?n[t]-n[e]:null!=n[t]?-1:null!=n[e]?1:m(t,e)}},h=function(t,e){var r;return r=t(e),n.isFunction(r)?r:m},n.pivotUtilities={aggregatorTemplates:o,aggregators:u,renderers:b,derivers:d,locales:f,naturalSort:m,numberFormat:v,sortAs:x},s=function(){function e(t,n){this.getAggregator=i(this.getAggregator,this),this.getRowKeys=i(this.getRowKeys,this),this.getColKeys=i(this.getColKeys,this),this.sortKeys=i(this.sortKeys,this),this.arrSort=i(this.arrSort,this),this.aggregator=n.aggregator,this.aggregatorName=n.aggregatorName,this.colAttrs=n.cols,this.rowAttrs=n.rows,this.valAttrs=n.vals,this.sorters=n.sorters,this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.sorted=!1,e.forEachRecord(t,n.derivedAttributes,function(t){return function(e){if(n.filter(e))return t.processRecord(e)}}(this))}return e.forEachRecord=function(e,r,i){var s,l,o,u,c,d,h,f,p,m,v,g;if(s=n.isEmptyObject(r)?i:function(t){var e,n,a;for(e in r)a=r[e],t[e]=null!=(n=a(t))?n:t[e];return i(t)},n.isFunction(e))return e(s);if(n.isArray(e)){if(n.isArray(e[0])){for(o in m=[],e)if(a.call(e,o)&&(l=e[o],o>0)){for(u in f={},p=e[0])a.call(p,u)&&(c=p[u],f[c]=l[u]);m.push(s(f))}return m}for(v=[],d=0,h=e.length;d<h;d++)f=e[d],v.push(s(f));return v}if(e instanceof t)return g=[],n("thead > tr > th",e).each(function(t){return g.push(n(this).text())}),n("tbody > tr",e).each(function(t){return f={},n("td",this).each(function(t){return f[g[t]]=n(this).html()}),s(f)});throw new Error("unknown input format")},e.convertToArray=function(t){var n;return n=[],e.forEachRecord(t,{},function(t){return n.push(t)}),n},e.prototype.arrSort=function(t){var e,n;return n=function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(h(this.sorters,e));return i}.call(this),function(t,e){var r,i;for(i in n)if(0!==(r=(0,n[i])(t[i],e[i])))return r;return 0}},e.prototype.sortKeys=function(){if(!this.sorted)return this.sorted=!0,this.rowKeys.sort(this.arrSort(this.rowAttrs)),this.colKeys.sort(this.arrSort(this.colAttrs))},e.prototype.getColKeys=function(){return this.sortKeys(),this.colKeys},e.prototype.getRowKeys=function(){return this.sortKeys(),this.rowKeys},e.prototype.processRecord=function(t){var e,n,r,i,a,s,l,o,u,c,d,h,f;for(e=[],h=[],i=0,a=(o=this.colAttrs).length;i<a;i++)f=o[i],e.push(null!=(u=t[f])?u:"null");for(l=0,s=(c=this.rowAttrs).length;l<s;l++)f=c[l],h.push(null!=(d=t[f])?d:"null");if(r=h.join(String.fromCharCode(0)),n=e.join(String.fromCharCode(0)),this.allTotal.push(t),0!==h.length&&(this.rowTotals[r]||(this.rowKeys.push(h),this.rowTotals[r]=this.aggregator(this,h,[])),this.rowTotals[r].push(t)),0!==e.length&&(this.colTotals[n]||(this.colKeys.push(e),this.colTotals[n]=this.aggregator(this,[],e)),this.colTotals[n].push(t)),0!==e.length&&0!==h.length)return this.tree[r]||(this.tree[r]={}),this.tree[r][n]||(this.tree[r][n]=this.aggregator(this,h,e)),this.tree[r][n].push(t)},e.prototype.getAggregator=function(t,e){var n,r,i;return i=t.join(String.fromCharCode(0)),r=e.join(String.fromCharCode(0)),null!=(n=0===t.length&&0===e.length?this.allTotal:0===t.length?this.colTotals[r]:0===e.length?this.rowTotals[i]:this.tree[i][r])?n:{value:function(){return null},format:function(){return""}}},e}(),g=function(t,e){var r,i,s,l,o,u,c,d,h,f,p,m,v,g,b,x,w,C,A,y,O;for(d in u={localeStrings:{totals:"Totals"},getIndexContent:function(t){return t}},e=n.extend(u,e),s=t.colAttrs,p=t.rowAttrs,v=t.getRowKeys(),o=t.getColKeys(),(f=document.createElement("table")).className="pvtTable",g=function(t,e,n){var r,i,a,s,l,o,u,c;if(0!==e){for(s=!0,c=r=0,l=n;0<=l?r<=l:r>=l;c=0<=l?++r:--r)t[e-1][c]!==t[e][c]&&(s=!1);if(s)return-1}for(i=0;e+i<t.length;){for(u=!1,c=a=0,o=n;0<=o?a<=o:a>=o;c=0<=o?++a:--a)t[e][c]!==t[e+i][c]&&(u=!0);if(u)break;i++}return i},s)if(a.call(s,d)){for(c in i=s[d],C=document.createElement("tr"),0===parseInt(d)&&0!==p.length&&((x=document.createElement("th")).setAttribute("colspan",p.length),x.setAttribute("rowspan",s.length),C.appendChild(x)),(x=document.createElement("th")).className="pvtAxisLabel",x.innerHTML=e.getIndexContent(i),C.appendChild(x),o)a.call(o,c)&&(l=o[c],-1!==(O=g(o,parseInt(c),parseInt(d)))&&((x=document.createElement("th")).className="pvtColLabel",x.innerHTML=l[d],x.setAttribute("colspan",O),parseInt(d)===s.length-1&&0!==p.length&&x.setAttribute("rowspan",2),C.appendChild(x)));0===parseInt(d)&&((x=document.createElement("th")).className="pvtTotalLabel",x.innerHTML=e.localeStrings.totals,x.setAttribute("rowspan",s.length+(0===p.length?0:1)),C.appendChild(x)),f.appendChild(C)}if(0!==p.length){for(c in C=document.createElement("tr"),p)a.call(p,c)&&(h=p[c],(x=document.createElement("th")).className="pvtAxisLabel",x.innerHTML=e.getIndexContent(h),C.appendChild(x));x=document.createElement("th"),0===s.length&&(x.className="pvtTotalLabel",x.innerHTML=e.localeStrings.totals),C.appendChild(x),f.appendChild(C)}for(c in v)if(a.call(v,c)){for(d in m=v[c],C=document.createElement("tr"),m)a.call(m,d)&&(A=m[d],-1!==(O=g(v,parseInt(c),parseInt(d)))&&((x=document.createElement("th")).className="pvtRowLabel",x.innerHTML=A,x.setAttribute("rowspan",O),parseInt(d)===p.length-1&&0!==s.length&&x.setAttribute("colspan",2),C.appendChild(x)));for(d in o)a.call(o,d)&&(l=o[d],y=(r=t.getAggregator(m,l)).value(),(b=document.createElement("td")).className="pvtVal row"+c+" col"+d,b.innerHTML=r.format(y),b.setAttribute("data-value",y),C.appendChild(b));y=(w=t.getAggregator(m,[])).value(),(b=document.createElement("td")).className="pvtTotal rowTotal",b.innerHTML=w.format(y),b.setAttribute("data-value",y),b.setAttribute("data-for","row"+c),C.appendChild(b),f.appendChild(C)}for(d in C=document.createElement("tr"),(x=document.createElement("th")).className="pvtTotalLabel",x.innerHTML=e.localeStrings.totals,x.setAttribute("colspan",p.length+(0===s.length?0:1)),C.appendChild(x),o)a.call(o,d)&&(l=o[d],y=(w=t.getAggregator([],l)).value(),(b=document.createElement("td")).className="pvtTotal colTotal",b.innerHTML=w.format(y),b.setAttribute("data-value",y),b.setAttribute("data-for","col"+d),C.appendChild(b));return y=(w=t.getAggregator([],[])).value(),(b=document.createElement("td")).className="pvtGrandTotal",b.innerHTML=w.format(y),b.setAttribute("data-value",y),C.appendChild(b),f.appendChild(C),f.setAttribute("data-numrows",v.length),f.setAttribute("data-numcols",o.length),f},n.fn.pivot=function(t,e){var r,i,a,l,u;r={cols:[],rows:[],vals:[],filter:function(){return!0},aggregator:o.count()(),aggregatorName:"Count",sorters:function(){},derivedAttributes:{},renderer:g,rendererOptions:null,localeStrings:f.en.localeStrings},e=n.extend(r,e),l=null;try{a=new s(t,e);try{l=e.renderer(a,e.rendererOptions)}catch(t){i=t,"undefined"!=typeof console&&null!==console&&console.error(i.stack),l=n("<span>").html(e.localeStrings.renderError)}}catch(t){i=t,"undefined"!=typeof console&&null!==console&&console.error(i.stack),l=n("<span>").html(e.localeStrings.computeError)}if(l){for(u=this[0];u.hasChildNodes();)u.removeChild(u.lastChild);return this.append(l)}},n.fn.pivotUI=function(t,r,i,l){var o,u,c,d,p,v,g,b,x,w,C,A,y,O,T,M,F,S,D,_,k,L,N,R,V,$,E,I,K,H,P,j,q,U,B,Q,z,J,G;null==i&&(i=!1),null==l&&(l="en"),null==f[l]&&(l="en"),v={derivedAttributes:{},aggregators:f[l].aggregators,renderers:f[l].renderers,hiddenAttributes:[],menuLimit:200,cols:[],rows:[],vals:[],exclusions:{},inclusions:{},unusedAttrsVertical:85,autoSortUnusedAttrs:!1,rendererOptions:{localeStrings:f[l].localeStrings},onRefresh:null,filter:function(){return!0},sorters:function(){},localeStrings:f[l].localeStrings},b=this.data("pivotUIOptions"),_=null==b||i?n.extend(v,r):b;try{for(d in t=s.convertToArray(t),q=function(){var e,n;for(A in n=[],e=t[0])a.call(e,A)&&n.push(A);return n}(),N=_.derivedAttributes)a.call(N,d)&&e.call(q,d)<0&&q.push(d);for(c={},y=0,O=q.length;y<O;y++)G=q[y],c[G]={};for(G in s.forEachRecord(t,_.derivedAttributes,function(t){var e,n,r;for(A in n=[],t)a.call(t,A)&&(r=t[A],_.filter(t)&&(null==r&&(r="null"),null==(e=c[A])[r]&&(e[r]=0),n.push(c[A][r]++)));return n}),Q=n("<table>",{class:"pvtUi"}).attr("cellpadding",5),P=n("<td>"),H=n("<select>").addClass("pvtRenderer").appendTo(P).bind("change",function(){return I()}),R=_.renderers)a.call(R,G)&&n("<option>").val(G).html(G).appendTo(H);if(p=n("<td>").addClass("pvtAxisContainer pvtUnused"),j=function(){var t,n,r;for(r=[],n=0,t=q.length;n<t;n++)d=q[n],e.call(_.hiddenAttributes,d)<0&&r.push(d);return r}(),J=!1,z="auto"===_.unusedAttrsVertical?120:parseInt(_.unusedAttrsVertical),!isNaN(z)){for(u=0,S=0,T=j.length;S<T;S++)u+=j[S].length;J=u>z}for(w in!0===_.unusedAttrsVertical||J?p.addClass("pvtVertList"):p.addClass("pvtHorizList"),x=function(t){var r,i,a,s,l,o,u,d,f,m,v,g,b,x,C;if(u=function(){var e;for(A in e=[],c[t])e.push(A);return e}(),o=!1,(C=n("<div>").addClass("pvtFilterBox").hide()).append(n("<h4>").text(t+" ("+u.length+")")),u.length>_.menuLimit)C.append(n("<p>").html(_.localeStrings.tooMany));else for((i=n("<p>").appendTo(C)).append(n("<button>",{type:"button"}).html(_.localeStrings.selectAll).bind("click",function(){return C.find("input:visible").prop("checked",!0)})),i.append(n("<button>",{type:"button"}).html(_.localeStrings.selectNone).bind("click",function(){return C.find("input:visible").prop("checked",!1)})),i.append(n("<br>")),i.append(n("<input>",{type:"text",placeholder:_.localeStrings.filterResults,class:"pvtSearch"}).bind("keyup",function(){var t;return t=n(this).val().toLowerCase(),C.find(".pvtCheckContainer p").each(function(){return-1!==n(this).text().toLowerCase().indexOf(t)?n(this).show():n(this).hide()})})),a=n("<div>").addClass("pvtCheckContainer").appendTo(C),f=0,d=(m=u.sort(h(_.sorters,t))).length;f<d;f++)A=m[f],x=c[t][A],s=n("<label>"),l=!1,_.inclusions[t]?l=e.call(_.inclusions[t],A)<0:_.exclusions[t]&&(l=e.call(_.exclusions[t],A)>=0),o||(o=l),n("<input>").attr("type","checkbox").addClass("pvtFilter").attr("checked",!l).data("filter",[t,A]).appendTo(s),s.append(n("<span>").html(A)),s.append(n("<span>").text(" ("+x+")")),a.append(n("<p>").append(s));return b=function(){return C.find("[type='checkbox']").length-C.find("[type='checkbox']:checked").length>0?r.addClass("pvtFilteredAttribute"):r.removeClass("pvtFilteredAttribute"),u.length>_.menuLimit?C.toggle():C.toggle(0,I)},n("<p>").appendTo(C).append(n("<button>",{type:"button"}).text("OK").bind("click",b)),v=function(t){var e,r,i;return e=(i=n(t.currentTarget).position()).left,r=i.top,C.css({left:e+10,top:r+10}).toggle(),C.find(".pvtSearch").val(""),C.find(".pvtCheckContainer p").show()},g=n("<span>").addClass("pvtTriangle").html(" &#x25BE;").bind("click",v),r=n("<li>").addClass("axis_"+w).append(n("<span>").addClass("pvtAttr").text(t).data("attrName",t).append(g)),o&&r.addClass("pvtFilteredAttribute"),p.append(r).append(C),r.bind("dblclick",v)},j)a.call(j,w)&&x(d=j[w]);for(G in U=n("<tr>").appendTo(Q),o=n("<select>").addClass("pvtAggregator").bind("change",function(){return I()}),V=_.aggregators)a.call(V,G)&&o.append(n("<option>").val(G).html(G));for(n("<td>").addClass("pvtVals").appendTo(U).append(o).append(n("<br>")),n("<td>").addClass("pvtAxisContainer pvtHorizList pvtCols").appendTo(U),(B=n("<tr>").appendTo(Q)).append(n("<td>").addClass("pvtAxisContainer pvtRows").attr("valign","top")),k=n("<td>").attr("valign","top").addClass("pvtRendererArea").appendTo(B),!0===_.unusedAttrsVertical||J?(Q.find("tr:nth-child(1)").prepend(P),Q.find("tr:nth-child(2)").prepend(p)):Q.prepend(n("<tr>").append(P).append(p)),this.html(Q),$=_.cols,D=0,M=$.length;D<M;D++)G=$[D],this.find(".pvtCols").append(this.find(".axis_"+n.inArray(G,j)));for(E=_.rows,L=0,F=E.length;L<F;L++)G=E[L],this.find(".pvtRows").append(this.find(".axis_"+n.inArray(G,j)));null!=_.aggregatorName&&this.find(".pvtAggregator").val(_.aggregatorName),null!=_.rendererName&&this.find(".pvtRenderer").val(_.rendererName),C=!0,K=function(r){return function(){var i,a,s,l,u,c,d,h,f,p,v,g,b,x,y;if(g={derivedAttributes:_.derivedAttributes,localeStrings:_.localeStrings,rendererOptions:_.rendererOptions,sorters:_.sorters,cols:[],rows:[]},c=null!=(f=_.aggregators[o.val()]([])().numInputs)?f:0,y=[],r.find(".pvtRows li span.pvtAttr").each(function(){return g.rows.push(n(this).data("attrName"))}),r.find(".pvtCols li span.pvtAttr").each(function(){return g.cols.push(n(this).data("attrName"))}),r.find(".pvtVals select.pvtAttrDropdown").each(function(){return 0===c?n(this).remove():(c--,""!==n(this).val()?y.push(n(this).val()):void 0)}),0!==c)for(h=r.find(".pvtVals"),G=v=0,p=c;0<=p?v<p:v>p;G=0<=p?++v:--v){for(u=n("<select>").addClass("pvtAttrDropdown").append(n("<option>")).bind("change",function(){return I()}),b=0,l=j.length;b<l;b++)i=j[b],u.append(n("<option>").val(i).text(i));h.append(u)}if(C&&(y=_.vals,w=0,r.find(".pvtVals select.pvtAttrDropdown").each(function(){return n(this).val(y[w]),w++}),C=!1),g.aggregatorName=o.val(),g.vals=y,g.aggregator=_.aggregators[o.val()](y),g.renderer=_.renderers[H.val()],a={},r.find("input.pvtFilter").not(":checked").each(function(){var t;return t=n(this).data("filter"),null!=a[t[0]]?a[t[0]].push(t[1]):a[t[0]]=[t[1]]}),s={},r.find("input.pvtFilter:checked").each(function(){var t;if(t=n(this).data("filter"),null!=a[t[0]])return null!=s[t[0]]?s[t[0]].push(t[1]):s[t[0]]=[t[1]]}),g.filter=function(t){var n,r;if(!_.filter(t))return!1;for(A in a)if(n=a[A],r=""+t[A],e.call(n,r)>=0)return!1;return!0},k.pivot(t,g),d=n.extend(_,{cols:g.cols,rows:g.rows,vals:y,exclusions:a,inclusions:s,inclusionsInfo:s,aggregatorName:o.val(),rendererName:H.val()}),r.data("pivotUIOptions",d),_.autoSortUnusedAttrs&&(x=r.find("td.pvtUnused.pvtAxisContainer"),n(x).children("li").sort(function(t,e){return m(n(t).text(),n(e).text())}).appendTo(x)),k.css("opacity",1),null!=_.onRefresh)return _.onRefresh(d)}}(this),(I=function(){return k.css("opacity",.5),setTimeout(K,10)})(),this.find(".pvtAxisContainer").sortable({update:function(t,e){if(null==e.sender)return I()},connectWith:this.find(".pvtAxisContainer"),items:"li",placeholder:"pvtPlaceholder"})}catch(t){g=t,"undefined"!=typeof console&&null!==console&&console.error(g.stack),this.html(_.localeStrings.uiRenderError)}return this},n.fn.heatmap=function(t){var e,r,i,a,s,l,o,u,c,d;switch(null==t&&(t="heatmap"),u=this.data("numrows"),o=this.data("numcols"),e=function(t,e,n){var r;return r=function(){switch(t){case"red":return function(t){return"ff"+t+t};case"green":return function(t){return t+"ff"+t};case"blue":return function(t){return""+t+t+"ff"}}}(),function(t){var i;return 1===(i=(255-Math.round(255*(t-e)/(n-e))).toString(16).split(".")[0]).length&&(i=0+i),r(i)}},r=function(t){return function(r,i){var a,s,l;return l=[],(s=function(e){return t.find(r).each(function(){var t;if(null!=(t=n(this).data("value"))&&isFinite(t))return e(t,n(this))})})(function(t){return l.push(t)}),a=e(i,Math.min.apply(Math,l),Math.max.apply(Math,l)),s(function(t,e){return e.css("background-color","#"+a(t))})}}(this),t){case"heatmap":r(".pvtVal","red");break;case"rowheatmap":for(i=s=0,c=u;0<=c?s<c:s>c;i=0<=c?++s:--s)r(".pvtVal.row"+i,"red");break;case"colheatmap":for(a=l=0,d=o;0<=d?l<d:l>d;a=0<=d?++l:--l)r(".pvtVal.col"+a,"red")}return r(".pvtTotal.rowTotal","red"),r(".pvtTotal.colTotal","red"),this},n.fn.barchart=function(){var t,e,r,i,a;for(i=this.data("numrows"),this.data("numcols"),t=function(t){return function(e){var r,i,a,s;return s=[],(r=function(r){return t.find(e).each(function(){var t;if(null!=(t=n(this).data("value"))&&isFinite(t))return r(t,n(this))})})(function(t){return s.push(t)}),i=Math.max.apply(Math,s),a=function(t){return 100*t/(1.4*i)},r(function(t,e){var r,i;return r=e.text(),(i=n("<div>").css({position:"relative",height:"55px"})).append(n("<div>").css({position:"absolute",bottom:0,left:0,right:0,height:a(t)+"%","background-color":"gray"})),i.append(n("<div>").text(r).css({position:"relative","padding-left":"5px","padding-right":"5px"})),e.css({padding:0,"padding-top":"5px","text-align":"center"}).html(i)})}}(this),e=r=0,a=i;0<=a?r<a:r>a;e=0<=a?++r:--r)t(".pvtVal.row"+e);return t(".pvtTotal.colTotal"),this}})}).call(this)}).call(this,n(1))},1521:function(t,e,n){(function(t,e){!function(t){"use strict";var n,r,i=function(t){return t&&a(t,"[")&&s(t,"]")&&(t=(t=t.substring(t.lastIndexOf("[")+1)).substring(0,t.length-1)),t},a=function(t,e){return t.slice(0,e.length)==e},s=function(t,e){return""==e||t.slice(-e.length)==e};n=function(n,r){return function(a,s){var l,o,u,c,d,h,f,p,m,v,g,b,x,w,C,A;for(d={localeStrings:{vs:"vs",by:"by",and:"and"}},s=t.extend(d,s),0===(g=a.getRowKeys()).length&&g.push([]),0===(u=a.getColKeys()).length&&u.push([]),m=[],x=0,C=g.length;x<C;x++){var y=[];for(v=g[x],w=0,A=u.length;w<A;w++)o=u[w],null!=(l=a.getAggregator(v,o)).value()?y.push(l.value()):y.push(null);f=g[x],m.push({name:f.join("-"),data:y})}for(c=[],x=0,C=u.length;x<C;x++)o=u[x],c.push(o.join("-"));b=i(a.valAttrs[0]),s.chartTitle&&(b=s.chartTitle);var O=function(t){var e=[];if(t)for(var n=0;n<t.length;n++)"data_index"!=t[n]&&e.push(String(t[n]).split(".")[0]);return e};""!==(p=O(a.rowAttrs).map(i).join(","))&&(b+=" "+s.localeStrings.by+" "+p),""!==(h=O(a.colAttrs).map(i).join(","))&&(b+=p?" "+s.localeStrings.and+" "+h:" "+s.localeStrings.by+" "+h);var T=s.$el,M={chart:{type:n,zoomType:"x",events:{load:function(){s.onDrawTable&&(s.onDrawTable(),this.reflow())}}},title:{text:b},xAxis:{title:{text:p},categories:c},yAxis:{title:{text:void 0}},tooltip:{formatter:function(){return(this.key&&""!=this.key?'<span style="font-size: 10px">'+this.key+"</span><br/>":"")+'<span style="color:'+this.point.series.color+'">●</span> '+this.series.name+": <b>"+e.numberFormat(this.point.y,2)+"</b><br/>"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0,itemWidth:200},credits:!1,series:m};return r&&(M=t.extend(M,r,!0)),s&&(M=t.extend(M,s,!0)),T.highcharts(M),!1}},r=function(){return function(n,r){var a,s,l,o,u,c;u={localeStrings:{vs:"vs",by:"by",and:"and"}},r=t.extend(u,r),o=n.getRowKeys(),l=[];for(var d={},h=0,f=0;f<o.length;f++)for(var p=o[f],m="",v="",g=0;g<p.length;g++){d[m=m+"_"+(b=p[g])]||(c={id:m,name:b,value:0},0==g?(c.color=e.getOptions().colors[h],h++):c.parent=v,d[m]=c),(c=d[m]).value+=n.getAggregator(p,[]).value(),v=m}for(var b in d)l.push(d[b]);a=i(n.valAttrs[0]),r.chartTitle&&(a=r.chartTitle),""!==(s=function(t){var e=[];if(t)for(var n=0;n<t.length;n++)"data_index"!=t[n]&&e.push(String(t[n]).split(".")[0]);return e}(n.rowAttrs).map(i).join(","))&&(a+=" "+r.localeStrings.by+" "+s);var x={chart:{type:"treemap",events:{load:function(){r.onDrawTable&&(r.onDrawTable(),this.reflow())}}},series:[{layoutAlgorithm:"squarified",allowDrillToNode:!0,dataLabels:{enabled:!1},levelIsConstant:!1,levels:[{level:1,dataLabels:{enabled:!0},borderWidth:3}],data:l}],title:{text:a},credits:!1};return r&&(x=t.extend(x,r,!0)),r.$el.highcharts(x),!1}},t.pivotUtilities.highchart_renderers={"Line Chart":n("line"),"Bar Chart":n("bar"),"Stacked Bar Chart":n("bar",{plotOptions:{series:{stacking:"normal"}}}),"Column Chart":n("column"),"Stacked Column Chart":n("column",{plotOptions:{series:{stacking:"normal"}}}),"Area Chart":n("area",{plotOptions:{series:{stacking:"normal"}}}),"TreeMap Chart":r()}}(t)}).call(this,n(1),n(26))},1522:function(t,e,n){"use strict";n.r(e),function(t){var e=n(18),r=n(925),i=n.n(r);!function(){var t=i.a.editors.NumericEditor.prototype.extend();t.prototype.beginEditing=function(t){var e=i.a.editors.NumericEditor.prototype;if(void 0===t&&this.originalValue){var n=""+this.originalValue;isNaN(parseFloat(n))||(n=n.replace(",",""),n=parseFloat(n).toFixed(2)),e.beginEditing.apply(this,[n])}else e.beginEditing.apply(this,arguments);e.beginEditing.apply(this,[t])},i.a.editors.RoundedNumericEditor=t;var e=i.a.editors.NumericEditor.prototype.extend();e.prototype.beginEditing=function(t){var e=i.a.editors.NumericEditor.prototype;if(void 0===t&&this.originalValue){var n=""+this.originalValue;isNaN(parseFloat(n))||(n=n.replace(",",""),n=parseFloat(n).toFixed(10)),e.beginEditing.apply(this,[n])}else e.beginEditing.apply(this,arguments);e.beginEditing.apply(this,[t])},i.a.editors.GenericEditor=e}(i.a),t.pivotUtilities.novix_renderers={"Pivot Table":function(e,n){return t.pivotUtilities.novix_renderers["Input Table"](e,t.extend(n,{readOnly:!0}))},"Input Table":function(n,r){var a,s={$el:t(document),showRowTotal:!0,showColumnTotal:!0,header:{className:"header"},total:{className:"total",format:"0,0.00"},data:{className:"data",format:"0,0.00"},numberFormat:'2,F,4,2,0,0,4,0,$,0,"ABBREV",0,,,0,0',getIndexContent:function(t){return t},indexFormatters:{}},l=function(t){t.readOnly=!0,t.className=r.header.className},o=function(t){t.readOnly=r.showRowTotal||r.showColumnTotal},u=function(t){t.readOnly=r.readOnly},c=function(t,e,n){var r=t[0]-n.fixedRows,i=t[1]-n.fixedColumns,a={filterList:[],oldValue:t[2],definition:t[3]};if(i>=0)for(var s=e.getColKeys(),l=0;l<e.colAttrs.length;l++)if(i<s.length){var o=s[i];a.filterList.push({Key:e.colAttrs[l],Value:o[l]})}if(r>=0)for(var u=e.getRowKeys(),c=0;c<e.rowAttrs.length;c++)if(r<u.length){var d=u[r];a.filterList.push({Key:e.rowAttrs[c],Value:d[c]})}return a},d=function(t){var e=r.indexFormatters,n={data:[],columns:[],fixedColumns:0,fixedRows:0,mergeCells:[],totalColumns:0,totalRows:0,hasColumnAttr:!1,hasRowAttr:!1,tableStyles:{}},a=t.getColKeys(),s=t.getRowKeys(),l=t.colAttrs.length>0,o=t.rowAttrs.length>0;n.hasColumnAttr=l,n.hasRowAttr=o;var u=function(t,e,r,i,a,s){n.mergeCells.push({row:t,col:e,rowspan:r,colspan:i})};n.fixedColumns=t.rowAttrs.length+(l?1:0),n.fixedRows=t.colAttrs.length+(o?1:0);var c=!1,d=!1;0==t.colKeys.length&&(c=!0),0==t.rowKeys.length&&(d=!0);for(var h=n.totalColumns=t.colKeys.length+t.rowAttrs.length+(t.colAttrs.length>0?1:0)+(r.showColumnTotal||c?1:0),f=0;f<h;f++)f<n.fixedColumns?n.columns.push({type:"text"}):n.columns.push({type:"text",editor:i.a.editors.GenericEditor}),l&&t.rowAttrs.length>0&&f==t.rowAttrs.length&&(n.columns[n.columns.length-1].width=1);if(o&&l)for(var p=0;p<t.colAttrs.length;p++)u(p,0,1,o?t.rowAttrs.length:1);for(p=0;p<t.colAttrs.length+(o?1:0);p++){var m=[];if(p<t.colAttrs.length){m.push(r.getIndexContent(t.colAttrs[p]));for(f=0;f<t.rowAttrs.length-1;f++)m.push("");if(o&&m.push(""),t.colKeys.length>0){var v=m.length,g=a[0][p],b=0;for(f=0;f<a.length;f++){var x=a[f][p];e[t.colAttrs[p]]&&(x=e[t.colAttrs[p]].format(x)),p<t.colAttrs.length-1&&g!=x?(m.push(x),g=x,u(p,v,1,b),v+=b,b=1):(b++,m.push(x),t.colAttrs.length)}p<t.colAttrs.length-1&&u(p,v,1,b)}(r.showColumnTotal||c)&&m.push("Totals")}else{for(f=0;f<t.rowAttrs.length;f++)m.push(r.getIndexContent(t.rowAttrs[f])),f==t.rowAttrs.length-1&&l&&u(p,f,1,2);l>0&&m.push("");for(f=0;f<a.length;f++)m.push("");(r.showColumnTotal||c)&&m.push("Totals")}n.data.push(m)}for(var w={},C=0;C<s.length;C++){for(m=[],f=0;f<t.rowAttrs.length;f++){var A=s[C][f];e[t.rowAttrs[f]]&&(A=e[t.rowAttrs[f]].format(A)),m.push(A),f==s[C].length-1&&l?u(C+t.colAttrs.length+1,f,1,2):0==C?w[f]={toMerge:1,row:0,priorText:s[C][f]}:s[C][f]==w[f].priorText?w[f].toMerge++:f<s[C].length-1&&(u(w[f].row+t.colAttrs.length+1,f,w[f].toMerge,1),w[f].row=C,w[f].toMerge=1,w[f].priorText=s[C][f])}l&&m.push("");for(f=0;f<a.length;f++){if((T=t.getAggregator(s[C],a[f]).value())?m.push(T):0===T?m.push("0"):m.push(""),r.validationData.data?(O=r.validationData.data.getAggregator(s[C],a[f]).value(),S=r.getValidationStyle(O)):S=r.getValidationStyle(T),S){var y="__"+(C+t.colAttrs.length+(o?1:0))+"_"+(f+t.rowAttrs.length+(l?1:0))+"__";n.tableStyles[y]=S}}if(r.showColumnTotal||c){var O=0,T=0,M=s[C].join(String.fromCharCode(0));if(t.rowTotals[M]&&(T=t.rowTotals[M].value(),m.push(T),r.validationData.data&&(O=r.validationData.data.rowTotals[M].value())),m.push(T),S=r.validationData.data?r.getValidationStyle(O):r.getValidationStyle(T)){y="__"+(C+t.colAttrs.length+(o?1:0))+"_"+(f+t.rowAttrs.length+(l?1:0))+"__";n.tableStyles[y]=S}}n.data.push(m)}for(f=0;f<t.rowAttrs.length-1;f++)w[f]&&w[f].toMerge>1&&u(w[f].row+t.colAttrs.length+1,f,w[f].toMerge,1);if(r.showRowTotal||d){for(m=[],f=0;f<t.rowAttrs.length;f++)m.push("Totals");l&&m.push("Totals");for(f=0;f<a.length;f++){O=0,T=0;var F=a[f].join(String.fromCharCode(0));if(t.colTotals[F]&&(T=t.colTotals[F].value(),r.validationData.data&&(O=r.validationData.data.colTotals[F].value())),S=r.validationData.data?r.getValidationStyle(O):r.getValidationStyle(T)){y="__"+(C+t.colAttrs.length+(o?1:0))+"_"+(f+t.rowAttrs.length+(l?1:0))+"__";n.tableStyles[y]=S}m.push(T)}if(r.showColumnTotal||c){var S;O=0,T=t.allTotal.value();if(m.push(T),r.validationData.data&&(O=r.validationData.data.allTotal.value()),S=r.validationData.data?r.getValidationStyle(O):r.getValidationStyle(T)){y="__"+(C+t.colAttrs.length+(o?1:0))+"_"+(f+t.rowAttrs.length+(l?1:0))+"__";n.tableStyles[y]=S}}n.data.push(m)}return n.totalRows=n.data.length,(r.showColumnTotal||c)&&t.colAttrs.length>0&&u(0,h-1,t.colAttrs.length+(o?1:0),1),(r.showRowTotal||d)&&t.rowAttrs.length>0&&u(n.totalRows-1,0,1,t.rowAttrs.length+(l?1:0)),n};return function(n,r){var s=d(n),h=new e.NovixFormatter(r.numberFormat),f=function(t,e,n,i,a,l,o){var u=""+l;return isNaN(parseFloat(u))||(u=h.format(u)),e.innerHTML=u,r.showColumnTotal&&i==s.totalColumns-1?e.className=r.total.className:r.showRowTotal&&n==s.totalRows-1?e.className=r.total.className:e.className=r.data.className,e.className+=" __"+n+"_"+i+"__",e};return a&&a.destroy(),r.$el.empty(),a=new i.a(r.$el.get(0),{data:s.data,contextMenu:!1,colHeaders:!1,allowInsertColumn:!1,allowInsertRow:!1,fillHandle:!r.readOnly,columns:s.columns,fixedColumnsLeft:s.fixedColumns,fixedRowsTop:s.fixedRows,mergeCells:s.mergeCells,cells:function(t,e,n){var i;return t<s.fixedRows||e<s.fixedColumns?(l(i={renderer:"html"}),0==e&&s.hasColumnAttr&&s.hasRowAttr&&t<s.fixedRows-1&&(i.className+=" htRight",t==s.fixedRows-2&&(i.className+=" colDelim"))):(i={type:"text",renderer:f},r.showColumnTotal&&e==s.totalColumns-1?o(i):r.showRowTotal&&t==s.totalRows-1?o(i):u(i)),i},afterChange:function(t,e){if(t&&t.length>=0){for(var i=[],a=0;a<t.length;a++)if(t[a][2]!=t[a][3]){var l=c(t[a],n,s);i.push(l)}if(r.onEditValues&&i.length>0){var o={lastRowChanged:t[t.length-1][0],lasColChanged:t[t.length-1][1],scrollX:r.$el.scrollLeft(),scrollY:r.$el.scrollTop()};r.$el.data("currentState",o),r.onEditValues(i)}}},afterInit:function(){r.onDrawTable&&r.onDrawTable(this);var e=r.$el.find(".ht_master .wtHolder").first();e.length>0&&(e.height(e.height()-1),setTimeout(function(){e.height(e.height()+1)},10)),r.contextMenu&&r.$el.find(".handsontable .wtSpreader .htCore tbody").on("contextmenu","tr td",function(e){var i=t(this).prop("class");if(i&&i.indexOf("__")>=0){var a=(i=(i=i.substring(i.indexOf("__")+2)).substring(0,i.indexOf("__"))).split("_"),l=[];l.push(a[0]),l.push(a[1]),l.push(0),l.push(0);var o=c(l,n,s);o&&r.contextMenuCallback(e,o)}return!1})},afterRender:function(t){r.onRender&&r.onRender(t,s.tableStyles)},beforeKeyDown:function(n){try{if(n.ctrlKey&&n.shiftKey&&67==n.keyCode){var r;__currentSession&&(__currentSession.copyDecimalSep?r=__currentSession.copyDecimalSep:__currentSession.decimalSep&&(r=__currentSession.decimalSep));var i=function(t){return void 0==t||isNaN(1*t)?t:r?t.toString().replace(".",r):t.toLocaleString()},a=function(e){try{void 0!=e&&e.indexOf("<div class='connectedDimsSortable")>=0&&(e=t(e).find("span.name").text())&&e.length>0&&":"==e.substring(e.length-1)&&(e=e.substring(0,e.length-1))}catch(t){}return e},l=this.getSelectedRange(),o=l.getAll();if(o&&o.length>0){var u=-1;s.hasColumnAttr&&s.hasRowAttr&&(u=s.fixedColumns-1);for(var c=o[0].row,d="<html><head><style>table{font-size:14px;}.value{mso-number-format:'#,##0.00'}.total{mso-number-format:'#,##0.00';font-weight: bold;}.header{background-color:#ddebf7'}</style></head><body><table><tr>",h=0;h<o.length;h++)if(o[h].col!=u){var f=t(this.getCell(o[h].row,o[h].col));if(f.hasClass("data"))d+="<td class='value'>"+i(this.getDataAtCell(o[h].row,o[h].col))+"</td>";else if(f.hasClass("total"))d+="<td class='total'>"+i(this.getDataAtCell(o[h].row,o[h].col))+"</td>";else{var p=a(this.getDataAtCell(o[h].row,o[h].col));"Totals"==p&&(c>l.from.row&&o[h].col==l.to.col?p="":c==l.to.row&&o[h].col>l.from.col&&(p="")),d+="<td class='header'>"+p+"</td>"}h+1<o.length&&(o[h+1].row==c||(d+="</tr><tr>",c=o[h+1].row))}d+="</tr></table></html>",Object(e.copyTextToClipboard)(d)}n.stopImmediatePropagation(),n.stopPropagation(),n.preventDefault()}}catch(t){}}}),setTimeout(function(){var t=r.$el.data("currentState");t&&t&&t.lastRowChanged&&(a.selectCell(t.lastRowChanged+1,t.lasColChanged,t.lastRowChanged+1,t.lasColChanged),t.lastRowChanged=null,t.scrollX&&t.scrollX>0&&r.$el.scrollLeft(t.scrollX),t.scrollY&&t.scrollY>0&&r.$el.scrollTop(t.scrollY),t=null,r.$el.data("currentState",null)),r.topDimension&&n&&(n.rowKeys&&n.rowKeys.length>=r.topDimension||n.colKeys&&n.colKeys.length>=r.topDimension)&&r.$el.closest(".novixPivot").find(".olap-data-truncated").show()},5),!1}(n,r=t.extend(s,r,!0))}}}.call(this,n(1))},1523:function(t,e,n){"use strict";(function(r,i){var a,s,l=n(18);a=[n(683),n(1524)],void 0===(s=function(t,e){return r.View.extend({el:"body",filterValues:void 0,currentPos:0,initiated:!1,remoteMode:!1,formatter:void 0,filtersArr:[],render:function(){this.filtersArr=[];var n=this;this.options.index.numElements&&this.options.index.numElements>=1e3&&(this.remoteMode=!0);var r={remoteMode:this.remoteMode},i=e(r),a=this.options.index.name;this.options.index.numberFormat&&(this.formatter=new l.NovixFormatter(this.options.index.numberFormat)),(new t).show({title:a,html:i,modalClass:"filterviewModal",okOnEnter:!this.remoteMode,buttons:[{title:"OK",css:"primary",code:"ok"},{title:(0,l.translate)("cancel"),code:"cancel"}],callback:function(t,e){"ok"==t&&n.applyFilters(e)},onClose:function(t){n.removeView(t)},onLoad:function(t){if(t.find(".hierarchySelector li").first().addClass("active"),(0,l.postRender)(t),n.addHandlers(t),n.remoteMode){t.find(".info .total").html(n.options.index.numElements),t.find(".gettingvalues").hide(),t.find(".filterText1").focus();var e=n.getFieldByPos(0);if(e&&n.options&&n.options.filters&&n.options.filters[e]&&0==n.options.filters[e].partial&&n.options.filters[e].values.length>0){var r=[];n.filtersArr=[];for(var i=0;i<n.options.filters[e].values.length;i++)r.push([n.options.filters[e].values[i]]),n.filtersArr.push({text:n.options.filters[e].values[i],li_attr:{"data-value":n.options.filters[e].values[i]},data:{level:0},state:{selected:!0}});n.setValues(r)}}else setTimeout(function(){n.showValuesOnList(),n.initializeSelectedFilters(t)},500)}})},removeView:function(t){this.filterValues=void 0,this.formatter=void 0;var e=t.find(".filterlist").jstree(!0);e&&e.destroy()},addHandlers:function(t){var e=this;t.find(".actionselector li a").on("click",function(){var n=i(this).attr("data-rel"),r=i(this).html();t.find(".actionselected").html(r).attr("title",r).attr("data-action",n),"between"==n||"notbetween"==n?(t.find(".filterText1").addClass("input-medium-2"),t.find(".filterText2").show(),t.find(".addonand").show(),t.find(".filterText1").parent().removeClass("col-sm-12").addClass("col-sm-5"),t.find(".filterText1").parent().removeClass("col-xs-12").addClass("col-xs-5")):(t.find(".filterText2").hide(),t.find(".addonand").hide(),t.find(".filterText1").removeClass("input-medium-2"),t.find(".filterText1").parent().removeClass("col-sm-5").addClass("col-sm-12"),t.find(".filterText1").parent().removeClass("col-xs-5").addClass("col-xs-12")),e.filterItems(t),event.preventDefault()}),t.find(".filterText1").on("keyup",function(){if(e.remoteMode){if(13==event.keyCode){t.find(".gettingvalues").show();var n=t.find("input.filterText1").val().toLowerCase();e.remoteSearch(n)}}else e.filterItems(t)}),t.find("input.filterText2").on("keyup",function(){if(e.remoteMode){if(13==event.keyCode){var n=t.find("input.filterText1").val().toLowerCase();e.remoteSearch(n)}}else e.filterItems(t)}),t.find(".selectAll").on("click",function(){var e=t.find(".filterlist").jstree(!0);if(e){var n=[];t.find(".filterlist ul li.jstree-node:visible").each(function(t,e){n.push(i(this).attr("id"))}),e.select_node(n)}return!1}),t.find(".selectNone").on("click",function(){return e.selectNone(t),!1}),t.find(".resetFilters").on("click",function(){return e.filtersArr=[],e.selectNone(t),e.clearCurrentOptions(t),t.find('button[data-code="ok"]').click(),!1})},selectNone:function(t){var e=t.find(".filterlist").jstree(!0);e&&(e.deselect_all(),this.filtersArr=[])},filterItems:function(t){var e,n=t.find(".actionselected").attr("data-action"),r=t.find("input.filterText1").val().toLowerCase(),a=t.find("input.filterText2").val().toLowerCase();switch(n){case"contains":e=function(t,e){return-1!=e.search(r)};break;case"notcontains":e=function(t,e){return-1==e.search(r)};break;case"equal":e=function(t,e){return e==r};break;case"notequal":e=function(t,e){return!(e==r)};break;case"greater_than":e=function(t,e){return parseFloat(e)>parseFloat(r)};break;case"greater_than_equal_to":e=function(t,e){return parseFloat(e)>=parseFloat(r)};break;case"less_than":e=function(t,e){return parseFloat(e)<parseFloat(r)};break;case"less_than_equal_to":e=function(t,e){return parseFloat(e)<=parseFloat(r)};break;case"begin_with":e=function(t,e){return 0==e.indexOf(r)};break;case"not_begin_with":e=function(t,e){return!(0==e.indexOf(r))};break;case"end_with":e=function(t,e){return e.substring(e.length-r.length)==r};break;case"not_end_with":e=function(t,e){return!(e.substring(e.length-r.length)==r)};break;case"earliest":e=function(t,e){return t<parseFloat(r)};break;case"latest":e=function(e,n){return e>=t.find(".filterlist ul li").length-parseFloat(r)};break;case"between":e=function(t,e){return parseFloat(e)>=parseFloat(r)&&parseFloat(e)<=parseFloat(a)};break;case"notbetween":e=function(t,e){return!(parseFloat(e)>=parseFloat(r)&&parseFloat(e)<=parseFloat(a))}}if(""==r)t.find(".filterlist ul li").show(),t.find(".info .filtered").html(t.find(".info .total").html());else{var s=0;t.find(".filterlist ul li").each(function(t,n){e(t,i(n).find("a").text().toLowerCase())?(i(n).show(),s++):i(n).hide()}),t.find(".info .filtered").html(s)}},initializeSelectedFilters:function(t){t.find(".info .filtered").html(t.find(".filterlist ul li").length),t.find(".info .total").html(t.find(".filterlist ul li").length);var e=this.getFieldByPos(0);if(e&&this.options&&this.options.filters&&this.options.filters[e]&&0==this.options.filters[e].partial&&this.options.filters[e].values.length>0){var n=[];this.filtersArr=[];for(var r=0;r<this.options.filters[e].values.length;r++)n.push([this.options.filters[e].values[r]]),this.filtersArr.push({text:this.options.filters[e].values[r],li_attr:{"data-value":this.options.filters[e].values[r]},data:{level:0},state:{selected:!0}})}},setValues:function(t){this.filterValues=t,this.showValuesOnList()},showValuesOnList:function(){!this.filterValues||this.initiated&&!this.remoteMode||(this.initiated=!0,this.populateValues(),i("#main-modal .pivotFilter .gettingvalues").hide())},populateValues:function(){var t=this;if(this.filterValues)if((w=i(".filterview.pivotFilter")).find(".gettingvalues").hide(),this.remoteMode&&w.find(".info .filtered").html(this.filterValues.length),this.filterValues.length>0){if((A=w.find(".filterlist ul").hide()).empty(),(C=w.find(".filterlist").jstree(!0))&&C.destroy(!0),!i.isArray(this.filterValues[0])){for(var e=[],n=0;n<this.filterValues.length;n++)e.push([this.filterValues[n]]);this.filterValues=e,r=this.filterValues.length}var r=this.filterValues[0].length,a=A,s={},l=function(t,e){for(var n="",r=0;r<=e&&r<t.length;r++)n+="_"+t[r];return n};for(n=0;n<r;n++){var o,u,c,d,h="";if(this.options.filters){var f=this.getFieldByPos(n);if(this.options.filters[f]&&0==this.options.filters[f].partial&&this.options.filters[f].values.length>0&&(c=this.options.filters[f].values,n>0)){var p=this.getFieldByPos(n-1);this.options.filters[p]&&1==this.options.filters[p].partial&&this.options.filters[p].values.length>0&&(d=this.options.filters[p].values)}}for(var m=0;m<this.filterValues.length;m++)if(o=this.filterValues[m][n],!s[u=l(this.filterValues[m],n)]){var v;if(n>0)a=s[l(this.filterValues[m],n-1)].el;if(h="",c&&c.indexOf(o.toString())>=0)if(d){var g=this.filterValues[m][n-1];d&&d.indexOf(g.toString())>=0&&(h="data-jstree='{\"selected\":true}'")}else h="data-jstree='{\"selected\":true}'";var b,x=o;if(this.formatter&&(x=this.formatter.format(o)),n<r-1)v=(b=i("<li data-level='"+n+"' "+h+" >"+x+"<ul></ul></li>")).appendTo(a).find("> ul").first(),b.attr("data-value",o);else v=(b=i("<li data-level='"+n+"' "+h+" data-pos='"+m+"' >"+x+"</li>")).appendTo(a).find("> ul").first(),b.attr("data-value",o);s[u]={el:v}}}A.show(),A.closest(".filterlist").jstree({animation:0,core:{multiple:!this.options.onlyOne,expand_selected_onload:!1,themes:{icons:!1}},checkbox:{keep_selected_style:!1,three_state:!1,tie_selection:!0},search:{case_insensitive:!0,show_only_matches:!0},plugins:["checkbox","search"]}).on("select_node.jstree",function(e,n){for(var r=!1,i=0;i<t.filtersArr.length;i++)t.filtersArr[i].text===n.node.text&&(r=!0);r||t.filtersArr.push(n.node)}).on("deselect_node.jstree",function(e,n){for(var r=0;r<t.filtersArr.length;r++)t.filtersArr[r].text===n.node.text&&t.filtersArr.splice(r,1)})}else{var w,C,A;if(this.remoteMode)(C=(w=i(".filterview.pivotFilter")).find(".filterlist").jstree(!0))&&C.destroy(!0),(A=w.find(".filterlist ul").hide()).empty()}},applyFilters:function(t){var e=t.find(".filterlist").jstree(!0);if(e){var n=this;this.clearCurrentOptions();var r=e.get_json(),a={},s={},l=function t(r){if(r.state.selected){var a=n.getFieldByPos(r.data.level);s[a]||(s[a]={values:[],partial:!1});for(var l=r.data.level-1,o=e.get_node(e.get_parent(r));l>=0&&o;){var u=n.getFieldByPos(l);s[u]||(s[u]={values:[],partial:!0}),s[u].values.indexOf(i("<span>").html(o.text).text())>=0||s[u].values.push(i("<span>").html(o.text).text()),o=e.get_node(e.get_parent(o)),l--}var c=r.li_attr["data-value"];r.data&&r.data.value&&(c=r.data.value),s[a].values.push(i("<span>").html(c).text())}else for(var d=0;d<r.children.length;d++)t(r.children[d])};r=0===n.filtersArr.length?e.get_json():n.filtersArr;for(var o=0;o<r.length;o++)l(r[o]);var u=this.options.index,c=u.field,d=0,h="";for(u=u.child;u;)d++,c=u.field,u=u.child;var f=n.filtersArr;for(o=0;o<f.length;o++)f[o].data.level==d&&(""!=h&&(h+=","),h+=f[o].data.pos+1);a.positionFilters={},a.positionFilters[c]={values:h},a.filters=s}n&&n.options.callback(a)},getFieldByPos:function(t){for(var e=this.options.index,n=e.field,r=0;r<t&&e;)r++,(e=e.child)&&(n=e.field);return n},clearCurrentOptions:function(){if(this.options.filters)for(var t=this.options.index;t;)delete this.options.filters[t.field],t=t.child;if(this.options.positionfilters)for(t=this.options.index;t;)delete this.options.positionfilters[t.field],t=t.child}})}.apply(e,a))||(t.exports=s)}).call(this,n(218),n(1))},1524:function(t,e,n){var r=n(690);function i(t){return t&&(t.__esModule?t.default:t)}t.exports=(r.default||r).template({1:function(t,e,n,r,i){return" disbled "},3:function(t,e,n,r,i){return' disabled="disabled" '},5:function(t,e,r,a,s){return'              <code style="float:right;margin-top: 3px;">'+t.escapeExpression(i(n(688)).call(null!=e?e:t.nullContext||{},"dim_with_many_items",{name:"L",hash:{},data:s,loc:{start:{line:58,column:57},end:{line:58,column:84}}}))+"</code>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,a,s){var l,o=null!=e?e:t.nullContext||{},u=t.escapeExpression;return'<div class="pivotView filterview unselectable pivotFilter">\n\n    <div class="row">\n      <div class="col-xs-4 col-sm-4">\n        <div class="form-group">\n          <div class="col-xs-12 col-sm-12 nopadding pull-right">\n            <a class="btn dropdown-toggle '+(null!=(l=r.if.call(o,null!=e?e.remoteMode:e,{name:"if",hash:{},fn:t.program(1,s,0),inverse:t.noop,data:s,loc:{start:{line:7,column:42},end:{line:7,column:76}}}))?l:"")+'" data-toggle="dropdown" '+(null!=(l=r.if.call(o,null!=e?e.remoteMode:e,{name:"if",hash:{},fn:t.program(3,s,0),inverse:t.noop,data:s,loc:{start:{line:7,column:101},end:{line:7,column:147}}}))?l:"")+'  ><span class="actionselected" data-action="contains">'+u(i(n(688)).call(o,"contains",{name:"L",hash:{},data:s,loc:{start:{line:7,column:202},end:{line:7,column:218}}}))+'</span><span class="caret"></span></a>\n            <ul class="dropdown-menu actionselector">\n                <li><a href="#" data-rel="contains">'+u(i(n(688)).call(o,"contains",{name:"L",hash:{},data:s,loc:{start:{line:9,column:52},end:{line:9,column:68}}}))+'</a></li>\n                <li><a href="#" data-rel="notcontains">'+u(i(n(688)).call(o,"not_contain",{name:"L",hash:{},data:s,loc:{start:{line:10,column:55},end:{line:10,column:74}}}))+'</a></li>\n                <li><a href="#" data-rel="equal">'+u(i(n(688)).call(o,"equal_to",{name:"L",hash:{},data:s,loc:{start:{line:11,column:49},end:{line:11,column:65}}}))+'</a></li>\n                <li><a href="#" data-rel="notequal">'+u(i(n(688)).call(o,"not_equal_to",{name:"L",hash:{},data:s,loc:{start:{line:12,column:52},end:{line:12,column:72}}}))+'</a></li>\n                <li><a href="#" data-rel="greater_than">'+u(i(n(688)).call(o,"greater_than",{name:"L",hash:{},data:s,loc:{start:{line:13,column:56},end:{line:13,column:76}}}))+'</a></li>\n                <li><a href="#" data-rel="greater_than_equal_to">'+u(i(n(688)).call(o,"greater_than_equal_to",{name:"L",hash:{},data:s,loc:{start:{line:14,column:65},end:{line:14,column:94}}}))+'</a></li>\n                <li><a href="#" data-rel="less_than">'+u(i(n(688)).call(o,"less_than",{name:"L",hash:{},data:s,loc:{start:{line:15,column:53},end:{line:15,column:70}}}))+'</a></li>\n                <li><a href="#" data-rel="less_than_equal_to">'+u(i(n(688)).call(o,"less_than_equal_to",{name:"L",hash:{},data:s,loc:{start:{line:16,column:62},end:{line:16,column:88}}}))+'</a></li>\n                <li><a href="#" data-rel="begin_with">'+u(i(n(688)).call(o,"begin_with",{name:"L",hash:{},data:s,loc:{start:{line:17,column:54},end:{line:17,column:72}}}))+'</a></li>\n                <li><a href="#" data-rel="not_begin_with">'+u(i(n(688)).call(o,"not_begin_with",{name:"L",hash:{},data:s,loc:{start:{line:18,column:58},end:{line:18,column:80}}}))+'</a></li>\n                <li><a href="#" data-rel="end_with">'+u(i(n(688)).call(o,"end_with",{name:"L",hash:{},data:s,loc:{start:{line:19,column:52},end:{line:19,column:68}}}))+'</a></li>\n                <li><a href="#" data-rel="not_end_with">'+u(i(n(688)).call(o,"not_end_with",{name:"L",hash:{},data:s,loc:{start:{line:20,column:56},end:{line:20,column:76}}}))+'</a></li>\n                <li><a href="#" data-rel="earliest">'+u(i(n(688)).call(o,"earliest",{name:"L",hash:{},data:s,loc:{start:{line:21,column:52},end:{line:21,column:68}}}))+'</a></li>\n                <li><a href="#" data-rel="latest">'+u(i(n(688)).call(o,"latest",{name:"L",hash:{},data:s,loc:{start:{line:22,column:50},end:{line:22,column:64}}}))+'</a></li>\n                <li><a href="#" data-rel="between">'+u(i(n(688)).call(o,"between",{name:"L",hash:{},data:s,loc:{start:{line:23,column:51},end:{line:23,column:66}}}))+'</a></li>\n                <li><a href="#" data-rel="notbetween">'+u(i(n(688)).call(o,"not_between",{name:"L",hash:{},data:s,loc:{start:{line:24,column:54},end:{line:24,column:73}}}))+'</a></li>\n\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class="col-xs-8 col-sm-8">\n        <div class="row">\n          <div class="col-xs-12 col-sm-12">\n            <input class="form-control filterText1" type="text" autofocus>\n          </div>\n          <div class="col-xs-2 col-sm-2">\n            <span class="add-on addonand" style="display:none">and</span>\n          </div>\n          <div class="col-xs-5 col-sm-5">\n            <input class="form-control filterText2" type="text" >\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n    <div class="row" style="padding: 10px 0;">\n      <div class="col-xs-12 col-sm-12">\n        <div class="form-group">\n          <label for="textfield" class="control-label col-xs-2 col-sm-1" style="padding-top: 4px;">Select:</label>\n          <div class="col-xs-10 col-sm-11">\n            <a href="#" class="btn btn-small btn-lime selectAll">'+u(i(n(688)).call(o,"_all",{name:"L",hash:{},data:s,loc:{start:{line:51,column:65},end:{line:51,column:77}}}))+'</a>\n\n            <a href="#" class="btn btn-small btn-lime selectNone">'+u(i(n(688)).call(o,"_none",{name:"L",hash:{},data:s,loc:{start:{line:53,column:66},end:{line:53,column:79}}}))+'</a>\n\n            <a href="#" class="btn btn-small btn-lime resetFilters">'+u(i(n(688)).call(o,"reset_filters",{name:"L",hash:{},data:s,loc:{start:{line:55,column:68},end:{line:55,column:89}}}))+"</a>\n\n"+(null!=(l=r.if.call(o,null!=e?e.remoteMode:e,{name:"if",hash:{},fn:t.program(5,s,0),inverse:t.noop,data:s,loc:{start:{line:57,column:14},end:{line:59,column:21}}}))?l:"")+'          </div>\n        </div>\n\n\n      </div>\n    </div>\n\n\n    \x3c!-- div class="form-group">\n        <input class="filterText1" type="text" autofocus placeholder="Search..." >\n    </div --\x3e\n\n    <div class="filterlist nomargin">\n        <ul>\n\n        </ul>\n    </div>\n\n    \n    \n    <div class="info">\n        '+u(i(n(688)).call(o,"filtered",{name:"L",hash:{},data:s,loc:{start:{line:81,column:8},end:{line:81,column:24}}}))+' <span class="number filtered">0</span> '+u(i(n(688)).call(o,"of",{name:"L",hash:{},data:s,loc:{start:{line:81,column:64},end:{line:81,column:74}}}))+' <span class="number total">-</span>\n    </div>\n\n\n    <div class="gettingvalues">\n        <span>'+u(i(n(688)).call(o,"getting_values",{name:"L",hash:{},data:s,loc:{start:{line:86,column:14},end:{line:86,column:36}}}))+"...</span>\n    </div>\n\n\n\n\n</div>\n\n\n"},useData:!0})},1525:function(t,e,n){"use strict";(function(n){var r;void 0===(r=function(){return function(t){return{filterCache:{},destroy:function(){this.filterCache=null},clearCache:function(){this.filterCache=null,this.filterCache={}},getIndexValues:function(e,r,i,a,s,l){for(var o=this,u=[],c=e;c;)u.push(c.field),c=c.child;if(t&&t.isRemoteMode)if(s&&delete this.filterCache[e.field],this.filterCache[e.field])a(this.filterCache[e.field]);else{var d={cube:i.cubename,columns:u,measure:i.selectedMeasure,measures:i.selectedMeasures,filters:[],text:l};t.remoteCallbacks.queryDimension(d,function(t){s||(o.filterCache[e.field]=t),a(t)})}else{var h={rows:u,renderer:function(t,n){o.processData(t,n,e)}};n.fn.pivot(r,h),a(this.filterCache)}},filterPivotTable:function(t){return function(e){var n,r,i;if(t)for(i in t)if(n=t[i],r=""+e[i],n&&n.length>0&&!(n.indexOf(r)>=0))return!1;return!0}},processData:function(t,e,n){this.filterCache=t.getRowKeys()}}}}.apply(e,[]))||(t.exports=r)}).call(this,n(1))},1526:function(t,e,n){var r=n(690);function i(t){return t&&(t.__esModule?t.default:t)}t.exports=(r.default||r).template({1:function(t,e,n,r,i){return"\n"},3:function(t,e,n,r,i){var a;return null!=(a=n.if.call(null!=e?e:t.nullContext||{},null!=e?e.showAggregators:e,{name:"if",hash:{},fn:t.program(4,i,0),inverse:t.noop,data:i,loc:{start:{line:7,column:6},end:{line:21,column:13}}}))?a:""},4:function(t,e,n,r,i){return'      <ul class="aggregators nav nav-pills">\n        <li class="dropdown">\n          <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <span class="selectedAggregator">Sum</span> <span\n              class="caret"></span></a>\n          <ul class="dropdown-menu aggregatorSelector">\n            <li><a href="#" data-key="sum">Sum</a></li>\n            <li><a href="#" data-key="count">Count</a></li>\n            <li><a href="#" data-key="average">Average</a></li>\n          </ul>\n        </li>\n      </ul>\n\n      <span>of</span>\n'},6:function(t,e,r,a,s){var l,o=null!=e?e:t.nullContext||{},u=t.escapeExpression;return'      <span class="measureMessage">'+u(i(n(688)).call(o,"measures",{name:"L",hash:{},data:s,loc:{start:{line:25,column:35},end:{line:25,column:51}}}))+':</span>\n      <span class="spacing" style="display: inline;width: 56px;height: 22px;float: left;"></span>\n      <ul class="selectedMeasures">\n\n      </ul>\n\n      <ul class="measures nav nav-pills pull-left">\n        <li class="dropdown">\n\n          <a href="#" class="inlineSelector dropdown-toggle" data-toggle="dropdown"> <span>'+u(i(n(688)).call(o,"add_measure",{name:"L",hash:{},data:s,loc:{start:{line:34,column:91},end:{line:34,column:110}}}))+'</span>\n            <span class="caret"></span></a>\n          <ul class="dropdown-menu multimeasureSelector">\n'+(null!=(l=r.each.call(o,null!=(l=null!=e?e.metadata:e)?l.measures:l,{name:"each",hash:{},fn:t.program(7,s,0),inverse:t.noop,data:s,loc:{start:{line:37,column:12},end:{line:39,column:21}}}))?l:"")+"\n          </ul>\n        </li>\n      </ul>\n"},7:function(t,e,n,r,i){var a=t.lambda,s=t.escapeExpression;return'            <li><a href="#" data-key="'+s(a(null!=e?e.field:e,e))+'">'+s(a(null!=e?e.name:e,e))+"</a></li>\n"},9:function(t,e,n,r,i){var a;return'      <ul class="measures nav nav-pills pull-left">\n        <li class="dropdown">\n          <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <span\n              class="selectedMeasure">'+t.escapeExpression(t.lambda(null!=e?e.selectedMeasure:e,e))+'</span> <span class="caret"></span></a>\n          <ul class="dropdown-menu measureSelector">\n'+(null!=(a=n.each.call(null!=e?e:t.nullContext||{},null!=(a=null!=e?e.metadata:e)?a.measures:a,{name:"each",hash:{},fn:t.program(7,i,0),inverse:t.noop,data:i,loc:{start:{line:50,column:12},end:{line:52,column:21}}}))?a:"")+"          </ul>\n        </li>\n      </ul>\n"},11:function(t,e,n,r,i){return'            <li><a href="#" data-key="Pivot Table">Pivot Table</a></li>\n'},13:function(t,e,n,r,i){return'            <li><a href="#" data-key="Input Table">Input Table</a></li>\n'},15:function(t,e,n,r,i){return'            <li><a href="#" data-key="Heatmap">Heatmap</a></li>\n'},17:function(t,e,n,r,i){return'            <li><a href="#" data-key="Row Heatmap">Row Heatmap</a></li>\n'},19:function(t,e,n,r,i){return'            <li><a href="#" data-key="Col Heatmap">Col Heatmap</a></li>\n'},21:function(t,e,n,r,i){return'            <li><a href="#" data-key="Line Chart">Line Chart</a></li>\n'},23:function(t,e,n,r,i){return'            <li><a href="#" data-key="Bar Chart">Bar Chart</a></li>\n'},25:function(t,e,n,r,i){return'            <li><a href="#" data-key="Stacked Bar Chart">Stacked Bar Chart</a></li>\n'},27:function(t,e,n,r,i){return'            <li><a href="#" data-key="Column Chart">Column Chart</a></li>\n'},29:function(t,e,n,r,i){return'            <li><a href="#" data-key="Stacked Column Chart">Stacked Column Chart</a></li>\n'},31:function(t,e,n,r,i){return'            <li><a href="#" data-key="Area Chart">Area Chart</a></li>\n'},33:function(t,e,n,r,i){return'            <li><a href="#" data-key="TreeMap Chart">TreeMap Chart</a></li>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,i){var a,s=null!=e?e:t.nullContext||{};return'<div class="novixPivot">\n  <div class="pivotArea optionsArea">\n    <div class="measureSelectors">\n'+(null!=(a=n.if.call(s,null!=e?e.isOlapMode:e,{name:"if",hash:{},fn:t.program(1,i,0),inverse:t.program(3,i,0),data:i,loc:{start:{line:4,column:6},end:{line:22,column:13}}}))?a:"")+"\n"+(null!=(a=n.if.call(s,null!=e?e.isOlapMode:e,{name:"if",hash:{},fn:t.program(6,i,0),inverse:t.program(9,i,0),data:i,loc:{start:{line:24,column:6},end:{line:56,column:13}}}))?a:"")+'      <span class="olap-data-truncated">\n        WARNING: This table is truncated. Please use filters or remove big dimensions from\n        row/column\n      </span>\n    </div>\n\n  </div>\n  <div class="pivotAreaFilter">\n    <div class="dimensions">\n      <span class="dropMessage dropFilterMessage">Dimensions:</span>\n      <div class="pivotArea dimsArea connectedDimsSortable"></div>\n    </div>\n    <div class="renderers" style="\n      position: absolute;\n      height: 20px;\n      right: 0;\n      z-index: 999;">\n      <ul class="nav nav-pills pull-right">\n        <li class="dropdown">\n          <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <span class="selectedRenderer">Pivot\n              Table</span>\n            <span class="caret"></span></a>\n          <ul class="dropdown-menu rendererSelector">\n'+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.pivotTable:a,{name:"if",hash:{},fn:t.program(11,i,0),inverse:t.noop,data:i,loc:{start:{line:80,column:12},end:{line:82,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.inputTable:a,{name:"if",hash:{},fn:t.program(13,i,0),inverse:t.noop,data:i,loc:{start:{line:83,column:12},end:{line:85,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.heatmap:a,{name:"if",hash:{},fn:t.program(15,i,0),inverse:t.noop,data:i,loc:{start:{line:86,column:12},end:{line:88,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.rowHeatmap:a,{name:"if",hash:{},fn:t.program(17,i,0),inverse:t.noop,data:i,loc:{start:{line:89,column:12},end:{line:91,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.colHeatmap:a,{name:"if",hash:{},fn:t.program(19,i,0),inverse:t.noop,data:i,loc:{start:{line:92,column:12},end:{line:94,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.lineChart:a,{name:"if",hash:{},fn:t.program(21,i,0),inverse:t.noop,data:i,loc:{start:{line:95,column:12},end:{line:97,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.barChart:a,{name:"if",hash:{},fn:t.program(23,i,0),inverse:t.noop,data:i,loc:{start:{line:98,column:12},end:{line:100,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.stackedBarChart:a,{name:"if",hash:{},fn:t.program(25,i,0),inverse:t.noop,data:i,loc:{start:{line:101,column:12},end:{line:103,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.columnChart:a,{name:"if",hash:{},fn:t.program(27,i,0),inverse:t.noop,data:i,loc:{start:{line:104,column:12},end:{line:106,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.stackedColumnChart:a,{name:"if",hash:{},fn:t.program(29,i,0),inverse:t.noop,data:i,loc:{start:{line:107,column:12},end:{line:109,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.areaChart:a,{name:"if",hash:{},fn:t.program(31,i,0),inverse:t.noop,data:i,loc:{start:{line:110,column:12},end:{line:112,column:19}}}))?a:"")+(null!=(a=n.if.call(s,null!=(a=null!=e?e.rendererList:e)?a.treeMapChart:a,{name:"if",hash:{},fn:t.program(33,i,0),inverse:t.noop,data:i,loc:{start:{line:113,column:12},end:{line:115,column:19}}}))?a:"")+'          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="pivotArea renderArea" style="overflow: auto;">\n  </div>\n  <div class="loading">\n    <span>Loading...</span>\n  </div>\n  <div class="dropArea">\n    <span class="dropMessage dropColMessage">Columns</span>\n    <div class="dropItem forColumn connectedDimsSortable"></div>\n    <span class="dropMessage dropRowMessage">Rows</span>\n    <div class="dropItem forRow  connectedDimsSortable"></div>\n  </div>\n</div>'},useData:!0})},1527:function(t,e,n){var r=n(690);function i(t){return t&&(t.__esModule?t.default:t)}t.exports=(r.default||r).template({1:function(t,e,n,r,i){return"<div class='connectedDimsSortable inTable'>\n"},3:function(t,e,n,r,i){return" filtered "},5:function(t,e,n,r,i){return'    <i class="fa fa-arrows"></i>\n'},7:function(t,e,n,r,i){return":"},9:function(t,e,n,r,i){return'    <span\n      class="pivotLink selection">('+t.escapeExpression(t.lambda(null!=e?e.filteredText:e,e))+") </span>\n"},11:function(t,e,n,r,i){var a;return" "+(null!=(a=n.if.call(null!=e?e:t.nullContext||{},null!=e?e.remoteMode:e,{name:"if",hash:{},fn:t.program(12,i,0),inverse:t.program(14,i,0),data:i,loc:{start:{line:13,column:39},end:{line:16,column:11}}}))?a:"")+" "},12:function(t,e,n,r,i){return" "},14:function(t,e,n,r,i){return'\n    <i class="fa fa-chevron-up priorFilterValue"></i>\n    <i class="fa fa-chevron-down nextFilterValue"></i>\n    '},16:function(t,e,n,r,i){var a;return'  <i class="hierarchy fa fa-sitemap" title="Drilldown by '+t.escapeExpression(t.lambda(null!=(a=null!=(a=null!=e?e.index:e)?a.child:a)?a.name:a,e))+'"></i>\n'},18:function(t,e,n,r,i){return"</div>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,r,a,s){var l,o=null!=e?e:t.nullContext||{},u=t.lambda,c=t.escapeExpression;return(null!=(l=i(n(689)).call(o,null!=e?e.level:e,"==","1",{name:"ifCond",hash:{},fn:t.program(1,s,0),inverse:t.noop,data:s,loc:{start:{line:1,column:0},end:{line:3,column:11}}}))?l:"")+'  <div class="pivotDim '+(null!=(l=r.if.call(o,null!=e?e.filtered:e,{name:"if",hash:{},fn:t.program(3,s,0),inverse:t.noop,data:s,loc:{start:{line:4,column:23},end:{line:4,column:56}}}))?l:"")+' " data-field="'+c(u(null!=(l=null!=e?e.index:e)?l.field:l,e))+'" data-hierarchy="'+c(u(null!=e?e.hierarchy:e,e))+'">\n'+(null!=(l=r.if.call(o,null!=e?e.sortable:e,{name:"if",hash:{},fn:t.program(5,s,0),inverse:t.noop,data:s,loc:{start:{line:5,column:4},end:{line:7,column:11}}}))?l:"")+'    <span class="name">'+c(u(null!=(l=null!=e?e.index:e)?l.name:l,e))+(null!=(l=i(n(689)).call(o,null!=(l=null!=e?e.index:e)?l.field:l,"!=","data_index",{name:"ifCond",hash:{},fn:t.program(7,s,0),inverse:t.noop,data:s,loc:{start:{line:8,column:37},end:{line:8,column:90}}}))?l:"")+"</span>\n"+(null!=(l=i(n(689)).call(o,null!=(l=null!=e?e.index:e)?l.field:l,"!=","data_index",{name:"ifCond",hash:{},fn:t.program(9,s,0),inverse:t.noop,data:s,loc:{start:{line:9,column:4},end:{line:12,column:15}}}))?l:"")+"    "+(null!=(l=i(n(689)).call(o,null!=e?e.filteredCount:e,"==","1",{name:"ifCond",hash:{},fn:t.program(11,s,0),inverse:t.noop,data:s,loc:{start:{line:13,column:4},end:{line:16,column:23}}}))?l:"")+"\n  </div>\n"+(null!=(l=r.if.call(o,null!=e?e.hasChild:e,{name:"if",hash:{},fn:t.program(16,s,0),inverse:t.noop,data:s,loc:{start:{line:18,column:2},end:{line:20,column:9}}}))?l:"")+(null!=(l=i(n(689)).call(o,null!=e?e.level:e,"==","1",{name:"ifCond",hash:{},fn:t.program(18,s,0),inverse:t.noop,data:s,loc:{start:{line:21,column:0},end:{line:23,column:11}}}))?l:"")},useData:!0})},1528:function(t,e,n){var r=n(690);t.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(t,e,r,i,a){var s=t.lambda,l=t.escapeExpression;return'<li data-field="'+l(s(null!=e?e.field:e,e))+'"><span>'+l(s(null!=e?e.name:e,e))+'</span><a href="#" title="'+l(function(t){return t&&(t.__esModule?t.default:t)}(n(688)).call(null!=e?e:t.nullContext||{},"remove",{name:"L",hash:{},data:a,loc:{start:{line:1,column:67},end:{line:1,column:81}}}))+'">X</a></li>'},useData:!0})},683:function(t,e,n){"use strict";(function(r){var i;void 0===(i=function(){return r.Controller.extend({name:"showModal",show:function(t){Promise.all([n.e(2),n.e(116)]).then(function(){var e=[n(701)];(function(e){(new e).render(t)}).apply(null,e)}).catch(n.oe)}})}.apply(e,[]))||(t.exports=i)}).call(this,n(694))},924:function(t,e,n){"use strict";(function(r,i){var a,s,l=n(18);n(1520),n(1521),n(1522),a=[n(1523),n(1525),n(1526),n(1527),n(1528)],void 0===(s=function(t,e,n,a,s){return r.View.extend({el:"body",$pivotArea:[],table:void 0,htTable:void 0,currentOptions:void 0,priorOptions:void 0,metadata:void 0,currentCubeData:void 0,currentValidationData:void 0,filterEngine:void 0,dataSourceAsArray:!1,isRemoteMode:!1,isOlapMode:!1,isMDXMode:!1,forceQuery:!1,remoteCallbacks:void 0,pendingChanges:void 0,uncommittedChanges:[],uncommittedChangesDic:{},firstTime:!0,sortAs:void 0,rendererList:{pivotTable:!0,inputTable:!0,heatmap:!0,rowHeatmap:!0,colHeatmap:!0,lineChart:!0,barChart:!0,stackedBarChart:!0,columnChart:!0,stackedColumnChart:!0,areaChart:!0,treeMapChart:!0},remoteMode:function(t){this.isRemoteMode=t},olapMode:function(t){this.isOlapMode=t},mdxMode:function(t){this.isMDXMode=t},setRemoteCallbacks:function(t){this.remoteCallbacks=t},setMetadata:function(t){if(t&&t.dims){this.metadata=t,this.currentOptions={selectedMeasure:t.measures&&t.measures.length>0?t.measures[0].field:"value",selectedMeasures:[t.measures&&t.measures.length>0?t.measures[0].field:"value"],aggregator:t.aggregator?t.aggregator:"genericSum"};var e={metadata:t,selectedMeasure:this.currentOptions.selectedMeasure,selectedMeasures:this.currentOptions.selectedMeasures,isOlapMode:this.isOlapMode,rendererList:this.rendererList},r=n(e);this.$el.html(r),this.$pivotArea=this.$el.find(".novixPivot"),this.addHandlers(),this.updateSize()}},setCubedata:function(t){t?(this.pendingChanges=void 0,this.uncommittedChanges=[],this.uncommittedChangesDic={},this.sortAs=null,this.$el.find(".olap-data-truncated").hide(),t&&t.dims?(this.dataSourceAsArray=!1,this.ensureFilters(t),this.generateCubeData(t),this.sortAs=t.dims):(this.currentOptions&&this.currentOptions.topCells&&t.length>=this.currentOptions.topCells&&this.$el.find(".olap-data-truncated").show(),this.currentCubeData=t,t&&t.values&&t.values.length>0&&(this.currentCubeData=t.values[0]),this.dataSourceAsArray=!0)):this.isOlapMode&&(this.currentCubeData=[])},clearChanges:function(){this.pendingChanges=void 0,this.uncommittedChanges=[],this.uncommittedChangesDic={}},getUncommittedChanges:function(){return this.uncommittedChanges},setOptions:function(t){this.currentOptions=this.getCurrentOptions(t),this.currentOptions.hideRenderersArea&&this.$pivotArea.find(".pivotAreaFilter .renderers").hide(),this.currentOptions.hideOptionsArea&&(this.$pivotArea.find(".pivotArea.optionsArea").hide(),this.updateSize())},destroy:function(){if(this.$pivotArea&&this.$pivotArea.length>0){if(this.htTable)try{this.htTable.destroy()}catch(t){}this.$pivotArea.empty(),this.$pivotArea=null}this.table=null,this.currentOptions=null,this.priorOptions=null,this.metadata=null,this.currentCubeData=null,this.currentValidationData=null,this.remoteCallbacks=null,this.uncommittedChanges=null,this.uncommittedChangesDic=null,this.pendingChanges=null,this.sortAs=null,this.filterEngine&&(this.filterEngine.destroy(),this.filterEngine=null)},getQueryForRemote:function(){for(var t=this.getCurrentOptions(),e=[],n=t.rows.concat(t.cols),r={},i=0;i<n.length;i++)"data_index"!=n[i]&&(r[this.getLowestHierarchy(n[i])]=n[i]);for(var a in r)e.push("{"+a+":"+r[a]+"}");n.indexOf("data_index")>=0&&n.splice(n.indexOf("data_index"),1);var s={cube:t.cubename,columns:n,hierarchicalColumns:e,filters:[],positionFilters:[],aggregator:t.aggregator,measure:t.selectedMeasure,measures:t.selectedMeasures,limit:t.limit,excludeEmptyValues:!0};if(this.currentOptions){for(var a in this.currentOptions.filters)s.filters.push({field:a,values:this.currentOptions.filters[a].values,partial:this.currentOptions.filters[a].partial});for(var a in this.currentOptions.positionFilters)s.positionFilters.push({field:a,values:this.currentOptions.positionFilters[a].values})}return s},resetFilterCache:function(){this.filterEngine&&this.filterEngine.clearCache()},requeryTable:function(){this.isRemoteMode&&(this.forceQuery=!0,this.refreshTable())},resetTable:function(){this.isRemoteMode&&(this.forceQuery=!0,this.currentOptions&&(this.currentOptions.rows=[],this.currentOptions.cols=[],this.currentOptions.selectedMeasures=[this.metadata.measures[0].field],this.currentOptions.selectedMeasure="value",this.currentOptions.filters={},this.currentOptions.positionFilters={},this.resetFilterCache(),this.requeryTable()))},refreshTable:function(){this.showLoading();var t=this.getCurrentOptions();if(this.isRemoteMode&&(this.forceQuery||this.needQueryTable()))if(t.editMode){var e=this;this.ensureOnlyOneFilters(t,function(t){e.setOptions(t),e.forceQuery=!1;var n=e.getQueryForRemote();e.remoteCallbacks&&e.remoteCallbacks.queryTable(n)})}else{this.forceQuery=!1;var n=this.getQueryForRemote();this.remoteCallbacks&&this.remoteCallbacks.queryTable(n)}else{e=this;setTimeout(function(){e.drawTable(e.currentOptions),e=null},10)}},getCurrentOptions:function(t){var e={topDimension:void 0,topCells:void 0,contextMenu:!1,editMode:!1,rows:this.currentOptions&&this.currentOptions.rows?this.currentOptions.rows:[],cols:this.currentOptions&&this.currentOptions.cols?this.currentOptions.cols:[],rendererName:"Pivot Table",aggregator:"genericSum",selectedMeasure:"value",selectedMeasures:[],limit:2e5,excludeEmptyValues:!0};return t=i.extend(!0,e,this.currentOptions,t)},drawTable:function(t){var e=t.showRowTotal,n=t.showColumnTotal;if(this.currentOptions.editMode?(e=!1,n=!1):this.currentOptions.editMode||(t.showRowTotal&&(e=!0),t.showColumnTotal&&(n=!0)),this.currentCubeData&&this.metadata){var r=this;(t=this.getCurrentOptions(t)).selectedMeasures&&t.selectedMeasures.length>1&&this.forceDataIndex(t),this.firstTime&&(this.firstTime=!1,0==t.rows.length&&0==t.cols.length&&this.findBetterDimensions(t)),t.editMode&&(this.pendingChanges&&this.pendingChanges.length>0&&(this.updateDatasourceAndReload(this.pendingChanges,this.currentCubeData),this.pendingChanges=void 0),this.ensureOnlyOneFilters(t),this.setOptions(t)),this.currentOptions=t;var a=i.extend(i.pivotUtilities.renderers,i.pivotUtilities.novix_renderers,i.pivotUtilities.highchart_renderers),o=(i.pivotUtilities.aggregatorTemplates,void 0);t.editMode&&(t.aggregator="listUnique",o=void 0);var u=t.numberFormat;if(this.metadata&&this.metadata.measures)for(var c=0;c<this.metadata.measures.length;c++)if(this.metadata.measures[c].field==t.selectedMeasure){this.metadata.measures[c].format&&(u=this.metadata.measures[c].format);break}for(var d={},h=0;h<this.metadata.dims.length;h++)this.metadata.dims[h].numberFormat&&(d[this.metadata.dims[h].field]=new l.NovixFormatter(this.metadata.dims[h].numberFormat));var f=t.selectedMeasure;this.isRemoteMode&&this.dataSourceAsArray&&(f="data_value");var p={data:void 0},m={rows:t.rows,cols:t.cols,vals:[f],aggregatorName:t.aggregator,aggregator:i.pivotUtilities.aggregatorTemplates[t.aggregator](o)([f]),renderer:function(t,e){p.data=t}},v=-1,g={rows:t.rows,cols:t.cols,vals:[f],aggregator:i.pivotUtilities.aggregatorTemplates[t.aggregator](o)([f]),aggregatorName:t.aggregator,renderer:a[t.rendererName],rendererOptions:{validationData:p,topDimension:t.topDimension,contextMenu:t.contextMenu,contextMenuCallback:t.contextMenu?function(e,n){var i=[n];r.addDimensionsInFilterZone(i),t.contextMenuCallback(e,n.filterList)}:void 0,showZero:!0,showRowTotal:e,showColumnTotal:n,numberFormat:u,indexFormatters:d,chartTitle:"data_value"==f?this.getTextMeasures(t.selectedMeasures).join():f,$el:this.$pivotArea.find(".renderArea"),onEditValues:function(e){r.addDimensionsInFilterZone(e),r.pendingChanges||(r.pendingChanges=[]),r.pendingChanges=r.pendingChanges.concat(e),r.updateUncommittedChanges(e),t.onEdit&&setTimeout(function(){t.onEdit(e,r.uncommittedChanges)},100)},onDrawTable:function(e){r.htTable=e,r.hideLoading(),t.onDrawTable&&t.onDrawTable(t)},getIndexContent:function(t){return r.renderIndexOnTable(t)},onRender:function(t,e){clearTimeout(v),v=setTimeout(function(){r.addDraggableDims()},500);var n=r.$pivotArea.find(".renderArea");if(e)for(var i in e)n.find(".data."+i).css("background-color",e[i].color)},getValidationStyle:function(e){if(t.getValidationStyle)return t.getValidationStyle(e)}}};if(this.isRemoteMode||(g.filter=this.filterPivotTable(t.filters),m.filter=g.filter),this.sortAs){var b=i.pivotUtilities.sortAs;g.sorters=function(t){for(var e=0;e<r.sortAs.length;e++)if(r.sortAs[e].field==t)return b(r.sortAs[e].values)},m.sorters=g.sorters}if(this.currentValidationData&&i.fn.pivot(this.currentValidationData,m),this.priorOptions=i.extend(!0,{},this.currentOptions),this.$pivotArea.find(".renderArea").show(),this.currentCubeData&&i.isArray(this.currentCubeData))this.$pivotArea.find(".renderArea").pivot(this.currentCubeData,g);else{var x="datavalue";this.metadata&&this.metadata.measures&&this.metadata.measures.length>0&&(x=this.metadata.measures[0].field);var w={};w[x]=this.currentCubeData,this.$pivotArea.find(".renderArea").pivot([w],g)}if(this.hideLoading(),this.refreshDimZone(),this.$pivotArea.find(".selectedRenderer").text(t.rendererName),this.$pivotArea.find(".selectedAggregator").text(t.aggregator),this.isRemoteMode){this.$pivotArea.find(".selectedMeasures").empty();for(var C=0;C<t.selectedMeasures.length;C++){var A={field:t.selectedMeasures[C],name:this.$pivotArea.find(".multimeasureSelector li a[data-key='"+t.selectedMeasures[C]+"']").text()},y=s(A);this.$pivotArea.find(".selectedMeasures").append(y)}}else{this.$pivotArea.find(".selectedMeasure").text(t.selectedMeasure);var O=this.$pivotArea.find(".measureSelector li a[data-key='"+t.selectedMeasure+"']").text();O&&this.$pivotArea.find(".selectedMeasure").text(O)}}},updateSize:function(){if(this.$pivotArea&&this.$pivotArea.length>0){var t=this.$pivotArea.height(),e=this.$pivotArea.find(".optionsArea"),n=this.$pivotArea.find(".dimsArea"),r=this.$pivotArea.find(".renderArea"),i=n.is(":visible")?n.height():0,a=0;e.is(":visible")&&(a=e.height()+6),this.$el.parent().hasClass("grid-stack-item-content")?r.height(this.$el.height()-i-17-a):r.height(t-i-2-17-a),this.htTable&&this.htTable.render()}},showLoading:function(){this.$pivotArea&&this.$pivotArea.length>0&&this.$pivotArea.find(".loading").show()},hideLoading:function(){this.$pivotArea&&this.$pivotArea.length>0&&this.$pivotArea.find(".loading").hide()},renderIndexOnTable:function(t,e){for(var n,r,i="",s=0;s<this.metadata.dims.length&&!n;s++){var o;if(r=1,this.metadata.dims[s].field==t){n=this.metadata.dims[s],i=this.metadata.dims[s].field;break}if(!e)for(o=this.metadata.dims[s].child;o;){if(r++,o.field==t){n=o,i=this.metadata.dims[s].field;break}o=o.child}}var u=t;if(n){var c=this.getFilteredtext(n);if(c&&1==c.count&&n.numberFormat){var d=new l.NovixFormatter(n.numberFormat);c.text=d.format(c.text)}var h={index:n,remoteMode:!!(n.numElements&&n.numElements>1e3),hierarchy:i,level:r,sortable:1==r,hasChild:void 0!=n.child,filteredText:c?c.count>1?c.count:c.text:"all",filteredCount:c?c.count:0,filtered:!!c};u=a(h)}return u},refreshDimZone:function(){var t="",e=this,n=this.$pivotArea.find(".dropArea .forRow").empty(),r=this.$pivotArea.find(".dropArea .forColumn").empty(),s={level:0,sortable:!1,hasChild:!1},l=[],o=[];i.each(this.metadata.dims,function(n,r){if(e.currentOptions&&e.currentOptions.rows.indexOf(r.field)>=0)l[e.currentOptions.rows.indexOf(r.field)]=r;else if(e.currentOptions&&e.currentOptions.cols.indexOf(r.field)>=0)o[e.currentOptions.cols.indexOf(r.field)]=r;else if("data_index"!=r.field){var i=e.getFilteredtext(r);s.index=r,s.hierarchy=r.field,s.sortable=!0,s.filteredText="aaaa1",s.filteredText=i?i.count>1?i.count:i.text:"all",s.filtered=!!i,s.filteredCount=i?i.count:0,t+=a(s)}}),i.each(l,function(t,r){if(r){var i=e.getFilteredtext(r);s.index=r,s.sortable=!1,s.hierarchy="",s.sortable=!0,s.filteredText=i?i.count>1?i.count:i.text:"all",s.filtered=!!i,s.filteredCount=i?i.count:0,n.append(a(s))}}),i.each(o,function(t,n){if(n){var i=e.getFilteredtext(n);s.index=n,s.sortable=!1,s.hierarchy="",s.sortable=!0,s.filteredText=i?i.count>1?i.count:i.text:"all",s.filtered=!!i,s.filteredCount=i?i.count:0,r.append(a(s))}}),this.$pivotArea.find(".dimsArea").html(t),this.addDraggableDims(),e=null},addDraggableDims:function(){if(this&&this.$pivotArea&&this.$pivotArea.length>0){var t=this;this.$pivotArea.find(".connectedDimsSortable").each(function(t,e){i(e).hasClass("ui-sortable")&&i(e).sortable("destroy")});var e=!1;this.$pivotArea.find(".connectedDimsSortable").sortable({helper:"clone",distance:5,appendTo:this.$pivotArea,connectWith:".novixPivot .connectedDimsSortable",placeholder:"ui-novixdim-placeholder",opacity:.8,cursor:"move",start:function(n,r){t.hideDimFromDropArea(i(r.item).attr("data-field")),t.setPositionForDropDetails(),t.$pivotArea.find(".dropArea").show(),t.$pivotArea.find(".renderArea").hide(),e=!1;try{t.$pivotArea.find(".connectedDimsSortable").sortable("refresh")}catch(t){console.log(t)}},stop:function(n,r){t.$pivotArea.find(".dropArea").hide(),setTimeout(function(){t.$pivotArea.find(".dimsArea .connectedDimsSortable .pivotDim").unwrap().show()},100),e||t.$pivotArea.find(".renderArea").show()},receive:function(n,r){e=!0,t.dragAndDropEnd(),i(r.sender).hasClass("inTable")&&i(r.item).hide(),t.refreshTable()}}).disableSelection()}},setPositionForDropDetails:function(){this.$pivotArea.find(".dropArea").css("top",this.$pivotArea.find(".renderArea").position().top-1).height(this.$pivotArea.find(".renderArea").height()-5),this.$pivotArea.find(".dropArea .dropItem").width(this.$pivotArea.width()-75)},hideDimFromDropArea:function(t){this.$pivotArea.find(".dropArea .dropItem .pivotDim").each(function(e,n){if(i(n).attr("data-field")==t)return i(this).remove(),!1})},addHandlers:function(){var e=this;this.$pivotArea.find(".renderArea").on("dblclick",".header,.pvtAxisLabel",function(){i(this).find(".pivotDim").length>0&&e.setHierarchyFor(i(this).find(".pivotDim").attr("data-field"))&&e.refreshTable()}),this.$pivotArea.find(".rendererSelector a").on("click",function(){e.currentOptions.rendererName=i(this).attr("data-key"),e.refreshTable()}),this.$pivotArea.find(".aggregatorSelector a").on("click",function(){e.currentOptions.aggregator=i(this).attr("data-key"),e.refreshTable()}),this.isOlapMode?(this.$pivotArea.find(".multimeasureSelector a").on("click",function(){e.currentOptions.selectedMeasures||(e.currentOptions.selectedMeasures=[]);var t=i(this).attr("data-key");-1==e.currentOptions.selectedMeasures.indexOf(t)&&(e.currentOptions.selectedMeasures.push(t),e.resetFilterCache(),e.refreshTable())}),this.$pivotArea.find(".selectedMeasures").on("click","a",function(){var t=i(this).closest("li").attr("data-field");e.currentOptions.selectedMeasures.length>1&&e.currentOptions.selectedMeasures.indexOf(t)>=0&&(e.currentOptions.selectedMeasures.splice(e.currentOptions.selectedMeasures.indexOf(t),1),e.resetFilterCache(),e.refreshTable())})):this.$pivotArea.find(".measureSelector a").on("click",function(){e.currentOptions.selectedMeasure=i(this).attr("data-key"),e.resetFilterCache(),e.refreshTable()}),this.$pivotArea.find(".showfilter-icon").on("click",function(){e.$pivotArea.find(".dropArea").is(":visible")?e.$pivotArea.find(".dropArea").hide():(e.setPositionForDropDetails(),e.$pivotArea.find(".dropArea").show())}),this.$pivotArea.on("click",".pivotLink.selection",function(n){var r=i(this).closest(".pivotDim").attr("data-hierarchy"),a=e.getIndexFromMetadata(r.split(".")[0]),s=!1;e.currentOptions.editMode&&-1==e.currentOptions.rows.indexOf(r)&&-1==e.currentOptions.cols.indexOf(r)&&(s=!0);var l=new t({index:a,filters:e.currentOptions.filters,callback:function(t){e.applyFilters(t,!1,a.field)},onlyOne:s});l.render(),a&&a.numElements&&a.numElements>=1e3?l.remoteSearch=function(t){e.getIndexValues(a,function(t){l.setValues(t)},!0,t)}:setTimeout(function(){e.getIndexValues(a,function(t){l.setValues(t)})},500)}),this.$pivotArea.on("click",".pivotDim .nextFilterValue,.pivotDim .priorFilterValue",function(t){var n=i(this).closest(".pivotDim").attr("data-hierarchy"),r=e.getIndexFromMetadata(n),a=i(this).hasClass("nextFilterValue")?1:-1,s=e.currentOptions.filters;if(s&&s[n]&&s[n].values&&1==s[n].values.length){var l=s[n].values[0];e.getIndexValues(r,function(t){var r=0,s=-1;if(i.each(t,function(t,e){if((s=e.indexOf(l))>=0)return r=t,!1}),s>=0){(r+=a)<0?r=t.length-1:r>=t.length&&(r=0);var o=t[r][s];i.isArray(t[r])||(o=t[r]);var u={filters:{},positionFilters:{}};u.filters[n]={partial:!1,values:[o]},u.positionFilters[n]={values:r},e.applyFilters(u)}})}})},setHierarchyFor:function(t,e){var n=!1,r=this.getIndexFromMetadata(t);if(r&&r.child)if(n=!0,this.currentOptions.rows.indexOf(r.child.field)>=0)this.currentOptions.rows.splice(this.currentOptions.rows.indexOf(r.child.field),1),this.setHierarchyFor(r.child.field,!0);else if(this.currentOptions.cols.indexOf(r.child.field)>=0)this.currentOptions.cols.splice(this.currentOptions.cols.indexOf(r.child.field),1),this.setHierarchyFor(r.child.field,!0);else if(!e){var i;(i=this.currentOptions.rows.indexOf(r.field))>=0?this.currentOptions.rows.splice(i+1,0,r.child.field):(i=this.currentOptions.cols.indexOf(r.field))>=0&&this.currentOptions.cols.splice(i+1,0,r.child.field)}return n},getIndexFromMetadata:function(t){for(var e,n=0;n<this.metadata.dims.length;n++){var r;if(this.metadata.dims[n].field==t.split(".")[0]||this.metadata.dims[n].field.split(".")[0]==t.split(".")[0]){e=this.metadata.dims[n];break}for(r=this.metadata.dims[n].child;r;){if(r.field==t.split(".")[0]||r.field.split(".")[0]==t.split(".")[0]){e=r;break}r=r.child}}return e},getLowestHierarchy:function(t){var e=this.getIndexFromMetadata(t),n="";if(e)for(var r=e;r;)n=r.field,r=r.child;return n},dragAndDropEnd:function(){var t=this,e=function e(n,r){var i=t.getIndexFromMetadata(r);i&&i.child&&(t.currentOptions.rows.concat(t.currentOptions.cols).indexOf(i.child.field)>=0&&(n.push(i.child.field),e(n,i.child.field)))},n=[],r=[];this.$pivotArea.find(".dropArea .forRow .pivotDim").each(function(t,r){n.push(i(r).attr("data-field")),e(n,i(r).attr("data-field"))}),this.$pivotArea.find(".dropArea .forColumn .pivotDim").each(function(t,n){r.push(i(n).attr("data-field")),e(r,i(n).attr("data-field"))}),this.currentOptions.rows=n,this.currentOptions.cols=r},getIndexValues:function(t,n,r,i){this.filterEngine||(this.filterEngine=new e({isRemoteMode:this.isRemoteMode,remoteCallbacks:this.remoteCallbacks})),this.filterEngine.getIndexValues(t,this.currentCubeData,this.currentOptions,n,r,i)},filterPivotTable:function(t){return function(e){var n,r,i;if(t)for(i in t)if(n=t[i].values,e[i]&&(r=""+e[i],n&&n.length>0&&!(n.indexOf(r)>=0)))return!1;return!0}},applyFilters:function(t,e,n){if(this.currentOptions.filters||(this.currentOptions.filters={}),this.currentOptions.positionFilters||(this.currentOptions.positionFilters={}),t){if(t.filters)for(var r in t.filters)this.currentOptions.filters[r]=t.filters[r];if(t.positionFilters)for(var r in t.positionFilters)this.currentOptions.positionFilters[r]=t.positionFilters[r]}if(this.forceQuery=!0,this.refreshTable(),!e){var i=this.getCurrentOptions();i.onFilter&&i.onFilter(t,n)}},getFilteredtext:function(t){var e,n=t.field,r=this.currentOptions.filters;return r&&r[n]&&r[n].values&&r[n].values.length>0&&(e={count:r[n].values.length,text:r[n].values[0]}),e},needQueryTable:function(){var t=!0;if(this.priorOptions&&this.priorOptions.selectedMeasure==this.currentOptions.selectedMeasure&&this.priorOptions.selectedMeasures.length==this.currentOptions.selectedMeasures.length&&this.priorOptions.selectedMeasures.join()==this.currentOptions.selectedMeasures.join()){var e=this.priorOptions.rows.concat(this.priorOptions.cols),n=this.currentOptions.rows.concat(this.currentOptions.cols);if(e.length==n.length)for(var r=0;r<n.length;r++){if(!(e.indexOf(n[r])>=0)){t=!0;break}t=!1}}return t},ensureOnlyOneFilters:function(t,e){var n=!1;if(this.currentOptions&&this.metadata&&this.metadata.dims.length>0){t.filters||(t.filters={},t.positionFilters={});for(var r=0,a=0,s=[],l=0;l<this.metadata.dims.length;l++){var o=this.metadata.dims[l],u=o.field;-1==this.currentOptions.rows.indexOf(u)&&-1==this.currentOptions.cols.indexOf(u)&&(t.filters[u]&&t.filters[u].values&&1==t.filters[u].values.length||(n=!0,s.push(u),r+=1,this.getIndexValues(o,function(n){var l=s[a];a++;var o=[];t.filters&&t.filters[l]&&t.filters[l].values&&(o=t.filters[l].values);var u=[];n&&i.each(n,function(t,e){i.isArray(e)?u.push(e[0]):u.push(e)});var c=u.filter(function(t){return-1!=o.indexOf(t)}),d=n[0][0];i.isArray(n[0])||(d=n[0]),c&&c.length>0&&(d=c[0]),t.filters[l]={partial:!1,values:[d]},t.positionFilters[l]={values:0},a>=r&&void 0!=e&&e(t)})))}}n||void 0!=e&&e(t)},addDimensionsInFilterZone:function(t){if(this.currentOptions&&this.metadata&&this.metadata.dims.length>0&&t&&t.length>0)for(var e=0;e<this.metadata.dims.length;e++){var n=this.metadata.dims[e].field;if(-1==this.currentOptions.rows.indexOf(n)&&-1==this.currentOptions.cols.indexOf(n)&&this.currentOptions.filters&&this.currentOptions.filters[n]&&this.currentOptions.filters[n].values&&this.currentOptions.filters[n].values.length>0)for(var r=0;r<t.length;r++){t[r].filterList||(t[r].filterList=[]);for(var a=null,s=0;s<this.currentOptions.filters[n].values.length;s++)a?(i.isArray(a)||(a=[a]),a.push(this.currentOptions.filters[n].values[s])):a=this.currentOptions.filters[n].values[s];t[r].filterList.push({Key:n,Value:a})}}},updateDatasourceAndReload:function(t,e){if(t)for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<e.length;i++){for(var a=!0,s=e[i],l=0;l<r.filterList.length&&a;l++)s[r.filterList[l].Key]!=r.filterList[l].Value&&(a=!1);if(a){s.datavalue=r.definition;break}}},findBetterDimensions:function(t){this.metadata&&!this.isRemoteMode&&(i.each(this.metadata.dims,function(e,n){if(n.field.toLowerCase().indexOf("time")>=0)return t.cols.push(n.field),!1}),i.each(this.metadata.dims,function(e,n){if(-1==t.cols.indexOf(n.field))return t.rows.push(n.field),!1}))},generateCubeData:function(t){var e=[],n=[];i.each(t.dims,function(t,e){e.pos=0});var r=t.dims.length;if(this.currentOptions&&this.currentOptions.super_olap)for(var a=t.facts.length,s=0;s<t.values.length;s++){for(var l=t.values[s],o={},u=0;u<r;u++)o[t.dims[u].field]=t.dims[u].values[l[u]];for(var c=0;c<a;c++)o[t.facts[c].field]=l[r+c];e.push(o)}else{var d="datavalue";this.metadata&&this.metadata.measures&&this.metadata.measures.length>0&&(d=this.metadata.measures[0].field);for(s=0;s<t.values.length;s++){var h;(l={})[d]=t.values[s],t.validationValues&&((h={})[d]=t.validationValues[s]);for(var f=0;f<t.dims.length;f++)l[t.dims[f].field]=t.dims[f].values[t.dims[f].pos],h&&(h[t.dims[f].field]=l[t.dims[f].field]);r>0&&(t.dims[r-1].pos+=1);for(var p=r-1;p>=0&&t.dims[p].pos>=t.dims[p].count;p--)t.dims[p].pos=0,p>0&&(t.dims[p-1].pos+=1);e.push(l),h&&n.push(h)}}this.currentCubeData=e,this.currentValidationData=void 0,n.length>0&&(this.currentValidationData=n)},updateUncommittedChanges:function(t){var e=this.uncommittedChangesDic;e||(e={});for(var n=function(t){for(var e="",n=0;n<t.filterList.length;n++)e=e+t.filterList[n].Key+":"+t.filterList[n].Value;return e},r=function(t){var r=n(t);return e[r]?e[r]:null},i=0;i<t.length;i++){var a=r(t[i]);if(a)a.definition=t[i].definition;else{this.uncommittedChanges.push(t[i]);var s=n(t[i]);e[s]=t[i]}}},isInRow:function(t,e){return t.rows.indexOf(e)>=0},isInCol:function(t,e){return t.cols.indexOf(e)>=0},isInFilter:function(t,e){return!(this.isInRow(t,e)||this.isInCol(t,e))},isCurrentFilter:function(t,e,n){return!!(this.currentOptions&&this.currentOptions.filters&&this.currentOptions.filters[e]&&this.currentOptions.filters[e].values&&this.currentOptions.filters[e].values.length>0&&this.currentOptions.filters[e].values[0]==n)},getItemPos:function(t,e,n){return 8},onFiltersChange:function(t){var e=!1;this.currentOptions.filters||(this.currentOptions.filters={});for(var n={filters:{}},r=0;r<t.length;r++){var i=t[r].field,a=this.getIndexFromMetadata(i);if(a){var s=t[r].values,l=[];e=!0;for(var o=0;o<s.length;o++)if(s[o].value)l.push(s[o].value);else try{delete this.currentOptions.filters[a.field]}catch(t){}l.length>0&&(n.filters[a.field]={partial:!1,values:l},e=!0)}}e&&this.applyFilters(n,!0)},syncExternalFilter:function(t,e){var n=this.getIndexFromMetadata(t);if(n){this.currentOptions.filters||(this.currentOptions.filters={});var r={};if(e&&e.length>0){r.filters={},r.filters[t]={partial:!1,values:[]};var a=this;this.getIndexValues(n,function(n){if(n){for(var s=[],l=0;l<e.length;l++)e[l].selected&&s.push(e[l].value);var o=[];for(l=0;l<n.length;l++)o.push(n[l][0]);if(function(t,e){return 0==i(t).not(e).length&&0==i(e).not(t).length}(o,s))return void delete a.currentOptions.filters[t]}for(l=0;l<e.length;l++)e[l].selected&&(r.filters[t].values=s);a.applyFilters(r,!0),a=null})}else delete this.currentOptions.filters[t],this.applyFilters(r,!0)}},getTextMeasures:function(t){for(var e=[],n=0;n<t.length;n++)String(t[n]).includes(".")?e.push(t[n].substring(t[n].indexOf(".")+2).replace("]","")):e.push(String(t[n]));return e},forceDataIndex:function(t){if(t.selectedMeasures&&t.selectedMeasures.length>1){if(this.dataSourceAsArray){var e=t.selectedMeasures;this.isMDXMode&&(e=this.getTextMeasures(t.selectedMeasures)),this.sortAs=[{field:"data_index",values:e}]}t.rows||(t.rows=[]),t.cols||(t.cols=[]),-1==t.cols.indexOf("data_index")&&-1==t.rows.indexOf("data_index")&&t.cols.push("data_index")}},ensureFilters:function(t){if(!this.isOlapMode&&t&&t.dims)for(var e in this.currentOptions.filters)for(var n=0;n<t.dims.length;n++){var r=t.dims[n];if(r.field.toLowerCase()==e.toLowerCase()){for(var i=this.currentOptions.filters[e].values,a=i.length-1;a>=0;a--){var s=i[a];r.values&&-1==r.values.indexOf(s)&&i.splice(a,1)}0==i.length&&(this.currentOptions.editMode?this.currentOptions.filters[e]=r.values[0]:(delete this.currentOptions.filters[e],delete this.currentOptions.positionFilters[e]))}}}})}.apply(e,a))||(t.exports=s)}).call(this,n(218),n(1))},926:function(t,e,n){"use strict";(function(r,i){var a,s=n(18),l=n(693);void 0===(a=function(){return r.Model.extend({getCubeMetadata:function(t,e,n){(0,l.send)("dashboardManager/pivotGrid/getCubeMetadata/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},e,n)},getCubeValues:function(t,e,n){(0,l.send)("dashboardManager/pivotGrid/getCubeValues/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},function(n){n&&n.length>0&&t.limit>0&&n.length>=t.limit&&(0,s.showMessage)((0,s.translate)("pivot_record_limit").replace("##num##",t.limit)),e(n)},n)},getDimensionValues:function(t,e){(0,l.send)("dashboardManager/pivotGrid/getDimensionValues/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},e)},setCubeChanges:function(t,e,n){(0,l.send)("dashboardManager/pivotGrid/setCubeChanges/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},function(t){e(t),i("body").trigger("pendingChanges",[!0])},n)}})}.apply(e,[]))||(t.exports=a)}).call(this,n(218),n(1))}}]);