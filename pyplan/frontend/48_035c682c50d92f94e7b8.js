/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[48,277],{702:function(e,a,n){"use strict";(function(t,o){var r,i;r=[n(684),n(703)],void 0===(i=function(e,a){return t.Controller.extend({name:"dashboardManager",showDashboard:function(a,t,r,i,c,l,s){var u="dashboard-"+a,d=new e;d.existsTask(u)?(d.selectTask(u),i&&o(".mainTask[data-rel='"+u+"']").length>0&&o(".mainTask[data-rel='"+u+"']").trigger("refreshView")):(d.addSimpleTask(u,r),n.e(45).then(function(){var e=[n(805)];(function(e){(new e).render(a,t,c,l,s),d.selectTask(u)}).apply(null,e)}).catch(n.oe))},showEmbeddableDashboard:function(a,t,r,i,c,l){var s="dashboard-"+a,u=new e;__currentSession.fromEmbedded,u.existsTask(s)?(u.selectTask(s),i&&o(".mainTask[data-rel='"+s+"']").length>0&&o(".mainTask[data-rel='"+s+"']").trigger("refreshView")):(u.addSimpleTask(s,r),Promise.all([n.e(45),n.e(165)]).then(function(){var e=[n(888)];(function(e){(new e).render(a,t,r,c,l),u.selectTask(s)}).apply(null,e)}).catch(n.oe))},removeDashboardTaskFromHome:function(a){var n="dashboard-"+a,t=new e;t.existsTask(n)&&t.removeTask(n)},drawDashboardBars:function(e,a){this.drawToolbar(e,function(){a()})},drawBottombar:function(e,a){n.e(166).then(function(){var t=[n(889)];(function(n){var t=new n;t.setElement(e),t.render(),void 0!=a&&a()}).apply(null,t)}).catch(n.oe)},showNodeInfo:function(e){Promise.all([n.e(11),n.e(16),n.e(66)]).then(function(){var a=[n(769)];(function(a){new a(e).render()}).apply(null,a)}).catch(n.oe)},removeNodeInfo:function(e){Promise.all([n.e(11),n.e(16),n.e(66)]).then(function(){var a=[n(769)];(function(a){(new a).remove(e)}).apply(null,a)}).catch(n.oe)},drawToolbar:function(e,a){n.e(42).then(function(){var t=[n(748)];(function(n){(new n).show({el:e,positions:["left","right"],onLoad:a,className:"dockDashboardProperty"})}).apply(null,t)}).catch(n.oe)},drawMoreDashboard:function(e,a){n.e(167).then(function(){var e=[n(890)];(function(e){var n=new e;n.setElement("body"),n.render(a)}).apply(null,e)}).catch(n.oe)},getDefaultContent:function(e,a){Promise.all([n.e(0),n.e(7),n.e(67)]).then(function(){var t=[n(742)];(function(n){var t=new n({model:e});a(t)}).apply(null,t)}).catch(n.oe)},getEmptyContent:function(e,a){Promise.all([n.e(0),n.e(68)]).then(function(){var t=[n(770)];(function(n){var t=new n({model:e});a(t)}).apply(null,t)}).catch(n.oe)},getChartToolbar:function(e,a,t,o){var r;switch(e){case"linechart":r="line/lineToolbar";break;case"columnchart":case"columnchartstacked":case"columnchartpercent":case"barchart":case"barchartstacked":case"barchartpercent":r="columnAndBar/columnAndBarToolbar";break;case"areachart":case"areachartstacked":case"areachartpercent":r="area/areaToolbar";break;case"piechart":r="pie/pieToolbar";break;case"funnelchart":r="funnelToolbar/funnelToolbar";break;case"pyramidchart":r="pyramidToolbar/pyramidToolbar";break;case"gaugechart":r="gauge/gaugeToolbar";break;case"waterfallchart":r="waterfall/waterfallToolbar";break;case"scatterchart":r="scatter/scatterToolbar";break;case"table":r="table/tableToolbar";break;case"indexlist":r="index/indexToolbar";break;case"map":r="map/mapToolbar";break;case"indicator":r="indicator/indicatorToolbar";break;case"selector":r="selector/selectorToolbar";break;case"formnode":r="formnode/formnodeToolbar";break;case"nodetable":r="nodeTable/nodetableToolbar";break;case"button":r="button/buttonToolbar";break;case"analyticachart":r="analyticaChart/analyticaChartToolbar";break;case"objectItem":switch(a){case"texteditor":r="texteditor/texteditorToolbar";break;case"cubeviewer":r="cubeviewer/cubeviewerToolbar";break;case"diagramviewer":r="diagramViewer/diagramViewerToolbar";break;case"mapviewer":r="mapViewer/mapViewerToolbar";break;case"inputform":r="inputForm/inputFormToolbar";break;case"menuwidget":r="menuWidget/menuWidgetToolbar";break;case"dashboardcontainer_QUITAR_ESTO_PARA_MOSTRAR":r="dashboardContainer/dashboardContainerToolbar"}break;case"complexchart":r="complexchart/complexChartToolbar";break;default:r=!1}r?Promise.all([n.e(24),n.e(168)]).then(function(){var e=[n(891)("./"+r)];(function(e){var a=new e({model:t});o(a)}).apply(null,e)}).catch(n.oe):Promise.all([n.e(24),n.e(55),n.e(169)]).then(function(){var e=[n(892)];(function(e){var a=new e({model:t});o(a)}).apply(null,e)}).catch(n.oe)},getChartItemViewFromType:function(e,a){switch(e){case"empty":Promise.all([n.e(0),n.e(68)]).then(function(){var e=[n(770)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"linechart":Promise.all([n.e(0),n.e(7),n.e(170)]).then(function(){var e=[n(893)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"columnchart":Promise.all([n.e(0),n.e(7),n.e(67)]).then(function(){var e=[n(742)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"columnchartstacked":Promise.all([n.e(0),n.e(7),n.e(171)]).then(function(){var e=[n(894)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"columnchartpercent":Promise.all([n.e(0),n.e(7),n.e(172)]).then(function(){var e=[n(895)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"barchart":Promise.all([n.e(0),n.e(7),n.e(173)]).then(function(){var e=[n(786)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"barchartstacked":Promise.all([n.e(0),n.e(7),n.e(174)]).then(function(){var e=[n(896)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"barchartpercent":Promise.all([n.e(0),n.e(7),n.e(175)]).then(function(){var e=[n(897)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"areachart":Promise.all([n.e(0),n.e(7),n.e(176)]).then(function(){var e=[n(787)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"areachartstacked":Promise.all([n.e(0),n.e(7),n.e(177)]).then(function(){var e=[n(898)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"areachartpercent":Promise.all([n.e(0),n.e(7),n.e(178)]).then(function(){var e=[n(899)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"piechart":Promise.all([n.e(0),n.e(7),n.e(179)]).then(function(){var e=[n(900)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"gaugechart":Promise.all([n.e(0),n.e(7),n.e(180)]).then(function(){var e=[n(901)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"waterfallchart":Promise.all([n.e(0),n.e(7),n.e(181)]).then(function(){var e=[n(902)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"scatterchart":Promise.all([n.e(0),n.e(7),n.e(182)]).then(function(){var e=[n(903)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"complexchart":Promise.all([n.e(0),n.e(7),n.e(183)]).then(function(){var e=[n(904)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"table":Promise.all([n.e(0),n.e(11),n.e(184)]).then(function(){var e=[n(905)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"indexlist":Promise.all([n.e(0),n.e(185)]).then(function(){var e=[n(906)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"map":Promise.all([n.e(33),n.e(0),n.e(11),n.e(93),n.e(186)]).then(function(){var e=[n(907)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"indicator":Promise.all([n.e(91),n.e(308),n.e(0),n.e(187)]).then(function(){var e=[n(908)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"selector":Promise.all([n.e(0),n.e(188)]).then(function(){var e=[n(929)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"formnode":Promise.all([n.e(0),n.e(189)]).then(function(){var e=[n(930)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"nodetable":Promise.all([n.e(0),n.e(15),n.e(34),n.e(190)]).then(function(){var e=[n(931)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"button":Promise.all([n.e(0),n.e(191)]).then(function(){var e=[n(932)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"funnelchart":Promise.all([n.e(0),n.e(7),n.e(192)]).then(function(){var e=[n(933)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"pyramidchart":Promise.all([n.e(0),n.e(7),n.e(193)]).then(function(){var e=[n(934)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"analyticachart":Promise.all([n.e(0),n.e(194)]).then(function(){var e=[n(935)];(function(e){a(e)}).apply(null,e)}).catch(n.oe)}},getObjectItemViewFromType:function(e,a){switch(e){case"texteditor":Promise.all([n.e(0),n.e(92),n.e(195)]).then(function(){var e=[n(936)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"cubeviewer":Promise.all([n.e(0),n.e(15),n.e(34),n.e(196)]).then(function(){var e=[n(937)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"diagramviewer":Promise.all([n.e(0),n.e(11),n.e(16),n.e(197)]).then(function(){var e=[n(938)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"mapviewer":Promise.all([n.e(33),n.e(0),n.e(11),n.e(94),n.e(198)]).then(function(){var e=[n(939)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"inputform":Promise.all([n.e(0),n.e(15),n.e(35),n.e(199)]).then(function(){var e=[n(940)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);break;case"dashboardcontainer":Promise.all([n.e(0),n.e(200)]).then(function(){var e=[n(941)];(function(e){a(e)}).apply(null,e)}).catch(n.oe);case"menuwidget":Promise.all([n.e(0),n.e(24),n.e(201)]).then(function(){var e=[n(942)];(function(e){a(e)}).apply(null,e)}).catch(n.oe)}},getFilterView:function(e){n.e(202).then(function(){var a=[n(943)];(function(a){e(a)}).apply(null,a)}).catch(n.oe)},showCopyDashboard:function(e,a,t){n.e(203).then(function(){var o=[n(944)];(function(n){(new n).render(e,a,t)}).apply(null,o)}).catch(n.oe)},showDashboardComments:function(e){n.e(204).then(function(){var a=[n(945)];(function(a){var n=new a;n.setElement(e.parent),n.render(e)}).apply(null,a)}).catch(n.oe)},refreshAllOpenDashboards:function(){o(".mainTask.dashboardTask .btnRefresh").trigger("click")},showTimeFrameSetting:function(e){n.e(205).then(function(){var a=[n(946)];(function(a){var n=new a(e);n.setElement(e.el),n.render()}).apply(null,a)}).catch(n.oe)},updatePrintReportProgress:function(e){n.e(46).then(function(){var a=[n(739)];(function(a){new a(e).updatePrintReportProgress()}).apply(null,a)}).catch(n.oe)},updatePrintReportMessage:function(e){n.e(46).then(function(){var a=[n(739)];(function(a){new a(e).updatePrintReportMessage()}).apply(null,a)}).catch(n.oe)},updatePrintReportComplete:function(e){n.e(46).then(function(){var a=[n(739)];(function(a){new a(e).updatePrintReportComplete()}).apply(null,a)}).catch(n.oe)},loginInToMyPyplanModal:function(e){n.e(206).then(function(){var a=[n(947)];(function(a){(new a).render(e)}).apply(null,a)}).catch(n.oe)},publishToMyPyplanModal:function(e){n.e(207).then(function(){var a=[n(948)];(function(a){(new a).render(e)}).apply(null,a)}).catch(n.oe)}})}.apply(a,r))||(e.exports=i)}).call(this,n(694),n(1))},703:function(e,a,n){"use strict";(function(t,o){var r,i=n(693);void 0===(r=function(){return t.Model.extend({defaults:{dashId:null,dashboardViewList:[],modifiedDash:!1,noQuery:[],styleLibraries:[],nodeOwner:"",extraOptions:void 0},resizeTimeOut:0,getDashboard:function(e,a){(0,i.send)("dashboardManager/by_id/".concat(e,"/"),null,null,function(e){e&&(a(e),o("#summary").trigger("refresh"))})},getNavigator:function(e,a){var n=e.reportId,t=void 0===n?null:n,o=e.dashboardId,r=void 0===o?null:o,c="";t?(c="?report_id=".concat(t),r&&(c+="&dashboard_id=".concat(r))):r&&(c="?dashboard_id=".concat(r)),(0,i.send)("reportManager/getNavigator/".concat(c),null,null,a)},calculateScaleFactor:function(e,a){if(this.getItemsModel().length>0)for(var n=this.getItemsModel(),t=0;t<n.length;t++)n[t].calculateScaleFactor(e,a)},updateSizes:function(e,a){if(this.getItemsModel().length>0){var n=300;a&&(n=1),clearTimeout(this.resizeTimeOut);var t=this.getItemsModel();this.resizeTimeOut=setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].baseUpdateSize(),t[e].updateSize()},n)}},setStateModified:function(e){this.set({modifiedDash:e})},getStateModified:function(){return this.get("modifiedDash")},addItemToModel:function(e){this.get("dashboardViewList").push(e)},getItemsModel:function(){return this.get("dashboardViewList")},getItemModel:function(e){var a,n=this.getItemsModel();for(a=0;a<n.length;a++)if(n[a].tagId==e)return n[a]},countItemsModelByNodeId:function(e){for(var a=0,n=this.getItemsModel(),t=0;t<n.length;t++)n[t].currentNodeId&&e&&n[t].currentNodeId.toLowerCase()==e.toLowerCase()&&a++;return a},removeItemModel:function(e){var a,n=this.getItemsModel();for(a=0;a<n.length;a++)if(n[a].tagId==e.tagId){n.splice(a,1);break}this.set({dashboardViewList:n})},removeAllItemsModel:function(){this.set("dashboardViewList",[])},changeItemModel:function(e,a){this.removeItemModel(e),this.addItemToModel(a)},setNodeOwner:function(e){this.set("node",e)},getNodeOwner:function(){return this.get("node")},onFilterChange:function(e,a,n,t,o,r){if(o){var i=this.getItemModel(o);if(i&&i.isUnlinkedIndex(e))return void i.onFilterChange(e,a,n,t,!0)}var c=this.getItemsModel();if(c)for(var l=0;l<c.length;l++)c[l].onFilterChange(e,a,n,t,!1,r)},onFiltersChange:function(e){var a=this.getItemsModel();if(a)for(var n=0;n<a.length;n++)a[n].onFiltersChange(e)},synchronizeDrop:function(e,a,n,t,o,r,i){if(i){var c=this.getItemsModel();if(c)for(var l=0;l<c.length;l++)c[l].tagId&&c[l].tagId!=i&&c[l].onSynchronizeDrop(e,a,n,t,o,r)}},synchronizeLevel:function(e,a,n){if(n){var t=this.getItemsModel();if(t)for(var o=0;o<t.length;o++)t[o].tagId&&t[o].tagId!=n&&t[o].onSynchronizeLevel(e,a)}},getNodeFullData:function(e,a,n,t){var o={node:e};a&&(o.fromRow=1,o.toRow=a),(0,i.send)("dashboardManager/getNodeFullData/",o,{type:"GET"},n,t)},getNodeIndexes:function(e,a){(0,i.send)("dashboardManager/getNodeIndexes/",{node:e},null,function(e){e&&a(e)})},getIndexValues:function(e,a){(0,i.send)("dashboardManager/getIndexValues/",e,null,function(e){e&&a(e)})},getGeoDef:function(e,a){(0,i.send)("Dashboard/GetGeoDef/"+e,null,null,function(e){e&&a(e)})},evaluateNode:function(e,a,n,t,o,r,c,l,s,u,d,h,f,p,m){l||(l="sum");var b={node:e,dims:a,rows:n,columns:t,summaryBy:l,bottomTotal:d,rightTotal:h,timeFormat:f,timeFormatType:p,calendarType:m},g="evaluateNode";r&&(g="evaluateNodeDef"),s&&s>0&&u&&u>0&&(b.fromRow=s*(u-1)+1,b.toRow=s*u),(0,i.send)("dashboardManager/".concat(g,"/"),JSON.stringify(b),{type:"POST",contentType:"application/json;charset=utf-8"},o,c)},evaluateNodeForPivot:function(e,a,n,t){(0,i.send)("Dashboard/EvaluateNodeForPivot/",{node:e},{type:"GET"},function(e){var r=e.value,i={success:function(e,n,t){a(e)},complete:function(){o("#mainLoading").hide(),o("#secondLoading").hide(),n()},dataType:"json",progress:function(e){if(e.lengthComputable){var a=e.loaded/e.total*100;t(a)}else try{var n=this.getResponseHeader("X-Content-Length");a=e.loaded/n*100;t(a)}catch(e){}}};o("#secondLoading").show(),o.ajax("".concat(__apiURL,"/scripts/download.aspx?name=").concat(r),i)},n)},updateDefinition:function(e,a,n,t){var r=[];n&&o.each(n,function(e,a){r.push({id:a})});var c={dashboardId:e,definition:a,styles:n};(0,i.send)("dashboardManager/".concat(e,"/"),JSON.stringify(c),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){void 0!=t&&t(e)})},updateDashboardImage:function(e,a,n){var t={id:e,fileData:a};(0,i.send)("Dashboard/UpdateImage/",t,{type:"PUT"},function(a){o("#summary").trigger("refresh"),o("#model-summary").trigger("refresh",{id:e}),a&&n&&n(a)})},validateIndexes:function(e,a){var n=function(a){var n;for(n=0;n<e.length;n++)if(e[n].field==a)return e[n]},t=function(e){var a,t;for(a=0;a<e.length;a++)void 0!=(t=n(e[a].field))&&(e[a].name=t.name)};t(a.dims),t(a.rows),t(a.columns)},initializeDashboardQuery:function(e){this.set("noQuery",e),this._initNoQuery()},_initNoQuery:function(){var e=this.get("noQuery");e&&e.length>0&&o.each(e,function(e,a){a.started=!1})},isReadyForEvaluate:function(e,a){var n=!0,t=this.get("noQuery");return t&&t.length>0&&o.each(t,function(t,o){o.node==e?o.started=!0:0==o.started&&o.rel&&o.rel.indexOf(a)>=0&&(n=!1)}),n},setNodeValueChanges:function(e,a){(0,i.send)("dashboardManager/pivotGrid/setCubeChanges/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8"},function(e){a(e),o("body").trigger("pendingChanges",[!0])})},isResultComputed:function(e,a){(0,i.send)("dashboardManager/isResultComputed/",JSON.stringify({nodes:e}),{type:"POST",contentType:"application/json;charset=utf-8"},function(e){a(e)})},reevaluateNodesNeeded:function(e){o(".dashboardTask").trigger("reevaluateNodesNeeded",[e])},reevaluateNodesNeededInThisDashboard:function(e){for(var a=[],n=this.getItemsModel(),t=0;t<n.length;t++){var r=n[t].getNodesOfView();r&&(a=a.concat(r))}a.length>0&&this.isResultComputed(a,function(a){if(a&&a.length>0)for(var t=0;t<n.length;t++)e&&n[t].tagId==e||(a.indexOf(n[t].currentNodeId)>=0&&o(n[t].tagId).trigger("evaluateNodeFromCurrentResult"),n[t].needRefresh(a)&&n[t].refreshItemDash())})},applyNumberFormat:function(e){for(var a=this.getItemsModel(),n=0;n<a.length;n++)a[n].currentNodeId==e&&a[n].applyNumberFormat()},getStyleLibrary:function(e){var a=this.get("styleLibraries");if(a)for(var n=0;n<a.length;n++)if(a[n].id==e)return a[n].definition;return[]},getStyleLibraries:function(){return this.get("styleLibraries")},setStyleLibraries:function(e){return this.set("styleLibraries",e)},refreshStyleLibraries:function(e){var a=this;n.e(64).then(function(){var t=[n(728)];(function(n){(new n).list(null,function(n){a.set("styleLibraries",n),e(n)})}).apply(null,t)}).catch(n.oe)},syncDrilldown:function(e,a,n){var t=this.getItemsModel();if(t)for(var o=0;o<t.length;o++)t[o].tagId!=n&&t[o].syncDrilldown(e,a,n)},syncDrillUp:function(e,a){var n=this.getItemsModel();if(n)for(var t=0;t<n.length;t++)n[t].tagId!=a&&n[t].syncDrillup(e,a)},syncShowHideLegend:function(e,a,n){},viewAsChart:function(e,a){(0,i.send)("Dashboard/viewAsChart/",e,{type:"POST"},a)}})}.apply(a,[]))||(e.exports=r)}).call(this,n(218),n(1))}}]);