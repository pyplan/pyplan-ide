/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[50,10],{2107:function(n,t,o){var e=o(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(e.default||e).template({1:function(n,t,e,a,s){var i=null!=t?t:n.nullContext||{},r=n.escapeExpression;return'          <div class="col-sm-3">\n              <div class="btn-toolbar tasksActions" style="display: none;">\n                  <div class="btn-group">\n                      <button class="btn btn-primary btn-small btnSaveTasks">'+r(l(o(688)).call(i,"accept",{name:"L",hash:{},data:s,loc:{start:{line:15,column:77},end:{line:15,column:91}}}))+'</button>\n                      <button class="btn btn-small btnCancel">'+r(l(o(688)).call(i,"cancel",{name:"L",hash:{},data:s,loc:{start:{line:16,column:62},end:{line:16,column:76}}}))+"</button>\n                  </div>\n              </div>\n          </div>\n"},3:function(n,t,o,e,l){return" max-height:"+n.escapeExpression(n.lambda(null!=t?t.maxHeight:t,t))+"px "},5:function(n,t,e,a,s,i,r){var c,u=null!=t?t:n.nullContext||{};return"\n"+(null!=(c=l(o(689)).call(u,null!=t?t.fromImputTemplate:t,"!=",!0,{name:"ifCond",hash:{},fn:n.program(6,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:32,column:10},end:{line:40,column:21}}}))?c:"")+"\n"+(null!=(c=e.if.call(u,null!=t?t.workflowData:t,{name:"if",hash:{},fn:n.program(9,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:42,column:10},end:{line:133,column:17}}}))?c:"")},6:function(n,t,e,a,s){var i;return"            <h5>Workflow\n"+(null!=(i=l(o(689)).call(null!=t?t:n.nullContext||{},null!=t?t.fromEmbedded:t,"==",!1,{name:"ifCond",hash:{},fn:n.program(7,s,0),inverse:n.noop,data:s,loc:{start:{line:34,column:14},end:{line:37,column:25}}}))?i:"")+"\n            </h5>\n"},7:function(n,t,o,e,l){return'              <button class="btn btn-white btn-small openWorkflow"><i class="fa fa-external-link-square"></i></button>\n              <button class="btn btn-white btn-small addTaskForNode"><i class="fa fa-plus-square"></i> Add task</button>\n'},9:function(n,t,o,e,l,a,s){var i;return'            <div class="row nomargin" style="border-style: solid; border-width:0 0 1px 0; border-color:#E0E0E0;\n            margin:0 0 5px 0 !important;">\n              <div class="col-sm-3 nopadding">\n                <strong>Task</strong>\n              </div>\n              <div class="col-sm-3">\n                <strong>Progress</strong>\n              </div>\n              <div class="col-sm-2 nopadding">\n                <strong>Status</strong>\n              </div>\n              <div class="col-sm-2">\n                <strong>Start-End</strong>\n              </div>\n              <div class="col-sm-2 nopadding text-right">\n                <strong>Responsible</strong>\n              </div>\n            </div>\n'+(null!=(i=o.each.call(null!=t?t:n.nullContext||{},null!=(i=null!=t?t.workflow:t)?i.tasks:i,{name:"each",hash:{},fn:n.program(10,l,0,a,s),inverse:n.noop,data:l,loc:{start:{line:61,column:12},end:{line:132,column:21}}}))?i:"")},10:function(n,t,e,a,s,i,r){var c,u=n.lambda,d=n.escapeExpression,p=null!=t?t:n.nullContext||{};return'\n\n              <div class="row nomargin item-task" task-id="'+d(u(null!=t?t.taskId:t,t))+'">\n                <div class="col-sm-3 nopadding">\n                    \n'+(null!=(c=l(o(689)).call(p,null!=r[1]?r[1].fromEmbedded:r[1],"==",!1,{name:"ifCond",hash:{},fn:n.program(11,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:67,column:20},end:{line:79,column:31}}}))?c:"")+"\n"+(null!=(c=l(o(689)).call(p,null!=r[1]?r[1].fromEmbedded:r[1],"==",!0,{name:"ifCond",hash:{},fn:n.program(16,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:81,column:20},end:{line:85,column:31}}}))?c:"")+"                  \n                </div>\n\n"+(null!=(c=l(o(689)).call(p,null!=r[1]?r[1].fromImputTemplate:r[1],"==",!0,{name:"ifCond",hash:{},fn:n.program(18,s,0,i,r),inverse:n.program(20,s,0,i,r),data:s,loc:{start:{line:89,column:16},end:{line:103,column:27}}}))?c:"")+"\n"+(null!=(c=l(o(689)).call(p,null!=r[1]?r[1].fromImputTemplate:r[1],"==",!0,{name:"ifCond",hash:{},fn:n.program(22,s,0,i,r),inverse:n.program(26,s,0,i,r),data:s,loc:{start:{line:105,column:16},end:{line:119,column:27}}}))?c:"")+'\n                <div class="col-sm-2">\n                '+d(u(null!=t?t.startDate:t,t))+"-"+d(u(null!=t?t.endDate:t,t))+'\n                </div>\n                <div class="col-sm-2 nopadding text-right">\n                  '+d(u(null!=t?t.userFullName:t,t))+"\n\n"+(null!=(c=l(o(689)).call(p,null!=r[1]?r[1].fromImputTemplate:r[1],"==",!0,{name:"ifCond",hash:{},fn:n.program(28,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:127,column:18},end:{line:129,column:29}}}))?c:"")+"                </div>\n              </div>\n"},11:function(n,t,e,a,s,i,r){var c;return"\n"+(null!=(c=l(o(689)).call(null!=t?t:n.nullContext||{},null!=r[2]?r[2].fromImputTemplate:r[2],"==",!0,{name:"ifCond",hash:{},fn:n.program(12,s,0,i,r),inverse:n.program(14,s,0,i,r),data:s,loc:{start:{line:69,column:22},end:{line:77,column:33}}}))?c:"")+"                      \n"},12:function(n,t,o,e,l){return'                        <span style="float:left;">\n                          '+n.escapeExpression(n.lambda(null!=t?t.title:t,t))+"\n                        </span>\n"},14:function(n,t,o,e,l){var a=n.lambda,s=n.escapeExpression;return'                        <span style="float:left; cursor:pointer;">\n                          <a class="workflowtask" data-rel="'+s(a(null!=t?t.taskId:t,t))+'">'+s(a(null!=t?t.title:t,t))+"</a>\n                        </span>\n"},16:function(n,t,o,e,l){return'                      <span style="float:left;">\n                        '+n.escapeExpression(n.lambda(null!=t?t.title:t,t))+"\n                      </span>\n"},18:function(n,t,o,e,l){return'                  <div class="col-sm-3 progress-edit">\n                    <input type="text" class="input-sm" data-rolid="1" name="progress" data-id="progress" \n                      value="'+n.escapeExpression(n.lambda(null!=t?t.percent:t,t))+'">\n                  </div>\n'},20:function(n,t,o,e,l){var a=n.lambda,s=n.escapeExpression;return'                  <div class="col-sm-3 progress-noedit">\n                    <div class="progress" style="background-color:#EFEFEF; position: relative;">\n                      <span class="sr-only">'+s(a(null!=t?t.percent:t,t))+'%</span>\n                      <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: '+s(a(null!=t?t.percent:t,t))+'%">\n\n                      </div>\n                    </div>\n                  </div>\n'},22:function(n,t,o,e,l,a,s){var i;return'\n                  <div class="col-sm-2 nopadding">\n                    <select class="form-control input-sm selStatus">\n'+(null!=(i=o.each.call(null!=t?t:n.nullContext||{},null!=t?t.transitions:t,{name:"each",hash:{},fn:n.program(23,l,0,a,s),inverse:n.noop,data:l,loc:{start:{line:109,column:22},end:{line:111,column:31}}}))?i:"")+"\n                    </select>\n                  </div>\n"},23:function(n,t,e,a,s,i,r){var c,u=n.lambda,d=n.escapeExpression;return'                        <option value="'+d(u(null!=t?t.taskStateId:t,t))+'" '+(null!=(c=l(o(689)).call(null!=t?t:n.nullContext||{},null!=r[1]?r[1].stateId:r[1],"==",null!=t?t.taskStateId:t,{name:"ifCond",hash:{},fn:n.program(24,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:110,column:56},end:{line:110,column:127}}}))?c:"")+">"+d(u(null!=t?t.name:t,t))+"</option>\n"},24:function(n,t,o,e,l){return' selected="selected" '},26:function(n,t,o,e,l){var a=n.lambda,s=n.escapeExpression;return'                  <div class="col-sm-2 nopadding">\n                    <i class="fa fa-tag" style="color:#'+s(a(null!=t?t.stateColor:t,t))+';"></i>'+s(a(null!=t?t.stateName:t,t))+"\n                  </div>\n"},28:function(n,t,o,e,l){var a=n.lambda,s=n.escapeExpression;return'                    <i class="fa fa-commenting btnComment" aria-hidden="true" task-id="'+s(a(null!=t?t.taskId:t,t))+'" task-title="'+s(a(null!=t?t.title:t,t))+'"></i>\n'},compiler:[8,">= 4.3.0"],main:function(n,t,e,a,s,i,r){var c,u=n.lambda,d=n.escapeExpression,p=null!=t?t:n.nullContext||{};return'\n\n    <div id="'+d(u(null!=t?t.id:t,t))+'" class="popover fade in '+d(u(null!=t?t.position:t,t))+" "+d(u(null!=t?t.className:t,t))+' " style="top: '+d(u(null!=t?t.top:t,t))+"px; left: "+d(u(null!=t?t.left:t,t))+'px; display: block;">\n      <div class="arrow"></div>\n\n\n      <div class="row popover-title">\n          <div class="col-sm-9 nopadding">\n              <h3>'+d(u(null!=t?t.title:t,t))+"</h3>\n          </div>\n"+(null!=(c=l(o(689)).call(p,null!=t?t.fromImputTemplate:t,"==",!0,{name:"ifCond",hash:{},fn:n.program(1,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:11,column:10},end:{line:20,column:21}}}))?c:"")+'      </div>\n\n      <div class="popover-content" style="'+(null!=(c=e.if.call(p,null!=t?t.maxHeight:t,{name:"if",hash:{},fn:n.program(3,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:23,column:42},end:{line:23,column:94}}}))?c:"")+' ">\n\n        \x3c!--<h5>Description</h5>--\x3e\n\n        '+(null!=(c=u(null!=t?t.content:t,t))?c:"")+"\n\n\n"+(null!=(c=e.if.call(p,null!=t?t.workflowEnabled:t,{name:"if",hash:{},fn:n.program(5,s,0,i,r),inverse:n.noop,data:s,loc:{start:{line:30,column:8},end:{line:134,column:15}}}))?c:"")+"\n      </div>\n\n    </div>\n\n"},useData:!0,useDepths:!0})},703:function(n,t,o){"use strict";(function(e){var l;void 0===(l=function(){return e.Controller.extend({name:"workflow",show:function(){o.e(74).then(function(){var n=[o(961)];(function(n){(new n).render()}).apply(null,n)}).catch(o.oe)},showAddTaskForNode:function(n){o.e(74).then(function(){var t=[o(961)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},showTaskModal:function(n){o.e(264).then(function(){var t=[o(1290)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},showCommentsModal:function(n){o.e(265).then(function(){var t=[o(1292)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},deleteTaskModal:function(n){o.e(266).then(function(){var t=[o(1293)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},showStatesManager:function(){o.e(267).then(function(){var n=[o(1294)];(function(n){(new n).render()}).apply(null,n)}).catch(o.oe)},showTransitionsManager:function(n){o.e(268).then(function(){var t=[o(1295)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},showTransitionsByRolManager:function(n){o.e(269).then(function(){var t=[o(1296)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},addState:function(){o.e(75).then(function(){var n=[o(964)];(function(n){(new n).render()}).apply(null,n)}).catch(o.oe)},editState:function(n){o.e(75).then(function(){var t=[o(964)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},showTaskGroupManager:function(n){o.e(270).then(function(){var t=[o(1297)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)},addTaskGroup:function(){o.e(49).then(function(){var n=[o(841)];(function(n){(new n).render()}).apply(null,n)}).catch(o.oe)},addTaskGroupAsModal:function(n){o.e(49).then(function(){var t=[o(841)];(function(t){(new t).renderAsModal(n)}).apply(null,t)}).catch(o.oe)},editTaskGroup:function(n){o.e(49).then(function(){var t=[o(841)];(function(t){(new t).render(n)}).apply(null,t)}).catch(o.oe)}})}.apply(t,[]))||(n.exports=l)}).call(this,o(694))},872:function(n,t,o){"use strict";(function(e,l){var a,s,i=o(18);a=[o(2107),o(703)],void 0===(s=function(n,t){return e.View.extend({el:l("#main"),hasChanges:!1,render:function(e){var a=l.uuid();this.options.id="popover_"+a;var s=n(this.options);this.$el.append(s),this.positionPopover(),this.options.hasOwnProperty("onLoad")&&this.options.onLoad(l("#"+this.options.id));var r=this,c=l('div[id="popover_'+a+'"]'),u=l('div[id="popover_'+a+'"] .arrow');c.position().top<1&&(c.css({top:"10px"}),u.css({top:"40px"}));l("#"+this.options.id).on("updatePosition",function(){r.positionPopover()}),l("#"+this.options.id).on("hide",function(){r.removePopover()}),l("#"+this.options.id+" a.workflowtask").on("click",function(n){var o=new t,e={id:l(this).attr("data-rel"),fromDashboard:!0};o.showTaskModal(e),r.removePopover(),n.preventDefault()}),l("#"+this.options.id).find(".btnComment").on("click",function(n){var o=new t,e={id:l(this).attr("task-id"),taskTitle:l(this).attr("task-title"),fromDashboard:!1};o.showCommentsModal(e),r.removePopover(),n.preventDefault()}),l(document).on("mousedown",function n(t){var o=l("#"+r.options.id);o.is(t.target)||0!==o.has(t.target).length||(r.removePopover(),l(document).off("mousedown",n))}),!this.options.fromEmbedded&&this.options.fromImputTemplate&&(l(c).find("input[data-id='progress']").TouchSpin({min:0,max:100,step:10,decimals:0,boostat:5,maxboostedstep:10,forcestepdivisibility:"none",postfix:"%"}),l(c).find("input[data-id='progress']").on("touchspin.on.startspin",function(n){l(c).find(".tasksActions").show()}),l(c).find("input[data-id='progress']").on("keypress, change",function(n){l(c).find(".tasksActions").show()}),l(c).find(".selStatus").on("change",function(n){l(c).find(".tasksActions").show()}),l(c).find(".btnCancel").on("click",function(n){r.removePopover()}),l(c).find(".btnSaveTasks").on("click",function(n){var t=r;o.e(33).then(function(){var n=[o(706)];(function(n){var o={values:[]};l("#"+r.options.id).find(".item-task").each(function(n,t){var e={taskId:l(t).attr("task-id"),percent:l(t).find('input[data-id="progress"]').val(),stateId:l(t).find(".selStatus").val()};o.values.push(e)}),(new n).updateTasksProperty(o,function(n){(0,i.showMessage)((0,i.translate)("task_updated"),"Success","success",!0),t.options.onSaveCallback()})}).apply(null,n)}).catch(o.oe)}))},setContent:function(n){l("#"+this.options.id).find(".popover-content").html(n),this.positionPopover()},removePopover:function(){l("#"+this.options.id).remove()},positionPopover:function(){var n=l("#navigation").height(),t="top",o=l("#"+this.options.id),e=o.width(),a=o.height();switch(this.options.top-a-n<0&&(t="bottom"),this.options.left>e?t="left":this.options.left+e<l(window).width()?t="right":e<l(window).width()?(this.options.left=0,t="right"):(this.options.left=0,t="right",o.removeClass(this.options.className),o.css("maxWidth"," "),o.css("maxWidth",(.9*l(window).width()|0)+"px"),o.css("width"," "),o.css("width",(.9*l(window).width()|0)+"px")),o.removeClass("top").removeClass("left").removeClass("right").removeClass("bottom"),o.addClass(t),t){case"top":o.css("top",this.options.top-a-n+"px"),o.css("left",this.options.left-e/2+"px");break;case"bottom":o.css("top",this.options.top-n+"px"),o.css("left",this.options.left-e/2+"px");break;case"left":o.css("top",this.options.top-a/2-n+"px"),o.css("left",this.options.left-e-10+"px");break;case"right":o.css("top",this.options.top-a/2-n+"px"),o.css("left",this.options.left+10+"px")}}})}.apply(t,a))||(n.exports=s)}).call(this,o(218),o(1))}}]);