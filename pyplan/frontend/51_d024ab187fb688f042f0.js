/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[51,33],{2043:function(n,a,e){var t=e(690);function o(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({1:function(n,a,e,t,o){return'\n              <div class="form-group" >\n                <label for="textfield" class="control-label col-sm-2">Id</label>\n                <div class="user-name col-sm-10">\n                  <div class="input-group">\n                  <input type="text" class="form-control"\n                    name="txtId"\n                    id="txtId" readonly="true" disabled="true">\n                  </div>\n                </div>\n              </div>\n\n'},compiler:[8,">= 4.3.0"],main:function(n,a,t,l,d){var i,s=n.lambda,r=n.escapeExpression,c=null!=a?a:n.nullContext||{};return'<div class="container-fluid mainTask" data-rel="abm-task-groups" data-id="'+r(s(null!=a?a.id:a,a))+'" data-type="tab-content">\n\n  <div class="page-header">\n  </div>\n\n  <div class="row">\n\n    <div class="col-sm-12">\n      <div class="box">\n        <div class="box-title">\n\n          <h3><i class="fa fa-th-list"></i>'+r(s(null!=a?a.title:a,a))+'</h3>\n          <div class="actions abm-top-options">\n            <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n          </div>\n        </div>\n\n        <div id="states-manager-content" data-id="'+r(s(null!=a?a.id:a,a))+'" class="box-content nopadding abm-content">\n          <form action="#" id="stateForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n\n'+(null!=(i=t.if.call(c,null!=a?a.edit:a,{name:"if",hash:{},fn:n.program(1,d,0),inverse:n.noop,data:d,loc:{start:{line:21,column:12},end:{line:34,column:19}}}))?i:"")+'\n              <div class="form-group">\n                <label for="textfield" class="control-label col-sm-2">Group</label>\n                <div class="user-login col-sm-10">\n                  <div class="col-xs-5">\n                    <input type="text" placeholder="Group name..." class="form-control"\n                    name="txtName"\n                    id="txtName"\n                    data-rule-required="true" data-rule-minlength="3">\n                  </div>\n                </div>\n              </div>\n\n              <div class="form-group">\n                <label for="code" class="control-label col-sm-2">'+r(o(e(688)).call(c,"node",{name:"L",hash:{},data:d,loc:{start:{line:49,column:65},end:{line:49,column:77}}}))+'</label>\n                <div class="col-sm-10">\n                  <input type="text" class="searchNode col-sm-12" data-rolid="1" name="code" data-id="code" value="'+r(s(null!=a?a.node:a,a))+'">\n                </div>\n              </div>\n\n              <div class="form-group">\n                <label for="name" class="control-label col-sm-2">'+r(o(e(688)).call(c,"node_name",{name:"L",hash:{},data:d,loc:{start:{line:56,column:65},end:{line:56,column:82}}}))+'</label>\n                <div class="col-sm-10">\n                  <span name="nodeTitle" id="nodeTitle" style="height: 25px; display: block;">\n                </div>\n              </div>\n\n              <div class="form-group">\n                <label for="textfield" class="control-label col-sm-2"></label>\n                <div class="user-password col-sm-10">\n                  <button type="submit" class="btn btn-primary btn-save">'+r(o(e(688)).call(c,"_save",{name:"L",hash:{},data:d,loc:{start:{line:65,column:73},end:{line:65,column:86}}}))+'</button>\n                  <button type="button" class="btn btn-cancel">'+r(o(e(688)).call(c,"cancel",{name:"L",hash:{},data:d,loc:{start:{line:66,column:63},end:{line:66,column:77}}}))+"</button>\n                </div>\n              </div>\n\n          </form>\n\n\n        </div>\n\n      </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},2044:function(n,a,e){var t=e(690);function o(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({1:function(n,a,e,t,o){return'\n                <div class="form-group" >\n                  <label for="textfield" class="control-label col-sm-2">Id</label>\n                  <div class="user-name col-sm-10">\n                    <div class="input-group">\n                    <input type="text" class="form-control"\n                      name="txtId"\n                      id="txtId" readonly="true" disabled="true">\n                    </div>\n                  </div>\n                </div>\n\n'},3:function(n,a,e,t,o){var l=n.lambda,d=n.escapeExpression;return'          <button class="btn btn-'+d(l(null!=a?a.css:a,a))+'" data-code="'+d(l(null!=a?a.code:a,a))+'" data-dismiss="modal" aria-hidden="true">'+d(l(null!=a?a.title:a,a))+"</button>\n"},compiler:[8,">= 4.3.0"],main:function(n,a,t,l,d){var i,s=n.lambda,r=n.escapeExpression,c=null!=a?a:n.nullContext||{};return'<div id="main-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">\n  <div class="modal-dialog '+r(s(null!=a?a.modalClass:a,a))+'">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>\n          <h4 class="modal-title" id="myModalLabel">'+r(s(null!=a?a.title:a,a))+'</h4>\n        </div>\n\n        <div class="modal-body" style="overflow-y:auto; overflow-x: hidden;">\n\n          <div id="states-manager-content" data-id="'+r(s(null!=a?a.id:a,a))+'" class="box-content nopadding abm-content">\n            <form action="#" id="stateForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n\n'+(null!=(i=t.if.call(c,null!=a?a.edit:a,{name:"if",hash:{},fn:n.program(1,d,0),inverse:n.noop,data:d,loc:{start:{line:14,column:14},end:{line:27,column:21}}}))?i:"")+'\n                <div class="form-group">\n                  <label for="textfield" class="control-label col-sm-2">Group</label>\n                  <div class="user-login col-sm-10">\n                    <div class="col-xs-5">\n                      <input type="text" placeholder="Group name..." class="form-control"\n                      name="txtName"\n                      id="txtName"\n                      data-rule-required="true" data-rule-minlength="3">\n                    </div>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="code" class="control-label col-sm-2">'+r(o(e(688)).call(c,"node",{name:"L",hash:{},data:d,loc:{start:{line:42,column:67},end:{line:42,column:79}}}))+'</label>\n                  <div class="col-sm-10">\n                    <input type="text" class="searchNode col-sm-12" data-rolid="1" name="code" data-id="code" value="'+r(s(null!=a?a.node:a,a))+'">\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="name" class="control-label col-sm-2">'+r(o(e(688)).call(c,"node_name",{name:"L",hash:{},data:d,loc:{start:{line:49,column:67},end:{line:49,column:84}}}))+'</label>\n                  <div class="col-sm-10">\n                    <span name="nodeTitle" id="nodeTitle" style="height: 25px; display: block;">\n                  </div>\n                </div>\n\n            </form>\n\n          </div>\n\n        </div>\n        <div class="modal-footer">\n'+(null!=(i=t.each.call(c,null!=a?a.buttons:a,{name:"each",hash:{},fn:n.program(3,d,0),inverse:n.noop,data:d,loc:{start:{line:61,column:16},end:{line:63,column:25}}}))?i:"")+"        </div>\n    </div>\n  </div>\n</div>\n"},useData:!0})},707:function(n,a,e){"use strict";(function(t){var o,l=e(693);void 0===(o=function(){return t.Model.extend({url:"myFileManager",getWorkflow:function(n,a){var e="Workflow/getWorkflow";n&&(e="Workflow/getWorkflow/"+n),(0,l.send)(e,null,{type:"GET"},a)},createTask:function(n,a){(0,l.send)("Workflow/createTask",n,{type:"POST"},a)},updateTask:function(n,a){(0,l.send)("Workflow/updateTask",n,{type:"PUT"},a)},updateTasksProperty:function(n,a){(0,l.send)("Workflow/updateTasksProperty",n,{type:"PUT"},a)},deleteTask:function(n,a){(0,l.send)("Workflow/deleteTask/"+n,null,{type:"DELETE"},a)},getTask:function(n,a){(0,l.send)("Workflow/getTask/"+n,null,null,a)},createState:function(n,a){(0,l.send)("Workflow/createState/",n,{type:"POST"},a)},listStates:function(n){(0,l.send)("Workflow/listStates",null,{type:"GET"},n)},getState:function(n,a){(0,l.send)("Workflow/getState/"+n,null,{type:"GET"},a)},updateState:function(n,a){(0,l.send)("Workflow/updateState",n,{type:"PUT"},a)},deleteState:function(n,a){(0,l.send)("Workflow/deleteState/"+n,null,{type:"DELETE"},a)},listTransitions:function(n){(0,l.send)("Workflow/listTransitions",null,{type:"GET"},n)},createTransition:function(n,a){(0,l.send)("Workflow/createTransition",n,{type:"POST"},a)},updateTransition:function(n,a){(0,l.send)("Workflow/updateTransition",n,{type:"PUT"},a)},deleteTransition:function(n,a){(0,l.send)("Workflow/deleteTransition/"+n,null,{type:"DELETE"},a)},listUsers:function(n){(0,l.send)("Workflow/listUsers",null,null,n)},getTaskGroup:function(n,a){(0,l.send)("Workflow/getTaskGroup/"+n,null,{type:"GET"},a)},listTaskGroups:function(n){(0,l.send)("Workflow/listTaskGroups",null,{type:"GET"},n)},createTaskGroup:function(n,a){(0,l.send)("Workflow/createTaskGroup",n,{type:"POST"},a)},updateTaskGroup:function(n,a){(0,l.send)("Workflow/updateTaskGroup",n,{type:"PUT"},a)},deleteTaskGroup:function(n,a){(0,l.send)("Workflow/DeleteTaskGroup/"+n,null,{type:"DELETE"},a)},updateOrder:function(n,a){(0,l.send)("Workflow/ChangeOrder",{values:n},{type:"PUT"},a)},updateRolTransitions:function(n,a){(0,l.send)("Workflow/updateRolTransitions",n,{type:"PUT"},a)},getWorkflowByGroups:function(n,a){(0,l.send)("Workflow/getWorkflowByGroups/",{values:n},{type:"POST"},a)},createComment:function(n,a){(0,l.send)("Workflow/createComment/",n,{type:"POST"},a)}})}.apply(a,[]))||(n.exports=o)}).call(this,e(218))},878:function(n,a,e){"use strict";(function(t,o){var l,d,i=e(18);l=[e(703),e(707),e(2043),e(2044)],void 0===(d=function(n,a,l,d){return t.View.extend({el:o("#main"),_uId:"",workflowModel:new a,workflowController:new n,edit:!1,render:function(n,a){a&&this.renderAsModal(a),o("#mainLoading").show(),o("div[data-rel='abm-task-groups']").remove();var e=this;this._uId=o.uuid();var t={id:this._uId,title:"New task group"};n&&(t.title="Edit task group",t.edit=!0,this.edit=!0);var d=l(t);e.$el.append(d),this.instanceNodeFinder(),this.edit&&this.workflowModel.getTaskGroup(n,function(n){o("div[data-id='"+e._uId+"']").find("#txtId").val(n.taskGroupId),o("div[data-id='"+e._uId+"']").find("#txtName").val(n.name),o("div[data-id='"+e._uId+"']").find("input[data-id='code']").select2("val",n.nodeId),o("div[data-id='"+e._uId+"']").find('span[id="nodeTitle"]').html(n.nodeTitle)}),o("div[data-id='"+e._uId+"']").find("#txtName").focus(),(0,i.postRender)(e.$el.find("div[data-id='"+e._uId+"']")),e.addHandlers(),o("#mainLoading").hide()},renderAsModal:function(n){var a=this;this.$el.find("#main-modal").remove();var e=d(n);this.$el.append(e),n.hasOwnProperty("html")&&o("#main-modal .modal-body").html(n.html),o("#main-modal .modal-footer button").click(function(){var n=!0;if("save"===o(this).attr("data-code")){var e=o("div[data-id='"+a._uId+"']").find("form");if(!o(e).valid())return!1;!1===a.save(!0)&&(n=!1)}return n&&(o("#main-modal").off("shown"),o("#main-modal").modal("hide")),!1}),o("#main-modal").on("shown",function(){o("#main-modal button.btn-primary").focus()}),o("#main-modal").on("hidden.bs.modal",function(){o("#main-modal").off("hidden"),n.hasOwnProperty("onClose")&&n.onClose(o("#main-modal")),o("#main-modal").remove()});var t=null;n.backdrop&&(t={backdrop:"static",keyboard:!1}),o("#main-modal").modal(t),n.hasOwnProperty("onLoad")&&n.onLoad(o("#main-modal")),this.instanceNodeFinder()},instanceNodeFinder:function(){var n=this;e.e(49).then(function(){var a=[e(1120)];(function(a){(new a).create({el:"div[data-id='"+n._uId+"'] .searchNode",callback:function(a){a.name&&o("div[data-id='"+n._uId+"']").find("span[id='nodeTitle']").html(a.name)}})}).apply(null,a)}).catch(e.oe)},save:function(n){var a=this._uId,e=this,t=o("div[data-id='"+a+"']").find("form");if(!o(t).validate().errorList.length>0){var l=o("div[data-id='"+a+"']").find("#txtId").val(),d={name:o("div[data-id='"+a+"']").find("#txtName").val(),nodeId:o("div[data-id='"+a+"']").find("input[data-id='code']").select2("val")};o('.container-fluid.mainTask[data-id="'+e._uId+'"]').remove(),this.edit?(d.taskGroupId=l,this.workflowModel.updateTaskGroup(d,function(n){e.workflowController.showTaskGroupManager()})):this.workflowModel.createTaskGroup(d,function(a){if(n)return!1;e.workflowController.showTaskGroupManager()})}return!0},cancel:function(n){o('.container-fluid.mainTask[data-id="'+n._uId+'"]').remove(),Promise.resolve().then(function(){var n=[e(703)];(function(n){(new n).showTaskGroupManager()}).apply(null,n)}).catch(e.oe)},addHandlers:function(){var n=this;o("div[data-id='"+this._uId+"']").find("form").on("submit",o.proxy(function(){return this.save(),!1},this)),o("div[data-id='"+this._uId+"']").find(" button.btn-cancel").on("click",function(){return n.cancel(n),!1}),o("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",function(){return n.cancel(n),!1})}})}.apply(a,l))||(n.exports=d)}).call(this,e(218),e(1))}}]);