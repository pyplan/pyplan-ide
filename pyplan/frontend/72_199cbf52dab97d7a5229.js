/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[72,23,28,278],{1316:function(n,e,a){"use strict";(function(t,l){var i,s,o=a(18);i=[a(719),a(726),a(747),a(986),a(710),a(725),a(1922),a(1923)],void 0===(s=function(n,e,i,s,c,d,r,u){return t.View.extend({el:l("#main"),_uId:"",picManagerView:void 0,_userData:{user:{}},companyList:[],deletedUserCompanies:[],render:function(){l("#mainLoading").show(),l("div[data-rel='abm-user']").remove();var e=this;this._uId=l.uuid(),this.picManagerView=new s,this.deletedUserCompanies=[];var t,i,u=new n;t=this.options.userId?new Promise(function(n,a){u.get(e.options.userId,function(a){e._userData={user:a};var t={id:e._uId,dataRel:"abm-user",tmpClass:"user-edit",title:(0,o.translate)("_editUser")};n({userData:a,dataBaseTemplate:t})})}):new Promise(function(n,a){n({userData:null,dataBaseTemplate:{id:e._uId,dataRel:"abm-user",tmpClass:"user-add",title:(0,o.translate)("_addUser")}})}),i=new Promise(function(n,e){Promise.resolve().then(function(){var e=[a(726)];(function(e){(new e).fullList(function(e){n(e)})}).apply(null,e)}).catch(a.oe)}),Promise.all([t,i]).then(function(n){var a=n[0].userData,t=n[0].dataBaseTemplate;e.companyList=n[1];var i={user:a,companies:e.companyList},s=c(t),u=d(),p=r(i);e.$el.append(s),l("div[data-id='"+e._uId+"']").find("div.abm-content").append(u),l("div[data-id='"+e._uId+"']").find("div.form-content").append(p),e.options.userId?e.initialValues():l("div[data-id='"+e._uId+"']").find("div.user-login input").removeAttr("disabled"),(0,o.postRender)(e.$el.find("div[data-id='"+e._uId+"']")),e.addHandlers(),l("#mainLoading").hide()})},initialValues:function(n){for(var e=l("div[data-id='"+this._uId+"']").find("div.user-company-items"),a=0;a<e.length;a++){var t=l(e[a]).find("div.user-company-assigned").attr("data-value"),i=l(e[a]).find("div.user-group a"),s=l(e[a]).find("div.user-rol a"),o=this.companyList.find(function(n){return n.company.id==t});this.chargeRolNGroup(o,s,i)}},getLicencedRoles:function(n,a){(new e).getLicenceKey(n,function(n){var e={};if(n&&n.currentLicenceValidation&&n.currentLicenceValidation.currentLicence&&n.currentLicenceValidation.currentLicence.roleLicences&&n.currentLicenceValidation.currentLicence.roleLicences.length>0)for(var t=n.currentLicenceValidation.currentLicence.roleLicences,l=0;l<t.length;l++)e[t[l].roleCode]=t[l].totalUsers-t[l].currentTotalUsers+" licences availables";a(e)})},chargeRolNGroup:function(n,e,a){var t=n.departments,i=n.groups,s=this._userData.user.assigned.find(function(e){return e.id==n.company.id});if(t.length>0){for(var o=[{value:"",text:""}],c=0;c<t.length;c++)o[c]={value:t[c].id,text:t[c].name};for(var d=[],r=0;r<s.departments.length;r++)d[r]=s.departments[r].id;e.editable({pk:1,value:d,source:o,success:function(n,e){l(this).attr("data-value",e)}}),e.on("shown",function(){var n=l(this).data("editable").input.$input.closest("form"),e=n.parents("form").eq(0);n.data("validator",e.data("validator"))})}if(i.length>0){var u=[{value:"",text:""}];for(c=0;c<i.length;c++)u[c]={value:i[c].id,text:i[c].name};var p=[];for(r=0;r<s.groups.length;r++)p[r]=s.groups[r].id;a.editable({pk:1,value:p,source:u,success:function(n,e){l(this).attr("data-value",e)}}),a.on("shown",function(){var n=l(this).data("editable").input.$input.closest("form"),e=n.parents("form").eq(0);n.data("validator",e.data("validator"))})}},save:function(){var e=this._uId;this._userData.companies=[];var t=l("div[data-id='"+e+"']").find("form");if(!l(t).validate().errorList.length>0){var i=l("div[data-id='"+e+"']").find("div.user-company-items");if(i.length>0){this._userData.user.first_name=l("div[data-id='"+e+"']").find("div.first-name input").val(),this._userData.user.last_name=l("div[data-id='"+e+"']").find("div.last-name input").val(),this._userData.user.username=l("div[data-id='"+e+"']").find("div.user-login input").val();var s=l("div[data-id='"+e+"']").find("div.user-password input").val();s&&(this._userData.user.password=s),this._userData.user.email=l("div[data-id='"+e+"']").find("div.user-email input").val(),this._userData.user.active=l("div[data-id='"+e+"']").find("div.user-state input").is(":checked");for(var c,d={},r=0;r<i.length;r++){var u;d={company_id:l(i[r]).find("div.user-company-assigned").attr("data-value"),delete:!1},void 0==(c=l(i[r]).find("div.user-rol a").attr("data-value"))?(c=[],l.each(l(i[r]).find("div.user-rol a div"),function(n,e){c.push(l(e).attr("data-value"))})):d.departments=c.split(","),void 0==(u=l(i[r]).find("div.user-group a").attr("data-value"))?(u=[],l.each(l(i[r]).find("div.user-group a div"),function(n,e){u.push(l(e).attr("data-value"))})):d.groups=u.split(","),this._userData.companies.push(d)}if(this.deletedUserCompanies.length>0)for(var p=0;p<this.deletedUserCompanies.length;p++)this._userData.companies.push({company_id:this.deletedUserCompanies[p],delete:!0});this.options.userId?(new n).partialUpdate(this.options.userId,this._userData,function(){Promise.resolve().then(function(){var n=[a(764)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)}):(new n).create(this._userData,function(){Promise.resolve().then(function(){var n=[a(764)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)})}else l.gritter.add({title:(0,o.translate)("_wait"),text:(0,o.translate)("_noCompanyAssigned"),image:null,time:"3000"})}},changeState:function(){this.checked?l(this).attr("value",1):l(this).attr("value",0)},refreshListLabels:function(){l("div[data-id='"+this._uId+"']").find("div.cmpy-list").css({display:"0"==l("div[data-id='"+this._uId+"']").find("div.user-company-assigned").length?"none":""})},addUserCompany:function(){for(var n=this,e=l("div[data-id='"+n._uId+"']").find("div.user-cmpy"),a=l("div[data-id='"+n._uId+"']").find("div.user-company-assigned"),t=l("div[data-id='"+n._uId+"']").find("div.add-company select").select2("data").id,i=l("div[data-id='"+n._uId+"']").find("div.add-company select").select2("data").text,s=0;s<a.length;s++)if(l(a[s]).attr("data-value")==t)return void l.gritter.add({title:(0,o.translate)("_wait"),text:(0,o.translate)("_companyAlreadyAssigned"),image:null,time:"3000"});var c=n.companyList.find(function(n){return n.company.id==t}),d=u({groups:[],departments:[],company:{id:t,name:i}});l(e).append(d);var r=l(e).find("div.user-company-items").last();if(c.departments.length>0){for(var p=l(r).find("div.user-rol a"),m=[{value:"",text:""}],f=0;f<c.departments.length;f++)m[f]={value:c.departments[f].id,text:c.departments[f].name};p.editable({pk:1,source:m,success:function(n,e){l(this).attr("data-value",e)}}),p.on("shown",function(){var n=l(this).data("editable").input.$input.closest("form"),e=n.parents("form").eq(0);n.data("validator",e.data("validator"))})}if(c.groups.length>0){var v=l(r).find("div.user-group a"),h=[{value:"",text:""}];for(s=0;s<c.groups.length;s++)h[s]={value:c.groups[s].id,text:c.groups[s].name};v.editable({pk:1,source:h,success:function(n,e){l(this).attr("data-value",e)}}),v.on("shown",function(){var n=l(this).data("editable").input.$input.closest("form"),e=n.parents("form").eq(0);n.data("validator",e.data("validator"))})}l(r).find("a.btn-removeCompany").on("click",l.proxy(function(){return n.removeUserCompany(event),!1},n))},removeUserCompany:function(n){var e=l(n.currentTarget).parent("div").parent("div"),t=this;a.e(5).then(function(){var n=[a(683)];(function(n){(new n).show({title:(0,o.translate)("_deleteUserCompany"),text:(0,o.translate)("_sure_delete_user_company"),buttons:[{title:(0,o.translate)("yes"),css:"primary",code:"yes"},{title:(0,o.translate)("no"),code:"no"}],callback:function(n){if("yes"==n){l("#mainLoading").show();var a=e.find(".user-company-assigned").attr("data-value");t.deletedUserCompanies.push(a),e.prev("hr").remove(),e.remove(),t.refreshListLabels(),l("#mainLoading").hide()}}})}).apply(null,n)}).catch(a.oe)},cancel:function(){Promise.resolve().then(function(){var n=[a(764)];(function(n){(new n).show()}).apply(null,n)}).catch(a.oe)},addHandlers:function(){l("div[data-id='"+this._uId+"']").find("input.user-state").on("ifToggled",this.changeState),l("div[data-id='"+this._uId+"']").find("form").on("submit",l.proxy(function(){return this.save(),!1},this)),l("div[data-id='"+this._uId+"']").find("div.submit button.btn-cancel").on("click",l.proxy(function(){return this.cancel(),!1},this)),l("div[data-id='"+this._uId+"']").find("form div.add-company a.btn-add-company").on("click",l.proxy(function(){return this.addUserCompany(),!1},this)),l("div[data-id='"+this._uId+"']").find("form div.user-cmpy a.btn-removeCompany").on("click",l.proxy(function(){return this.removeUserCompany(event),!1},this)),l("div[data-id='"+this._uId+"']").find("div.abm-top-options a.btn-close").on("click",this.cancel)}})}.apply(e,i))||(n.exports=s)}).call(this,a(218),a(1))},1922:function(n,e,a){var t=a(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({1:function(n,e,a,t,l){return'      <input type="checkbox" class="icheck-me user-state" value="1" data-skin="square" data-color="blue" checked />\n'},3:function(n,e,a,t,l){return'      <input type="checkbox" class="icheck-me user-state" value="0" data-skin="square" data-color="blue" />\n'},5:function(n,e,a,t,l){var i,s=n.lambda,o=n.escapeExpression;return"            <option value='"+o(s(null!=(i=null!=e?e.company:e)?i.id:i,e))+"'>"+o(s(null!=(i=null!=e?e.company:e)?i.name:i,e))+"</option>\n"},7:function(n,e,t,i,s){var o,c=n.lambda,d=n.escapeExpression,r=null!=e?e:n.nullContext||{};return'\n      <div class="container-fluid">\n        <hr />\n        <div class="row user-company-items">\n          <div class="col-sm-3 user-company-assigned" data-value=\''+d(c(null!=e?e.id:e,e))+"'>\n            "+d(c(null!=e?e.name:e,e))+'\n          </div>\n          <div class="col-sm-3 user-rol">\n            <a href="#" class="editable editable-click" data-type="checklist" data-original-title=\''+d(l(a(688)).call(r,"_department",{name:"L",hash:{},data:s,loc:{start:{line:106,column:99},end:{line:106,column:118}}}))+"'>\n"+(null!=(o=l(a(689)).call(r,null!=(o=null!=e?e.departments:e)?o.length:o,"==",0,{name:"ifCond",hash:{},fn:n.program(8,s,0),inverse:n.program(10,s,0),data:s,loc:{start:{line:107,column:14},end:{line:113,column:25}}}))?o:"")+'            </a>\n          </div>\n          <div class="col-sm-3 user-group">\n            <a href="#" class="editable editable-click" data-type="checklist" data-original-title=\''+d(l(a(688)).call(r,"_groups",{name:"L",hash:{},data:s,loc:{start:{line:117,column:99},end:{line:117,column:114}}}))+"'>\n"+(null!=(o=l(a(689)).call(r,null!=(o=null!=e?e.groups:e)?o.length:o,"==",0,{name:"ifCond",hash:{},fn:n.program(8,s,0),inverse:n.program(13,s,0),data:s,loc:{start:{line:118,column:14},end:{line:124,column:25}}}))?o:"")+'            </a>\n          </div>\n          <div class="col-sm-3">\n            <a href="#" class="btn btn-removeCompany"><i class="fa fa-minus"></i></a>\n          </div>\n        </div>\n      </div>\n'},8:function(n,e,a,t,l){return'              <div data-value=""></div>\n'},10:function(n,e,a,t,l){var i;return null!=(i=a.each.call(null!=e?e:n.nullContext||{},null!=e?e.departments:e,{name:"each",hash:{},fn:n.program(11,l,0),inverse:n.noop,data:l,loc:{start:{line:110,column:14},end:{line:112,column:23}}}))?i:""},11:function(n,e,a,t,l){var i=n.lambda,s=n.escapeExpression;return"              <div data-value='"+s(i(null!=e?e.id:e,e))+"'>"+s(i(null!=e?e.name:e,e))+"</div>\n"},13:function(n,e,a,t,l){var i;return null!=(i=a.each.call(null!=e?e:n.nullContext||{},null!=e?e.groups:e,{name:"each",hash:{},fn:n.program(11,l,0),inverse:n.noop,data:l,loc:{start:{line:121,column:14},end:{line:123,column:23}}}))?i:""},compiler:[8,">= 4.3.0"],main:function(n,e,t,i,s){var o,c=null!=e?e:n.nullContext||{},d=n.escapeExpression,r=n.lambda;return'<div class="form-horizontal form-bordered">\n\n  \x3c!--div class="form-group" data-key="picManager">\n  </div--\x3e\n  <div class="form-group">\n    <label for="textfield" class="control-label col-sm-2">'+d(l(a(688)).call(c,"_firstName",{name:"L",hash:{},data:s,loc:{start:{line:6,column:58},end:{line:6,column:76}}}))+'</label>\n    <div class="first-name col-sm-10">\n      <div class="col-sm-6">\n        <input type="text" value="'+d(r(null!=(o=null!=e?e.user:e)?o.first_name:o,e))+'" class="form-control" name="firstName" data-rule-required="true"\n          data-rule-minlength="3">\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="textfield" class="control-label col-sm-2">'+d(l(a(688)).call(c,"_lastName",{name:"L",hash:{},data:s,loc:{start:{line:15,column:58},end:{line:15,column:75}}}))+'</label>\n    <div class="last-name col-sm-10">\n      <div class="col-sm-6">\n        <input type="text" value="'+d(r(null!=(o=null!=e?e.user:e)?o.last_name:o,e))+'" class="form-control" name="lastName" data-rule-required="true"\n          data-rule-minlength="3">\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="textfield" class="control-label col-sm-2">'+d(l(a(688)).call(c,"_login",{name:"L",hash:{},data:s,loc:{start:{line:24,column:58},end:{line:24,column:72}}}))+'</label>\n    <div class="user-login col-sm-10">\n      <div class="col-sm-6">\n        <input type="text" value="'+d(r(null!=(o=null!=e?e.user:e)?o.username:o,e))+'" class="form-control" disabled="disabled">\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="textfield" class="control-label col-sm-2">'+d(l(a(688)).call(c,"_password",{name:"L",hash:{},data:s,loc:{start:{line:32,column:58},end:{line:32,column:75}}}))+'</label>\n    <div class="user-password col-sm-10">\n      <div class="col-sm-6">\n        <input type="password" value="'+d(r(null!=(o=null!=e?e.user:e)?o.password:o,e))+'" class="form-control" name="password" id="user-password"\n          data-rule-minlength="6">\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="textfield" class="control-label col-sm-2">'+d(l(a(688)).call(c,"_confirmPassword",{name:"L",hash:{},data:s,loc:{start:{line:41,column:58},end:{line:41,column:82}}}))+'</label>\n    <div class="user-password-confirm col-sm-10">\n      <div class="col-sm-6">\n        <input type="password" value="'+d(r(null!=(o=null!=e?e.user:e)?o.password:o,e))+'" class="form-control" name="password2" data-rule-minlength="6"\n          data-rule-equalTo="#user-password">\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <label for="textfield" class="control-label col-sm-2">'+d(l(a(688)).call(c,"_email",{name:"L",hash:{},data:s,loc:{start:{line:50,column:58},end:{line:50,column:72}}}))+'</label>\n    <div class="user-email col-sm-10">\n      <div class="col-sm-6">\n        <input type="email" value="'+d(r(null!=(o=null!=e?e.user:e)?o.email:o,e))+'" class="form-control" data-rule-required="true"\n          data-rule-minlength="3">\n      </div>\n    </div>\n  </div>\n  <div class="form-group">\n    <label class="control-label col-sm-2">'+d(l(a(688)).call(c,"active",{name:"L",hash:{},data:s,loc:{start:{line:59,column:42},end:{line:59,column:56}}}))+'</label>\n    <div class="user-state col-sm-10">\n'+(null!=(o=l(a(689)).call(c,null!=(o=null!=e?e.user:e)?o.active:o,"==",!0,{name:"ifCond",hash:{},fn:n.program(1,s,0),inverse:n.program(3,s,0),data:s,loc:{start:{line:61,column:6},end:{line:65,column:17}}}))?o:"")+'    </div>\n  </div>\n  <div class="form-group">\n    <label class="control-label col-sm-2">'+d(l(a(688)).call(c,"_company",{name:"L",hash:{},data:s,loc:{start:{line:69,column:42},end:{line:69,column:58}}}))+"<small>"+d(l(a(688)).call(c,"_multipleAssignment",{name:"L",hash:{},data:s,loc:{start:{line:69,column:65},end:{line:69,column:92}}}))+'</small></label>\n    <div class="user-cmpy col-sm-10">\n\n      <div class="col-sm-12 add-company" style="margin-bottom: 15px;">\n        <div class="col-sm-4">\n          <select class="select2-me" style="width: 100%;">\n'+(null!=(o=t.each.call(c,null!=e?e.companies:e,{name:"each",hash:{},fn:n.program(5,s,0),inverse:n.noop,data:s,loc:{start:{line:75,column:12},end:{line:77,column:21}}}))?o:"")+'          </select>\n        </div>\n        <div class="col-sm-8">\n          <div class="actions user-options">\n            <a href="#" class="btn btn-add-company" style="height:30px; margin-left:10px;">\n              <i class="fa fa-plus"></i></a>\n            <label>'+d(l(a(688)).call(c,"_assignNewCompany",{name:"L",hash:{},data:s,loc:{start:{line:84,column:19},end:{line:84,column:44}}}))+'</label>\n          </div>\n        </div>\n      </div>\n\n      <div class="container-fluid">\n        <div class="row cmpy-list">\n          <div class="col-sm-3">'+d(l(a(688)).call(c,"_name",{name:"L",hash:{},data:s,loc:{start:{line:91,column:32},end:{line:91,column:45}}}))+'</div>\n          <div class="col-sm-3">'+d(l(a(688)).call(c,"_department",{name:"L",hash:{},data:s,loc:{start:{line:92,column:32},end:{line:92,column:51}}}))+'</div>\n          <div class="col-sm-3">'+d(l(a(688)).call(c,"_groups",{name:"L",hash:{},data:s,loc:{start:{line:93,column:32},end:{line:93,column:47}}}))+'</div>\n          <div class="col-sm-3">'+d(l(a(688)).call(c,"_options",{name:"L",hash:{},data:s,loc:{start:{line:94,column:32},end:{line:94,column:48}}}))+"</div>\n        </div>\n      </div>\n"+(null!=(o=t.each.call(c,null!=(o=null!=e?e.user:e)?o.assigned:o,{name:"each",hash:{},fn:n.program(7,s,0),inverse:n.noop,data:s,loc:{start:{line:97,column:6},end:{line:132,column:15}}}))?o:"")+"\n    </div>\n  </div>\n</div>"},useData:!0})},1923:function(n,e,a){var t=a(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({1:function(n,e,a,t,l){var i=n.lambda,s=n.escapeExpression;return'        <div data-value="'+s(i(null!=e?e.id:e,e))+'">'+s(i(null!=e?e.name:e,e))+"</div>\n"},compiler:[8,">= 4.3.0"],main:function(n,e,t,i,s){var o,c=n.lambda,d=n.escapeExpression,r=null!=e?e:n.nullContext||{};return'<div class="container-fluid">\n  <hr />\n  <div class="row user-company-items">\n    <div class="col-sm-3 user-company-assigned" data-value=\''+d(c(null!=(o=null!=e?e.company:e)?o.id:o,e))+"'>\n      "+d(c(null!=(o=null!=e?e.company:e)?o.name:o,e))+'\n    </div>\n    <div class="col-sm-3 user-rol">\n      <a href="#" class="editable editable-click" data-type="checklist" data-original-title=\''+d(l(a(688)).call(r,"_department",{name:"L",hash:{},data:s,loc:{start:{line:8,column:93},end:{line:8,column:112}}}))+"'>\n"+(null!=(o=t.each.call(r,null!=e?e.department:e,{name:"each",hash:{},fn:n.program(1,s,0),inverse:n.noop,data:s,loc:{start:{line:9,column:8},end:{line:11,column:17}}}))?o:"")+'      </a>\n    </div>\n    <div class="col-sm-3 user-group">\n      <a href="#" class="editable editable-click" data-type="checklist" data-original-title=\''+d(l(a(688)).call(r,"_groups",{name:"L",hash:{},data:s,loc:{start:{line:15,column:93},end:{line:15,column:108}}}))+"'>\n"+(null!=(o=t.each.call(r,null!=e?e.groups:e,{name:"each",hash:{},fn:n.program(1,s,0),inverse:n.noop,data:s,loc:{start:{line:16,column:8},end:{line:18,column:17}}}))?o:"")+'      </a>\n    </div>\n    <div class="col-sm-3">\n      <a href="#" class="btn btn-removeCompany"><i class="fa fa-minus"></i></a>\n    </div>\n  </div>\n</div>'},useData:!0})},710:function(n,e,a){var t=a(690);n.exports=(t.default||t).template({compiler:[8,">= 4.3.0"],main:function(n,e,a,t,l){var i,s=null!=e?e:n.nullContext||{},o=n.hooks.helperMissing,c=n.escapeExpression;return'<div class="abm-base-tmp '+c("function"==typeof(i=null!=(i=a.tmpClass||(null!=e?e.tmpClass:e))?i:o)?i.call(s,{name:"tmpClass",hash:{},data:l,loc:{start:{line:1,column:25},end:{line:1,column:37}}}):i)+' container-fluid mainTask" data-id="'+c("function"==typeof(i=null!=(i=a.id||(null!=e?e.id:e))?i:o)?i.call(s,{name:"id",hash:{},data:l,loc:{start:{line:1,column:73},end:{line:1,column:79}}}):i)+'" data-rel="'+c("function"==typeof(i=null!=(i=a.dataRel||(null!=e?e.dataRel:e))?i:o)?i.call(s,{name:"dataRel",hash:{},data:l,loc:{start:{line:1,column:91},end:{line:1,column:102}}}):i)+'" data-type="tab-content">\n    <div class="row">\n        <div class="col-sm-12">\n            <div class="box">\n                <div class="box-title">\n                    <h3><i class="fa fa-th-list"></i>'+c("function"==typeof(i=null!=(i=a.title||(null!=e?e.title:e))?i:o)?i.call(s,{name:"title",hash:{},data:l,loc:{start:{line:6,column:53},end:{line:6,column:62}}}):i)+'</h3>\n                    <div class="actions abm-top-options">\n                        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n                    </div>\n                </div>\n        <div class="box-content nopadding abm-content">\n\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'},useData:!0})},719:function(n,e,a){"use strict";(function(t){var l,i=a(693);void 0===(l=function(){return t.Model.extend({list:function(n,e){(0,i.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},listByCompany:function(n){(0,i.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},get:function(n,e){(0,i.send)("users/".concat(n,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},update:function(n,e,a){(0,i.send)("users/".concat(n,"/"),e,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},a)},EditProfile:function(n,e){(0,i.send)("users/".concat(n.id,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e)},create:function(n,e){(0,i.send)("usercompanies/",JSON.stringify(n),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},e)},partialUpdate:function(n,e,a){(0,i.send)("usercompanies/".concat(n,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},a)},deleteUser:function(n,e){(0,i.send)("users/".concat(n,"/"),null,{type:"DELETE"},e)},deleteUserCompany:function(n,e){(0,i.send)("usercompanies/".concat(n,"/"),null,{type:"DELETE"},e)},UpdateUserPreference:function(n,e){var a={userCompanyId:__currentSession.userId,preferenceCode:n,value:e};(0,i.send)("user/UpdateUserPreference",a,{type:"PUT"})},GetUserPreference:function(n,e){(0,i.send)("usercompanies/preference_by_code/?code=".concat(n),null,{type:"GET"},e)},GetRelatedDashboard:function(n){(0,i.send)("user/GetRelatedDashboard",null,null,n)}})}.apply(e,[]))||(n.exports=l)}).call(this,a(218))},725:function(n,e,a){var t=a(690);function l(n){return n&&(n.__esModule?n.default:n)}n.exports=(t.default||t).template({compiler:[8,">= 4.3.0"],main:function(n,e,t,i,s){var o=null!=e?e:n.nullContext||{},c=n.escapeExpression;return'<form action="#" id="baseForm" method="POST" class=\'form-horizontal form-bordered form-validate\' novalidate="novalidate">\n    <div class="form-content">\n\n    </div>\n    <div class="submit form-actions col-sm-12">\n        <button type="submit" class="btn btn-primary btn-save">'+c(l(a(688)).call(o,"_save",{name:"L",hash:{},data:s,loc:{start:{line:6,column:63},end:{line:6,column:76}}}))+'</button>\n        <button type="button" class="btn btn-cancel">'+c(l(a(688)).call(o,"cancel",{name:"L",hash:{},data:s,loc:{start:{line:7,column:53},end:{line:7,column:67}}}))+"</button>\n    </div>\n</form>\n"},useData:!0})},726:function(n,e,a){"use strict";(function(t){var l,i=a(693);void 0===(l=function(){return t.Model.extend({list:function(n){(0,i.send)("companies/?limit=1000&offset=0",null,null,n)},fullList:function(n){(0,i.send)("companies/list_with_groups_and_depts/",null,null,n)},getCompany:function(n,e){(0,i.send)("companies/".concat(n,"/"),null,null,e)},update:function(n,e,a){(0,i.send)("companies/".concat(n,"/"),JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},a)},partialUpdate:function(n,e,a){(0,i.send)("companies/".concat(n,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},a)},create:function(n,e){(0,i.send)("companies/",n,{type:"POST"},e)},delete:function(n,e){(0,i.send)("companies/".concat(n,"/"),null,{type:"DELETE"},e)},UpdateCompanyPreference:function(n,e,a){var t={companyId:__currentSession.companyId,preferenceCode:n,value:e};(0,i.send)("company/UpdateCompanyPreference",t,{type:"PUT"},a)},GetCompanyPreference:function(n,e){(0,i.send)("companies/preference_by_code/?code=".concat(n),null,{type:"GET"},e)},sendTestEmail:function(n,e){(0,i.send)("company/SendTestEmail",n,{type:"PUT"},e)},getLicenceKey:function(n,e){(0,i.send)("company/GetLK/"+n,null,null,e)},setLicenceKey:function(n,e){(0,i.send)("company/SetLK/",n,{type:"POST"},e)}})}.apply(e,[]))||(n.exports=l)}).call(this,a(218))},747:function(n,e,a){"use strict";(function(t){var l,i=a(693);void 0===(l=function(){return t.Model.extend({list:function(n,e){var a=null!=n?"?company_id=".concat(n):"";(0,i.send)("groups/".concat(a),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},get:function(n,e){(0,i.send)("groups/".concat(n,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},update:function(n,e,a){(0,i.send)("groups/".concat(n,"/"),JSON.stringify(e),{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},a)},create:function(n,e){(0,i.send)("groups/",JSON.stringify(n),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},e)},delete:function(n,e){(0,i.send)("groups/".concat(n,"/"),null,{type:"DELETE"},e)},listPermissions:function(n){(0,i.send)("permissions/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},updateGroupPermissions:function(n,e){(0,i.send)("groups/update_groups_permissions/",JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e)}})}.apply(e,[]))||(n.exports=l)}).call(this,a(218))},986:function(n,e,a){"use strict";(function(t,l){var i,s;i=[a(987)],void 0===(s=function(n){return t.View.extend({el:l("#main"),imageChange:!1,render:function(e){var a=n(e);this.$el.append(a),this.addHandlers()},addHandlers:function(){var n=this;this.$el.find(".fileupload").on("change.bs.fileinput",function(e){n.imageChange=!0})},getSrc:function(){return this.$el.find(".fileinput-preview.thumbnail img").attr("src")}})}.apply(e,i))||(n.exports=s)}).call(this,a(218),a(1))},987:function(n,e,a){var t=a(690);n.exports=(t.default||t).template({compiler:[8,">= 4.3.0"],main:function(n,e,t,l,i){var s,o=n.escapeExpression;return'<label for="textfield" class="control-label col-sm-2"></label>\n\n<div class="fileinput fileinput-new col-sm-10" data-provides="fileinput">\n  <div class="input-group">\n    <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 113px; height: 150px;">\n      \x3c!--img src="'+o(function(n){return n&&(n.__esModule?n.default:n)}(a(717)).call(null!=e?e:n.nullContext||{},{name:"baseURL",hash:{},data:i,loc:{start:{line:6,column:19},end:{line:6,column:30}}}))+"thumbs/view.ashx?img=users-"+o(n.lambda(null!=(s=null!=e?e.user:e)?s.imageUrl:s,e))+'&w=113&h=150&t=cropt" /--\x3e\n    </div>\n\n    <div>\n\n      <span class="btn btn-default btn-file">\n        <span class="fileinput-new">Select image</span>\n        <span class="fileinput-exists">Change</span>\n        <input type="file" name="imagefile" class="valid fileupload">\n      </span>\n\n      <a href="#" class="btn fileinput-exists" data-dismiss="fileinput">Remove</a>\n    </div>\n  </div>\n</div>'},useData:!0})}}]);