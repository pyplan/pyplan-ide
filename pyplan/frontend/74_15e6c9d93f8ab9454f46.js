/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[74,23,33],{1091:function(t,e,s){"use strict";s.r(e),s.d(e,"TaskFactory",function(){return a}),s.d(e,"Task",function(){return i}),s.d(e,"Resource",function(){return c}),s.d(e,"Link",function(){return l});var n=s(1289),r=s(963);class a{build(t,e,s,n,a,o,l,d){var c=Object(r.d)(a),u=Object(r.a)(new Date(o));return new i(t,e,s,n,c,u,l,d)}}class i{constructor(t,e,s,n,r,a,i,o){this.id=t,this.name=e,this.progress=0,this.description="",this.code=s,this.level=n,this.status="STATUS_UNDEFINED",this.depends="",this.canWrite=!0,this.start=r,this.duration=i,this.end=a,this.startIsMilestone=!1,this.endIsMilestone=!1,this.collapsed=o,this.rowElement,this.ganttElement,this.master,this.assigs=[]}clone(){var t={};for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}getAssigsString(){var t="";if(this.assigs.length>=1)for(var e=0;e<this.assigs.length;e++){var s=this.assigs[e];s&&(t=t+(""==t?"":", ")+s.name)}return t}getAssigsId(){var t="";if(this.assigs.length>=1)for(var e=0;e<this.assigs.length;e++){var s=this.assigs[e];s&&(t=t+(""==t?"":", ")+s.resourceId)}return t}createAssignment(t,e,s,n){var r=new d(t,e,s,n);return this.assigs.push(r),r}setPeriod(t,e){t instanceof Date&&(t=t.getTime()),e instanceof Date&&(e=e.getTime());var s=this.start,a=this.end,i=this.duration,l=t;t>e&&(t=e),t=Object(r.d)(t);var d=this.getSuperiors();if(d&&d.length>0){for(var c=0,u=0;u<d.length;u++){var h=d[u];c=Math.max(c,Object(r.f)(h.from.end,h.lag))}if(Object(r.d)(c)!=t)return this.moveTo(c+1,!1)}var f=!1;new Date(t);this.start==t&&this.start==l||(this.start=t,f=!0);var p=e;if(e=Object(r.a)(e),this.end==e&&this.end==p||(this.end=e,f=!0),!f)return!0;if(!this.canWrite)return this.master.setErrorOnTransaction(n.default.messages.CANNOT_WRITE+"\n"+this.name,this),!1;if(this.hasExternalDep)return this.master.setErrorOnTransaction(n.default.messages.TASK_HAS_EXTERNAL_DEPS+"\n"+this.name,this),!1;var g=!0,m=i-this.duration>0,v=(m&&this.start,m&&a>this.end);if(m){var T=this.getChildren(),k=1/0,y=0;for(u=0;u<T.length;u++)ch=T[u],v?y=Math.max(y,ch.end):k=Math.min(k,ch.start);v?this.end=Math.max(y,this.end):this.start=Math.min(k,this.start),this.duration=Object(r.g)(this.start,this.end)}else(this.start<this.master.minEditableDate||this.end>this.master.maxEditableDate)&&(this.master.setErrorOnTransaction(n.default.messages.CHANGE_OUT_OF_SCOPE,this),g=!1),g&&!o(this)&&(g=!1);if(g){var S=this.getInferiors();if(S&&S.length>0)for(u=0;u<S.length;u++){if(!(h=S[u]).to.canWrite){this.master.setErrorOnTransaction(n.default.messages.CANNOT_WRITE+"\n"+h.to.name,h.to);break}if(!(g=h.to.moveTo(e,!1)))break}}return g}moveTo(t,e){t instanceof Date&&(t=t.getTime());var s=this.start,a=(this.end,t);if(t=Object(r.d)(t),!e&&this.startIsMilestone&&t!=this.start)return this.master.setErrorOnTransaction(n.default.messages.START_IS_MILESTONE,this),!1;if(this.hasExternalDep)return this.master.setErrorOnTransaction(n.default.messages.TASK_HAS_EXTERNAL_DEPS,this),!1;var i=this.getSuperiors();if(i&&i.length>0){for(var l=0,d=0;d<i.length;d++){var c=i[d];l=Math.max(l,Object(r.f)(c.from.end,c.lag))}t=l+1}t=Object(r.d)(t);var u=Object(r.b)(t,this.duration);if(this.start!=t||this.start!=a){if(!e&&this.endIsMilestone&&(u=this.end,this.duration=Object(r.g)(t,u)),this.start=t,this.end=u,this.start<this.master.minEditableDate||this.end>this.master.maxEditableDate)return this.master.setErrorOnTransaction(n.default.messages.CHANGE_OUT_OF_SCOPE,this),!1;var h=s-this.start,f=this.getChildren();for(d=0;d<f.length;d++){let t=f[d];if(!t.moveTo(t.start-h,!1))return!1}if(!o(this))return!1;var p=this.getInferiors();if(p&&p.length>0)for(d=0;d<p.length;d++){if((c=p[d]).to.canWrite){if(!c.to.moveTo(u,!1))return!1}else this.master.setErrorOnTransaction(n.default.messages.CANNOT_WRITE+"\n"+c.to.name,c.to)}}return!0}changeStatus(t){var e=this.getDescendant();function s(t,a,i,o,l){var d=t.status;if(a==d)return!0;var c=!0;if(t.status=a,t.master.cannotCloseTaskIfIssueOpen&&"STATUS_DONE"==a&&t.openIssues>0)return t.master.setErrorOnTransaction(n.default.messages.CANNOT_CLOSE_TASK_IF_OPEN_ISSUE+" "+t.name),!1;if("STATUS_DONE"==a)if(i||"STATUS_FAILED"!=d){for(var u=t.getSuperiors(),h=0;h<u.length;h++)if(e.indexOf(u[h].from)<0&&"STATUS_DONE"!=u[h].from.status){(i||o)&&t.master.setErrorOnTransaction(n.default.messages.GANTT_ERROR_DEPENDS_ON_OPEN_TASK+"\n"+u[h].from.name+" -> "+t.name),c=!1;break}if(c){var f=t.getChildren();for(h=0;h<f.length;h++)s(f[h],"STATUS_DONE",!1,!0,!1);r(e,t.getInferiors(),"STATUS_ACTIVE")}}else c=!1;else if("STATUS_ACTIVE"==a)if(i||"STATUS_FAILED"!=d){if((g=t.getParent())&&"STATUS_ACTIVE"!=g.status&&(c=s(g,"STATUS_ACTIVE",!1,!1,!0)),c)for(u=t.getSuperiors(),h=0;h<u.length;h++)if("STATUS_DONE"!=u[h].from.status){(i||l)&&t.master.setErrorOnTransaction(n.default.messages.GANTT_ERROR_DEPENDS_ON_OPEN_TASK+"\n"+u[h].from.name+" -> "+t.name),c=!1;break}if(c){f=t.getChildren();if("STATUS_UNDEFINED"==d||"STATUS_SUSPENDED"==d)for(h=0;h<f.length;h++)"STATUS_DONE"!=f[h].status&&s(f[h],"STATUS_ACTIVE",!1,!0,!1);var p=t.getInferiors();for(h=0;h<p.length;h++)s(p[h].to,"STATUS_SUSPENDED",!1,!1,!1)}}else c=!1;else if("STATUS_SUSPENDED"==a||"STATUS_UNDEFINED"==a)if(i||"STATUS_FAILED"!=d){var g;(g=t.getParent())&&"STATUS_ACTIVE"!=g.status&&(c=s(g,a,!1,!1,!0));for(f=t.getChildren(),h=0;h<f.length;h++)"STATUS_DONE"!=f[h].status&&s(f[h],a,!1,!0,!1);r(e,t.getInferiors(),a)}else c=!1;else if("STATUS_FAILED"==a){for(f=t.getChildren(),h=0;h<f.length;h++)s(f[h],"STATUS_FAILED",!1,!0,!1);r(e,t.getInferiors(),"STATUS_FAILED")}return c||(t.status=d),c}function r(t,e,n){for(var r=0;r<e.length;r++)t.indexOf(e[r].to)<0&&s(e[r].to,n,!1,!1,!1)}var a,i=this.status;return(a=s(this,t,!0,!1,!1))||(this.status=i),a}synchronizeStatus(){var t=this.status;return this.status="",this.changeStatus(t)}isLocallyBlockedByDependencies(){for(var t=this.getSuperiors(),e=!1,s=0;s<t.length;s++)if("STATUS_DONE"!=t[s].from.status){e=!0;break}return e}getRow(){let t=-1;return this.master&&(t=this.master.tasks.indexOf(this)),t}getParents(){var t;if(this.master){var e=this.level,s=this.getRow();t=[];for(var n=s;n>=0;n--){var r=this.master.tasks[n];e>r.level&&(e=r.level,t.push(r))}}return t}getParent(){var t;if(this.master)for(var e=this.getRow();e>=0;e--){var s=this.master.tasks[e];if(this.level>s.level){t=s;break}}return t}isParent(){var t=!1;if(this.master){var e=this.getRow();e<this.master.tasks.length-1&&(t=this.master.tasks[e+1].level>this.level)}return t}getChildren(){var t=[];if(this.master)for(var e=this.getRow()+1;e<this.master.tasks.length;e++){var s=this.master.tasks[e];if(s.level==this.level+1)t.push(s);else if(s.level<=this.level)break}return t}getDescendant(){var t=[];if(this.master)for(var e=this.getRow()+1;e<this.master.tasks.length;e++){var s=this.master.tasks[e];if(!(s.level>this.level))break;t.push(s)}return t}getSuperiors(){var t=[],e=this;return this.master&&(t=this.master.links.filter(function(t){return t.to==e})),t}getSuperiorTasks(){for(var t=[],e=this.getSuperiors(),s=0;s<e.length;s++)t.push(e[s].from);return t}getInferiors(){var t=[],e=this;return this.master&&(t=this.master.links.filter(function(t){return t.from==e})),t}getInferiorTasks(){for(var t=[],e=this.getInferiors(),s=0;s<e.length;s++)t.push(e[s].to);return t}deleteTask(){this.rowElement&&this.rowElement.remove(),this.ganttElement&&this.ganttElement.remove();for(var t=this.getChildren(),e=0;e<t.length;e++)t[e].isNew()||this.master.deletedTaskIds.push(t[e].id),t[e].deleteTask();this.isNew()||this.master.deletedTaskIds.push(this.id),this.master.tasks.splice(this.getRow(),1);var s=this;this.master.links=this.master.links.filter(function(t){return t.from!=s&&t.to!=s})}isNew(){return 0==(this.id+"").indexOf("tmp_")}isDependent(t){for(var e=this,s=this.master.links.filter(function(t){return t.from==e}),n=0;n<s.length;n++)if(s[n].to==t)return!0;for(n=0;n<s.length;n++)if(s[n].to.isDependent(t))return!0;return!1}setLatest(t){this.latestStart=t-this.criticalCost,this.latestFinish=this.latestStart+this.duration}indent(){var t=this.getRow();if(t<=0)return!1;var e=!1,s=this.master.tasks[t-1];if(this.level+1<=s.level+1){e=!0,this.level++;var n=this.getParents();this.level--;for(var a=this.level,i=t;i<this.master.tasks.length;i++){var o=this.master.tasks[i];if(!(o.level>a||o==this))break;o.level++,this.master.links=this.master.links.filter(function(t){var e=!1;return t.to==o?e=n.indexOf(t.from)>=0:t.from==o&&(e=n.indexOf(t.to)>=0),!e})}var l=this.getParent();if(l&&!this.depends){var d=Object(r.b)(l.start,this.duration);this.master.changeTaskDates(this,l.start,d)}this.master.updateDependsStrings(),this.setPeriod(this.start+1,this.end+1),this.synchronizeStatus()}return e}outdent(){if(this.level<=1)return!1;var t=this.level;for(var e=this.getRow();e<this.master.tasks.length;e++){var s=this.master.tasks[e];if(!(s.level>t||s==this))break;s.level--}var n=this,r=this.getChildren();this.master.links=this.master.links.filter(function(t){return!(t.to==n&&r.indexOf(t.from)>=0||t.from==n&&r.indexOf(t.to)>=0)});for(e=0;e<r.length;e++)r[e].setPeriod(r[e].start+1,r[e].end+1);return this.master.updateDependsStrings(),this.setPeriod(this.start+1,this.end+1),this.synchronizeStatus(),!0}moveUp(){var t,e=!1,s=this.getRow();if(s<=0)return!1;for(t=s-1;t>=0&&!(this.master.tasks[t].level<=this.level);t--);if(this.master.tasks[t].level==this.level){e=!0;for(var r=0,a=s+1;a<this.master.tasks.length;a++){if(!(this.master.tasks[a].level>this.level))break;r++}var i=this.master.tasks.splice(s,r+1),o=this.master.tasks.splice(0,t);this.master.tasks=[].concat(o,i,this.master.tasks);var l=this.master.editor.element.find("tr[taskid]"),d=l.slice(s,s+r+1);l.eq(t).before(d),this.master.updateDependsStrings()}else this.master.setErrorOnTransaction(n.default.messages.TASK_MOVE_INCONSISTENT_LEVEL,this),e=!1;return e}moveDown(){var t=this.getRow();if(t>=this.master.tasks.length-1||0==t)return!1;var e,s=!1;for(e=t+1;e<this.master.tasks.length&&!(this.master.tasks[e].level<=this.level);e++);if(this.master.tasks[e]&&this.master.tasks[e].level==this.level){for(s=!0,e+=1;e<this.master.tasks.length&&!(this.master.tasks[e].level<=this.level);e++);for(var n=0,r=t+1;r<this.master.tasks.length;r++){if(!(this.master.tasks[r].level>this.level))break;n++}var a=this.master.tasks.splice(t,n+1),i=this.master.tasks.splice(0,e-n-1);this.master.tasks=[].concat(i,a,this.master.tasks);var o=this.master.editor.element.find("tr[taskid]"),l=o.eq(e-1),d=o.slice(t,t+n+1);l.after(d),this.master.updateDependsStrings()}return s}}function o(t){var e=t.getParent();if(!e)return!0;var s=e.start,r=e.end;if(e.start>t.start){if(e.startIsMilestone)return t.master.setErrorOnTransaction(n.default.messages.START_IS_MILESTONE+"\n"+e.name,t),!1;if(e.depends)return t.master.setErrorOnTransaction(n.default.messages.TASK_HAS_CONSTRAINTS+"\n"+e.name,t),!1;s=t.start}if(e.end<t.end){if(e.endIsMilestone)return t.master.setErrorOnTransaction(n.default.messages.END_IS_MILESTONE+"\n"+e.name,t),!1;r=t.end}return s==e.start&&r==e.end||(e.canWrite?e.hasExternalDep?(t.master.setErrorOnTransaction(n.default.messages.TASK_HAS_EXTERNAL_DEPS+"\n"+e.name,t),!1):e.setPeriod(s,r):(t.master.setErrorOnTransaction(n.default.messages.CANNOT_WRITE+"\n"+e.name,t),!1))}class l{constructor(t,e,s){this.from=t,this.to=e,this.lag=s}}class d{constructor(t,e,s,n){this.id=t,this.resourceId=e,this.roleId=s,this.effort=n}}class c{constructor(t,e){this.id=t,this.name=e}}},1288:function(t,e,s){"use strict";(function(t){s.d(e,"b",function(){return d}),s.d(e,"a",function(){return l});var n=s(962);function r(t){var e=0;t.replace(",",".");var s=t.indexOf(":"),n=t.indexOf(".");if(s<0&&n<0&&t.length>5)return parseInt(t,10);if(n>-1){e=36e5*parseFloat(t)}else{var r=0,a=0;-1==s?r=parseInt(t,10):(r=parseInt(t.substring(0,s),10),a=parseInt(t.substring(s+1),10)),e=36e5*r+6e4*a}return"number"!=typeof e&&(e=NaN),e}function a(t){var e=Number.decimalSeparator;return reg=new RegExp("^[-+]{0,1}[0-9]*["+e+"]{0,1}[0-9]*$"),reg.test(t)}function i(t){return!isNaN(function(t,e){if(!t)return 0;var s=new RegExp("(\\d+[Yy])|(\\d+[M])|(\\d+[Ww])|(\\d+[Dd])|(\\d+[Hh])|(\\d+[m])|(\\d+[Ss])|(\\d+:\\d+)|(:\\d+)|(\\d*[\\.,]\\d+)|(\\d+)","g"),a=s.exec(t),i=0;if(!a)return NaN;for(;null!=a;){for(var o=1;o<a.length;o++){var l=a[o];if(l){var d=0;try{d=parseInt(l)}catch(t){}1==o?i+=d*(e?n.b*n.c*52:31536e6):2==o?i+=d*(e?n.b*n.c*4:2592e6):3==o?i+=d*(e?n.b*n.c:6048e5):4==o?i+=d*(e?n.b:864e5):5==o?i+=36e5*d:6==o?i+=6e4*d:7==o?i+=1e3*d:8==o?i+=r(l):9==o?i+=r(l):10==o?i+=r(l):11==o&&(i+=36e5*d)}}a=s.exec(t)}return i}(t))}function o(t){return!isNaN(function(t,e){if(t){var s=new RegExp("(\\d+[Yy])|(\\d+[Mm])|(\\d+[Ww])|(\\d+[Dd])|(\\d*[\\.,]\\d+)|(\\d+)","g"),r=s.exec(t),a=0;if(!r)return NaN;for(;null!=r;){for(var i=1;i<r.length;i++){var o=r[i];if(o){var l=0;try{l=parseInt(o)}catch(t){}1==i?a+=l*(e?52*n.c:365):2==i?a+=l*(e?4*n.c:30):3==i?a+=l*(e?n.c:7):4==i?a+=l:5==i?a+=l:6==i&&(a+=l)}}r=s.exec(t)}return a}}(t))}function l(t){for(var e="",s=Number.currencyFormat+"",n=!1,r=!1,a="",i="[0-9\\"+Number.groupingSeparator+"]+[\\"+Number.decimalSeparator+"]?[0-9]*",o=0;o<s.length;o++){var l=s.charAt(o);"."==l||","==l||"0"==l?""!=a&&(e=e+"(?:"+RegExp.quote(a)+")?",a=""):"#"==l?(""!=a&&(e=e+"(?:"+RegExp.quote(a)+")?",a=""),r||(r=!0,e+=i)):"-"==l?(""!=a&&(e=e+"(?:"+RegExp.quote(a)+")?",a=""),n||(n=!0,e+="[-]?")):a+=l}return n||(e="[-]?"+e),""!=a&&(e=e+"(?:"+RegExp.quote(a)+")?"),e="^"+e+"$",new RegExp(e).test(t)}function d(e){var s=t(this),n=!0;s.clearErrorAlert();var d=s.val();if(d){var c=s.attr("entryType").toUpperCase();"INTEGER"==c?n=function(t){return reg=new RegExp("^[-+]{0,1}[0-9]*$"),reg.test(t)}(d):"DOUBLE"==c?n=a(d):"PERCENTILE"==c?n=a(d):"URL"==c?n=function(t){return/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,4}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/.test(t)}(d):"EMAIL"==c?n=function(t){return/^((([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+(\.([a-z]|[0-9]|!|#|$|%|&|'|\*|\+|\-|\/|=|\?|\^|_|`|\{|\||\}|~)+)*)@((((([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.))*([a-z]|[0-9])([a-z]|[0-9]|\-){0,61}([a-z]|[0-9])\.)[\w]{2,4}|(((([0-9]){1,3}\.){3}([0-9]){1,3}))|(\[((([0-9]){1,3}\.){3}([0-9]){1,3})\])))$/.test(t)}(d):"DURATIONMILLIS"==c?n=i(d):"DURATIONDAYS"==c?n=o(d):"DATE"==c?n=Date.isValid(d,s.attr("format")):"TIME"==c?n=function(t){return!isNaN(r(t))}(d):"CURRENCY"==c&&(n=l(d)),n||s.createErrorAlert(i18n.ERROR_ON_FIELD,i18n.INVALID_DATA)}return n}}).call(this,s(1))},1289:function(t,e,s){"use strict";s.r(e),function(t){var n=s(963),r=(s(2056),s(2057)),a=s(2058),i=s(1091);let o={CANNOT_WRITE:"CANNOT_WRITE",CHANGE_OUT_OF_SCOPE:"NO_RIGHTS_FOR_UPDATE_PARENTS_OUT_OF_EDITOR_SCOPE",START_IS_MILESTONE:"START_IS_MILESTONE",END_IS_MILESTONE:"END_IS_MILESTONE",TASK_HAS_CONSTRAINTS:"TASK_HAS_CONSTRAINTS",GANTT_ERROR_DEPENDS_ON_OPEN_TASK:"GANTT_ERROR_DEPENDS_ON_OPEN_TASK",GANTT_ERROR_DESCENDANT_OF_CLOSED_TASK:"GANTT_ERROR_DESCENDANT_OF_CLOSED_TASK",TASK_HAS_EXTERNAL_DEPS:"TASK_HAS_EXTERNAL_DEPS",GANTT_ERROR_LOADING_DATA_TASK_REMOVED:"GANTT_ERROR_LOADING_DATA_TASK_REMOVED",CIRCULAR_REFERENCE:"CIRCULAR_REFERENCE",ERROR_SETTING_DATES:"ERROR_SETTING_DATES",CANNOT_DEPENDS_ON_ANCESTORS:"CANNOT_DEPENDS_ON_ANCESTORS",CANNOT_DEPENDS_ON_DESCENDANTS:"CANNOT_DEPENDS_ON_DESCENDANTS",INVALID_DATE_FORMAT:"INVALID_DATE_FORMAT",GANTT_QUARTER_SHORT:"GANTT_QUARTER_SHORT",GANTT_SEMESTER_SHORT:"GANTT_SEMESTER_SHORT",CANNOT_CLOSE_TASK_IF_OPEN_ISSUE:"CANNOT_CLOSE_TASK_IF_OPEN_ISSUE"};class l{constructor(){this.tasks=[],this.deletedTaskIds=[],this.links=[],this.editor,this.gantt,this.splitter,this.element,this.resources,this.roles,this.minEditableDate=0,this.maxEditableDate=1/0,this.canWriteOnParent=!0,this.canWrite=!0,this.firstDayOfWeek=Date.firstDayOfWeek,this.currentTask,this.resourceUrl="img/workflow/",this.__currentTransaction,this.__undoStack=[],this.__redoStack=[],this.__inUndoRedo=!1}static get messages(){return o}static set messages(t){o=t}init(e){this.element=e;var s=this;t("#gantEditorTemplates").loadTemplates().remove(),this.editor=new r.a(this),e.append(this.editor.gridified),this.gantt=new a.a("m",(new Date).getTime()-1728e5,(new Date).getTime()+1296e6,this,.6*e.width()),s.splitter=t.splittify.init(e,this.editor.gridified,this.gantt.element,60),s.splitter.firstBoxMinWidth=30,e.before(t.JST.createFromTemplate({},"GANTBUTTONS")),e.bind("refreshTasks.gantt",function(){s.redrawTasks()}).bind("refreshTask.gantt",function(t,e){s.drawTask(e)}).bind("deleteCurrentTask.gantt",function(t){s.deleteCurrentTask()}).bind("addNewTask.gantt",function(){s.addNewTask()}).bind("addAboveCurrentTask.gantt",function(t,e){s.addAboveCurrentTask(e)}).bind("addBelowCurrentTask.gantt",function(){s.addBelowCurrentTask()}).bind("indentCurrentTask.gantt",function(){s.indentCurrentTask()}).bind("outdentCurrentTask.gantt",function(){s.outdentCurrentTask()}).bind("moveUpCurrentTask.gantt",function(){s.moveUpCurrentTask()}).bind("moveDownCurrentTask.gantt",function(){s.moveDownCurrentTask()}).bind("zoomPlus.gantt",function(){s.gantt.zoomGantt(!0)}).bind("zoomMinus.gantt",function(){s.gantt.zoomGantt(!1)}).bind("undo.gantt",function(){s.canWrite&&s.undo()}).bind("redo.gantt",function(){s.canWrite&&s.redo()}).bind("resize.gantt",function(){s.resize()}),t(".mainTask[data-rel='workflow']").bind("keydown.body",function(t){if("body"==t.target.nodeName.toLowerCase()||"svg"==t.target.nodeName.toLowerCase()){var e=!0;switch(t.keyCode){case 46:case 8:var n=s.gantt.element.find(".focused.focused");n.is(".taskBox")?s.deleteCurrentTask():n.is(".linkGroup")&&s.removeLink(n.data("from"),n.data("to"));break;case 38:s.currentTask&&(s.currentTask.ganttElement.is(".focused")?(s.moveUpCurrentTask(),s.gantt.element.oneTime(100,function(){s.currentTask.ganttElement.addClass("focused")})):s.currentTask.rowElement.prev().click());break;case 40:s.currentTask&&(s.currentTask.ganttElement.is(".focused")?(s.moveDownCurrentTask(),s.gantt.element.oneTime(100,function(){s.currentTask.ganttElement.addClass("focused")})):s.currentTask.rowElement.next().click());break;case 39:s.currentTask&&s.currentTask.ganttElement.is(".focused")&&(s.indentCurrentTask(),s.gantt.element.oneTime(100,function(){s.currentTask.ganttElement.addClass("focused")}));break;case 37:s.currentTask&&s.currentTask.ganttElement.is(".focused")&&(s.outdentCurrentTask(),s.gantt.element.oneTime(100,function(){s.currentTask.ganttElement.addClass("focused")}));break;case 89:t.ctrlKey&&s.redo();break;case 90:t.ctrlKey&&s.undo();break;default:e=!1}e&&(t.preventDefault(),t.stopPropagation())}})}createTask(t,e,s,n,r,a,o){return(new i.TaskFactory).build(t,e,s,n,r,a,o)}createResource(t,e){return new i.Resource(t,e)}updateDependsStrings(){for(var t=0;t<this.tasks.length;t++)this.tasks[t].depends="";for(t=0;t<this.links.length;t++){var e=this.links[t];e.to.depends;e.to.depends=e.to.depends+(""==e.to.depends?"":",")+(e.from.getRow()+1)+(e.lag?":"+e.lag:"")}}removeLink(t,e){if(this.canWrite&&(t.canWrite||e.canWrite)){this.beginTransaction();for(var s=!1,n=0;n<this.links.length;n++)if(this.links[n].from==t&&this.links[n].to==e){this.links.splice(n,1),s=!0;break}s&&(this.updateDependsStrings(),this.updateLinks(e)&&this.changeTaskDates(e,e.start,e.end)),this.endTransaction()}}removeAllLinks(t,e){if(this.canWrite&&(t.canWrite||t.canWrite)){e&&this.beginTransaction();for(var s=!1,n=0;n<this.links.length;n++)this.links[n].from!=t&&this.links[n].to!=t||(this.links.splice(n,1),s=!0);s&&this.updateDependsStrings(),e&&this.endTransaction()}}addTask(t,e){t.master=this;for(var s=-1,n=0;n<this.tasks.length;n++)if(t.id==this.tasks[n].id){s=n;break}s>=0&&(this.tasks.splice(s,1),e=parseInt(s)),"number"!=typeof e?this.tasks.push(t):(this.tasks.splice(e,0,t),this.updateDependsStrings());var r=!this.updateLinks(t);t.getParent()?t.status=t.getParent().status:t.status="STATUS_ACTIVE";var a=t;return r||!t.setPeriod(t.start,t.end)?(this.tasks.splice(t.getRow(),1),a=void 0):(this.editor.addTask(t,e),this.gantt.addTask(t)),a}loadProject(t){this.beginTransaction(),this.resources=t.resources,this.roles=t.roles,this.canWrite=t.canWrite,this.canWriteOnParent=t.canWriteOnParent,this.cannotCloseTaskIfIssueOpen=t.cannotCloseTaskIfIssueOpen,t.minEditableDate?this.minEditableDate=Object(n.d)(t.minEditableDate):this.minEditableDate=-1/0,t.maxEditableDate?this.maxEditableDate=Object(n.a)(t.maxEditableDate):this.maxEditableDate=1/0,this.loadTasks(t.tasks,t.selectedRow),this.deletedTaskIds=[],t.splitterPosition&&this.splitter.resize(t.splitterPosition),t.zoom&&(this.gantt.zoom=t.zoom),this.endTransaction();var e=this;this.gantt.element.oneTime(200,function(){e.gantt.centerOnToday()})}loadTasks(t,e){var s=new i.TaskFactory;this.reset();for(var n=0;n<t.length;n++){if(!((o=t[n])instanceof i.Task)){var r=s.build(o.id,o.name,o.code,o.level,o.start,o.end,o.duration,o.collapsed);for(var a in o)"end"!=a&&"start"!=a&&(r[a]=o[a]);o=r}o.master=this,this.tasks.push(o)}for(n=0;n<this.tasks.length;n++){for(var o=this.tasks[n],d=this.__currentTransaction&&this.__currentTransaction.errors?this.__currentTransaction.errors.length:0;!this.updateLinks(o);){if(this.__currentTransaction&&d!=this.__currentTransaction.errors.length){for(var c="";d<this.__currentTransaction.errors.length;){c=c+this.__currentTransaction.errors.pop().msg+"\n\n"}alert(c)}this.removeAllLinks(o,!1)}o.setPeriod(o.start,o.end)?(this.editor.addTask(o,null,!0),this.gantt.addTask(o)):(alert(l.messages.GANNT_ERROR_LOADING_DATA_TASK_REMOVED+"\n"+o.name+"\n"+l.messages.ERROR_SETTING_DATES),this.tasks.splice(o.getRow(),1))}this.editor.fillEmptyLines(),this.tasks&&this.tasks.length>0&&(e=e||0,this.tasks[e].rowElement.click())}getTask(t){for(var e,s=0;s<this.tasks.length;s++){var n=this.tasks[s];if(n.id==t){e=n;break}}return e}getResource(t){for(var e,s=0;s<this.resources.length;s++){var n=this.resources[s];if(n.id==t){e=n;break}}return e}changeTaskDates(t,e,s){return t.setPeriod(e,s)}moveTask(t,e){return t.moveTo(e,!0)}taskIsChanged(){var t=this;this.element.stopTime("gnnttaskIsChanged"),this.element.oneTime(50,"gnnttaskIsChanged",function(){t.editor.redraw(),t.gantt.refreshGantt()})}redraw(){this.editor.redraw(),this.gantt.refreshGantt()}reset(){this.tasks=[],this.links=[],this.deletedTaskIds=[],this.__inUndoRedo?this.__inUndoRedo=!1:(this.__undoStack=[],this.__redoStack=[]),delete this.currentTask,this.editor.reset(),this.gantt.reset()}showTaskEditor(t){this.getTask(t).rowElement.find(".edit").click()}saveProject(){return this.saveGantt(!1)}saveGantt(t){for(var e=[],s=0;s<this.tasks.length;s++){var n=this.tasks[s].clone();delete n.master,delete n.rowElement,delete n.ganttElement,e.push(n)}var r={tasks:e};return this.currentTask&&(r.selectedRow=this.currentTask.getRow()),r.deletedTaskIds=this.deletedTaskIds,t||(r.resources=this.resources,r.roles=this.roles,r.canWrite=this.canWrite,r.canWriteOnParent=this.canWriteOnParent,r.splitterPosition=this.splitter.perc,r.zoom=this.gantt.zoom),r}updateLinks(t){function e(t,s,n){if(s==t)return!0;for(var r=t.getSuperiors(),a=t.getParent();a;)r=r.concat(a.getSuperiors()),a=a.getParent();for(var i=t.getChildren(),o=0;o<i.length;o++)r=r.concat(i[o].getSuperiors());var l=!1;for(o=0;o<r.length;o++){var d=r[o];if(d.from==s){l=!0;break}if(n.indexOf(d.from.id+"x"+s.id)<=0&&(n.push(d.from.id+"x"+s.id),e(d.from,s,n))){l=!0;break}}var c=s.getParent();return c&&n.indexOf(t.id+"x"+c.id)<=0&&(n.push(t.id+"x"+c.id),e(t,c,n)&&(l=!0)),l}this.links=this.links.filter(function(e){return e.to!=t});var s=!0;if(t.depends){for(var n=t.getParents(),r=t.getDescendant(),a=t.depends.split(","),o="",d=[],c=0;c<a.length;c++){var u=a[c],h=u.split(":"),f=0;h.length>1&&(f=parseInt(h[1]));var p=this.tasks[parseInt(h[0]-1)];p&&(n&&n.indexOf(p)>=0?(this.setErrorOnTransaction(t.name+"\n"+l.messages.CANNOT_DEPENDS_ON_ANCESTORS+"\n"+p.name),s=!1):r&&r.indexOf(p)>=0?(this.setErrorOnTransaction(t.name+"\n"+l.messages.CANNOT_DEPENDS_ON_DESCENDANTS+"\n"+p.name),s=!1):e(p,t,d)?(s=!1,this.setErrorOnTransaction(l.messages.CIRCULAR_REFERENCE+"\n"+t.name+" -> "+p.name)):(this.links.push(new i.Link(p,t,f)),o=o+(o.length>0?",":"")+u))}t.depends=o}return s}moveUpCurrentTask(){this.canWrite&&this.currentTask&&(this.beginTransaction(),this.currentTask.moveUp(),this.endTransaction())}moveDownCurrentTask(){this.canWrite&&this.currentTask&&(this.beginTransaction(),this.currentTask.moveDown(),this.endTransaction())}outdentCurrentTask(){if(this.canWrite&&this.currentTask.canWrite&&this.currentTask){var t=this.currentTask.getParent();this.beginTransaction(),this.currentTask.outdent(),this.endTransaction(),t&&this.editor.refreshExpandStatus(t)}}indentCurrentTask(){this.canWrite&&this.currentTask.canWrite&&this.currentTask&&(this.beginTransaction(),this.currentTask.indent(),this.endTransaction())}addBelowCurrentTask(){if(this.canWrite){var t,e=new i.TaskFactory;this.beginTransaction();var s=0;this.currentTask?(t=e.build("tmp_"+(new Date).getTime(),"","",this.currentTask.level+1,this.currentTask.start,1),s=this.currentTask.getRow()+1):t=e.build("tmp_"+(new Date).getTime(),"","",0,(new Date).getTime(),1);var n=this.addTask(t,s);n&&(n.rowElement.click(),n.rowElement.find("[name=name]").focus()),this.endTransaction()}}addAboveCurrentTask(t){if(this.canWrite){var e,s=new i.TaskFactory,n=0;if(this.currentTask){if(this.currentTask.level<=0)return;e=s.build(t.taskId,t.title,t.title,this.currentTask.level,(new Date).getTime(),2),n=this.currentTask.getRow()}else e=s.build(t.taskId,t.title,t.title,0,(new Date).getTime(),2);this.beginTransaction(),(t=this.addTask(e,n))&&(t.rowElement.click(),t.rowElement.find("[name=name]").focus()),this.endTransaction()}}addNewTask(t,e){Promise.resolve().then(function(){var t=[s(703)];(function(t){(new t).showTaskModal(null)}).apply(null,t)}).catch(s.oe)}deleteCurrentTask(){var t=this.currentTask;t&&Promise.resolve().then(function(){var e=[s(703)];(function(e){(new e).deleteTaskModal(t)}).apply(null,e)}).catch(s.oe)}beginTransaction(){return this.__currentTransaction?console.error("Cannot open twice a transaction"):this.__currentTransaction={snapshot:JSON.stringify(this.saveGantt(!0)),errors:[]},this.__currentTransaction}endTransaction(){if(!this.__currentTransaction)return console.error("Transaction never started."),!0;var t=!0;if(this.__currentTransaction.errors.length<=0){this.__undoStack.push(this.__currentTransaction.snapshot),this.__redoStack=[],this.gantt.originalStartMillis=1/0,this.gantt.originalEndMillis=-1/0;for(var e=0;e<this.tasks.length;e++){var s=this.tasks[e];this.gantt.originalStartMillis>s.start&&(this.gantt.originalStartMillis=s.start),this.gantt.originalEndMillis<s.end&&(this.gantt.originalEndMillis=s.end)}this.taskIsChanged()}else{t=!1;var n=JSON.parse(this.__currentTransaction.snapshot);this.deletedTaskIds=n.deletedTaskIds,this.loadTasks(n.tasks,n.selectedRow),this.redraw();var r="";for(e=0;e<this.__currentTransaction.errors.length;e++){r=r+this.__currentTransaction.errors[e].msg+"\n\n"}alert(r)}return this.__currentTransaction=void 0,this.editor.refreshExpandStatus(this.currentTask),t}setErrorOnTransaction(t,e){this.__currentTransaction?this.__currentTransaction.errors.push({msg:t,task:e}):console.error(t)}checkpoint(){this.__undoStack=[],this.__redoStack=[]}undo(){if(this.__undoStack.length>0){var t=this.__undoStack.pop();this.__redoStack.push(JSON.stringify(this.saveGantt()));var e=JSON.parse(t);this.deletedTaskIds=e.deletedTaskIds,this.__inUndoRedo=!0,this.loadTasks(e.tasks,e.selectedRow),this.redraw()}}redo(){if(this.__redoStack.length>0){var t=this.__redoStack.pop();this.__undoStack.push(JSON.stringify(this.saveGantt()));var e=JSON.parse(t);this.deletedTaskIds=e.deletedTaskIds,this.__inUndoRedo=!0,this.loadTasks(e.tasks,e.selectedRow),this.redraw()}}resize(){this.splitter.resize()}getCollapsedDescendant(){for(var t=this.tasks,e=[],s=0;s<t.length;s++){var n=t[s];e.indexOf(n)>=0||n.collapsed&&(e=e.concat(n.getDescendant()))}return e}computeCriticalPath(){if(!this.tasks)return!1;for(var t=this.tasks.filter(function(t){return t.getRow()>0&&(!t.isParent()||t.isParent()&&!t.isDependent())}),e=0;e<t.length;e++){(d=t[e]).earlyStart=-1,d.earlyFinish=-1,d.latestStart=-1,d.latestFinish=-1,d.criticalCost=-1,d.isCritical=!1}for(var s=[],n=t.concat();n.length>0;){var r=!1;for(e=0;e<n.length;e++){var a=n[e],i=a.getInferiorTasks();if(c(s,i)){for(var o=0,l=0;l<i.length;l++){var d;(d=i[l]).criticalCost>o&&(o=d.criticalCost)}a.criticalCost=o+a.duration,s.push(a),n.splice(e,1),r=!0}}if(!r)return console.error("Cyclic dependency, algorithm stopped!"),!1}return function(t){for(var e=-1,s=0;s<t.length;s++){var n=t[s];n.criticalCost>e&&(e=n.criticalCost)}for(var s=0;s<t.length;s++){var n=t[s];n.setLatest(e)}}(t),function(t){for(var e=0;e<t.length;e++){var s=t[e];s.earlyStart=0,s.earlyFinish=s.duration,u(s)}}(function(t){for(var e=[],s=0;s<t.length;s++)t[s].depends&&""!=t[s].depends||e.push(t[s]);return e}(t)),function(t){for(var e=0;e<t.length;e++){var s=t[e];s.isCritical=s.earlyStart==s.latestStart}}(t),t;function c(t,e){for(var s=0;s<e.length;s++)if(t.indexOf(e[s])<0)return!1;return!0}function u(t){for(var e=t.earlyFinish,s=t.getInferiorTasks(),n=0;n<s.length;n++){var r=s[n];e>=r.earlyStart&&(r.earlyStart=e,r.earlyFinish=e+r.duration),u(r)}}}}e.default=l}.call(this,s(1))},2050:function(t,e,s){"use strict";s.r(e),function(t,e){var n=s(1288);s(2051);window.console||(window.console=new function(){this.log=function(t){},this.debug=function(t){},this.error=function(t){}}),window.console.debug&&window.console.error&&window.console.log||(window.console=new function(){this.log=function(t){},this.debug=function(t){},this.error=function(t){}}),String.prototype.trim=function(){return this.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1")},String.prototype.startsWith=function(t,e){return e?t.toLowerCase()==this.substring(0,t.length).toLowerCase():t==this.substring(0,t.length)},String.prototype.endsWith=function(t,e){return e?t.toLowerCase()==this.substring(this.length-t.length).toLowerCase():t==this.substring(this.length-t.length)},String.prototype.asId=function(){return this.replace(/[^a-zA-Z0-9_]+/g,"")},String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(RegExp.quote(t),"g"),e)},Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(null==this)throw new TypeError;var s=Object(this),n=s.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>0&&((r=Number(arguments[1]))!=r?r=0:0!=r&&r!=1/0&&r!=-1/0&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var a=r>=0?r:Math.max(n-Math.abs(r),0);a<n;a++)if(a in s&&s[a]===t)return a;return-1}),Object.size=function(t){var e,s=0;for(e in t)t.hasOwnProperty(e)&&s++;return s},RegExp.quote=function(t){return t.replace(/([.?*+^$[\]\\(){}-])/g,"\\$1")},Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.monthAbbreviations=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.dayAbbreviations=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.preferAmericanFormat=!1,Date.firstDayOfWeek=1,Date.defaultFormat="dd/MM/yyyy",Number.decimalSeparator=".",Number.groupingSeparator=",",Number.minusSign="-",Number.currencyFormat="##0.00",t.gridify=function(e,s){var n={resizeZoneWidth:10};t.extend(n,s);var r=t("<div>").addClass("gdfWrapper");r.append(e);var a=e.clone();a.addClass("fixHead"),a.find("tbody").remove(),r.append(a),r.append(e);for(var i=a.find(".gdfColHeader"),o=e.find(".gdfColHeader"),l=0;l<i.length;l++)i.eq(l).data("fTh",o.eq(l));return e.width(0),a.width(0),a.find("th.gdfColHeader.gdfResizable:not(.gdfied)").mouseover(function(){t(this).addClass("gdfColHeaderOver")}).bind("mouseout.gdf",function(){t(this).removeClass("gdfColHeaderOver"),t.gridify.columInResize||t("body").removeClass("gdfHResizing")}).bind("mousemove.gdf",function(e){if(!t.gridify.columInResize){var s=t(this),r=e.pageX-s.offset().left;s.width()-r<n.resizeZoneWidth?t("body").addClass("gdfHResizing"):t("body").removeClass("gdfHResizing")}}).bind("mousedown.gdf",function(e){var s=t(this),r=e.pageX-s.offset().left;s.width()-r<n.resizeZoneWidth&&(t("body").unselectable(),t.gridify.columInResize=t(this),t(document).bind("mousemove.gdf",function(e){var s=e.pageX-t.gridify.columInResize.offset().left;t.gridify.columInResize.width(s),t.gridify.columInResize.data("fTh").width(s)}).bind("mouseup.gdf",function(){t(this).unbind("mousemove.gdf").unbind("mouseup.gdf").clearUnselectable(),t("body").removeClass("gdfHResizing"),delete t.gridify.columInResize}))}).addClass("gdfied unselectable").attr("unselectable","true"),e.find("td.gdfCell:not(.gdfied)").each(function(){var e=t(this);if(e.is(".gdfEditable")){var s=t("<input type='text'>").addClass("gdfCellInput");s.val(e.text()),e.empty().append(s)}else{var n=t("<div>").addClass("gdfCellWrap");n.html(e.html()),e.empty().append(n)}}).addClass("gdfied"),r};t.splittify={init:function(e,s,n,r){r=r||50;var a=t("<div>").addClass("splitterContainer"),i=t("<div>").addClass("splitElement splitBox1"),o=t("<div>").addClass("splitElement vSplitBar").attr("unselectable","on").html("|").css("padding-top",e.height()/2+"px"),l=t("<div>").addClass("splitElement splitBox2"),d=new class{constructor(t,e,s,n){this.element=t,this.firstBox=e,this.secondBox=s,this.splitterBar=n,this.perc=0,this.firstBoxMinWidth=0}resize(t){this.perc=t||this.perc;var e=this.element.width(),s=this.firstBox.get(0).scrollWidth,n=e*this.perc/100;n=(n=n>this.firstBoxMinWidth?n:this.firstBoxMinWidth)<s?n:s,this.firstBox.css({width:n}),this.splitterBar.css({left:n}),this.secondBox.css({left:n+this.splitterBar.width(),width:e-n-this.splitterBar.width()})}}(a,i,l,o);d.perc=r,i.append(s),l.append(n),a.append(i).append(l).append(o),e.append(a);var c=e.innerWidth(),u=c*r/100-o.width(),h=i.get(0).scrollWidth;u=u>h?h:u,i.width(u).css({left:0}),o.css({left:i.width()}),l.width(c-u-o.width()).css({left:i.width()+o.width()}),o.bind("mousedown.gdf",function(e){t.splittify.splitterBar=t(this);var s=i.get(0).scrollWidth;t("body").unselectable().bind("mousemove.gdf",function(e){var n=t.splittify.splitterBar,r=e.pageX-n.parent().offset().left,a=n.parent().width();r=(r=r>d.firstBoxMinWidth?r:d.firstBoxMinWidth)<s-10?r:s-10,n.css({left:r}),i.width(r),l.css({left:r+n.width(),width:a-r-n.width()}),d.perc=i.width()/d.element.width()*100}).bind("mouseup.gdf",function(){t(this).unbind("mousemove.gdf").unbind("mouseup.gdf").clearUnselectable(),delete t.splittify.splitterBar})});var f=!1;return i.add(l).scroll(function(s){var n=t(this),r=n.scrollTop();n.is(".splitBox1")&&"splitBox2"!=f?(f="splitBox1",l.scrollTop(r)):n.is(".splitBox2")&&"splitBox1"!=f&&(f="splitBox2",i.scrollTop(r)),l.find(".fixHead").css("top",r),i.find(".fixHead").css("top",r),e.stopTime("reset").oneTime(100,"reset",function(){f=""})}),d}},t.fn.bringToFront=function(e){var s=10;return t(e||"*").each(function(){if("static"!=t(this).css("position")){var e=parseInt(t(this).css("zIndex"));s=e>s?parseInt(t(this).css("zIndex")):s}}),t(this).css("zIndex",s+=10)},e.fn.clearErrorAlert=function(){return this.each(function(){var e=t(this);e.removeAttr("invalid").removeClass("formElementsError"),t("#"+e.attr("id")+"error").remove()}),this},e.fn.createErrorAlert=function(e,s){return this.each(function(){var n=t(this);if(n.attr("invalid","true").addClass("formElementsError"),t("#"+n.attr("id")+"error").size()<=0){var r=(e||"")+": "+(s||""),a="<img width='17' heigh='17' id=\""+n.attr("id")+"error\" error='1'";(a=t(a+=" onclick=\"alert($(this).attr('title'))\" border='0' align='absmiddle'>")).attr("title",r).attr("src","res/alert.gif"),n.after(a)}}),this},e.fn.updateOldValue=function(){return this.each(function(){var e=t(this);e.data("_oldvalue",e.val())}),this},e.fn.isValueChanged=function(){var e=!1;return this.each(function(){var s=t(this);if(s.val()+""!=s.data("_oldvalue")+"")return e=!0,!1}),e},e.fn.getOldValue=function(){return t(this).data("_oldvalue")},t.fn.unselectable=function(){return this.each(function(){t(this).addClass("unselectable").attr("unselectable","on")}),t(this)},t.fn.clearUnselectable=function(){return this.each(function(){t(this).removeClass("unselectable").removeAttr("unselectable")}),t(this)},t.fn.dragExtedSVG=function(e,s){var n,r,a={canDrag:!0,canResize:!0,resizeZoneWidth:15,minSize:10,startDrag:function(t){},drag:function(t){},drop:function(t){},startResize:function(t){},resize:function(t){},stopResize:function(t){}};return t.extend(a,s),this.each(function(){var s=t(this);e.parent().offset().left,a.canDrag&&s.addClass("deSVGdrag"),(a.canResize||a.canDrag)&&s.bind("mousedown.deSVG",function(l){t(l.target).is("image")&&l.preventDefault(),n=t(this);var d=parseFloat(s.offset().left),c=d+parseFloat(s.attr("width")),u=l.pageX;t("body").unselectable();var h=c-u;if(a.canResize&&h>=0&&h<=a.resizeZoneWidth){r=c-l.pageX,n.attr("oldw",n.attr("width"));var f=!0;t(e).bind("mousemove.deSVG",function(t){f&&(a.startResize.call(n.get(0),t),f=!1);var e=t.pageX-d+r;n.attr("width",e<a.minSize?a.minSize:e),a.resize.call(n.get(0),t)}),t("body").one("mouseup.deSVG",i)}else if(a.canDrag){r=parseFloat(n.attr("x"))-l.pageX,n.attr("oldx",n.attr("x"));f=!0;t(e).bind("mousemove.deSVG",function(t){f&&(a.startDrag.call(n.get(0),t),f=!1),n.attr("x",r+t.pageX),a.drag.call(n.get(0),t)}).bind("mouseleave.deSVG",o),t("body").one("mouseup.deSVG",o)}}).bind("mousemove.deSVG",function(e){var s=t(this),n=s.offset().left+parseFloat(s.attr("width"))-e.pageX;a.canResize&&n>=0&&n<=a.resizeZoneWidth?s.addClass("deSVGhand"):s.removeClass("deSVGhand")}).addClass("deSVG")}),this;function i(s){t(e).unbind("mousemove.deSVG").unbind("mouseup.deSVG").unbind("mouseleave.deSVG"),n&&a.stopResize.call(n.get(0),s),n=void 0,t("body").clearUnselectable()}function o(s){t(e).unbind("mousemove.deSVG").unbind("mouseup.deSVG").unbind("mouseleave.deSVG"),n&&n.attr("oldx")!=n.attr("x")&&a.drop.call(n.get(0),s),n=void 0,t("body").clearUnselectable()}},t(document).ready(function(){t(":input[oldValue]").livequery(function(){t(this).updateOldValue()}),t(".validated").livequery("blur",n.b)})}.call(this,s(1),s(1))},2051:function(t,e,s){(function(t){!function(t){t.extend(t.fn,{livequery:function(e,s,n){var r,a=this;return t.isFunction(e)&&(n=s,s=e,e=void 0),t.each(t.livequery.queries,function(t,i){if(!(a.selector!=i.selector||a.context!=i.context||e!=i.type||s&&s.$lqguid!=i.fn.$lqguid||n&&n.$lqguid!=i.fn2.$lqguid))return(r=i)&&!1}),(r=r||new t.livequery(this.selector,this.context,e,s,n)).stopped=!1,t.livequery.run(r.id),this},expire:function(e,s,n){var r=this;return t.isFunction(e)&&(n=s,s=e,e=void 0),t.each(t.livequery.queries,function(a,i){r.selector!=i.selector||r.context!=i.context||e&&e!=i.type||s&&s.$lqguid!=i.fn.$lqguid||n&&n.$lqguid!=i.fn2.$lqguid||this.stopped||t.livequery.stop(i.id)}),this}}),t.livequery=function(e,s,n,r,a){return this.selector=e,this.context=s||document,this.type=n,this.fn=r,this.fn2=a,this.elements=[],this.stopped=!1,this.id=t.livequery.queries.push(this)-1,r.$lqguid=r.$lqguid||t.livequery.guid++,a&&(a.$lqguid=a.$lqguid||t.livequery.guid++),this},t.livequery.prototype={stop:function(){var t=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(e,s){t.fn2.apply(s)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var e=this,s=this.elements,n=t(this.selector,this.context),r=n.not(s);this.elements=n,this.type?(r.bind(this.type,this.fn),s.length>0&&t.each(s,function(s,r){t.inArray(r,n)<0&&t.event.remove(r,e.type,e.fn)})):(r.each(function(){e.fn.apply(this)}),this.fn2&&s.length>0&&t.each(s,function(s,r){t.inArray(r,n)<0&&e.fn2.apply(r)}))}}},t.extend(t.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(t.livequery.running&&t.livequery.queue.length)for(var e=t.livequery.queue.length;e--;)t.livequery.queries[t.livequery.queue.shift()].run()},pause:function(){t.livequery.running=!1},play:function(){t.livequery.running=!0,t.livequery.run()},registerPlugin:function(){t.each(arguments,function(e,s){if(t.fn[s]){var n=t.fn[s];t.fn[s]=function(){var e=n.apply(this,arguments);return t.livequery.run(),e}}})},run:function(e){void 0!=e?t.inArray(e,t.livequery.queue)<0&&t.livequery.queue.push(e):t.each(t.livequery.queries,function(e){t.inArray(e,t.livequery.queue)<0&&t.livequery.queue.push(e)}),t.livequery.timeout&&clearTimeout(t.livequery.timeout),t.livequery.timeout=setTimeout(t.livequery.checkQueue,20)},stop:function(e){void 0!=e?t.livequery.queries[e].stop():t.each(t.livequery.queries,function(e){t.livequery.queries[e].stop()})}}),t.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove"),t(function(){t.livequery.play()});var e=t.prototype.init;t.prototype.init=function(t,s){var n=e.apply(this,arguments);return t&&t.selector&&(n.context=t.context,n.selector=t.selector),"string"==typeof t&&(n.context=s||document,n.selector=t),n},t.prototype.init.prototype=t.prototype}(t)}).call(this,s(1))},2052:function(t,e,s){(function(t){!function(t){function e(){this._settings=[],this._extensions=[],this.regional=[],this.regional[""]={errorLoadingText:"Error loading",notSupportedText:"This browser does not support SVG"},this.local=this.regional[""],this._uuid=(new Date).getTime(),this._renesis=function(t){try{return!(!window.ActiveXObject||!new ActiveXObject(t))}catch(t){return!1}}("RenesisX.RenesisCtrl")}var s="svgwrapper";function n(e,s){this._svg=e,this._container=s;for(var n=0;n<t.svg._extensions.length;n++){var r=t.svg._extensions[n];this[r[0]]=new r[1](this)}}function r(){this._path=""}function a(){this._parts=[]}function i(t){return t&&t.constructor==Array}t.extend(e.prototype,{markerClassName:"hasSVG",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:n,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(e,s){var n=e.namespaceURI==this.svgNS?e:null;if(!t((e=n?null:e)||n).hasClass(this.markerClassName)){"string"==typeof s?s={loadURL:s}:"function"==typeof s&&(s={onLoad:s}),t(e||n).addClass(this.markerClassName);try{n||((n=document.createElementNS(this.svgNS,"svg")).setAttribute("version","1.1"),e.clientWidth>0&&n.setAttribute("width",e.clientWidth),e.clientHeight>0&&n.setAttribute("height",e.clientHeight),e.appendChild(n)),this._afterLoad(e,n,s||{})}catch(n){t.browser.msie?(e.id||(e.id="svg"+this._uuid++),this._settings[e.id]=s,e.innerHTML='<embed type="image/svg+xml" width="100%" height="100%" src="'+(s.initPath||"")+'blank.svg" pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'):e.innerHTML='<p class="svg_error">'+this.local.notSupportedText+"</p>"}}},_registerSVG:function(){for(var e=0;e<document.embeds.length;e++){var n=document.embeds[e].parentNode;if(t(n).hasClass(t.svg.markerClassName)&&!t.data(n,s)){var r=null;try{r=document.embeds[e].getSVGDocument()}catch(e){return void setTimeout(t.svg._registerSVG,250)}(r=r?r.documentElement:null)&&t.svg._afterLoad(n,r)}}},_afterLoad:function(e,n,r){r=r||this._settings[e.id];this._settings[e?e.id:""]=null;var a=new this._wrapperClass(n,e);t.data(e||n,s,a);try{r.loadURL&&a.load(r.loadURL,r),r.settings&&a.configure(r.settings),r.onLoad&&!r.loadURL&&r.onLoad.apply(e||n,[a])}catch(t){alert(t)}},_getSVG:function(e){return e="string"==typeof e?t(e)[0]:e.jquery?e[0]:e,t.data(e,s)},_destroySVG:function(e){var n=t(e);n.hasClass(this.markerClassName)&&(n.removeClass(this.markerClassName),e.namespaceURI!=this.svgNS&&n.empty(),t.removeData(e,s))},addExtension:function(t,e){this._extensions.push([t,e])},isSVGElem:function(e){return 1==e.nodeType&&e.namespaceURI==t.svg.svgNS}}),t.extend(n.prototype,{_width:function(){return this._container?this._container.clientWidth:this._svg.width},_height:function(){return this._container?this._container.clientHeight:this._svg.height},root:function(){return this._svg},configure:function(e,s,n){if(e.nodeName||(n=s,s=e,e=this._svg),n)for(var r=e.attributes.length-1;r>=0;r--){var a=e.attributes.item(r);"onload"!=a.nodeName&&"version"!=a.nodeName&&"xmlns"!=a.nodeName.substring(0,5)&&e.attributes.removeNamedItem(a.nodeName)}for(var i in s)e.setAttribute(t.svg._attrNames[i]||i,s[i]);return this},getElementById:function(t){return this._svg.ownerDocument.getElementById(t)},change:function(e,s){if(e)for(var n in s)null==s[n]?e.removeAttribute(t.svg._attrNames[n]||n):e.setAttribute(t.svg._attrNames[n]||n,s[n]);return this},_args:function(e,s,n){s.splice(0,0,"parent"),s.splice(s.length,0,"settings");var r={},a=0;null!=e[0]&&e[0].jquery&&(e[0]=e[0][0]),null==e[0]||"object"==typeof e[0]&&e[0].nodeName||(r.parent=null,a=1);for(var i=0;i<e.length;i++)r[s[i+a]]=e[i];return n&&t.each(n,function(t,e){"object"==typeof r[e]&&(r.settings=r[e],r[e]=null)}),r},title:function(t,e,s){var n=this._args(arguments,["text"]),r=this._makeNode(n.parent,"title",n.settings||{});return r.appendChild(this._svg.ownerDocument.createTextNode(n.text)),r},describe:function(t,e,s){var n=this._args(arguments,["text"]),r=this._makeNode(n.parent,"desc",n.settings||{});return r.appendChild(this._svg.ownerDocument.createTextNode(n.text)),r},defs:function(e,s,n){var r=this._args(arguments,["id"],["id"]);return this._makeNode(r.parent,"defs",t.extend(r.id?{id:r.id}:{},r.settings||{}))},symbol:function(e,s,n,r,a,i,o){var l=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(l.parent,"symbol",t.extend({id:l.id,viewBox:l.x1+" "+l.y1+" "+l.width+" "+l.height},l.settings||{}))},marker:function(e,s,n,r,a,i,o,l){var d=this._args(arguments,["id","refX","refY","mWidth","mHeight","orient"],["orient"]);return this._makeNode(d.parent,"marker",t.extend({id:d.id,refX:d.refX,refY:d.refY,markerWidth:d.mWidth,markerHeight:d.mHeight,orient:d.orient||"auto"},d.settings||{}))},style:function(e,s,n){var r=this._args(arguments,["styles"]),a=this._makeNode(r.parent,"style",t.extend({type:"text/css"},r.settings||{}));return a.appendChild(this._svg.ownerDocument.createTextNode(r.styles)),t.browser.opera&&t("head").append('<style type="text/css">'+r.styles+"</style>"),a},script:function(e,s,n,r){var a=this._args(arguments,["script","type"],["type"]),i=this._makeNode(a.parent,"script",t.extend({type:a.type||"text/javascript"},a.settings||{}));return i.appendChild(this._svg.ownerDocument.createTextNode(a.script)),t.browser.mozilla||t.globalEval(a.script),i},linearGradient:function(e,s,n,r,a,i,o,l){var d=this._args(arguments,["id","stops","x1","y1","x2","y2"],["x1"]),c=t.extend({id:d.id},null!=d.x1?{x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2}:{});return this._gradient(d.parent,"linearGradient",t.extend(c,d.settings||{}),d.stops)},radialGradient:function(e,s,n,r,a,i,o,l,d){var c=this._args(arguments,["id","stops","cx","cy","r","fx","fy"],["cx"]),u=t.extend({id:c.id},null!=c.cx?{cx:c.cx,cy:c.cy,r:c.r,fx:c.fx,fy:c.fy}:{});return this._gradient(c.parent,"radialGradient",t.extend(u,c.settings||{}),c.stops)},_gradient:function(e,s,n,r){for(var a=this._makeNode(e,s,n),i=0;i<r.length;i++){var o=r[i];this._makeNode(a,"stop",t.extend({offset:o[0],stopColor:o[1]},null!=o[2]?{stopOpacity:o[2]}:{}))}return a},pattern:function(e,s,n,r,a,i,o,l,d,c,u){var h=this._args(arguments,["id","x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),f=t.extend({id:h.id,x:h.x,y:h.y,width:h.width,height:h.height},null!=h.vx?{viewBox:h.vx+" "+h.vy+" "+h.vwidth+" "+h.vheight}:{});return this._makeNode(h.parent,"pattern",t.extend(f,h.settings||{}))},clipPath:function(e,s,n,r){var a=this._args(arguments,["id","units"]);return a.units=a.units||"userSpaceOnUse",this._makeNode(a.parent,"clipPath",t.extend({id:a.id,clipPathUnits:a.units},a.settings||{}))},mask:function(e,s,n,r,a,i,o){var l=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(l.parent,"mask",t.extend({id:l.id,x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}))},createPath:function(){return new r},createText:function(){return new a},svg:function(e,s,n,r,a,i,o,l,d,c){var u=this._args(arguments,["x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),h=t.extend({x:u.x,y:u.y,width:u.width,height:u.height},null!=u.vx?{viewBox:u.vx+" "+u.vy+" "+u.vwidth+" "+u.vheight}:{});return this._makeNode(u.parent,"svg",t.extend(h,u.settings||{}))},group:function(e,s,n){var r=this._args(arguments,["id"],["id"]);return this._makeNode(r.parent,"g",t.extend({id:r.id},r.settings||{}))},use:function(e,s,n,r,a,i,o){var l=this._args(arguments,["x","y","width","height","ref"]);"string"==typeof l.x&&(l.ref=l.x,l.settings=l.y,l.x=l.y=l.width=l.height=null);var d=this._makeNode(l.parent,"use",t.extend({x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}));return d.setAttributeNS(t.svg.xlinkNS,"href",l.ref),d},link:function(e,s,n){var r=this._args(arguments,["ref"]),a=this._makeNode(r.parent,"a",r.settings);return a.setAttributeNS(t.svg.xlinkNS,"href",r.ref),a},image:function(e,s,n,r,a,i,o){var l=this._args(arguments,["x","y","width","height","ref"]),d=this._makeNode(l.parent,"image",t.extend({x:l.x,y:l.y,width:l.width,height:l.height},l.settings||{}));return d.setAttributeNS(t.svg.xlinkNS,"href",l.ref),d},path:function(e,s,n){var r=this._args(arguments,["path"]);return this._makeNode(r.parent,"path",t.extend({d:r.path.path?r.path.path():r.path},r.settings||{}))},rect:function(e,s,n,r,a,i,o,l){var d=this._args(arguments,["x","y","width","height","rx","ry"],["rx"]);return this._makeNode(d.parent,"rect",t.extend({x:d.x,y:d.y,width:d.width,height:d.height},d.rx?{rx:d.rx,ry:d.ry}:{},d.settings||{}))},circle:function(e,s,n,r,a){var i=this._args(arguments,["cx","cy","r"]);return this._makeNode(i.parent,"circle",t.extend({cx:i.cx,cy:i.cy,r:i.r},i.settings||{}))},ellipse:function(e,s,n,r,a,i){var o=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(o.parent,"ellipse",t.extend({cx:o.cx,cy:o.cy,rx:o.rx,ry:o.ry},o.settings||{}))},line:function(e,s,n,r,a,i){var o=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(o.parent,"line",t.extend({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},o.settings||{}))},polyline:function(t,e,s){var n=this._args(arguments,["points"]);return this._poly(n.parent,"polyline",n.points,n.settings)},polygon:function(t,e,s){var n=this._args(arguments,["points"]);return this._poly(n.parent,"polygon",n.points,n.settings)},_poly:function(e,s,n,r){for(var a="",i=0;i<n.length;i++)a+=n[i].join()+" ";return this._makeNode(e,s,t.extend({points:t.trim(a)},r||{}))},text:function(e,s,n,r,a){var o=this._args(arguments,["x","y","value"]);return"string"==typeof o.x&&arguments.length<4&&(o.value=o.x,o.settings=o.y,o.x=o.y=null),this._text(o.parent,"text",o.value,t.extend({x:o.x&&i(o.x)?o.x.join(" "):o.x,y:o.y&&i(o.y)?o.y.join(" "):o.y},o.settings||{}))},textpath:function(e,s,n,r){var a=this._args(arguments,["path","value"]),i=this._text(a.parent,"textPath",a.value,a.settings||{});return i.setAttributeNS(t.svg.xlinkNS,"href",a.path),i},_text:function(e,s,n,r){var a=this._makeNode(e,s,r);if("string"==typeof n)a.appendChild(a.ownerDocument.createTextNode(n));else for(var i=0;i<n._parts.length;i++){var o=n._parts[i];if("tspan"==o[0])(l=this._makeNode(a,o[0],o[2])).appendChild(a.ownerDocument.createTextNode(o[1])),a.appendChild(l);else if("tref"==o[0]){(l=this._makeNode(a,o[0],o[2])).setAttributeNS(t.svg.xlinkNS,"href",o[1]),a.appendChild(l)}else if("textpath"==o[0]){var l,d=t.extend({},o[2]);d.href=null,(l=this._makeNode(a,o[0],d)).setAttributeNS(t.svg.xlinkNS,"href",o[2].href),l.appendChild(a.ownerDocument.createTextNode(o[1])),a.appendChild(l)}else a.appendChild(a.ownerDocument.createTextNode(o[1]))}return a},other:function(t,e,s){var n=this._args(arguments,["name"]);return this._makeNode(n.parent,n.name,n.settings||{})},_makeNode:function(e,s,n){e=e||this._svg;var r=this._svg.ownerDocument.createElementNS(t.svg.svgNS,s);for(var s in n){var a=n[s];null==a||null==a||"string"==typeof a&&""==a||r.setAttribute(t.svg._attrNames[s]||s,a)}return e.appendChild(r),r},add:function(e,s){var n=this._args(1==arguments.length?[null,e]:arguments,["node"]),r=this;n.parent=n.parent||this._svg,n.node=n.node.jquery?n.node:t(n.node);try{if(t.svg._renesis)throw"Force traversal";n.parent.appendChild(n.node.cloneNode(!0))}catch(t){n.node.each(function(){var t=r._cloneAsSVG(this);t&&n.parent.appendChild(t)})}return this},clone:function(e,s){var n=this,r=this._args(1==arguments.length?[null,e]:arguments,["node"]);r.parent=r.parent||this._svg,r.node=r.node.jquery?r.node:t(r.node);var a=[];return r.node.each(function(){var t=n._cloneAsSVG(this);t&&(t.id="",r.parent.appendChild(t),a.push(t))}),a},_cloneAsSVG:function(e){var s=null;if(1==e.nodeType){s=this._svg.ownerDocument.createElementNS(t.svg.svgNS,this._checkName(e.nodeName));for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);"xmlns"!=r.nodeName&&r.nodeValue&&("xlink"==r.prefix?s.setAttributeNS(t.svg.xlinkNS,r.localName||r.baseName,r.nodeValue):s.setAttribute(this._checkName(r.nodeName),r.nodeValue))}for(n=0;n<e.childNodes.length;n++){var a=this._cloneAsSVG(e.childNodes[n]);a&&s.appendChild(a)}}else if(3==e.nodeType)t.trim(e.nodeValue)&&(s=this._svg.ownerDocument.createTextNode(e.nodeValue));else if(4==e.nodeType&&t.trim(e.nodeValue))try{s=this._svg.ownerDocument.createCDATASection(e.nodeValue)}catch(t){s=this._svg.ownerDocument.createTextNode(e.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}return s},_checkName:function(t){return"svg:"==(t=t.substring(0,1)>="A"&&t.substring(0,1)<="Z"?t.toLowerCase():t).substring(0,4)?t.substring(4):t},load:function(e,s){(s="boolean"==typeof s?{addTo:s}:"function"==typeof s?{onLoad:s}:"string"==typeof s?{parent:s}:"object"==typeof s&&s.nodeName?{parent:s}:"object"==typeof s&&s.jquery?{parent:s}:s||{}).parent||s.addTo||this.clear(!1);var n=[this._svg.getAttribute("width"),this._svg.getAttribute("height")],r=this,a=function(e){e=t.svg.local.errorLoadingText+": "+e,s.onLoad?s.onLoad.apply(r._container||r._svg,[r,e]):r.text(null,10,20,e)},i=function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.validateOnParse=!1,e.resolveExternals=!1,e.async=!1,e.loadXML(t),0!=e.parseError.errorCode?(a(e.parseError.reason),null):e},o=function(e){if(e)if("svg"==e.documentElement.nodeName){for(var i=s.parent?t(s.parent)[0]:r._svg,o={},l=0;l<e.documentElement.attributes.length;l++){var d=e.documentElement.attributes.item(l);"version"!=d.nodeName&&"xmlns"!=d.nodeName.substring(0,5)&&(o[d.nodeName]=d.nodeValue)}r.configure(i,o,!s.parent);var c=e.documentElement.childNodes;for(l=0;l<c.length;l++)try{if(t.svg._renesis)throw"Force traversal";i.appendChild(r._svg.ownerDocument.importNode(c[l],!0)),"script"==c[l].nodeName&&t.globalEval(c[l].textContent)}catch(t){r.add(i,c[l])}s.changeSize||r.configure(i,{width:n[0],height:n[1]}),s.onLoad&&s.onLoad.apply(r._container||r._svg,[r])}else{var u=e.getElementsByTagName("parsererror"),h=u.length?u[0].getElementsByTagName("div"):[];a(u.length?(h.length?h[0]:u[0]).firstChild.nodeValue:"???")}};return e.match("<svg")?o(t.browser.msie?i(e):(new DOMParser).parseFromString(e,"text/xml")):t.ajax({url:e,dataType:t.browser.msie?"text":"xml",success:function(e){o(t.browser.msie?i(e):e)},error:function(t,e,s){a(e+(s?" "+s.message:""))}}),this},remove:function(t){return(t=t.jquery?t[0]:t).parentNode.removeChild(t),this},clear:function(t){for(t&&this.configure({},!0);this._svg.firstChild;)this._svg.removeChild(this._svg.firstChild);return this},toSVG:function(t){return t=t||this._svg,"undefined"==typeof XMLSerializer?this._toSVG(t):(new XMLSerializer).serializeToString(t)},_toSVG:function(e){var s="";if(!e)return s;if(3==e.nodeType)s=e.nodeValue;else if(4==e.nodeType)s="<![CDATA["+e.nodeValue+"]]>";else{if(s="<"+e.nodeName,e.attributes)for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);""==t.trim(r.nodeValue)||r.nodeValue.match(/^\[object/)||r.nodeValue.match(/^function/)||(s+=" "+(r.namespaceURI==t.svg.xlinkNS?"xlink:":"")+r.nodeName+'="'+r.nodeValue+'"')}if(e.firstChild){s+=">";for(var a=e.firstChild;a;)s+=this._toSVG(a),a=a.nextSibling;s+="</"+e.nodeName+">"}else s+="/>"}return s}}),t.extend(r.prototype,{reset:function(){return this._path="",this},move:function(t,e,s){return s=i(t)?e:s,this._coords(s?"m":"M",t,e)},line:function(t,e,s){return s=i(t)?e:s,this._coords(s?"l":"L",t,e)},horiz:function(t,e){return this._path+=(e?"h":"H")+(i(t)?t.join(" "):t),this},vert:function(t,e){return this._path+=(e?"v":"V")+(i(t)?t.join(" "):t),this},curveC:function(t,e,s,n,r,a,o){return o=i(t)?e:o,this._coords(o?"c":"C",t,e,s,n,r,a)},smoothC:function(t,e,s,n,r){return r=i(t)?e:r,this._coords(r?"s":"S",t,e,s,n)},curveQ:function(t,e,s,n,r){return r=i(t)?e:r,this._coords(r?"q":"Q",t,e,s,n)},smoothQ:function(t,e,s){return s=i(t)?e:s,this._coords(s?"t":"T",t,e)},_coords:function(t,e,s,n,r,a,o){if(i(e))for(var l=0;l<e.length;l++){var d=e[l];this._path+=(0==l?t:" ")+d[0]+","+d[1]+(d.length<4?"":" "+d[2]+","+d[3]+(d.length<6?"":" "+d[4]+","+d[5]))}else this._path+=t+e+","+s+(null==n?"":" "+n+","+r+(null==a?"":" "+a+","+o));return this},arc:function(t,e,s,n,r,a,o,l){if(l=i(t)?e:l,this._path+=l?"a":"A",i(t))for(var d=0;d<t.length;d++){var c=t[d];this._path+=(0==d?"":" ")+c[0]+","+c[1]+" "+c[2]+" "+(c[3]?"1":"0")+","+(c[4]?"1":"0")+" "+c[5]+","+c[6]}else this._path+=t+","+e+" "+s+" "+(n?"1":"0")+","+(r?"1":"0")+" "+a+","+o;return this},close:function(){return this._path+="z",this},path:function(){return this._path}}),r.prototype.moveTo=r.prototype.move,r.prototype.lineTo=r.prototype.line,r.prototype.horizTo=r.prototype.horiz,r.prototype.vertTo=r.prototype.vert,r.prototype.curveCTo=r.prototype.curveC,r.prototype.smoothCTo=r.prototype.smoothC,r.prototype.curveQTo=r.prototype.curveQ,r.prototype.smoothQTo=r.prototype.smoothQ,r.prototype.arcTo=r.prototype.arc,t.extend(a.prototype,{reset:function(){return this._parts=[],this},string:function(t){return this._parts[this._parts.length]=["text",t],this},span:function(t,e){return this._parts[this._parts.length]=["tspan",t,e],this},ref:function(t,e){return this._parts[this._parts.length]=["tref",t,e],this},path:function(e,s,n){return this._parts[this._parts.length]=["textpath",s,t.extend({href:e},n||{})],this}}),t.fn.svg=function(e){var s=Array.prototype.slice.call(arguments,1);return"string"==typeof e&&"get"==e?t.svg["_"+e+"SVG"].apply(t.svg,[this[0]].concat(s)):this.each(function(){"string"==typeof e?t.svg["_"+e+"SVG"].apply(t.svg,[this].concat(s)):t.svg._attachSVG(this,e||{})})},t.svg=new e}(t)}).call(this,s(1))},2053:function(t,e,s){(function(t){t.fn.loadTemplates=function(){return t.JST.loadTemplates(t(this)),this},t.JST={_templates:new Object,_decorators:new Object,loadTemplates:function(e){e.each(function(){t(this).find(".__template__").each(function(){for(var e=t(this),s=e.attr("type"),n=!1,r=e.get(0).firstChild;r&&!n;){if(8==r.nodeType){var a=r.nodeValue;n=!0;break}r=r.nextSibling}if(!n)a=e.html();if(a.match(/##\w+##/))try{t.JST._templates[s]=a}catch(t){console.error("JST error: "+s,t,a)}else{var i="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#\))/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/\(#=(.+?)#\)/g,"',$1,'").split("(#").join("');").split("#)").join("p.push('")+"');}return p.join('');";try{t.JST._templates[s]=new Function("obj",i)}catch(t){console.error("JST error: "+s,t,i)}}e.remove()})})},createFromTemplate:function(e,s,n){var r=t.JST._templates,a=new Object;if(n)for(var i in e){var o=e[i];"string"==typeof o&&(o=(o+"").replace(/\n/g,"<br>")),a[i]=o}else a=e;var l="";if(void 0===s)alert("Template is required"),l="<div>Template is required</div>";else if("function"==typeof r[s])try{l=r[s](a)}catch(t){console.error("JST error: "+s,t.message),l="<div> ERROR: "+s+"<br>"+t.message+"</div>"}else{if(!(l=r[s])||""==l.trim())return console.error("No template found for type '"+s+"'"),t("<div>");l=function(t,e){for(var s in e){var n=e[s];t=t.replace(new RegExp("##"+s+"##","gi"),n)}return t=t.replace(new RegExp("##\\w+##","gi"),"")}(l,a)}var d=t(l);d.attr("__template",s);var c=t.JST._decorators[s];return"function"==typeof c&&c(d,a),d},existsTemplate:function(e){return t.JST._templates[e]},loadDecorator:function(e,s){t.JST._decorators[e]=s},getDecorator:function(e){return t.JST._decorators[e]},decorateTemplate:function(e){var s=t.JST._decorators[e.attr("__template")];"function"==typeof s&&s(editor)},ajaxLoadAsynchTemplates:function(e,s){t.get(e,function(e){var n=t("<div>");n.html(e),t.JST.loadTemplates(n),s()},"html")},ajaxLoadTemplates:function(e){t.ajax({async:!1,url:e,dataType:"html",success:function(e){var s=t("<div>");s.html(e),t.JST.loadTemplates(s)}})}}}).call(this,s(1))},2054:function(t,e,s){(function(t){t.fn.extend({everyTime:function(e,s,n,r,a){return this.each(function(){t.timer.add(this,e,s,n,r,a)})},oneTime:function(e,s,n){return this.each(function(){t.timer.add(this,e,s,n,1)})},stopTime:function(e,s){return this.each(function(){t.timer.remove(this,e,s)})}}),t.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(void 0==e||null==e)return null;var s=this.regex.exec(t.trim(e.toString()));return s[2]?parseInt(s[1],10)*(this.powers[s[2]]||1):e},add:function(e,s,n,r,a,i){var o=0;if(t.isFunction(n)&&(a||(a=r),r=n,n=s),!("number"!=typeof(s=t.timer.timeParse(s))||isNaN(s)||s<=0)){a&&a.constructor!=Number&&(i=!!a,a=0),a=a||0,i=i||!1,e.$timers||(e.$timers={}),e.$timers[n]||(e.$timers[n]={}),r.$timerID=r.$timerID||this.guid++;var l=function(){i&&this.inProgress||(this.inProgress=!0,(++o>a&&0!==a||!1===r.call(e,o))&&t.timer.remove(e,n,r),this.inProgress=!1)};l.$timerID=r.$timerID,e.$timers[n][r.$timerID]||(e.$timers[n][r.$timerID]=window.setInterval(l,s)),this.global[n]||(this.global[n]=[]),this.global[n].push(e)}},remove:function(t,e,s){var n,r=t.$timers;if(r){if(e){if(r[e]){if(s)s.$timerID&&(window.clearInterval(r[e][s.$timerID]),delete r[e][s.$timerID]);else for(var s in r[e])window.clearInterval(r[e][s]),delete r[e][s];for(n in r[e])break;n||(n=null,delete r[e])}}else for(e in r)this.remove(t,e,s);for(n in r)break;n||(t.$timers=null)}}}})}).call(this,s(1))},2055:function(t,e,s){"use strict";s.r(e),function(t){s.d(e,"nearBestPosition",function(){return a}),s.d(e,"transformToPrintable",function(){return i}),s.d(e,"getCurrencyValue",function(){return o}),s.d(e,"formatCurrency",function(){return l}),s.d(e,"formatNumberGantt",function(){return d}),s.d(e,"pad",function(){return c}),s.d(e,"getMillisInHours",function(){return u}),s.d(e,"getMillisInHoursMinutes",function(){return h}),s.d(e,"getMillisInDaysHoursMinutes",function(){return f}),s.d(e,"stopBubble",function(){return p}),s.d(e,"jsonErrorHandling",function(){return g}),s.d(e,"openBlackPopup",function(){return m}),s.d(e,"createBlackPage",function(){return v}),s.d(e,"getBlackPopup",function(){return T}),s.d(e,"closeBlackPopup",function(){return k}),s.d(e,"openIssueEditorInBlack",function(){return y}),s.d(e,"openBoardInBlack",function(){return S});var n=s(1288),r=s(962);function a(e,s,n){var r=e,a=s;if("object"!=typeof e&&(r=t("#"+e)),"object"!=typeof s&&(a=t("#"+s)),r){a.css("visibility","hidden");var i=!1;a.parents().each(function(){"static"!=t(this).css("position")&&(i=!0)});var o=i?r.position().left:r.offset().left,l=i?r.position().top:r.offset().top,d=r.outerHeight(),c=parseFloat(d);if(n)o+=(parseFloat(r.outerWidth())-parseFloat(a.outerWidth()))/2;var u=o,h=l+=parseFloat(c);o&&l&&(a.css("left",u),a.css("top",h)),a.offset().left>=t(window).width()-a.outerWidth()&&(u=t(window).width()-a.outerWidth()-0+"px",a.css("left",u)),a.offset().left<0&&(u="0px",a.css("left",u)),a.offset().top+a.outerHeight()>=t(window).height()-35&&a.outerHeight()<t(window).height()&&a.css("margin-top",-(r.outerHeight()+a.outerHeight())+"px"),a.css("visibility","visible")}}function i(t){for(var e in t){var s=t[e];"string"==typeof s&&(t[e]=(s+"").replace(/\n/g,"<br>"))}return t}function o(t){return Object(n.a)(t)?parseFloat(t.replaceAll(Number.groupingSeparator,"").replaceAll(Number.decimalSeparator,".").replace(/[^0123456789.]/,"")):NaN}function l(t){return d(t,Number.currencyFormat)}function d(t,e){e||(e="##0.00");for(var s=Number.decimalSeparator,n=Number.groupingSeparator,r=Number.minusSign,a="",i=!1,o=0;o<e.length;o++)if(-1=="0#-,.".indexOf(e.charAt(o)))a+=e.charAt(o);else{if(0!=o||"-"!=e.charAt(o))break;i=!0}var l="";for(o=e.length-1;o>=0&&-1=="0#-,.".indexOf(e.charAt(o));o--)l=e.charAt(o)+l;var d=new Number(t),c=!1;isNaN(d)&&(d=0,c=!0),"%"==l&&(d*=100);var u="";if(e.indexOf(".")>-1){var h=s,f=e.substring(e.lastIndexOf(".")+1);d=new Number(d.toFixed(f.length));var p=new String((d%1).toFixed(f.length));p=p.substring(p.lastIndexOf(".")+1);for(o=0;o<f.length;o++)if("#"==f.charAt(o)&&"0"!=p.charAt(o))h+=p.charAt(o);else if("#"==f.charAt(o)&&"0"==p.charAt(o)){if(!p.substring(o).match("[1-9]"))break;h+=p.charAt(o)}else"0"==f.charAt(o)&&(h+=p.charAt(o));u+=h}else d=Math.round(d);var g=Math.floor(d);d<0&&(g=Math.ceil(d));var m="";m=-1==e.indexOf(".")?e:e.substring(0,e.indexOf("."));var v="";if(0!=g||"#"!=m.substr(m.length-1)||c){var T=new String(Math.abs(g)),k=9999;-1!=m.lastIndexOf(",")&&(k=m.length-m.lastIndexOf(",")-1);var y=0;for(o=T.length-1;o>-1;o--)v=T.charAt(o)+v,++y==k&&0!=o&&(v=n+v,y=0);if(m.length>v.length){var S=m.indexOf("0");if(-1!=S)for(var _=m.length-S,b=m.length-v.length-1;v.length<_;){var w=m.charAt(b);","==w&&(w=n),v=w+v,b--}}}return v||-1===m.indexOf("0",m.length-1)||(v="0"),u=v+u,d<0&&i&&a.length>0?a=r+a:d<0&&(u=r+u),u.lastIndexOf(s)==u.length-1&&(u=u.substring(0,u.length-1)),u=a+u+l}function c(t,e,s){return(t+"").length<e?new Array(e-(""+t).length+1).join(s)+t:t}function u(t){if(!t)return"";var e=t>=0?1:-1,s=Math.floor(t/36e5);return(e>0?"":"-")+c(s,2,"0")}function h(t){if("number"!=typeof t)return"";var e=t>=0?1:-1;t=Math.abs(t);var s=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);return(e>0?"":"-")+c(s,1,"0")+":"+c(n,2,"0")}function f(t){if(!t)return"";var e=t>=0?1:-1;t=Math.abs(t);var s=Math.floor(t/r.b),n=Math.floor(t%r.b/36e5),a=Math.floor((t-s*r.b-36e5*n)/6e4);return(e>=0?"":"-")+(s>0?s+"  ":"")+c(n,1,"0")+":"+c(a,2,"0")}function p(e){return t.browser.msie&&event?(event.cancelBubble=!0,event.returnValue=!1):e&&(e.stopPropagation(),e.preventDefault()),!1}function g(e){if(!e.ok)for(var s in e.message&&alert("ERROR:\n"+e.message),e.clientEntryErrors){var n=e.clientEntryErrors[s];t(":input[name="+n.name+"]").createErrorAlert(n.error)}}function m(e,s,n,r,a){a||(a="bwinPopup"),s||(s="900px"),n||(n="730px"),t("#__blackpopup__").remove();var i=t("<div>").attr("id","__blackpopup__");i.css({position:"fixed",top:0,left:0,width:"100%",height:"100%",textAlign:"center"}),window.name!=a&&i.css({backgroundImage:"url('"+contextPath+"/applications/teamwork/images/black_70.png')"}),i.append("<iframe id='"+a+"' name='"+a+"' frameborder='0'></iframe>"),i.bringToFront(),i.bind("close",function(){i.slideUp(300,function(){i.remove(),"function"==typeof r&&r()})}),i.bind("destroy",function(){i.remove()}),i.find("iframe:first").attr("src",e).css({width:s,height:n,top:100,border:"8px solid #909090",backgroundColor:"#ffffff"});var o=t("<div>").css({width:s,position:"relative",height:"5px",textAlign:"right",margin:"auto"});o.append("<img src=\"res/closeBig.png\" style='cursor:pointer;position:absolute;right:-40px;top:30px;'>"),o.find("img:first").click(function(){i.trigger("close")}),i.prepend(o),t("body").append(i)}function v(e,s,n){e||(e="900px"),s||(s="730px"),t("#__blackpopup__").remove();var r=t("<div>").attr("id","__blackpopup__");r.css({position:"fixed",top:"0px",paddingTop:"50px",left:0,width:"100%",height:"100%",backgroundImage:"url('res/img/black_70.png')"}),r.append("<div id='bwinPopupd' name='bwinPopupd'></div>"),r.bringToFront();var a=r.find("#bwinPopupd");a.css({width:e,height:s,top:10,"-moz-box-shadow":"1px 1px 6px #333333",overflow:"auto","-webkit-box-shadow":"1px 1px 6px #333333",border:"8px solid #777",backgroundColor:"#fff",margin:"auto"});var i=t("<div>").css({width:e,position:"relative",height:"0px",textAlign:"right",margin:"auto"}),o=t("<img src='res/closeBig.png' style='cursor:pointer;position:absolute;right:-40px;top:5px;' title='close'>");return i.append(o),o.click(function(){r.trigger("close")}),r.prepend(i),t("body").append(r),r.bind("close",function(){r.slideUp(300,function(){r.remove(),"function"==typeof n&&n()})}),r.bind("destroy",function(){r.remove()}),a}function T(){var e=t("#__blackpopup__");return"undefined"!=typeof top&&(e=window.parent.$("#__blackpopup__")),e}function k(){T().trigger("close")}function y(e,s,n){s||(s="ED");var r=contextPath+"/applications/teamwork/issue/issueEditor.jsp?CM="+s+"&OBJID="+e;n&&(r+=n),m(r,1020,t(window).height()-50,function(){t("#"+e).effect("highlight",{color:"yellow"},1500)})}function S(e,s,n,r){s||(s="ED");var a=contextPath+"/applications/teamwork/board/boardEditor.jsp?CM="+s+"&OBJID="+e;n&&(a+=n),m(a,t(window).width()-100,t(window).height()-50,r)}}.call(this,s(1))},2056:function(t,e){Date.$VERSION=1.02,Date.LZ=function(t){return(t<0||t>9?"":"0")+t},Date.monthNames=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Date.monthAbbreviations=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Date.dayNames=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"),Date.dayAbbreviations=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),Date.preferAmericanFormat=!0,Date.firstDayOfWeek=0,Date.defaultFormat="dd/MM/yyyy",Date.prototype.getFullYear||(Date.prototype.getFullYear=function(){var t=this.getYear();return t<1900?t+1900:t}),Date.parseString=function(t,e){if(void 0===e||null==e||""==e){for(var s=new Array(Date.defaultFormat,"y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM"),n=new Array("M/d/y","M-d-y","M.d.y","M/d","M-d"),r=new Array("d/M/y","d-M-y","d.M.y","d/M","d-M"),a=new Array(s,Date.preferAmericanFormat?n:r,Date.preferAmericanFormat?r:n),i=0;i<a.length;i++)for(var o=a[i],l=0;l<o.length;l++){var d=Date.parseString(t,o[l]);if(null!=d)return d}return null}this.isInteger=function(t){for(var e=0;e<t.length;e++)if(-1=="1234567890".indexOf(t.charAt(e)))return!1;return!0},this.getInt=function(t,e,s,n){for(var r=n;r>=s;r--){var a=t.substring(e,e+r);if(a.length<s)return null;if(this.isInteger(a))return a}return null},this.decodeShortcut=function(t){var e=t.trim().toUpperCase(),s=new Date;if(s.clearTime(),["NOW","N"].indexOf(e)>=0)s=new Date;else if(["TODAY","T"].indexOf(e)>=0);else if(["YESTERDAY","Y"].indexOf(e)>=0)s.setDate(s.getDate()-1);else if(["TOMORROW","TO"].indexOf(e)>=0)s.setDate(s.getDate()+1);else if(["W","TW","WEEK","THISWEEK","WEEKSTART","THISWEEKSTART"].indexOf(e)>=0)s.setFirstDayOfThisWeek();else if(["LW","LASTWEEK","LASTWEEKSTART"].indexOf(e)>=0)s.setFirstDayOfThisWeek(),s.setDate(s.getDate()-7);else if(["NW","NEXTWEEK","NEXTWEEKSTART"].indexOf(e)>=0)s.setFirstDayOfThisWeek(),s.setDate(s.getDate()+7);else if(["M","TM","MONTH","THISMONTH","MONTHSTART","THISMONTHSTART"].indexOf(e)>=0)s.setDate(1);else if(["LM","LASTMONTH","LASTMONTHSTART"].indexOf(e)>=0)s.setDate(1),s.setMonth(s.getMonth()-1);else if(["NM","NEXTMONTH","NEXTMONTHSTART"].indexOf(e)>=0)s.setDate(1),s.setMonth(s.getMonth()+1);else if(["Q","TQ","QUARTER","THISQUARTER","QUARTERSTART","THISQUARTERSTART"].indexOf(e)>=0)s.setDate(1),s.setMonth(3*Math.floor(s.getMonth()/3));else if(["LQ","LASTQUARTER","LASTQUARTERSTART"].indexOf(e)>=0)s.setDate(1),s.setMonth(3*Math.floor(s.getMonth()/3)-3);else if(["NQ","NEXTQUARTER","NEXTQUARTERSTART"].indexOf(e)>=0)s.setDate(1),s.setMonth(3*Math.floor(s.getMonth()/3)+3);else if(/^-?[0-9]+[DWMY]$/.test(e)){var n=e.substr(e.length-1),r=parseInt(e.substr(0,e.length-1));"W"==n?s.setDate(s.getDate()+7*r):"M"==n?s.setMonth(s.getMonth()+r):"Y"==n&&s.setYear(s.getYear()+r)}else s=void 0;return s};var c=this.decodeShortcut(t);if(c)return c;t+="",e+="";for(var u,h,f=0,p=0,g="",m="",v=(new Date).getFullYear(),T=1,k=1,y=0,S=0,_=0,b="";p<e.length;){for(g=e.charAt(p),m="";e.charAt(p)==g&&p<e.length;)m+=e.charAt(p++);if("yyyy"==m||"yy"==m||"y"==m){if("yyyy"==m&&(u=4,h=4),"yy"==m&&(u=2,h=2),"y"==m&&(u=2,h=4),null==(v=this.getInt(t,f,u,h)))return null;f+=v.length,2==v.length&&(v=v>70?v-0+1900:v-0+2e3)}else if("MMM"==m||"MMMM"==m){T=0;var w="MMMM"==m?Date.monthNames.concat(Date.monthAbbreviations):Date.monthAbbreviations;for(i=0;i<w.length;i++){var E=w[i];if(t.substring(f,f+E.length).toLowerCase()==E.toLowerCase()){T=i%12+1,f+=E.length;break}}if(T<1||T>12)return null}else if("E"==m||"EE"==m||"EEE"==m||"EEEE"==m)for(w="EEEE"==m?Date.dayNames:Date.dayAbbreviations,i=0;i<w.length;i++){var x=w[i];if(t.substring(f,f+x.length).toLowerCase()==x.toLowerCase()){f+=x.length;break}}else if("MM"==m||"M"==m){if(null==(T=this.getInt(t,f,m.length,2))||T<1||T>12)return null;f+=T.length}else if("dd"==m||"d"==m){if(null==(k=this.getInt(t,f,m.length,2))||k<1||k>31)return null;f+=k.length}else if("hh"==m||"h"==m){if(null==(y=this.getInt(t,f,m.length,2))||y<1||y>12)return null;f+=y.length}else if("HH"==m||"H"==m){if(null==(y=this.getInt(t,f,m.length,2))||y<0||y>23)return null;f+=y.length}else if("KK"==m||"K"==m){if(null==(y=this.getInt(t,f,m.length,2))||y<0||y>11)return null;f+=y.length,y++}else if("kk"==m||"k"==m){if(null==(y=this.getInt(t,f,m.length,2))||y<1||y>24)return null;f+=y.length,y--}else if("mm"==m||"m"==m){if(null==(S=this.getInt(t,f,m.length,2))||S<0||S>59)return null;f+=S.length}else if("ss"==m||"s"==m){if(null==(_=this.getInt(t,f,m.length,2))||_<0||_>59)return null;f+=_.length}else if("a"==m){if("am"==t.substring(f,f+2).toLowerCase())b="AM";else{if("pm"!=t.substring(f,f+2).toLowerCase())return null;b="PM"}f+=2}else{if(t.substring(f,f+m.length)!=m)return null;f+=m.length}}if(f!=t.length)return null;if(2==T)if(v%4==0&&v%100!=0||v%400==0){if(k>29)return null}else if(k>28)return null;return(4==T||6==T||9==T||11==T)&&k>30?null:(y<12&&"PM"==b?y=y-0+12:y>11&&"AM"==b&&(y-=12),new Date(v,T-1,k,y,S,_))},Date.isValid=function(t,e){return null!=Date.parseString(t,e)},Date.prototype.isBefore=function(t){return null!=t&&this.getTime()<t.getTime()},Date.prototype.isAfter=function(t){return null!=t&&this.getTime()>t.getTime()},Date.prototype.equals=function(t){return null!=t&&this.getTime()==t.getTime()},Date.prototype.equalsIgnoreTime=function(t){if(null==t)return!1;var e=new Date(this.getTime()).clearTime(),s=new Date(t.getTime()).clearTime();return e.getTime()==s.getTime()},Date.prototype.format=function(t){t||(t=Date.defaultFormat),t+="";var e="",s=0,n="",r="",a=this.getFullYear()+"",i=this.getMonth()+1,o=this.getDate(),l=this.getDay(),d=this.getHours(),c=this.getMinutes(),u=this.getSeconds(),h=new Object;for(a.length<4&&(a=""+(+a+1900)),h.y=""+a,h.yyyy=a,h.yy=a.substring(2,4),h.M=i,h.MM=Date.LZ(i),h.MMM=Date.monthAbbreviations[i-1],h.MMMM=Date.monthNames[i-1],h.d=o,h.dd=Date.LZ(o),h.E=Date.dayAbbreviations[l],h.EE=Date.dayAbbreviations[l],h.EEE=Date.dayAbbreviations[l],h.EEEE=Date.dayNames[l],h.H=d,h.HH=Date.LZ(d),h.h=0==d?12:d>12?d-12:d,h.hh=Date.LZ(h.h),h.K=h.h-1,h.k=h.H+1,h.KK=Date.LZ(h.K),h.kk=Date.LZ(h.k),h.a=d>11?"PM":"AM",h.m=c,h.mm=Date.LZ(c),h.s=u,h.ss=Date.LZ(u);s<t.length;){for(n=t.charAt(s),r="";t.charAt(s)==n&&s<t.length;)r+=t.charAt(s++);void 0!==h[r]?e+=h[r]:e+=r}return e},Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]},Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]},Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]},Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.add=function(t,e){if(void 0===t||null==t||void 0===e||null==e)return this;if(e=+e,"y"==t)this.setFullYear(this.getFullYear()+e);else if("M"==t)this.setMonth(this.getMonth()+e);else if("d"==t)this.setDate(this.getDate()+e);else if("w"==t)for(var s=e>0?1:-1;0!=e;){for(this.add("d",s);0==this.getDay()||6==this.getDay();)this.add("d",s);e-=s}else"h"==t?this.setHours(this.getHours()+e):"m"==t?this.setMinutes(this.getMinutes()+e):"s"==t&&this.setSeconds(this.getSeconds()+e);return this},Date.prototype.toInt=function(){return 1e4*this.getFullYear()+100*(this.getMonth()+1)+this.getDate()},Date.fromInt=function(t){var e=parseInt(t/1e4),s=parseInt((t-1e4*e)/100),n=parseInt(t-1e4*e-100*s);return new Date(e,s-1,n,12,0,0)},Date.prototype.isHoliday=function(){return isHoliday(this)},Date.prototype.isToday=function(){return this.toInt()==(new Date).toInt()},Date.prototype.incrementDateByWorkingDays=function(t){for(var e=Math.abs(t);e>0;)this.setDate(this.getDate()+(t>0?1:-1)),this.isHoliday()||e--;return this},Date.prototype.distanceInWorkingDays=function(t){var e=new Date(this.getTime());e.setHours(23,59,59,999);var s=0,n=new Date(t.getTime());n.setHours(23,59,59,999);for(var r=n.getTime();e.getTime()<=r;)s+=isHoliday(e)?0:1,e.setDate(e.getDate()+1);return s},Date.prototype.setFirstDayOfThisWeek=function(t){t||(t=Date.firstDayOfWeek),this.setDate(this.getDate()-this.getDay()+t-(0==this.getDay()&&0!=t?7:0))}},2057:function(t,e,s){"use strict";(function(t){var n=s(1091),r=s(963);e.a=class{constructor(e){this.master=e,this.gridified=t.gridify(t.JST.createFromTemplate({},"TASKSEDITHEAD")),this.element=this.gridified.find(".gdfTable").eq(1)}fillEmptyLines(){new n.TaskFactory;for(var e=30-this.element.find(".taskEditRow").size(),s=0;s<e;s++){var r=t.JST.createFromTemplate({},"TASKEMPTYROW");this.master,this.element.append(r)}}addTask(e,s,n){this.element.find("[taskId="+e.id+"]").remove();var r=t.JST.createFromTemplate(e,"TASKROW");if(e.rowElement=r,this.bindRowEvents(e,r),e.isNode&&r.find(".fa.fa-pencil").remove(),"number"!=typeof s){var a=this.element.find(".emptyRow:first");a.size()>0?a.replaceWith(r):this.element.append(r)}else{var i=this.element.find("tr.taskEditRow").eq(s);i.size()>0?i.before(r):this.element.append(r)}return n&&(e.collapsed&&r.find(".exp-controller").removeClass("exp"),this.master.getCollapsedDescendant().indexOf(e)>=0&&r.hide()),r}refreshExpandStatus(t){if(t){var e=t.getChildren();e.length>0&&0==t.rowElement.has(".expcoll").length?t.rowElement.find(".exp-controller").addClass("expcoll exp"):0==e.length&&t.rowElement.has(".expcoll").length>0&&t.rowElement.find(".exp-controller").removeClass("expcoll exp");var s=t.getParent();s&&0==s.rowElement.has(".expcoll").length&&s.rowElement.find(".exp-controller").addClass("expcoll exp")}}refreshTaskRow(t){var e=t.rowElement;e.find(".taskRowIndex").html(t.getRow()+1),e.find(".indentCell").css("padding-left",10*t.level+18),e.find("[name=name]").val(t.name),e.find("[name=code]").val(t.code),e.find("[status]").attr("status",t.status),e.find("[name=duration]").val(t.duration),e.find("[name=start]").val(new Date(t.start).format()).updateOldValue(),e.find("[name=end]").val(new Date(t.end).format()).updateOldValue(),e.find("[name=depends]").val(t.depends),e.find(".taskAssigs").html(t.getAssigsString())}redraw(){for(var t=0;t<this.master.tasks.length;t++)this.refreshTaskRow(this.master.tasks[t])}reset(){this.element.find("[taskid]").remove()}bindRowEvents(t,e){var s=this;this.master.canWrite&&t.canWrite?t.isNode||s.bindRowInputEvents(t,e):e.find("input").attr("readonly",!0),t.isNode&&s.bindRowExpandEvents(t,e),t.isNode||e.find(".edit").click(function(){s.openFullEditor(t,e)})}bindRowExpandEvents(e,s){var n=this;s.find(".exp-controller").click(function(){var e=t(this),s=e.closest("[taskid]").attr("taskid"),r=n.master.getTask(s),a=r.getDescendant();e.toggleClass("exp"),r.collapsed=!e.is(".exp");var i=n.master.getCollapsedDescendant();if(e.is(".exp"))for(var o=0;o<a.length;o++){var l=a[o];i.indexOf(l)>=0||l.rowElement.show()}else for(o=0;o<a.length;o++)a[o].rowElement.hide();n.master.gantt.refreshGantt()})}bindRowInputEvents(e,s){var n=this;s.find(".date").each(function(){var s=t(this);e.depends&&"start"==s.attr("name")?s.attr("readonly","true"):s.removeAttr("readonly"),s.click(function(){t(this).dateField({inputField:s})}),s.blur(function(e){var s=t(this);if(s.isValueChanged())if(Date.isValid(s.val())){e=Date.parseString(s.val());var r=s.closest("tr").attr("taskId"),a=n.master.getTask(r),i=a.start,o=a.end;"start"==s.attr("name")?((i=e.getTime())>=o&&(o=new Date(i).add("d",a.duration).getTime()),n.master.beginTransaction(),n.master.moveTask(a,i),n.master.endTransaction()):(i>=(o=e.getTime())&&(o=i),o+=72e6,n.master.beginTransaction(),n.master.changeTaskDates(a,i,o),n.master.endTransaction()),s.updateOldValue()}else alert(GanttMaster.messages.INVALID_DATE_FORMAT),s.val(s.getOldValue())})}),s.find("input:not(.date)").focus(function(){t(this).updateOldValue()}).blur(function(){var e=t(this);if(e.isValueChanged()){var s=e.closest("tr"),a=s.attr("taskId"),i=n.master.getTask(a),o=e.attr("name");if(n.master.beginTransaction(),"depends"==o){if(i.depends,i.depends=e.val(),i.depends?s.find("[name=start]").attr("readonly","true"):s.find("[name=start]").removeAttr("readonly"),n.master.updateLinks(i)){for(var l=i.getSuperiors(),d=0;d<l.length&&l[d].from.synchronizeStatus();d++);n.master.changeTaskDates(i,i.start,i.end)}}else if("duration"==o){var c=i.duration;c=parseInt(e.val())||1,e.val(c);var u=Object(r.b)(i.start,c);n.master.changeTaskDates(i,i.start,u)}else"name"==o&&""==e.val()?i.deleteTask():i[o]=e.val();n.master.endTransaction()}}),s.find("input").keydown(function(e){var s=t(this).parent(),n=s.parent(),r=s.prevAll("td").size();switch(e.keyCode){case 37:0==this.selectionEnd&&s.prev().find("input").focus();break;case 39:this.selectionEnd==this.value.length&&s.next().find("input").focus();break;case 38:(a=n.prev().find("td").eq(r).find("input")).size()>0&&a.focus();break;case 40:var a,i=n.next();(a=i.find("td").eq(r).find("input")).size()>0?a.focus():i.click()}return!0}).focus(function(){t(this).closest("tr").click()}),s.find(".taskStatus").click(function(){var e=t(this),s=e.closest("[taskid]").attr("taskid"),r=n.master.getTask(s),a=t.JST.createFromTemplate({},"CHANGE_STATUS");a.find("[status="+r.status+"]").addClass("selected"),a.find(".taskStatus").click(function(s){s.stopPropagation();var i=t(this).attr("status");a.remove(),n.master.beginTransaction(),r.changeStatus(i),n.master.endTransaction(),e.attr("status",r.status)}),e.oneTime(3e3,"hideChanger",function(){a.remove()}),e.after(a)}),s.click(function(){var e=t(this);e.closest("table").find(".rowSelected").removeClass("rowSelected"),e.addClass("rowSelected"),n.master.currentTask=n.master.getTask(e.attr("taskId")),n.master.gantt.synchHighlight();var s=e.position().top;s>n.element.parent().height()?e.offsetParent().scrollTop(s-n.element.parent().height()+100):s<40&&e.offsetParent().scrollTop(e.offsetParent().scrollTop()-40+s)})}openFullEditor(t,e){Promise.resolve().then(function(){var n=[s(703)];(function(s){(new s).showTaskModal(t),e.attr("taskId")}).apply(null,n)}).catch(s.oe)}}}).call(this,s(1))},2058:function(t,e,s){"use strict";(function(t){var n=s(962),r=s(963);e.a=class{constructor(t,e,s,n,r){this.master=n,this.element,this.highlightBar,this.svg,this.tasksGroup,this.linksGroup,this.zoom=t,this.minGanttSize=r,this.includeToday=!0,this.showCriticalPath=!1,this.zoomLevels=["d","w","m","q","s","y"],this.element=this.create(t,e,s),this.linkOnProgress=!1,this.rowHeight=30,this.taskHeight=20,this.taskVertOffset=(this.rowHeight-this.taskHeight)/2}zoomGantt(t){var e=this.zoom,s=this.zoomLevels.indexOf(e+""),n=s;(n=t?s<=0?0:s-1:s>=this.zoomLevels.length-1?this.zoomLevels.length-1:s+1)!=s&&(e=this.zoomLevels[n],this.zoom=e,this.refreshGantt())}create(e,s,r){var a=this;function i(e,s,n,r){var a=t("<th>").html(e).attr("colSpan",s);return r&&a.width(r),n&&a.addClass(n),a}function o(e,s,n){var r=t("<td>").html("").attr("colSpan",e).addClass("ganttBodyCell");return s&&r.addClass("end"),n&&r.addClass(n),r}if(this.includeToday){var l=(new Date).getTime();s=s>l?l:s,r=r<l?l:r}var d=function(t,e,s){var n=new Date(e),r=new Date(s);return"d"==t?(n.setHours(0,0,0,0),r.setHours(23,59,59,999),n.setFirstDayOfThisWeek(),r.setFirstDayOfThisWeek(),r.setDate(r.getDate()+6)):"w"==t?(n.setHours(0,0,0,0),r.setHours(23,59,59,999),n.setFirstDayOfThisWeek(),r.setFirstDayOfThisWeek(),r.setDate(r.getDate()+6)):"m"==t?(n.setHours(0,0,0,0),r.setHours(23,59,59,999),n.setDate(1),r.setDate(1),r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1)):"q"==t?(n.setHours(0,0,0,0),r.setHours(23,59,59,999),n.setDate(1),n.setMonth(3*Math.floor(n.getMonth()/3)),r.setDate(1),r.setMonth(3*Math.floor(r.getMonth()/3)+3),r.setDate(r.getDate()-1)):"s"==t?(n.setHours(0,0,0,0),r.setHours(23,59,59,999),n.setDate(1),n.setMonth(6*Math.floor(n.getMonth()/6)),r.setDate(1),r.setMonth(6*Math.floor(r.getMonth()/6)+6),r.setDate(r.getDate()-1)):"y"==t&&(n.setHours(0,0,0,0),r.setHours(23,59,59,999),n.setDate(1),n.setMonth(0),r.setDate(1),r.setMonth(12),r.setDate(r.getDate()-1)),{start:n.getTime(),end:r.getTime()}}(e,s,r);return a.startMillis=d.start,a.endMillis=d.end,a.originalStartMillis=s,a.originalEndMillis=r,function(e,s,r){var l,d=t("<tr>").addClass("ganttHead1"),c=t("<tr>").addClass("ganttHead2"),u=t("<tr>").addClass("ganttBody");function h(t,e){for(var n=new Date(s);n.getTime()<=r;)t(n);for(n=new Date(s);n.getTime()<=r;)e(n)}"y"==e?(l=Math.floor((r-s)/15552e6*100),h(function(t){d.append(i(t.format("yyyy"),2)),t.setFullYear(t.getFullYear()+1)},function(t){var e=Math.floor(t.getMonth()/6)+1;c.append(i(GanttMaster.messages.GANTT_SEMESTER_SHORT+e,1,null,100)),u.append(o(1,2==e)),t.setMonth(t.getMonth()+6)})):"s"==e?(l=Math.floor((r-s)/7776e6*100),h(function(t){var e=new Date(t.getTime());e.setMonth(e.getMonth()+6),e.setDate(e.getDate()-1),d.append(i(t.format("MMM")+" - "+e.format("MMM yyyy"),2)),t.setMonth(t.getMonth()+6)},function(t){var e=Math.floor(t.getMonth()/3)+1;c.append(i(GanttMaster.messages.GANTT_QUARTER_SHORT+e,1,null,100)),u.append(o(1,e%2==0)),t.setMonth(t.getMonth()+3)})):"q"==e?(l=Math.floor((r-s)/2592e6*300),h(function(t){var e=new Date(t.getTime());e.setMonth(e.getMonth()+3),e.setDate(e.getDate()-1),d.append(i(t.format("MMM")+" - "+e.format("MMM yyyy"),3)),t.setMonth(t.getMonth()+3)},function(t){var e=t.format("MMM");c.append(i(e,1,null,300)),u.append(o(1,t.getMonth()%3==2)),t.setMonth(t.getMonth()+1)})):"m"==e?(l=Math.floor((r-s)/864e5*25),h(function(t){var e=t.getTime();t.setMonth(t.getMonth()+1);var s=Math.round((t.getTime()-e)/864e5);d.append(i(new Date(e).format("MMMM yyyy"),s))},function(t){c.append(i(t.format("d"),1,Object(n.a)(t)?"holyH":null,25));var e=new Date(t.getTime());e.setDate(t.getDate()+1),u.append(o(1,1==e.getDate(),Object(n.a)(t)?"holy":null)),t.setDate(t.getDate()+1)})):"w"==e?(l=Math.floor((r-s)/864e5*40),h(function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+6),d.append(i(t.format("MMM d")+" - "+e.format("MMM d'yy"),7)),t.setDate(t.getDate()+7)},function(t){c.append(i(t.format("EEEE").substr(0,1),1,Object(n.a)(t)?"holyH":null,40)),u.append(o(1,t.getDay()%7==(a.master.firstDayOfWeek+6)%7,Object(n.a)(t)?"holy":null)),t.setDate(t.getDate()+1)})):"d"==e?(l=Math.floor((r-s)/864e5*100),h(function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+6),d.append(i(t.format("MMMM d")+" - "+e.format("MMMM d yyyy"),7)),t.setDate(t.getDate()+7)},function(t){c.append(i(t.format("EEE d"),1,Object(n.a)(t)?"holyH":null,100)),u.append(o(1,t.getDay()%7==(a.master.firstDayOfWeek+6)%7,Object(n.a)(t)?"holy":null)),t.setDate(t.getDate()+1)})):console.error("Wrong level "+e),l=Math.max(l,a.minGanttSize);var f=t("<table cellspacing=0 cellpadding=0>");f.append(d).append(c).css({width:l});var p=f.clone().addClass("fixHead");f.append(u).addClass("ganttTable");var g=a.master.editor.element.height();f.height(g);var m=t("<div>");m.addClass("gantt unselectable").attr("unselectable","true").css({position:"relative",width:l}),m.append(f),m.append(p);var v=t("<div>").addClass("ganttHighLight");return m.append(v),a.highlightBar=v,m.svg({settings:{class:"ganttSVGBox"},onLoad:function(e){var n=e.defs("myDefs");e.pattern(n,"extDep",0,0,10,10,0,0,10,10,{patternUnits:"userSpaceOnUse"}),a.svg=e,t(e).addClass("ganttSVGBox");for(var i=e.group("gridGroup"),o=40;o<=g;o+=a.rowHeight)e.line(i,0,o,"100%",o,{class:"ganttLinesSVG"});if(a.linksGroup=e.group("linksGroup"),a.tasksGroup=e.group("tasksGroup"),a.fx=l/(r-s),(new Date).getTime()>a.startMillis&&(new Date).getTime()<a.endMillis){var d=Math.round(((new Date).getTime()-a.startMillis)*a.fx);e.line(i,d,0,d,"100%",{class:"ganttTodaySVG"})}}}),m}(e,d.start,d.end)}drawTask(e){var s=this;let n=e.rowElement;var a=n.position().top+n.offsetParent().scrollTop(),i=Math.round((e.start-s.startMillis)*s.fx);e.hasChild=e.isParent();var o=t(function(t,e){var n=s.svg,r=n.svg(s.tasksGroup,e.x,e.y,e.width,e.height,{class:"taskBox taskBoxSVG taskStatusSVG",status:t.status,taskid:t.id});if(n.rect(r,0,0,"100%","100%",{class:"taskLayout",rx:"2",ry:"2"}),n.rect(r,0,0,"100%","100%",{fill:"rgba(255,255,255,.3)"}),t.hasExternalDep&&n.rect(r,0,0,"100%","100%",{fill:"url(#extDep)"}),t.progress>0&&(n.rect(r,0,0,(t.progress>100?100:t.progress)+"%","100%",{rx:"2",ry:"2"}),e.width>50)){var a={fill:"#888","font-size":"10px",class:"textPerc teamworkIcons",transform:"translate(5)"};t.progress>100&&(a["font-weight"]="bold"),t.progress>90&&(a.transform="translate(-40)"),n.text(r,(t.progress>90?100:t.progress)+"%",(s.rowHeight-5)/2,(t.progress>100?"!!! ":"")+t.progress+"%",a)}return t.hasChild&&n.rect(r,0,0,"100%",3,{fill:"#000"}),t.startIsMilestone&&n.image(r,-9,e.height/2-9,18,18,s.master.resourceUrl+"milestone.png"),t.endIsMilestone&&n.image(r,"100%",e.height/2-9,18,18,s.master.resourceUrl+"milestone.png",{transform:"translate(-9)"}),n.text(r,"100%",18,t.name,{class:"taskLabelSVG",transform:"translate(20,-5)"}),t.level>0&&(n.circle(r,"0",e.height/2,e.height/3,{class:"taskLinkStartSVG linkHandleSVG",transform:"translate("+(-e.height/3-1)+")"}),n.circle(r,"100%",e.height/2,e.height/3,{class:"taskLinkEndSVG linkHandleSVG",transform:"translate("+(e.height/3+1)+")"})),r}(e,{x:i,y:a+s.taskVertOffset,width:Math.round((e.end-e.start)*s.fx),height:s.taskHeight}));e.ganttElement=o,s.showCriticalPath&&e.isCritical&&o.addClass("critical"),this.master.canWrite&&e.canWrite&&(o.click(function(e){e.stopPropagation(),s.element.find(".focused").removeClass("focused"),t(".ganttSVGBox .focused").removeClass("focused");var n=t(this);s.resDrop||n.addClass("focused"),s.resDrop=!1,t("body").off("click.focused").one("click.focused",function(){t(".ganttSVGBox .focused").removeClass("focused")})}).dblclick(function(){s.master.showTaskEditor(t(this).attr("taskid"))}).mouseenter(function(){var e=t(this);s.linkOnProgress?e.addClass("linkOver"):e.find(".linkHandleSVG").show()}).mouseleave(function(){t(this).removeClass("linkOver").find(".linkHandleSVG").hide()}).mouseup(function(e){t(":focus").blur()}).mousedown(function(){s.master.getTask(t(this).attr("taskId")).rowElement.click()}).dragExtedSVG(t(s.svg.root()),{canResize:this.master.canWrite&&e.canWrite,canDrag:!e.depends&&this.master.canWrite&&e.canWrite,startDrag:function(e){t(".ganttSVGBox .focused").removeClass("focused")},drag:function(s){t("[from="+e.id+"],[to="+e.id+"]").trigger("update")},drop:function(e){s.resDrop=!0;var n=t(this),r=s.master.getTask(n.attr("taskid")),a=Math.round(parseFloat(n.attr("x"))/s.fx+s.startMillis);s.master.beginTransaction(),s.master.moveTask(r,new Date(a)),s.master.endTransaction()},startResize:function(e){t(".ganttSVGBox .focused").removeClass("focused");var n=t(this),r=t(s.svg.text(parseInt(n.attr("x"))+parseInt(n.attr("width")+8),parseInt(n.attr("y")),"",{"font-size":"10px",fill:"red"}));o.data("textDur",r)},resize:function(n){var a=t(this),i=Math.round(parseFloat(a.attr("x"))/s.fx+s.startMillis),l=Math.round((parseFloat(a.attr("x"))+parseFloat(a.attr("width")))/s.fx+s.startMillis),d=Object(r.e)(i).distanceInWorkingDays(Object(r.c)(l));o.data("textDur").attr("x",parseInt(a.attr("x"))+parseInt(a.attr("width"))+8).html(d),t("[from="+e.id+"],[to="+e.id+"]").trigger("update")},stopResize:function(e){s.resDrop=!0;var n=o.data("textDur");n&&n.remove();var r=t(this),a=s.master.getTask(r.attr("taskid")),i=Math.round(parseFloat(r.attr("x"))/s.fx+s.startMillis),l=Math.round((parseFloat(r.attr("x"))+parseFloat(r.attr("width")))/s.fx+s.startMillis);s.master.beginTransaction(),s.master.changeTaskDates(a,new Date(i),new Date(l)),s.master.endTransaction()}}),o.find(".linkHandleSVG").mousedown(function(e){e.preventDefault(),e.stopPropagation();var n=t(this).closest(".taskBoxSVG"),r=t(s.svg.root()),a=r.offset();s.linkOnProgress=!0,s.linkFromEnd=t(this).is(".taskLinkEndSVG"),r.addClass("linkOnProgress");var i=parseFloat(n.attr("x"))+(s.linkFromEnd?parseFloat(n.attr("width")):0),o=parseFloat(n.attr("y"))+parseFloat(n.attr("height"))/2,l=s.svg.line(i,o,e.pageX-a.left-5,e.pageY-a.top-5,{class:"linkLineSVG"}),d=s.svg.circle(i,o,5,{class:"linkLineSVG"});r.bind("mousemove.linkSVG",function(t){var e=r.offset(),n=t.pageX-e.left,a=t.pageY-e.top,c=Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2));n-=10*(n-i)/c,a-=10*(a-o)/c,s.svg.change(l,{x2:n,y2:a}),s.svg.change(d,{cx:n,cy:a})}),t("body").one("mouseup.linkSVG",function(e){t(l).remove(),t(d).remove(),s.linkOnProgress=!1,r.removeClass("linkOnProgress"),t(s.svg.root()).unbind("mousemove.linkSVG");var a,i,o=t(e.target).closest(".taskBoxSVG");if(o&&o.attr("taskid")!=n.attr("taskid")&&(s.linkFromEnd?(a=s.master.getTask(o.attr("taskid")),i=s.master.getTask(n.attr("taskid"))):(i=s.master.getTask(o.attr("taskid")),a=s.master.getTask(n.attr("taskid"))),a&&i)){var c=a.rowElement.find("[name=depends]");c.val(c.val()+((c.val()+"").length>0?",":"")+(i.getRow()+1)),c.blur()}})})),s.redrawLinks()}addTask(t){this.originalEndMillis=this.originalEndMillis>t.end?this.originalEndMillis:t.end,this.originalStartMillis=this.originalStartMillis<t.start?this.originalStartMillis:t.start}drawLink(e,s,n){var r,a=this;function i(t){return t.ganttElement.position(),{left:parseFloat(t.ganttElement.attr("x")),top:parseFloat(t.ganttElement.attr("y")),width:parseFloat(t.ganttElement.attr("width")),height:parseFloat(t.ganttElement.attr("height"))}}r="start-to-start"==n?function(t,e){console.error("StartToStart not supported on SVG"),i(t),i(e)}(e,s):function(e,s,n){var r=a.svg,o=r.group(a.linksGroup,e.id+"-"+s.id);r.title(o,e.name+" -> "+s.name);var l=r.createPath();r.image(o,0,0,5,10,a.master.resourceUrl+"linkArrow.png"),r.path(o,l,{class:"taskLinkPathSVG"});var d=t(o).data({from:e,to:s}).attr({from:e.id,to:s.id}).on("update",function(){var e=t(this),s=e.data("from"),a=e.data("to"),o=i(s),l=i(a),d=(o.left,o.left+o.width),c=o.height/2+o.top,u=l.left,h=(l.left,l.width,l.height/2+l.top),f=u<d+2*n,p=c>h,g=p?-1:1,m=d+2*n>u?-1:1,v=e.find("image"),T=r.createPath();if(f){var k=g*(o.height/2-10+2);T.move(d,c).line(n,0,!0).arc(5,5,90,!1,!p,5,5*g,!0).line(0,k,!0).arc(5,5,90,!1,!p,-5,5*g,!0).line(2*m*n+(u-d),0,!0).arc(5,5,90,!1,p,-5,5*g,!0).line(0,(Math.abs(h-c)-20-Math.abs(k))*g-5,!0).arc(5,5,90,!1,p,5,5*g,!0).line(n,0,!0),v.attr({x:u-5,y:h-5-5})}else T.move(d,c).line((u-d)/2-5,0,!0).arc(5,5,90,!1,!p,5,5*g,!0).line(0,h-c-2*g*5+5,!0).arc(5,5,90,!1,p,5,5*g,!0).line((u-d)/2-5,0,!0),v.attr({x:u-5,y:h-5+5});e.find("path").attr({d:T.path()})}).trigger("update");return a.showCriticalPath&&e.isCritical&&s.isCritical&&d.addClass("critical"),d.addClass("linkGroup"),d}(e,s,10),this.master.canWrite&&(e.canWrite||s.canWrite)&&r.click(function(e){var s=t(this);e.stopPropagation(),a.element.find(".focused").removeClass("focused"),t(".ganttSVGBox .focused").removeClass("focused"),s=t(this),a.resDrop||s.addClass("focused"),a.resDrop=!1,t("body").off("click.focused").one("click.focused",function(){t(".ganttSVGBox .focused").removeClass("focused")})})}redrawLinks(){var e=this;this.element.stopTime("ganttlnksredr"),this.element.oneTime(60,"ganttlnksredr",function(){t("#linksSVG").empty();for(var s=[],n=(s=e.master.getCollapsedDescendant(),0);n<e.master.links.length;n++){var r=e.master.links[n];s.indexOf(r.from)>=0||s.indexOf(r.to)>=0||e.drawLink(r.from,r.to)}})}reset(){this.element.find(".linkGroup").remove(),this.element.find("[taskid]").remove()}redrawTasks(){for(var t=this.master.getCollapsedDescendant(),e=0;e<this.master.tasks.length;e++){var s=this.master.tasks[e];t.indexOf(s)>=0||this.drawTask(s)}}refreshGantt(){this.showCriticalPath&&this.master.computeCriticalPath();var t=this.element.parent(),e=t.scrollTop(),s=t.scrollLeft();if(this.element.remove(),!this.zoom){var n=Math.round((this.originalEndMillis-this.originalStartMillis)/864e5);this.zoom=this.zoomLevels[n<2?0:n<15?1:n<60?2:n<150?3:4]}var r=this.create(this.zoom,this.originalStartMillis,this.originalEndMillis);this.element=r,t.append(r),this.redrawTasks(),t.scrollTop(e),t.scrollLeft(s),this.synchHighlight()}fitGantt(){delete this.zoom,this.refreshGantt()}synchHighlight(){this.master.currentTask&&this.master.currentTask.ganttElement&&this.highlightBar.css("top",parseInt(this.master.currentTask.ganttElement.attr("y"))-this.taskVertOffset+"px")}centerOnToday(){var t=Math.round(((new Date).getTime()-this.startMillis)*this.fx)-30;this.element.parent().scrollLeft(t)}}}).call(this,s(1))},2059:function(t,e,s){"use strict";s.r(e);var n={};e.default=class{constructor(t){this.startTime=(new Date).getTime(),this.name=t,this.stop=function(){n[this.name]||(n[this.name]={millis:0,count:0}),n[this.name].millis+=(new Date).getTime()-this.startTime,n[this.name].count++},this.display=function(){console.debug(n[this.name])},this.reset=function(){delete n[this.name]}}reset(){n={}}displayAll(){var t="";for(var e in n){var s=n[e];t+=e+"                          ".substr(0,30-e.length)+"\t millis:"+s.millis+"\t count:"+s.count+"\n",s.millis}console.debug(t)}}},2060:function(t,e,s){var n=s(690);t.exports=(n.default||n).template({compiler:[8,">= 4.3.0"],main:function(t,e,s,n,r){return'<div class="container-fluid mainTask" data-rel="workflow" data-type="tab-content">\n\n  <div class="row">\n\n    <div class="col-sm-12">\n      <div id="file-manager-wrapper" class="box">\n\n        <div id="workSpace"\n          style="padding:0px; overflow-y:auto; overflow-x:hidden;border:1px solid #e5e5e5;position:relative;margin:0 5px">\n\n        </div>\n\n        <div id="taZone" style="display:none;" class="noprint">\n          <textarea rows="8" cols="150" id="ta">\n             {"tasks":[\n             {"id":-1,"name":"Gantt editor","code":"","level":0,"status":"STATUS_ACTIVE","canWrite":true,"start":1396994400000,"duration":21,"end":1399672799999,"startIsMilestone":true,"endIsMilestone":false,"collapsed":false,"assigs":[],"hasChild":true}\n             ,{"id":-2,"name":"coding","code":"","level":1,"status":"STATUS_ACTIVE","canWrite":true,"start":1396994400000,"duration":10,"end":1398203999999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"description":"","progress":0,"hasChild":true}\n             ,{"id":-3,"name":"gantt part","code":"","level":2,"status":"STATUS_ACTIVE","canWrite":true,"start":1396994400000,"duration":2,"end":1397167199999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"depends":"","hasChild":false}\n             ,{"id":-4,"name":"editor part","code":"","level":2,"status":"STATUS_SUSPENDED","canWrite":true,"start":1397167200000,"duration":4,"end":1397685599999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"depends":"3","hasChild":false}\n             ,{"id":-5,"name":"testing","code":"","level":1,"status":"STATUS_SUSPENDED","canWrite":true,"start":1398981600000,"duration":6,"end":1399672799999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"depends":"2:5","description":"","progress":0,"hasChild":true}\n             ,{"id":-6,"name":"test on safari","code":"","level":2,"status":"STATUS_SUSPENDED","canWrite":true,"start":1398981600000,"duration":2,"end":1399327199999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"depends":"","hasChild":false}\n             ,{"id":-7,"name":"test on ie","code":"","level":2,"status":"STATUS_SUSPENDED","canWrite":true,"start":1399327200000,"duration":3,"end":1399586399999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"depends":"6","hasChild":false}\n             ,{"id":-8,"name":"test on chrome","code":"","level":2,"status":"STATUS_SUSPENDED","canWrite":true,"start":1399327200000,"duration":2,"end":1399499999999,"startIsMilestone":false,"endIsMilestone":false,"collapsed":false,"assigs":[],"depends":"6","hasChild":false}\n             ],"selectedRow":0,"canWrite":true,"canWriteOnParent":true}\n           </textarea>\n\n          <button class=\'btnLoadGanttFromServer\'>load</button>\n        </div>\n\n        <style>\n          .resEdit {\n            padding: 15px;\n          }\n\n          .resLine {\n            width: 95%;\n            padding: 3px;\n            margin: 5px;\n            border: 1px solid #d0d0d0;\n          }\n\n          body {\n            overflow: hidden;\n          }\n\n          .ganttButtonBar h1 {\n            color: #000000;\n            font-weight: bold;\n            font-size: 28px;\n            margin-left: 10px;\n          }\n        </style>\n\n        <form id="gimmeBack" style="display:none;" action="../gimmeBack.jsp" method="post" target="_blank">\n          <input type="hidden" name="prj" id="gimBaPrj"></form>\n\n        <script type="text/javascript">\n\n          var ge;  //this is the hugly but very friendly global var for the gantt editor\n          // $(function() {\n          //   /*/debug time scale\n          //   $(".splitBox2").mousemove(function(e){\n          //     var x=e.clientX-$(this).offset().left;\n          //     var mill=Math.round(x/(ge.gantt.fx) + ge.gantt.startMillis)\n          //     $("#ndo").html(x+" "+new Date(mill))\n          //   });*/\n          // });\n        <\/script>\n\n        <div id="gantEditorTemplates" style="display:none;">\n          <div class="__template__" type="GANTBUTTONS">\n            \x3c!--\n            <div class="ganttButtonBar noprint">\n              <div class="buttons">\n              <button class="btn textual addWorkflowTask" title="Insert Node/task"><i class="fa fa-plus"></i> Add task</button>\n\n              <button class="btn btnAddGroup">\n                <i class="fa fa-plus"></i> Add group\n              </button>\n\n              <button style="display:none;" class="btn textual btnAddBelowCurrentTask" title="insert below"><i class="fa fa-level-up"></i></button>\n              <span class="ganttButtonSeparator"></span>\n              <button style="display:none;" class="btn textual btnIndentTask" title="indent task"><i class="fa fa-long-arrow-right"></i></button>\n              <button style="display:none;" class="btn textual btnOutdentTask" title="unindent task"><i class="fa fa-long-arrow-left"></i></button>\n              <span style="display:none;" class="ganttButtonSeparator"></span>\n\n              <button class="btn textual btnZoomOut" title="zoom out"><i class="fa fa-search-minus"></i></button>\n              <button class="btn textual btnZoomIn" title="zoom in"><i class="fa fa-search-plus"></i></button>\n\n              <button class="btn btn-filter-tasks" title="Filter"><i class="fa fa-filter"></i></button>\n\n              <span class="ganttButtonSeparator"></span>\n              <button class="btn textual btnDeleteTask" title="delete" disabled="true"><i class="fa fa-trash"></i></button>\n              <span class="ganttButtonSeparator" style="display:none;"></span>\n              <button style="display:none;" class="btn textual btnPrint" title="print"><i class="fa fa-print"></i></button>\n              <span class="ganttButtonSeparator" style="display:none;"></span>\n              <button style="display:none;" class="btn textual btnCriticalPath" title="Critical Path"><i class="far fa-code-fork"></i></button>\n              </div>\n            </div>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="TASKSEDITHEAD">\n            \x3c!--\n          <table class="gdfTable" cellspacing="0" cellpadding="0">\n            <thead>\n            <tr style="height:45px">\n              <th class="gdfColHeader" style="width:38px;"></th>\n              <th class="gdfColHeader gdfResizable" style="width:300px; text-align:center;">Task</th>\n              <th class="gdfColHeader gdfResizable" style="width:140px; text-align:center;">Status</th>\n              <th class="gdfColHeader gdfResizable" style="width:180px; text-align:center;">Responsible</th>\n              <th class="gdfColHeader gdfResizable" style="width:80px; text-align:center;">Start</th>\n              <th class="gdfColHeader gdfResizable" style="width:80px; text-align:center;">End</th>\n              <th class="gdfColHeader gdfResizable" style="width:50px; text-align:center;">Dur.</th>\n            </tr>\n            </thead>\n          </table>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="TASKROW">\n            \x3c!--\n          <tr taskId="(#=obj.id#)" data-user-id="(#=obj.ownerId#)" class="taskEditRow" level="(#=level#)">\n            <th class="gdfCell edit" align="right" style="cursor:pointer;"><span class="taskRowIndex">(#=obj.getRow()+1#)</span> <i class="fa fa-pencil" style="font-size:12px; float: right; top: 4px; right: 2px; position: relative;" ></i>\n\n            </th>\n\n            <div class="taskStatus cvcColorSquare" status="(#=obj.status#)" style="display:none;"></div>\n\n            <td class="gdfCell indentCell" style="padding-left:(#=obj.level*10#)px;">\n              <div class="(#=obj.isParent()?\'exp-controller expcoll exp\':\'exp-controller\'#)" align="center"></div>\n              <input type="text" name="name" value="(#=obj.name#)" readonly="true">\n            </td>\n\n            <td class="gdfCell noClip" align="left">\n              <div style="width:20px; height:20px; display:block; margin-right: 6px;\n                float: left; background-color:#(#=obj.stateColor#)"></div>\n              <span style="width: 80%;\n                display:block;\n                white-space: nowrap;\n                overflow: hidden;\n                float: left;\n                text-overflow: ellipsis;">(#=obj.stateName#)</span>\n            </td>\n\n            <td class="gdfCell taskAssigs">(#=obj.getAssigsString()#)</td>\n\n            <td class="gdfCell"><input type="text" name="start"  value="" class="date"></td>\n            <td class="gdfCell"><input type="text" name="end" value="" class="date"></td>\n            <td class="gdfCell"><input type="text" name="duration" value="(#=obj.duration#)"></td>\n            <td class="gdfCell" style="display:none;"><input type="text" name="depends" value="(#=obj.depends#)" (#=obj.hasExternalDep?"readonly":""#)></td>\n\n          </tr>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="TASKEMPTYROW">\n            \x3c!--\n          <tr class="taskEditRow emptyRow" >\n            <th class="gdfCell" align="right"></th>\n            <td class="gdfCell noClip" align="center"></td>\n            <td class="gdfCell"></td>\n            <td class="gdfCell"></td>\n            <td class="gdfCell"></td>\n            <td class="gdfCell"></td>\n            <td class="gdfCell"></td>\n            <td class="gdfCell"></td>\n            <td class="gdfCell"></td>\n          </tr>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="TASKBAR">\n            \x3c!--\n          <div class="taskBox taskBoxDiv" taskId="(#=obj.id#)" >\n            <div class="layout (#=obj.hasExternalDep?\'extDep\':\'\'#)">\n              <div class="taskStatus" status="(#=obj.status#)"></div>\n              <div class="taskProgress" style="width:(#=obj.progress>100?100:obj.progress#)%; background-color:(#=obj.progress>100?\'red\':\'rgb(153,255,51);\'#);"></div>\n              <div class="milestone (#=obj.startIsMilestone?\'active\':\'\'#)" ></div>\n\n              <div class="taskLabel"></div>\n              <div class="milestone end (#=obj.endIsMilestone?\'active\':\'\'#)" ></div>\n            </div>\n          </div>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="CHANGE_STATUS">\n            \x3c!--\n            <div class="taskStatusBox">\n              <div class="taskStatus cvcColorSquare" status="STATUS_ACTIVE" title="active"></div>\n              <div class="taskStatus cvcColorSquare" status="STATUS_DONE" title="completed"></div>\n              <div class="taskStatus cvcColorSquare" status="STATUS_FAILED" title="failed"></div>\n              <div class="taskStatus cvcColorSquare" status="STATUS_SUSPENDED" title="suspended"></div>\n              <div class="taskStatus cvcColorSquare" status="STATUS_UNDEFINED" title="undefined"></div>\n            </div>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="TASK_EDITOR">\n            \x3c!--\n          <div class="ganttTaskEditor">\n            <div id="user-list" class="form-horizontal form-bordered nopadding">\n              <div class="row">\n                <div id="col-1" class="col-sm-6">\n                  <div class="form-group" style="display: none;">\n                    <label for="code" class="control-label col-sm-5">Code/Short name</label>\n                    <div class="col-sm-7">\n                      <input type="text" class="form-control" data-rolid="1" name="code" id="code" value="">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="name" class="control-label col-sm-5">Node</label>\n                    <div class="col-sm-7">\n                      <input type="text" class="form-control" data-rolid="1" name="name" id="name" value="">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="user" class="control-label col-sm-5">User</label>\n                    <div class="col-sm-7">\n                      <select name="select" id="select" class="form-control" data-rolid="1" name="user" id="user">\n                        <option value="1">Jorge Douglas</option>\n                        <option value="2">Fernanda Barbero</option>\n                        <option value="3">Lucia Benvenutto</option>\n                        <option value="4">Fabian Brussa</option>\n                        <option value="5">Gonzalo Ulla</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="status" class="control-label col-sm-5">Status</label>\n                    <div class="col-sm-7">\n                      <div id="status" class="taskStatus" status=""></div>\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="progress" class="control-label col-sm-5">progress</label>\n                    <div class="col-sm-7">\n                      <input type="text" class="form-control" data-rolid="1" name="progress" id="progress" value="">\n                    </div>\n                  </div>\n                </div>\n\n                <div id="col-2" class="col-sm-6">\n                  <div class="form-group">\n                    <label for="start" class="control-label col-sm-5">Start</label>\n                    <div class="col-sm-7">\n                      <input type="text" class="form-control" data-rolid="1" name="start" id="start" value="">\n                      <input type="checkbox" data-rolid="1" id="startIsMilestone" style="display:none;">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="duration" class="control-label col-sm-5">duration</label>\n                    <div class="col-sm-7">\n                      <input type="text" class="form-control date" data-rolid="1" name="duration" id="duration" value="">\n                    </div>\n                  </div>\n                  <div class="form-group">\n                    <label for="end" class="control-label col-sm-5">End</label>\n                    <div class="col-sm-7">\n                      <input type="text" class="form-control date" data-rolid="1" name="end" id="end" value="">\n                      <input type="checkbox" data-rolid="1" id="endIsMilestone" style="display:none;">\n                    </div>\n                  </div>\n                </div>\n\n                <div id="col-2" class="col-sm-12">\n                  <div class="form-group">\n                      <label for="description" class="control-label col-sm-5">Description</label>\n                      <div class="col-sm-7">\n                        <textarea name="description" id="description" class="form-control"></textarea>\n                      </div>\n                    </div>\n                </div>\n              </div>\n\n              <h2 style="display:none;">assignments</h2>\n              <table  cellspacing="1" cellpadding="0" width="100%" id="assigsTable" style="display:none;">\n                <tr>\n                  <th style="width:100px;">name</th>\n                  <th style="width:70px;">role</th>\n                  <th style="width:30px;">est.wklg.</th>\n                  <th style="width:30px;" id="addAssig"><span class="teamworkIcon" style="cursor: pointer">+</span></th>\n                </tr>\n              </table>\n\n              <div style="text-align: right; padding-top: 20px; display: none;"><button id="saveButton" class="button big">save</button></div>\n            </div>\n          </div>\n           --\x3e\n          </div>\n\n          <div class="__template__" type="ASSIGNMENT_ROW">\n            \x3c!--\n          <tr taskId="(#=obj.task.id#)" assigId="(#=obj.assig.id#)" class="assigEditRow" >\n            <td ><select name="resourceId"  class="formElements" (#=obj.assig.id.indexOf("tmp_")==0?"":"disabled"#) ></select></td>\n            <td ><select type="select" name="roleId"  class="formElements"></select></td>\n            <td ><input type="text" name="effort" value="(#=getMillisInHoursMinutes(obj.assig.effort)#)" size="5" class="formElements"></td>\n            <td align="center"><span class="teamworkIcon delAssig" style="cursor: pointer">d</span></td>\n          </tr>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="RESOURCE_EDITOR">\n            \x3c!--\n          <div class="resourceEditor" style="padding: 5px;">\n\n            <h2>Project team</h2>\n            <table  cellspacing="1" cellpadding="0" width="100%" id="resourcesTable">\n              <tr>\n                <th style="width:100px;">name</th>\n                <th style="width:30px;" id="addResource"><span class="teamworkIcon" style="cursor: pointer">+</span></th>\n              </tr>\n            </table>\n\n            <div style="text-align: right; padding-top: 20px"><button id="resSaveButton" class="button big">save</button></div>\n          </div>\n          --\x3e\n          </div>\n\n          <div class="__template__" type="RESOURCE_ROW">\n            \x3c!--\n          <tr resId="(#=obj.id#)" class="resRow" >\n            <td ><input type="text" name="name" value="(#=obj.name#)" style="width:100%;" class="formElements"></td>\n            <td align="center"><span class="teamworkIcon delRes" style="cursor: pointer">d</span></td>\n          </tr>\n          --\x3e\n          </div>\n\n        </div>\n        \x3c!-- END TEMPLATES --\x3e\n      </div>\n    </div>\n  </div>\n\n  <div id="example" class="modal fade in" role="dialog" aria-hidden="false" style="display: none;">\n    <div class="modal-dialog" style="width:900px;">\n      <div class="modal-content">\n        <div class="modal-header">\n          <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n          <h4 class="modal-title" id="myModalLabel">Edit task</h4>\n        </div>\n        \x3c!-- /.modal-header --\x3e\n        <div class="modal-body">\n\n        </div>\n        \x3c!-- /.modal-body --\x3e\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n          <button type="button" class="btn btn-primary">Save changes</button>\n        </div>\n        \x3c!-- /.modal-footer --\x3e\n      </div>\n      \x3c!-- /.modal-content --\x3e\n    </div>\n    \x3c!-- /.modal-dialog --\x3e\n  </div>\n</div>'},useData:!0})},706:function(t,e,s){"use strict";(function(n){var r,a=s(693);void 0===(r=function(){return n.Model.extend({url:"myFileManager",getWorkflow:function(t,e){var s="Workflow/getWorkflow";t&&(s="Workflow/getWorkflow/"+t),(0,a.send)(s,null,{type:"GET"},e)},createTask:function(t,e){(0,a.send)("Workflow/createTask",t,{type:"POST"},e)},updateTask:function(t,e){(0,a.send)("Workflow/updateTask",t,{type:"PUT"},e)},updateTasksProperty:function(t,e){(0,a.send)("Workflow/updateTasksProperty",t,{type:"PUT"},e)},deleteTask:function(t,e){(0,a.send)("Workflow/deleteTask/"+t,null,{type:"DELETE"},e)},getTask:function(t,e){(0,a.send)("Workflow/getTask/"+t,null,null,e)},createState:function(t,e){(0,a.send)("Workflow/createState/",t,{type:"POST"},e)},listStates:function(t){(0,a.send)("Workflow/listStates",null,{type:"GET"},t)},getState:function(t,e){(0,a.send)("Workflow/getState/"+t,null,{type:"GET"},e)},updateState:function(t,e){(0,a.send)("Workflow/updateState",t,{type:"PUT"},e)},deleteState:function(t,e){(0,a.send)("Workflow/deleteState/"+t,null,{type:"DELETE"},e)},listTransitions:function(t){(0,a.send)("Workflow/listTransitions",null,{type:"GET"},t)},createTransition:function(t,e){(0,a.send)("Workflow/createTransition",t,{type:"POST"},e)},updateTransition:function(t,e){(0,a.send)("Workflow/updateTransition",t,{type:"PUT"},e)},deleteTransition:function(t,e){(0,a.send)("Workflow/deleteTransition/"+t,null,{type:"DELETE"},e)},listUsers:function(t){(0,a.send)("Workflow/listUsers",null,null,t)},getTaskGroup:function(t,e){(0,a.send)("Workflow/getTaskGroup/"+t,null,{type:"GET"},e)},listTaskGroups:function(t){(0,a.send)("Workflow/listTaskGroups",null,{type:"GET"},t)},createTaskGroup:function(t,e){(0,a.send)("Workflow/createTaskGroup",t,{type:"POST"},e)},updateTaskGroup:function(t,e){(0,a.send)("Workflow/updateTaskGroup",t,{type:"PUT"},e)},deleteTaskGroup:function(t,e){(0,a.send)("Workflow/DeleteTaskGroup/"+t,null,{type:"DELETE"},e)},updateOrder:function(t,e){(0,a.send)("Workflow/ChangeOrder",{values:t},{type:"PUT"},e)},updateRolTransitions:function(t,e){(0,a.send)("Workflow/updateRolTransitions",t,{type:"PUT"},e)},getWorkflowByGroups:function(t,e){(0,a.send)("Workflow/getWorkflowByGroups/",{values:t},{type:"POST"},e)},createComment:function(t,e){(0,a.send)("Workflow/createComment/",t,{type:"POST"},e)}})}.apply(e,[]))||(t.exports=r)}).call(this,s(218))},713:function(t,e,s){"use strict";(function(n){var r,a=s(693);void 0===(r=function(){return n.Model.extend({list:function(t,e){(0,a.send)("users/?page=1",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},listByCompany:function(t){(0,a.send)("usercompanies/list_by_company_id/",null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},t)},get:function(t,e){(0,a.send)("users/".concat(t,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},update:function(t,e,s){(0,a.send)("users/".concat(t,"/"),e,{type:"PUT",contentType:"application/json;charset=utf-8",dataType:"text"},s)},partialUpdateUser:function(t,e,s){(0,a.send)("users/".concat(t,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},s)},EditProfile:function(t,e){(0,a.send)("users/".concat(t.id,"/"),JSON.stringify(t),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},e)},create:function(t,e){(0,a.send)("usercompanies/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},e)},partialUpdate:function(t,e,s){(0,a.send)("usercompanies/".concat(t,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},s)},deleteUser:function(t,e){(0,a.send)("users/".concat(t,"/"),null,{type:"DELETE"},e)},deleteUserCompany:function(t,e){(0,a.send)("usercompanies/".concat(t,"/"),null,{type:"DELETE"},e)},getUserCompany:function(t,e){(0,a.send)("usercompanies/".concat(t,"/"),null,{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},e)},UpdateUserPreference:function(t,e){var s={userCompanyId:__currentSession.userId,preferenceCode:t,value:e};(0,a.send)("user/UpdateUserPreference",s,{type:"PUT"})},GetUserPreference:function(t,e){(0,a.send)("usercompanies/preference_by_code/?code=".concat(t),null,{type:"GET"},e)},GetRelatedDashboard:function(t){(0,a.send)("user/GetRelatedDashboard",null,null,t)}})}.apply(e,[]))||(t.exports=r)}).call(this,s(218))},961:function(t,e,s){"use strict";(function(n,r,a,i){var o,l,d=s(18);s(2050),s(2052),s(2053),s(2054);var c=s(2055),u=s(1091),h=p(s(1289)),f=p(s(2059));function p(t){return t&&t.__esModule?t:{default:t}}function g(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}o=[s(703),s(706),s(713),s(2060)],void 0===(l=function(t,e,o,l){var p;return n.View.extend((g(p={el:r("#main"),workflowModel:new e,workflowController:new t,currentTasks:[],filters:null,initialize:function(){Storage.prototype.setObject=function(t,e){this.setItem(t,JSON.stringify(e))},Storage.prototype.getObject=function(t){return this.getItem(t)&&JSON.parse(this.getItem(t))}},render:function(t){r('.container-fluid.mainTask[data-rel="workflow"]').remove(),this.$el.append(l());var e=this,n=r("#tree-container"),a=r("#file-list"),i=r("#file-manager-wrapper .box-content"),o=r("#right-column");function d(){var t=r(window).height();t-=95,n.height(t-r(".page-header").height()),a.height(t-(r(".page-header").height()+120)),i.height(t-r(".page-header").height()),o.height(t+20),n.perfectScrollbar("update"),a.perfectScrollbar("update")}t&&(e.nodeId=t,Promise.resolve().then(function(){var t=[s(684)];(function(t){(new t).hideAllTasks(),(new t).addSimpleTask("workflow","Workflow"),(new t).selectTask("workflow","Workflow")}).apply(null,t)}).catch(s.oe)),n.resizable({minWidth:100,maxWidth:450,handles:"e",resize:function(t,e){var s=r("#file-manager-wrapper");r("#right-column").css({width:s.width()-(e.size.width+20)})}}),n.perfectScrollbar(),a.perfectScrollbar(),r(window).resize(d),d(),this.getThis().on("removeView",function(){e.onRemoveView()}),this.getThis().on("beforeRemoveView",function(t,s){e.onBeforeRemoveView(t,s)}),r("#ganttemplates").loadTemplates(),this.ge=new h.default;var c=r("#workSpace");c.css({width:r(window).width()-90,height:r(window).height()-100}),this.ge.init(c),r(".ganttButtonBar div").addClass("buttons"),this.loadI18n(),e.loadGanttFromServer(),this.ge.roles&&0!=this.ge.roles.length||this.setRoles(),this.ge.resources&&0!=this.ge.resources.length||this.setResource(),r(window).resize(function(){c.css({width:r(window).width()-90,height:r(window).height()-100}),c.trigger("resize.gantt")}),this.addHandlers(),r.JST.loadDecorator("ASSIGNMENT_ROW",function(t,e){var s=t.find("[name=resourceId]");for(var n in e.task.master.resources){var a=e.task.master.resources[n],i=r("<option>");i.val(a.id).html(a.name),e.assig.resourceId==a.id&&i.attr("selected","true"),s.append(i)}var o=t.find("[name=roleId]");for(var n in e.task.master.roles){var l=e.task.master.roles[n],d=r("<option>");d.val(l.id).html(l.name),e.assig.roleId==l.id&&d.attr("selected","true"),o.append(d)}e.task.master.canWrite&&e.task.canWrite&&t.find(".delAssig").click(function(){r(this).closest("[assigId]").fadeOut(200,function(){r(this).remove()})})})},cloneResponse:function(t){return JSON.parse(JSON.stringify(t))},currentUserHasTasks:function(t){for(var e=!1,s=0;s<t.length;s++)if(t[s].tasks=t[s].tasks.filter(function(t){return t.userId===parseInt(__currentSession.loginId)||t.relatedUsersId.indexOf(parseInt(__currentSession.loginId))>=0}),t[s].tasks.length>0){e=!0;break}return e},loadGanttFromServer:function(t){var e=this,s=new f.default("loadServerSide");s.reset();var n=!1,i=!1;this.workflowModel.getWorkflow(null,function(t){(new o).GetUserPreference("workflowFilters",function(o){""!==o?(e.filters=o,i=e.applyFilters(t,o)):""===o&&(o=e.filters={statusSelected:[],usersSelected:[]},i=e.applyFilters(t,o)),e.currentTasks=e.cloneResponse(t);var l,c,u;e.cloneResponse(t);i&&(t=i,n=!0),s.stop();for(var h={canWrite:!0,canWriteOnParent:!0,selectedRow:0,tasks:[{name:(0,d.translate)("tasks"),canWrite:!0,level:0,nodeId:"RootModel"}]},f=e.currentUserHasTasks(e.cloneResponse(t)),p=(0,d.haveAccess)("LISTALLWORKFLOWTASKS"),g=0;g<t.length;g++){if(f&&!n||f&&!p)t[g].tasks=t[g].tasks.filter(function(t){return t.userId===parseInt(__currentSession.loginId)||t.relatedUsersId.indexOf(parseInt(__currentSession.loginId))>=0});else if(!f&&!n||!f&&!p){var m={canWrite:!0,canWriteOnParent:!0,selectedRow:0,tasks:[]};return void e.ge.loadProject(m)}if(t[g].tasks.length>0){u={},l=a(t[g].startDate),c=a(t[g].endDate).diff(l,"days"),t[g].groupId&&(t[g].taskId=r.uuid(),u.isNode=!0),u.id=t[g].taskId,u.nodeId=t[g].groupId,u.name=t[g].title,u.code=0,u.collapsed=!1,u.canWrite=!0,u.status="STATUS_ACTIVE",u.progress=t[g].percent,u.stateName=t[g].stateName,u.ownerId=t[g].ownerId,u.isNode||(u.assigs=[{resourceId:t[g].userId,name:t[g].userFullName}]),u.stateColor=t[g].stateColor,u.start=new Date((0,d.formatSlashedDate)(t[g].startDate)).getTime(),u.end=new Date((0,d.formatSlashedDate)(t[g].endDate)).getTime(),u.duration=c,u.level=1,u.collapsed=!0,h.tasks.push(u),0===g&&(h.tasks[0].start=u.start);for(var v=0;v<t[g].tasks.length;v++)l=a(t[g].tasks[v].startDate),c=a(t[g].tasks[v].endDate).diff(l,"days"),(u={}).id=t[g].tasks[v].taskId,u.nodeId=t[g].tasks[v].groupId,u.name=t[g].tasks[v].title,u.code=0,u.collapsed=!1,u.canWrite=!0,u.status="STATUS_ACTIVE",u.progress=t[g].tasks[v].percent,u.stateName=t[g].tasks[v].stateName,u.ownerId=t[g].tasks[v].ownerId,u.isNode||(u.assigs=[{resourceId:t[g].tasks[v].userId,name:t[g].tasks[v].userFullName}]),u.stateColor=t[g].tasks[v].stateColor,u.start=new Date((0,d.formatSlashedDate)(t[g].tasks[v].startDate)).getTime(),u.end=new Date((0,d.formatSlashedDate)(t[g].tasks[v].endDate)).getTime(),u.duration=c,u.level=2,g===t.length-1&&v===t[g].tasks.length-1&&(h.tasks[0].end=u.end,l=a(h.tasks[0].start),c=a(h.tasks[0].end).diff(l,"days"),h.tasks[0].duration=c,h.tasks[0].id=r.uuid(),h.tasks[0].isNode=!0),h.tasks.push(u),3===h.tasks.length&&(h.tasks[0].end=u.end,h.tasks[0].start=u.start,l=a(h.tasks[2].start),c=a(h.tasks[2].end).diff(l,"days"),h.tasks[0].duration=c,h.tasks[0].id=r.uuid(),h.tasks[0].isNode=!0)}}if(e.nodeId&&e.openAddTaskForNode(e.nodeId),h.tasks.length<=1){m={canWrite:!0,canWriteOnParent:!0,selectedRow:0,tasks:[]};e.ge.loadProject(m)}else e.ge.loadProject(h);e.addRowHandlers()})})},openAddTaskForNode:function(t){var e={nodeId:t};this.workflowController.showTaskModal(e,this.filters)},loadFromLocalStorage:function(){var t;if(localStorage?localStorage.getItem("teamworkGantDemo")&&(t=localStorage.getItem("teamworkGantDemo")):r("#taZone").show(),!t||!t.tasks||0==t.tasks.length){t=JSON.parse(r("#ta").val());for(var e=(new Date).getTime()-t.tasks[0].start,s=0;s<t.tasks.length;s++)t.tasks[s].start=t.tasks[s].start+e}this.ge.loadProject(t),this.ge.checkpoint()},saveGanttOnServer:function(){this.ge.canWrite&&this.saveInLocalStorage()},setRoles:function(){this.ge.roles=[{id:"tmp_1",name:"Project Manager"},{id:"tmp_2",name:"Worker"},{id:"tmp_3",name:"Stakeholder/Customer"}]},setResource:function(){for(var t=[],e=1;e<=10;e++)t.push({id:"tmp_"+e,name:"Resource "+e});this.ge.resources=t},editResources:function(){},clearGantt:function(){this.ge.reset()},loadI18n:function(){h.default.messages={CANNOT_WRITE:"CANNOT_WRITE",CHANGE_OUT_OF_SCOPE:"NO_RIGHTS_FOR_UPDATE_PARENTS_OUT_OF_EDITOR_SCOPE",START_IS_MILESTONE:"START_IS_MILESTONE",END_IS_MILESTONE:"END_IS_MILESTONE",TASK_HAS_CONSTRAINTS:"TASK_HAS_CONSTRAINTS",GANTT_ERROR_DEPENDS_ON_OPEN_TASK:"GANTT_ERROR_DEPENDS_ON_OPEN_TASK",GANTT_ERROR_DESCENDANT_OF_CLOSED_TASK:"GANTT_ERROR_DESCENDANT_OF_CLOSED_TASK",TASK_HAS_EXTERNAL_DEPS:"TASK_HAS_EXTERNAL_DEPS",GANTT_ERROR_LOADING_DATA_TASK_REMOVED:"GANTT_ERROR_LOADING_DATA_TASK_REMOVED",ERROR_SETTING_DATES:"ERROR_SETTING_DATES",CIRCULAR_REFERENCE:"CIRCULAR_REFERENCE",CANNOT_DEPENDS_ON_ANCESTORS:"CANNOT_DEPENDS_ON_ANCESTORS",CANNOT_DEPENDS_ON_DESCENDANTS:"CANNOT_DEPENDS_ON_DESCENDANTS",INVALID_DATE_FORMAT:"INVALID_DATE_FORMAT",TASK_MOVE_INCONSISTENT_LEVEL:"TASK_MOVE_INCONSISTENT_LEVEL",GANTT_QUARTER_SHORT:"trim.",GANTT_SEMESTER_SHORT:"sem."}},getFile:function(){r("#gimBaPrj").val(JSON.stringify(this.ge.saveProject())),r("#gimmeBack").submit(),r("#gimBaPrj").val("")},saveInLocalStorage:function(){var t=this.ge.saveProject();localStorage?localStorage.setItem("teamworkGantDemo",t):r("#ta").val(JSON.stringify(t))}},"editResources",function(){for(var t=r.JST.createFromTemplate({},"RESOURCE_EDITOR"),e=t.find("#resourcesTable"),s=0;s<this.ge.resources.length;s++){var n=this.ge.resources[s];e.append(r.JST.createFromTemplate(n,"RESOURCE_ROW"))}t.find("#addResource").click(function(){e.append(r.JST.createFromTemplate({id:"new",name:"resource"},"RESOURCE_ROW"))}),t.find("#resSaveButton").click(function(){for(var e=[],s=0;s<this.ge.resources.length;s++){var n=this.ge.resources[s],a=t.find("[resId="+n.id+"]");if(a.size()>0){var i=a.find("input[name]").val();i&&""!=i&&(n.name=i),e.push(n)}else for(var o=0;o<this.ge.tasks.length;o++){for(var l=this.ge.tasks[o],d=[],h=0;h<l.assigs.length;h++){var f=l.assigs[h];f.resourceId!=n.id&&d.push(f)}l.assigs=d}}t.find("[resId=new]").each(function(){var t=r(this).find("input[name]").val();t&&""!=t&&e.push(new u.Resource("tmp_"+(new Date).getTime(),t))}),this.ge.resources=e,(0,c.closeBlackPopup)(),this.ge.redraw()});(0,c.createBlackPage)(400,500).append(t)}),g(p,"addHandlers",function(){var t=this;r(".btn-filter-tasks").on("click",function(){return t.filterTasks(t),!1});var e=(0,d.haveAccess)("MANAGEWORKFLOWGROUPS");(0,d.haveAccess)("CREATEWORKFLOWTASK")?r(".addWorkflowTask").on("click",function(){return t.addNewTask(t),!1}):r(".addWorkflowTask").remove(),e?r(".btnAddGroup").on("click",function(){return t.addTaskGroup(t),!1}):r(".btnAddGroup").remove(),r(".btnLoadGanttFromServer").on("click",function(){t.loadGanttFromServer()}),r(".btnAddBelowCurrentTask").on("click",function(){r("#workSpace").trigger("addBelowCurrentTask.gantt")}),r(".btnIndentTask").on("click",function(){r("#workSpace").trigger("indentCurrentTask.gantt")}),r(".btnOutdentTask").on("click",function(){r("#workSpace").trigger("outdentCurrentTask.gantt")}),r(".btnZoomOut").on("click",function(){r("#workSpace").trigger("zoomMinus.gantt")}),r(".btnZoomIn").on("click",function(){r("#workSpace").trigger("zoomPlus.gantt")}),r(".btnDeleteTask").on("click",function(){r("#workSpace").trigger("deleteCurrentTask.gantt")}),r(".btnPrint").on("click",function(){print()}),r(".btnCriticalPath").on("click",function(){t.ge.gantt.showCriticalPath=!t.ge.gantt.showCriticalPath,t.ge.redraw()})}),g(p,"addRowHandlers",function(){var t=this;r(".gdfTable tbody tr").on("click",function(e){var s=r(this).attr("data-user-id");return t.checkActions(t,s),!1})}),g(p,"checkActions",function(t,e){var s=__currentSession.loginId===parseInt(e),n=(0,d.haveAccess)("DELETEMYWORKFLOWTASK");(0,d.haveAccess)("DELETEALLWORKFLOWTASKS")?r(".btnDeleteTask").attr("disabled",!1):s&&!n?r(".btnDeleteTask").attr("disabled",!0):s&&n?r(".btnDeleteTask").attr("disabled",!1):r(".btnDeleteTask").attr("disabled",!0)}),g(p,"addNewTask",function(t){(new e).listTaskGroups(function(t){if(!(t.length>0))return(0,d.showMessage)((0,d.translate)("_alertNoGroupsText"),(0,d.translate)("_alertNoGroupsTitle"),"error",!0),!1;Promise.resolve().then(function(){var t=[s(703)];(function(t){(new t).showTaskModal(null)}).apply(null,t)}).catch(s.oe)})}),g(p,"addTaskGroup",function(t){t.workflowController.addTaskGroupAsModal({modalClass:"smallModal",title:"Add task group",buttons:[{css:"secondary",code:"cancel",title:"Cancel"},{css:"primary",code:"save",title:"Save"}]})}),g(p,"filterTasks",function(){var t=this;s.e(298).then(function(){var e=[s(2126)];(function(e){(new e).render(t.currentTasks,t.filters,function(e){t.filters=e,t.loadGanttFromServer(e)})}).apply(null,e)}).catch(s.oe)}),g(p,"applyFilters",function(t,e){var s=t;if(e.usersSelected.length>0)for(var n=0;n<s.length;n++){for(var r=[],a=0;a<e.usersSelected.length;a++)for(var o=0;o<s[n].tasks.length;o++)s[n].tasks[o].userId===e.usersSelected[a]&&r.push(s[n].tasks[o]),s[n].tasks[o].relatedUsersId.indexOf(e.usersSelected[a])>=0&&r.push(s[n].tasks[o]);if(r.length>0){s[n].tasks=[];for(var l=0;l<r.length;l++)s[n].tasks.push(r[l])}else s[n].tasks=[]}if(e.statusSelected.length>0)for(n=0;n<s.length;n++){var d=[];for(a=0;a<e.statusSelected.length;a++)for(o=0;o<s[n].tasks.length;o++)s[n].tasks[o].stateId===e.statusSelected[a]&&d.push(s[n].tasks[o]);if(d.length>0){s[n].tasks=[];for(l=0;l<d.length;l++)s[n].tasks.push(d[l])}else s[n].tasks=[]}for(o=0;o<s.length;o++)s[o].tasks=i(s[o].tasks).sortBy(function(t){return[new Date(t.startDate).getTime()]});return s}),g(p,"getThis",function(){return this.$el.find(".mainTask[data-rel='workflow']")}),g(p,"onRemoveView",function(){this.getThis().remove(),this.events={}}),g(p,"onBeforeRemoveView",function(t,e){}),p))}.apply(e,o))||(t.exports=l)}).call(this,s(218),s(1),s(134),s(220))},962:function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"c",function(){return r}),s.d(e,"a",function(){return a});const n=36e6,r=5;function a(t){var e=function(t){return(t="0"+t).substr(t.length-2)},s="#01_01#04_25#08_15#11_01#12_25#12_26#06_02#12_08#05_01#2010_04_05#2010_10_19#2010_05_15#2011_04_04#",n="#"+t.getFullYear()+"_"+e(t.getMonth()+1)+"_"+e(t.getDate())+"#",r="#"+e(t.getMonth()+1)+"_"+e(t.getDate())+"#";t.getDay();return s.indexOf(n)>-1||s.indexOf(r)>-1}},963:function(t,e,s){"use strict";s.d(e,"d",function(){return r}),s.d(e,"e",function(){return a}),s.d(e,"a",function(){return i}),s.d(e,"c",function(){return o}),s.d(e,"b",function(){return l}),s.d(e,"f",function(){return d}),s.d(e,"g",function(){return c});var n=s(962);function r(t){return a(t).getTime()}function a(t){var e=new Date(t+432e5);for(e.setHours(0,0,0,0);Object(n.a)(e);)e.setDate(e.getDate()+1);return e.setHours(0,0,0,0),e}function i(t){return o(t).getTime()}function o(t){var e=new Date(t);for(e.setHours(23,59,59,999);Object(n.a)(e);)e.setDate(e.getDate()+1);return e.setHours(23,59,59,999),e}function l(t,e){for(var s=new Date(t),r=e-1;r>0;)s.setDate(s.getDate()+1),Object(n.a)(s)||r--;return s.setHours(23,59,59,999),s.getTime()}function d(t,e){var s=new Date(t);return s.incrementDateByWorkingDays(e),s.getTime()}function c(t,e){return new Date(t).distanceInWorkingDays(new Date(e))}Array.prototype.filter||(Array.prototype.filter=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var s=new Array,n=arguments[1],r=0;r<e;r++)if(r in this){var a=this[r];t.call(n,a,r,this)&&s.push(a)}return s})}}]);