/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[74,238],{1132:function(t,e,n){var a=n(690);t.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(t,e,n,a,i){var o;return'<div class="container-fluid mainTask full-horizontal inputFormTask hideClose" data-rel="form-'+t.escapeExpression("function"==typeof(o=null!=(o=n.id||(null!=e?e.id:e))?o:t.hooks.helperMissing)?o.call(null!=e?e:t.nullContext||{},{name:"id",hash:{},data:i,loc:{start:{line:1,column:93},end:{line:1,column:99}}}):o)+'"\n    data-type="tab-content">\n\n    <div class="breadcrumbs nodisplay">\n        <div class="toolbar">\n            <button class="btn addRow" style="display: none;"><i class="fas fa-plus-square"></i></button>\n            <button class="btn showFilters"><i class="fa fa-filter"></i></button>\n            <button class="btn showWorkflow nodisplay"><i class="fa fa-tasks"></i></button>\n            <button class="btn showHistory nodisplay"><i class="fa fa-exclamation-triangle"></i></button>\n        </div>\n        <ul class="nav nav-tabs form-tabs nodisplay">\n\n\n        </ul>\n        <ul class="openNewTab">\n            <li>\n                <select class="selForms">\n\n                </select>\n            </li>\n        </ul>\n\n    </div>\n\n\n\n    <div class="row-fluid form-area">\n        <div class="col-sm-12 main-pane">\n\n\n        </div>\n\n    </div>\n</div>'},useData:!0})},1133:function(t,e,n){var a=n(690);t.exports=(a.default||a).template({1:function(t,e,n,a,i){var o,l=null!=e?e:t.nullContext||{},s=t.hooks.helperMissing,r=t.escapeExpression;return'    <li>\n        <a href="#" data-rel="'+r("function"==typeof(o=null!=(o=n.id||(null!=e?e.id:e))?o:s)?o.call(l,{name:"id",hash:{},data:i,loc:{start:{line:3,column:30},end:{line:3,column:36}}}):o)+'" data-key="'+r("function"==typeof(o=null!=(o=n.key||(null!=e?e.key:e))?o:s)?o.call(l,{name:"key",hash:{},data:i,loc:{start:{line:3,column:48},end:{line:3,column:55}}}):o)+'" title="'+r("function"==typeof(o=null!=(o=n.title||(null!=e?e.title:e))?o:s)?o.call(l,{name:"title",hash:{},data:i,loc:{start:{line:3,column:64},end:{line:3,column:73}}}):o)+'">\n            '+r("function"==typeof(o=null!=(o=n.title||(null!=e?e.title:e))?o:s)?o.call(l,{name:"title",hash:{},data:i,loc:{start:{line:4,column:12},end:{line:4,column:21}}}):o)+'\n            <div class="dataStatus green"></div>\n        </a>\n        <i class="fa fa-close"></i>\n    </li>\n'},compiler:[8,">= 4.3.0"],main:function(t,e,n,a,i){var o;return null!=(o=n.each.call(null!=e?e:t.nullContext||{},e,{name:"each",hash:{},fn:t.program(1,i,0),inverse:t.noop,data:i,loc:{start:{line:1,column:0},end:{line:9,column:9}}}))?o:""},useData:!0})},750:function(t,e,n){"use strict";(function(a){var i,o=n(693);void 0===(i=function(){return a.Model.extend({url:"inputModule",defaults:{formsViewList:[]},get:function(t,e){(0,o.send)("inputModule/get/"+t,null,{type:"GET"},e)},list:function(t,e){(0,o.send)("inputTemplates/list/",null,{type:"GET"},t,e)},create:function(t,e){(0,o.send)("inputModule/create",t,{type:"POST"},e)},update:function(t,e){(0,o.send)("inputModule/update",t,{type:"PUT"},e)},delete:function(t,e){(0,o.send)("inputModule/delete/"+t,null,{type:"DELETE"},e)},getMetadata:function(t,e){(0,o.send)("inputTemplates/getMetadata/",{id:t},{type:"GET"},e)},generate:function(t,e){(0,o.send)("inputModule/generate/"+t,null,{type:"GET"},e)},getData:function(t,e){(0,o.send)("inputTemplates/getData/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},e)},setData:function(t,e,n){(0,o.send)("inputTemplates/setData/",JSON.stringify(t),{type:"POST",contentType:"application/json;charset=utf-8"},e,n)},getHistoryChanges:function(t,e){(0,o.send)("inputModule/getHistoryChanges",t,{type:"POST"},e)},addItemToModel:function(t){this.get("formsViewList").push(t)},getItemsModel:function(){return this.get("formsViewList")},getItemModel:function(t){var e,n=this.getItemsModel();for(e=0;e<n.length;e++)if(n[e].tagId==t)return n[e]},removeItemModel:function(t){var e,n=this.getItemsModel();for(e=0;e<n.length;e++)if(n[e].tagId==t.tagId){n.splice(e,1);break}this.set({formsViewList:n})},removeAllItemsModel:function(){this.set("formsViewList",[])},changeItemModel:function(t,e){this.removeItemModel(t),this.addItemToModel(e)},onClick:function(t,e,n,a){(0,o.send)("inputModule/onClick",{param1:t,param2:e},{type:"POST"},n,a)}})}.apply(e,[]))||(t.exports=i)}).call(this,n(218))},911:function(t,e,n){"use strict";(function(a,i){var o,l,s=n(18);o=[n(750),n(860),n(1132),n(1133)],void 0===(l=function(t,e,o,l){return a.View.extend({el:i("#main"),diagram:void 0,nodeFinder:void 0,diagramClipboard:void 0,render:function(){var a=this;this.currentTemplateId=this.options.templateId?this.options.templateId:"empty",this.options.templateName=this.options.templateId?this.options.templateName:"Open form",this.keyView="div.mainTask[data-rel='form-"+this.currentTemplateId+"']";var l="form-"+this.currentTemplateId;if(i('.navigation ul li a[rel="form-empty"]').attr("rel",l),i('.inputFormTask[data-rel="'+l+'"]').length>0&&"form-empty"!==l)return Promise.resolve().then(function(){var t=[n(684)];(function(t){(new t).selectTask(l)}).apply(null,t)}).catch(n.oe),a.getParent().find('.form-tabs li a[data-key="'+l+'"]').click(),!1;var s={id:this.currentTemplateId};this.inputModuleModel=new t({formsViewList:[]}),this.inputModuleController=new e;var r=o(s);this.$el.append(r),this.loadSelectEntities(),this.reloadInputform(this.options),this.updateSizes(),this.addHandlers(this.getParent()),this.refreshInputFormTabs(),this.getParent().on("removeView",function(){a.onRemoveView()}),this.getParent().on("beforeRemoveView",function(t,e){a.onBeforeRemoveView(t,e)})},getParent:function(){return i(this.keyView)},onBeforeRemoveView:function(){},onRemoveView:function(){var t=this;setTimeout(function(){t.refreshInputFormTabs(),t=null},100)},updateSizes:function(){if(this.$el.find(".diagram-area").is(":visible")){this.$el.find(".diagram-area").height(i(window).height()-50),this.$el.find(".diagram-area").width(i(window).width()-90)}},addHandlers:function(t){var e=this;t.find(".form-tabs").on("click","li a",function(){var t=i(this).attr("data-key");i('.mainTask[data-rel="'+t+'"]').trigger("refreshOnFocus"),Promise.resolve().then(function(){var e=[n(684)];(function(e){(new e).selectTask(t)}).apply(null,e)}).catch(n.oe)}),t.find(".form-tabs").on("click","li i",function(){var t=i(this).closest("li").find("a").attr("data-key");Promise.resolve().then(function(){var e=[n(684)];(function(e){(new e).removeTask(t)}).apply(null,e)}).catch(n.oe)}),t.find(".openNewTab").on("change","select.selForms",function(){var a=i(this).val();if(i("div.mainTask[data-rel='form-empty']").length>0&&(Promise.resolve().then(function(){var t=[n(684)];(function(t){(new t).removeTask(o)}).apply(null,t)}).catch(n.oe),i("div.mainTask[data-rel='form-empty']").remove()),""!==a){var o,l=i(this).find(":selected").html().trim(),s={templateId:a,templateName:l},r=!1;t.find("ul.form-tabs li").each(function(e,n){o=i(n).find("a").attr("data-key"),i(n).find("a").attr("data-rel")===a&&(r=!0,t.find('.nav-tabs li a[data-key="'+o+'"]').click())}),r||e.inputModuleController.openViewer(s)}i(this).val(""),event.preventDefault()}),i(document).off("contextmenu",".form-tabs li a"),i(document).on("contextmenu",".form-tabs li a",function(t){return e.showTabContextMenu(i(this),t),!1})},loadSelectEntities:function(){var t=this.getParent().find("select.selForms");t.enable(!1),t.empty(),this.inputModuleModel.list(function(e){t.append(i('<option value="">  </option>'));for(var n=0;n<e.length;n++)t.append(i('<option value="'+e[n].id+'">'+e[n].name+" </option>"));t.enable(!0)})},reloadInputform:function(t){this.refreshFormName(t),this.getParent().find(".main-pane").empty();var e=this.getParent().find(".main-pane");t.templateId&&this.inputModuleController.openForm(t.templateId,e),this.getParent().find("div.breadcrumbs").show()},refreshFormName:function(t){if(t){var e=t.templateId,n=t.templateName;this.formName=n,i("span[data-rel='dashboard-"+e+"']").text(n),i("#topMenuBar li a[rel='form-"+e+"']").text(n),i(".dashboard-tabs li a[data-rel='"+e+"']").text(n)}},refreshInputFormTabs:function(){var t=[];if(i(".inputFormTask").each(function(e,n){var a=i(n).attr("data-rel"),o=a.split("-")[1],l=i("#topMenuBar ul li a[rel='"+a+"']").text();t.push({id:o,key:a,title:l,closeBtn:!0})}),i(".mainTask .form-tabs").empty(),i(".mainTask .form-tabs").hide(),t.length>0){var e=l(t);i(".mainTask .form-tabs").html(e),i(".mainTask .form-tabs").show()}i(".inputFormTask").each(function(t,e){var n=i(e).attr("data-rel");i(this).find(".form-tabs li a[data-key='"+n+"']").closest("li").addClass("active")}),0===i(".inputFormTask").length&&i('.navigation ul li a[rel^="form-"]').attr("rel","form-empty")},showTabContextMenu:function(t,e){var a={_me:{name:(0,s.translate)("close")},_all:{name:(0,s.translate)("close_all")},_others:{name:(0,s.translate)("close_all_but_this")}};i.contextMenu("destroy",".form-tabs"),i.contextMenu({selector:".form-tabs",callback:function(e,a){switch(e){case"_me":t.closest("li").find("i").click();break;case"_all":case"_others":var o=t.attr("data-key");"_all"==e&&(o="_123123_"),Promise.resolve().then(function(){var a=[n(684)];(function(n){var a=new n,l=[];t.closest("ul.form-tabs").find("li a").each(function(t,e){i(e).attr("data-key")!=o&&l.push(i(e).attr("data-key"))}),l.length>0&&i.each(l,function(t,n){"_all"==e?a.removeTask(n,!1):(a.selectTask(o),a.removeTask(n,!0))})}).apply(null,a)}).catch(n.oe)}},items:a,events:{hide:function(t){i.contextMenu("destroy",".form-tabs")}},zIndex:0}),i(".form-tabs").contextMenu({x:e.clientX,y:e.clientY})},close:function(){},openForm:function(t){i(".entityList").empty(),this.inputModuleController.openForm(t,this._uId)}})}.apply(e,o))||(t.exports=l)}).call(this,n(218),n(1))}}]);