/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[77,310],{1299:function(e,n,t){"use strict";(function(a,l,o){var i,s;i=[t(684),t(742),t(736),t(2078)],void 0===(s=function(e,n,i,s){return a.View.extend({el:l("#main"),taskSchedulerCtrl:new n,initialize:function(){},render:function(e){l('.container-fluid.mainTask[data-rel="oledb-task"]').remove();var n=this,a=s();this.$el.append(a);var i="oledb-task",c="New OleDB task";e&&(c="Edit OleDB task",this.fillForm(e)),Promise.resolve().then(function(){var e=[t(684)];(function(e){(new e).hideAllTasks(),(new e).addSimpleTask(i,c),(new e).selectTask(i,c)}).apply(null,e)}).catch(t.oe);var d=l(".oledb-task-content");function r(){var e=l(window).height();e-=95,d.height(e-(l(".page-header").height()+20))}l(window).resize(r),r(),l(".tagsinput").length>0&&l(".tagsinput").each(function(e){l(this).tagsInput({width:"auto",height:"auto"})}),l(".instances").TouchSpin({min:0,max:50,step:1,decimals:0,boostat:5,maxboostedstep:10,forcestepdivisibility:"none"}),l(".datepick").length>0&&l(".datepick").each(function(){var n=l(this);n.datepicker(),e||n.datepicker("setValue",o().format("YYYY/MM/DD")),n.on("changeDate",function(){n.datepicker("hide")})}),l(".timepick").length>0&&l(".timepick").timepicker({defaultTime:"current",minuteStep:1,disableFocus:!0,template:"dropdown"}),l(".task-log-btn").on("click",function(){return n.showTaskLog(event,n),!1}),l(".select-trigger").on("change",function(e){return n.triggerChange(e.currentTarget.value,n),!1}),l(".save").on("click",function(){return n.save(n,e),!1}),l(".cancel").on("click",function(){return n.cancel(n),!1}),l("div[data-rel='oledb-task']").find("div.abm-top-options a.btn-close").on("click",this.close);var u=l("#right-column").height();l("#tree-container").height(u),this.getThis().on("removeView",function(){n.onRemoveView()}),this.getThis().on("beforeRemoveView",function(e,t){n.onBeforeRemoveView(e,t)})},close:function(){Promise.resolve().then(function(){var e=[t(684)];(function(e){(new e).removeTask("oledb-task")}).apply(null,e)}).catch(t.oe)},cancel:function(e){e.taskSchedulerCtrl.listTasks("oledb-tasks"),e.close()},fillForm:function(e){var n=l(".run-model-days input[type=checkbox]");if(e.days){var t=e.days.split(",");l(t).each(function(e,t){n.each(function(e,n){l(n).val()===t.toString()&&l(n).attr("checked","checked")})})}l("#selTrigger option").each(function(n,t){l(t).val()===e.scheduleRunType.toString()&&l(t).attr("selected",!0)}),this.triggerChange(e.scheduleRunType.toString(),this),l("#selStatesToLog option").each(function(n,t){l(t).val()===e.scheduleLogType.toString()&&l(t).attr("selected",!0)}),l("#chkEnabled").prop("checked",e.enabled);var a=e.nextRunDate.split("T");l("#txtDate").val(a[0]),l("#txtTime").val(a[1]),l("#txtTaskName").val(e.scheduleTaskName),l("#txtConnString").val(e.connectString),l("#txtOledb").text(e.oledbCommand)},triggerChange:function(e,n){"0"===e?(l(".date-time").hide(),l(".run-model-days").hide(),l(".form-group.enabledCheckbox").show()):"1"===e?(l(".date-time").show(),l(".run-model-days").hide(),l("#lblDate").html("Date time"),l(".form-group.enabledCheckbox").show()):"2"===e?(l(".date-time").show(),l(".run-model-days").hide(),l("#lblDate").html("Start date"),l(".form-group.enabledCheckbox").show()):"3"===e?(l(".date-time").show(),l(".run-model-days").show(),l("#lblDate").html("Start date"),l(".form-group.enabledCheckbox").show()):"5"===e?(l(".date-time").show(),l(".run-model-days").hide(),l("#lblDate").html("Start date"),l(".form-group.enabledCheckbox").show()):(l(".date-time").hide(),l(".run-model-days").hide(),l(".form-group.enabledCheckbox").hide())},save:function(n,t){var a=l("#selTrigger").val(),o=l("#txtDate").val()+" "+l("#txtTime").val(),s=l("#selStatesToLog").val(),c=l("#chkEnabled").prop("checked");4===a&&(c=!0);var d={scheduleTaskName:l("#txtTaskName").val(),scheduleRunType:a,scheduleLogType:s,enabled:c,connectString:l("#txtConnString").val(),oledbCommand:l("#txtOledb").val()};if("0"!==l(".select-trigger").val()&&(d.nextRunDate=o),"3"===l(".select-trigger").val()){for(var r="",u=l(".run-model-days input[type=checkbox]:checked"),p=0;p<u.length;p++)r=0===p?l(u[p]).val():r+","+l(u[p]).val();d.days=r}t?(d.scheduleTaskId=t.scheduleTaskId,(new i).updateOleDbTask(d,function(t){(new e).removeTask("oledb-task"),n.taskSchedulerCtrl.listTasks("oledb-tasks")})):(new i).createOleDbTask(d,function(t){(new e).removeTask("oledb-task"),n.taskSchedulerCtrl.listTasks("oledb-tasks")});return!1},getThis:function(){return this.$el.find(".mainTask[data-rel='knowledge-base']")},onRemoveView:function(){this.el=l("#main")},onBeforeRemoveView:function(e,n){this.$el.find(".mainTask[data-rel='knowledge-base']").remove()}})}.apply(n,i))||(e.exports=s)}).call(this,t(218),t(1),t(134))},2078:function(e,n,t){var a=t(690);e.exports=(a.default||a).template({compiler:[8,">= 4.3.0"],main:function(e,n,t,a,l){return'<div class="abm-base-tmp container-fluid mainTask" data-rel="oledb-task" data-type="tab-content">\n\n  \x3c!-- LIST VIEW --\x3e\n\n  <div class="box oledb-task-content">\n    <div class="box-title">\n      <h3><i class="fa fa-th-list"></i>Schedule OleDB task</h3>\n      <div class="actions abm-top-options">\n        <a href="#" class="btn btn-close"><i class="fa fa-times"></i></a>\n      </div>\n    </div>\n    <div class="box-content abm-content">\n\n\n      <ul class="tabs tabs-inline tabs-top" style="border-color: #DDD; border-width: 0 0 1px 0; border-style: solid;">\n        <li class="active">\n          <a href="#oledb-1" data-toggle="tab">\n            <i class="fa fa-clock"></i>General</a>\n        </li>\n        <li>\n          <a href="#oledb-2" data-toggle="tab">\n            <i class="fa fa-lock"></i>Schedule</a>\n        </li>\n      </ul>\n\n      <div class="form-horizontal form-bordered">\n        <div class="tab-content padding tab-content-inline tab-content-bottom">\n\n          \x3c!-- START TAB 1 --\x3e\n          <div class="tab-pane active" id="oledb-1">\n            <div class="row">\n              <div class="form-group">\n                <label for="textfield" class="control-label col-sm-2">Task name</label>\n                <div class="col-sm-10">\n                  <input type="text" name="txtTaskName" id="txtTaskName" class="form-control">\n                </div>\n              </div>\n\n              <div class="form-group">\n                <label for="textfield" class="control-label col-sm-2">Conection string</label>\n                <div class="col-sm-10">\n                  <input type="text" name="txtConnString" id="txtConnString" class="form-control">\n                </div>\n              </div>\n\n              <div class="form-group">\n                <label for="textfield" class="control-label col-sm-2">OLEDB Command</label>\n                <div class="col-sm-10">\n                  <textarea type="text" name="txtOledb" id="txtOledb" class="form-control"\n                    style="height:180px;"></textarea>\n                </div>\n              </div>\n            </div>\n          </div>\n          \x3c!-- END TAB 1 --\x3e\n\n\n          \x3c!-- START TAB 2 --\x3e\n          <div class="tab-pane" id="oledb-2">\n            <div class="row">\n              <div class="col-sm-6">\n\n                <div class="form-group">\n                  <label for="textfield" class="control-label col-sm-4">Trigger</label>\n                  <div class="col-sm-8">\n                    <select name="selTrigger" id="selTrigger" class="form-control select-trigger">\n                      <option value="0">Always</option>\n                      <option value="1">One time</option>\n                      <option value="2">Daily</option>\n                      <option value="3">Weekly</option>\n                      <option value="5">Monthly</option>\n                      <option value="4">Manual</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div class="form-group">\n                  <label for="textfield" class="control-label col-sm-4">States to log</label>\n                  <div class="col-sm-8">\n                    <select name="selStatesToLog" id="selStatesToLog" class="form-control">\n                      <option value="0">All</option>\n                      <option value="1">Start</option>\n                      <option value="2">Complete</option>\n                      <option value="3">Failed</option>\n                    </select>\n                  </div>\n                </div>\n\n                <div class="form-group enabledCheckbox">\n                  <label for="textfield" class="control-label col-sm-4">Enabled</label>\n                  <div class="col-sm-8">\n                    <input type="checkbox" name="chkEnabled" id="chkEnabled">\n                  </div>\n                </div>\n\n              </div>\n\n              <div class="col-sm-6">\n                <div class="form-group date-time" style="display:none;">\n                  <label for="textfield" class="control-label col-sm-4" id="lblDate">Date time</label>\n                  <div class="col-sm-4">\n                    <input type="text" name="txtDate" id="txtDate" data-date-format="yyyy/mm/dd"\n                      class="form-control datepick">\n                  </div>\n                  <div class="col-sm-4">\n                    <input type="text" name="txtTime" id="txtTime" class="form-control timepick">\n                  </div>\n                </div>\n\n                <div class="form-group run-model-days" style="display:none;">\n                  <label for="textfield" class="control-label col-sm-4">Days</label>\n                  <div class="col-sm-8">\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="1">Sunday\n                      </label>\n                    </div>\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="2">Monday\n                      </label>\n                    </div>\n\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="3">Tuesday\n                      </label>\n                    </div>\n\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="4">Wednesday\n                      </label>\n                    </div>\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="5">Thursday\n                      </label>\n                    </div>\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="6">Friday\n                      </label>\n                    </div>\n                    <div class="checkbox">\n                      <label>\n                        <input type="checkbox" name="checkbox" value="7">Saturday\n                      </label>\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n          \x3c!-- END TAB 2 --\x3e\n\n\n          <div class="row">\n            <div class="form-actions">\n              <button type="submit" class="btn btn-primary save">Save</button>\n              <button type="button" class="btn cancel">Cancel</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n</div>'},useData:!0})},736:function(e,n,t){"use strict";(function(a){var l,o=t(693);void 0===(l=function(){return a.Model.extend({url:"myFileManager",getTask:function(e,n){(0,o.send)("scheduler/".concat(e,"/"),null,{type:"GET"},n)},getTaskLog:function(e,n){(0,o.send)("taskLog/by_periodic_task/",e,{type:"POST"},n,null,!0)},filterLogs:function(e,n,t){(0,o.send)("taskLog/filter_logs/?page=".concat(e),JSON.stringify(n),{type:"POST",contentType:"application/json;charset=utf-8"},t,null,!0)},create:function(e,n,t){(0,o.send)("scheduler/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n,t,!1,!0)},edit:function(e,n,t){(0,o.send)("scheduler/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},n,t,!1,!0)},partialEdit:function(e,n,t,a){(0,o.send)("scheduler/".concat(e,"/"),JSON.stringify(n),{type:"PATCH",contentType:"application/json;charset=utf-8",dataType:"text"},t,a,!1,!0)},list:function(e,n){(0,o.send)("scheduler/",null,{type:"GET"},e,n)},deleteTask:function(e,n){(0,o.send)("scheduler/".concat(e,"/"),null,{type:"DELETE"},n)},runTask:function(e,n){var t=e.periodic_task_id;e.scheduleTaskId;(0,o.send)("scheduler/".concat(t,"/runTask/"),null,{type:"POST"},n)},getPythonTimezones:function(e,n){(0,o.send)("scheduler/getPythonTimezones/",null,{type:"GET"},e,n)}})}.apply(n,[]))||(e.exports=l)}).call(this,t(218))}}]);