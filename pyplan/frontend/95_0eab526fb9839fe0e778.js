/*! Copyright Pyplan 2020. All rights reserved. */
(window.webpackJsonp=window.webpackJsonp||[]).push([[95,27,38,43,62,80,100],{219:function(e,n,t){"use strict";(function(o,r){var i,s=t(18),a=t(693);void 0===(i=function(){var e=function(e,n,t,r){if(__currentSession.modelInfo=e,o("#licenceExpiration").hide(),__currentSession.modelInfo.daysToExpire)try{var i=parseInt(__currentSession.modelInfo.daysToExpire)-1;i>=0&&i<15&&(i>=0?o("#licenceExpiration span").html((0,s.translate)("days_to_expire").replace("#days#",i)):o("#licenceExpiration span").html((0,s.translate)("license_expired")),o("#licenceExpiration").show(),setTimeout(function(){o("#licenceExpiration").hide()},15e3))}catch(e){}if(""!=e.new_session_key&&(__currentSession.session_key=e.new_session_key,(0,a.ajaxSetup)()),n(e),o(".wikiLink").attr("href","http://docs.pyplan.com"),t||o("#summary").trigger("refresh"),o("#navigation .modelopened").show(),o("#left .navigation .modelopened").show(),o("#currentModel").html(e.uri.substring(e.uri.lastIndexOf("/")+1,e.uri.lastIndexOf("."))),e.useSnapshot){var c=(0,s.translate)("use_snapshot");o("#navigation .snapshotactive").show().attr("title",c).attr("data-snapdate",e.snapshotDate)}r.canEdit()?(o("#navigation li.modelopened[data-key='btnSaveModel']").show(),o("#navigation li.modelopened[data-key='btnSaveModelAs']").show(),__currentSession.modelInfo&&__currentSession.modelInfo.readonly&&(o("#navigation li.modelopened[data-key='btnSaveModel']").hide(),(0,s.showMessage)(__currentSession.modelInfo.readOnlyReason,"","info",!1))):(o("#navigation li.modelopened[data-key='btnSaveModel']").hide(),o("#navigation li.modelopened[data-key='btnSaveModelAs']").hide())};return r.Model.extend({openModel:function(n,t,r,i){o("#navigation .snapshotactive").hide();var s=this;(0,a.send)("modelManager/openModel/",{file:n},null,function(n){n&&e(n,t,r,s)},i)},createNewModel:function(n,t,r,i){o("#navigation .snapshotactive").hide();var s=this;(0,a.send)("modelManager/createNewModel/",{modelName:n},null,function(n){n&&e(n,t,r,s)},i)},closeModel:function(e){(0,a.send)("modelManager/closeModel/",null,null,function(){Promise.all([t.e(2),t.e(6),t.e(62)]).then(function(){var n=[t(684)];(function(n){(new n).clearUI(),e()}).apply(null,n)}).catch(t.oe)})},saveModel:function(e){(0,a.send)("modelManager/saveModel/",null,{dataType:"text"},function(){e()})},saveModelAs:function(e,n){(0,a.send)("modelManager/saveModelAs/",{name:e},{type:"GET"},function(e){n(e)})},getModelInfo:function(e){(0,a.send)("modelManager/getModelInfo/",null,null,e)},isInPublic:function(){return!!(__currentSession.modelInfo.uri&&__currentSession.modelInfo.uri.toLowerCase().indexOf("/public/")>=0)},canEdit:function(){var e=!1,n=this.isInPublic();return((0,s.haveAccess)("change_model")&&!n||(0,s.haveAccess)("change_public_model")&&n)&&(e=!0),e},setModelPreferences:function(e,n,t,r){(0,a.send)("modelManager/setModelPreferences/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){void 0!=n&&n(e),o("body").trigger("pendingChanges",[!0])},function(e){t(e)},!1,r)},getModelPreferences:function(e,n,t){(0,a.send)("modelManager/getModelPreferences/",null,{type:"GET"},e,n,!0,t)},setNodeProperties:function(e,n,t,r,i,s){void 0===s&&(s=!0),(0,a.send)("modelManager/setNodeProperties/",JSON.stringify({node:e,properties:n}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){void 0!=t&&t(e),o("body").trigger("pendingChanges",[s])},function(e){r(e)},!1,i)},setNodesProperties:function(e,n){(0,a.send)("modelManager/setNodesProperties/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){n(e),o("body").trigger("pendingChanges",[!0])})},setNodeIdFromTitle:function(e,n){(0,a.send)("modelManager/setNodeIdFromTitle/",{value:e},{type:"POST"},function(e){n(e),o("body").trigger("pendingChanges",[!0])})},getNodeProperties:function(e,n,t,o,r,i){(0,a.send)("modelManager/getNodeProperties/",JSON.stringify({node:e,properties:n,forceThisNode:i}),{type:"POST",contentType:"application/json;charset=utf-8"},t,o,!0,r)},getInputs:function(e,n){(0,a.send)("modelManager/getNodeInputs/?node="+e,null,{type:"GET"},n)},getOutputs:function(e,n){(0,a.send)("modelManager/getNodeOutputs/?node="+e,null,{type:"GET"},n)},executeForRefresh:function(e){(0,a.send)("modelManager/executeForRefresh/",null,{type:"POST",dataType:"text"},function(n){void 0!=e&&e(n)})},createNode:function(e,n,t){(0,a.send)("modelManager/createNode/",e,{type:"POST"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},createAlias:function(e,n,t){(0,a.send)("modelManager/createAlias/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},createInputNode:function(e,n,t){(0,a.send)("modelManager/createInputNode/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},deleteNodes:function(e,n,t){(0,a.send)("modelManager/deleteNodes/",JSON.stringify({values:e}),{type:"DELETE",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},searchNode:function(e,n,t){var o=e.text,r=void 0===o?"":o,i=e.extraClasses,s=void 0===i?[]:i,c=e.moduleId,u=e.nodeClass,l=e.fillDetail;(0,a.send)("modelManager/searchNodes/?text=".concat(r).concat(c?"&moduleId=".concat(c):"").concat(u?"&nodeClass=".concat(u):"").concat(l?"&fillDetail=".concat(l):""),JSON.stringify({extraClasses:s}),{type:"POST",contentType:"application/json;charset=utf-8"},n,t)},SearchForAutocomplete:function(e,n,t){(0,a.send)("modelManager/searchForAutocomplete/",{text:e},{type:"GET",dataType:"text"},n,t)},navigateDiagram:function(e,n,t){(0,a.send)("modelManager/navigateDiagram/",{moduleId:e,includeArrows:!1},null,n,t)},getArrows:function(e,n,t){(0,a.send)("modelManager/getArrows/",{moduleId:e},null,n,t)},executeButton:function(e,n,t){(0,a.send)("modelManager/executeButton/",JSON.stringify({nodeId:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n,t)},evaluateNode:function(e,n,t){(0,a.send)("dashboardManager/getOrCreate/",{node:e},void 0,n,t)},isInBackground:function(e,n,t){(0,a.send)("modelManager/isInBackground/",{nodeId:e},{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n,t,!0)},abortProcess:function(e,n){(0,a.send)("modelManager/abortProcess/",null,{type:"GET"},e,n)},getIndexValues:function(e,n){(0,a.send)("dashboardManager/getIndexValues/",e,null,function(e){e&&n(e)})},getNodeIndexes:function(e,n){(0,a.send)("dashboardManager/getNodeIndexes/",{node:e},null,function(e){e&&n(e)})},getSelector:function(e,n){(0,a.send)("modelManager/getSelector/",{node:e},{type:"POST"},n)},exportFlatNode:function(e,n,o,r,i,s){var a={nodeId:e,fileFormat:n,numberFormat:o,columnFormat:r,compressed:i},c=new XMLHttpRequest;c.responseType="arraybuffer",c.open("POST","".concat(__apiURL,"/modelManager/exportFlatNode/")),c.setRequestHeader("Authorization","Token ".concat(__currentToken)),c.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),c.setRequestHeader("Content-type","application/json;charset=utf-8"),c.onreadystatechange=function(e){var n=e.currentTarget;n.readyState==n.DONE&&(200==n.status?s(n):Promise.all([t.e(2),t.e(18)]).then(function(){var e=[t(685)];(function(e){(new e).show({title:"ERROR!",text:n.response,notifyType:"error"})}).apply(null,e)}).catch(t.oe))},c.send(JSON.stringify(a))},exportCurrentNode:function(e,n,o,r,i,s,a){var c={nodeId:e,fileFormat:n,numberFormat:o,columnFormat:r,compressed:i,nodeQuery:s},u=new XMLHttpRequest;u.responseType="arraybuffer",u.open("POST","".concat(__apiURL,"/modelManager/exportCurrentNode/")),u.setRequestHeader("Authorization","Token ".concat(__currentToken)),u.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),u.setRequestHeader("Content-type","application/json;charset=utf-8"),u.onreadystatechange=function(e){var n=e.currentTarget;n.readyState==n.DONE&&(200==n.status?a(n):Promise.all([t.e(2),t.e(18)]).then(function(){var e=[t(685)];(function(e){(new e).show({title:"ERROR!",text:n.response,notifyType:"error"})}).apply(null,e)}).catch(t.oe))},u.send(JSON.stringify(c))},getDepartments:function(e){(0,a.send)("departments/by_current_company/",null,{type:"GET"},e)},getDeniedDepartments:function(e,n){(0,a.send)("departments/denied/?module=".concat(e),null,{type:"GET"},n)},setDeniedModule:function(e,n){(0,a.send)("departments/deny_items/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8"},n)},openParallelModel:function(e,n){(0,a.send)("ModelManager/openParallelModel/?file="+e,null,{type:"GET"},n)},closeParallelModel:function(e,n){(0,a.send)("ModelManager/closeParallelModel/?parallelToken="+e,null,{type:"GET"},n)},moveNodes:function(e,n,t){(0,a.send)("modelManager/moveNodes/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},copyNodes:function(e,n,t){(0,a.send)("modelManager/copyNodes/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},copyAsValues:function(e,n,t,r){(0,a.send)("modelManager/copyAsValues/",JSON.stringify({nodeId:e,asNewNode:n}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=t&&t(e)},r)},setNodePosition:function(e,n,t){(0,a.send)("modelManager/setNodesPosition/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},setNodeSize:function(e,n,t){(0,a.send)("modelManager/setNodesSize/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},setNodeZ:function(e,n,t){(0,a.send)("modelManager/setNodeZ/",JSON.stringify({values:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},changeSession:function(n,o){var r=this;(0,a.send)("modelManager/changeToOtherModelSession/",{new_session_key:n},null,function(n){Promise.all([t.e(2),t.e(6),t.e(62)]).then(function(){var i=[t(684)];(function(t){(new t).clearUI(),e(n,o,!0,r)}).apply(null,i)}).catch(t.oe)})},getSharedNode:function(e,n){(0,a.send)("result/by_node_id/".concat(e,"/"),null,{type:"GET"},function(e){e&&n(e)},function(e,t){e&&n&&n(e)})},setSharedNode:function(e,n){(0,a.send)("result/".concat(e.id,"/"),JSON.stringify(e),{type:"PATCH",contentType:"application/json;charset=utf-8"},function(e){e&&n&&n(e)})},exportModuleToFile:function(e,n,t,o){var r={moduleId:e,exportType:n},i=new XMLHttpRequest;i.responseType="arraybuffer",i.open("POST","".concat(__apiURL,"/modelManager/exportModuleToFile/")),i.setRequestHeader("Authorization","Token ".concat(__currentToken)),i.setRequestHeader("session-key",__currentSession?__currentSession.session_key:""),i.setRequestHeader("Content-type","application/json;charset=utf-8"),i.onreadystatechange=function(e){var n=e.currentTarget;n.readyState==n.DONE&&(200==n.status?t(n):o(n.response))},i.send(JSON.stringify(r))},importModuleFromFile:function(e,n,t){(0,a.send)("modelManager/importModuleFromFile/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},function(e){o("body").trigger("pendingChanges",[!0]),void 0!=n&&n(e)},t)},getProfile:function(e,n,t,o){(0,a.send)("modelManager/getNodeProfile/",{nodeId:e},{type:"GET"},n,t,!0,o)},previewNode:function(e,n,t){var o={node:e};(0,a.send)("modelManager/previewNode/",o,{type:"POST"},n,t)},stopProcess:function(e,n){(0,a.send)("modelManager/stop/",null,{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},e,n,!1,!1)},listShortcuts:function(e){(0,a.send)("diagramShortcut/",null,{type:"GET"},e)},createShortcut:function(e,n){(0,a.send)("diagramShortcut/?node_id=".concat(e),null,{type:"POST"},function(e){void 0!=n&&n(e)})},deleteShortcut:function(e,n){(0,a.send)("diagramShortcut/".concat(e,"/"),null,{type:"DELETE"},function(e){void 0!=n&&n(e)})},getToolbars:function(e){(0,a.send)("modelManager/getToolbars/",null,{type:"GET"},e)},callWizard:function(e,n,t){(0,a.send)("modelManager/callWizard/",JSON.stringify(e),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n,t)},getFilesForImportWizard:function(e,n){(0,a.send)("modelManager/getFilesForImportWizard/",{extension:e},{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n)},installLibrary:function(e,n){(0,a.send)("modelManager/installLibrary/",JSON.stringify({lib:e}),{type:"POST",contentType:"application/json;charset=utf-8",dataType:"text"},n)},getInstallProgress:function(e,n,t){(0,a.send)("modelManager/getInstallProgress/",{from_line:e},{type:"GET",contentType:"application/json;charset=utf-8",dataType:"text"},n,t,!0,!0)}})}.apply(n,[]))||(e.exports=i)}).call(this,t(1),t(218))},688:function(e,n,t){"use strict";var o=t(18);e.exports=function(e){return(0,o.translate)(e)}},689:function(e,n,t){"use strict";e.exports=function(e,n,t,o){switch(n){case"==":return e==t?o.fn(this):o.inverse(this);case"!=":return e!=t?o.fn(this):o.inverse(this);case"===":return e===t?o.fn(this):o.inverse(this);case"<":return e<t?o.fn(this):o.inverse(this);case"<=":return e<=t?o.fn(this):o.inverse(this);case">":return e>t?o.fn(this):o.inverse(this);case">=":return e>=t?o.fn(this):o.inverse(this);default:return o.inverse(this)}}},693:function(e,n,t){"use strict";t.r(n),function(e){t.d(n,"ajaxSetup",function(){return r}),t.d(n,"send",function(){return i});var o=t(18);function r(n=null){e.ajaxSetup({...{dataType:"json",crossDomain:!0,headers:{Authorization:`Token ${__currentToken}`,"session-key":__currentSession?__currentSession.session_key:""}},...()=>n||{}})}function i(n,r,i,s,a,c,u){i||(i=new Object),c||e("#secondLoading").show(),i.hasOwnProperty("success")||(i.success=function(n,o,r){if("object"!=typeof n&&null!=n&&""!=n)try{n=e.parseJSON(n)}catch(e){}c||(e("#mainLoading").hide(),e("#secondLoading").hide());var i=function(e,n,o,r,i){e&&e.hasOwnProperty("hasError")?(o||Promise.all([t.e(2),t.e(18)]).then(function(){var n=[t(685)];(function(n){(new n).show({title:"WARNING!",text:e.error,notifyType:"error"})}).apply(null,n)}).catch(t.oe),void 0!=i&&i(e.error)):void 0!=r&&r(e,n)};n&&n.hasOwnProperty("isCompressed")&&n.hasOwnProperty("obj")?t.e(103).then(function(){var o=[t(859)];(function(t){n=e.parseJSON(t.inflate(atob(n.obj),{to:"string"})),i(n,r,u,s,a)}).apply(null,o)}).catch(t.oe):i(n,r,u,s,a)}),i.hasOwnProperty("type")||(i.type="GET"),r&&(i.data=r),i.error=function(r,s,l){if(c||(e("#mainLoading").hide(),e("#secondLoading").hide()),r){let e="";const s=`[${i.type}] ${n}`;if(r.responseJSON)for(const n in r.responseJSON)e+="non_field_errors"==n?`${r.responseJSON[n]}\n`:`[${n}]: ${r.responseJSON[n]}\n`;else e=`${r.responseText}\n`;let c="info",l=void 0,d=void 0,p="WARNING!";const f=[];switch(r.status){case 401:c="info",d=15e3,l=(()=>{location.reload()}),f.push({css:"warning",code:"401",title:Object(o.translate)("relog")});break;case 403:c="info",d=1e4,p=Object(o.translate)("access_denied")}void 0!=u&&0!=u||Promise.all([t.e(2),t.e(18)]).then(function(){var n=[t(685)];(function(n){(new n).show({title:p,text:e,endpoint:s,notifyType:c,timeOut:d,buttons:f,callback:l})}).apply(null,n)}).catch(t.oe),void 0!=a&&a(e,r)}},e.ajax({url:`${__apiURL}/${n}`,contentType:i.contentType,data:r,dataType:i.dataType?i.dataType:"json",method:i.type,success:i.success,error:i.error})}}.call(this,t(1))},694:function(e,n,t){var o,r;!function(i,s){if(!i.BackboneMVC){var a=i.BackboneMVC={};o=[t(218),t(220),t(1)],void 0===(r=function(e,n,t){return function(e,n,t,o,r){"use strict";if(void 0===t||void 0===o)return;var i=function(){function e(){this._created=(new Date).getTime()}return o.extend(e.prototype,{_created:null}),e.extend=function(n){var t,r=function(){return void 0!==t?t:(e.apply(this,arguments),void 0!==this.initialize&&this.initialize.apply(this,arguments),t=this)};return r.prototype=new e,o.extend(r.prototype,n),r.prototype.constructor=r,r.prototype.classId=o.uniqueId("controller_"),r},e}();o.extend(n,{namespace:function(n){for(var t=n.split("."),o=e,r=0,i=t.length;r<i;r++)void 0===o[t[r]]&&(o[t[r]]={}),o=o[t[r]]},Controller:{beforeFilter:function(){return(new r.Deferred).resolve()},afterRender:function(){return(new r.Deferred).resolve()},checkSession:function(){return(new r.Deferred).resolve(!0)},default:function(){return!0}},Router:function(){var e={_history:[],routes:{"*components":"dispatch"},dispatch:function(e){var n,t=(e||"").replace(/\/+$/g,"").split("/");if(s[t[0]]?n=t[0]:void 0!==s[l(t[0])]?n=l(t[0]):void 0!==s[d(t[0])]&&(n=d(t[0])),void 0===n)return this[404]();var i=new s[n],a=t.length>1?t[1]:"default";if("function"!=typeof i._actions[a])return this[404]();var p=t.length>2?o.rest(t,2):[];return function(e,n,t,r){e._history.length>888&&(e._history=o.last(e._history,888));e._history.push([n,t,r])}(this,n,a,p),function(e,n,t){var o=new s[e],i=[n].concat(t),a=r.Deferred(),l=o.beforeFilter.apply(o,i);c(l)?a=l:u(a,l);"function"==typeof o._secureActions[n]&&(a=a.pipe(function(){var e=o.checkSession.apply(o,t);return c(e)?e:u(new r.Deferred,e)}));return a=(a=a.pipe(function(){var e=o[n].apply(o,t);return c(e)?e:u(new r.Deferred,e)})).pipe(function(){var e=o.afterRender.apply(o,i);return c(e)?e:u(new r.Deferred,e)})}(n,a,p)},404:function(){},getLastAction:function(){return o.last(this._history,1)[0]},navigate:function(e,n){n&&!0!==n||(n={trigger:n});var i=o.extend({},n);return i.trigger=!1,t.Router.prototype.navigate.call(this,e,i),n.trigger?this.dispatch(e):(new r.Deferred).resolve()}};function n(n){var r=o.extend(n.routes||{},e.routes);return t.Router.extend(o.extend({},e,n,{routes:r}))}var i=t.Router.extend(o.extend({extend:n},e));return i.extend=n,i}(),Model:{extend:function(e){return e=o.extend({__fetchSuccessCallback:null,__fetchErrorCallback:null,fetch:function(e){var n=(e=e||{}).success;e.success=function(e,t){if(n&&n(e,t),e.__fetchSuccessCallback){var o=e.__fetchSuccessCallback;e.__fetchSuccessCallback=null,o.apply(e)}};var r=e.error;e.error=function(e,n){r&&r(e,n),e.trigger("error",r)},t.Model.prototype.fetch.apply(this,[e].concat(o.rest(arguments)))},parse:function(e){return this.__fetchSuccessCallback=null,this.__fetchErrorCallback=null,!e||e.error?(this.trigger("error",e&&e.error||e),{}):(this.__fetchSuccessCallback=function(){this.trigger("read",e.data)}.bind(this),e.data)}},e),t.Model.extend(e)}}}),n.Controller.extend=function e(t,r){return function(t){var c=t.name;if(void 0===c)throw"'name' property is mandatory ";t=o.extend({},r,t);var u=o.extend({},n.Controller),l={},d={};o.each(t,function(e,n){if(u[n]=e,"function"!=typeof e||"_"===n[0]||o.indexOf(a,n)>=0)return!1;if(l[n]=e,n.match(/^user_/i)){d[n]=e;var r=n.replace(/^user_/i,"");"function"!=typeof t[r]&&(d[r]=e,l[r]=e)}}),o.extend(u,l,{_actions:l,_secureActions:d}),"extend"in u&&delete u.extend;var p=i.extend(u);return o.extend(p,{extend:e(p,o.extend({},r,t))}),s[c]=p,p}}(n.Controller,{});var s={},a=["initialize","beforeFilter","afterRender","checkSession"];function c(e){return o.isObject(e)&&e.promise&&"function"==typeof e.promise}function u(e,n){return void 0===n&&(n=!0),e[n?"resolve":"reject"](n)}function l(e){return"string"!=typeof e?null:(e=e.replace(/\s{2,}/g," "),o.map(e.split(" "),function(e){return e.replace(/(^|_)[a-z]/gi,function(e){return e.toUpperCase()}).replace(/_/g,"")}).join(" "))}function d(e){return"string"!=typeof e?null:(e=e.replace(/\s{2,}/g," "),o.map(e.split(" "),function(e){return e.replace(/^[A-Z]/g,function(e){return e.toLowerCase()}).replace(/([a-z])([A-Z])/g,function(e,n,t){return n+"_"+t.toLowerCase()})}).join(" "))}}(i,a,e,n,t),a}.apply(n,o))||(e.exports=r)}}(this)},724:function(e,n,t){"use strict";(function(o){var r,i=t(18),s=t(693);void 0===(r=function(){var e=function(e,n,o){null!==e.companySettingFile&&""!==e.companySettingFile&&t.e(42).then(function(){var n=[t(713)("./".concat(e.companySettingFile))];(function(){Promise.resolve().then(function(){t(221)}).catch(t.oe)}).apply(null,n)}).catch(t.oe),__currentSession=e,(0,i.setProcessDictionary)(e.process),(0,s.ajaxSetup)(),Promise.all([t.e(2),t.e(6),t.e(43)]).then(function(){var o=[t(684)];(function(t){(new t).clearUI(),n(e)}).apply(null,o)}).catch(t.oe)};return o.Model.extend({isConnected:function(){return""!=__currentToken&&null!==__currentSession},connect:function(e,n,t,o,r){var i={error:function(e,n,t){alert("Could not contact server ".concat(__apiURL))},type:"POST"};(0,s.send)("token-auth/",{username:e,password:n},i,function(e){e&&e.token&&(__currentToken=e.token,(0,s.ajaxSetup)(),o(e))},r,!0,!0)},createSession:function(n,t,o){(0,s.send)("security/createSession",{companyId:n},{type:"POST"},function(n){e(n,t)},o)},getUserCompanies:function(e,n,t){(0,s.send)("security/getUserCompanies",{user:e,password:n},null,function(e){t(e)})},getUserCompaniesFromUserId:function(e,n){(0,s.send)("security/GetUserCompaniesFromUserId/?userId=".concat(e),null,null,function(e){n(e)})},logout:function(e){(0,s.send)("security/logout/",null,{dataType:"text"},function(n){void 0!=e&&e(n)})},getAllSessions:function(e){(0,s.send)("security/getAllSessions/",null,null,e,null,!0)},getMySessions:function(e){(0,s.send)("security/getMySessions/",null,null,e,null,!0)},getAllProcess:function(e){(0,s.send)("security/getAllProcess",null,null,e)},createFromToken:function(e,n,t){__currentToken=e,__currentSession={},(0,i.setProcessDictionary)([]),(0,s.ajaxSetup)(),(0,i.setLanguageDictionary)({}),n()},useExternalLink:function(e,n){(0,s.send)("security/useExternalLink/?guid=".concat(e),null,null,function(e,o){200===o.status?(null!==e.session.companySettingFile&&""!==e.session.companySettingFile&&t.e(42).then(function(){var n=[t(713)("./".concat(e.session.companySettingFile))];(function(){Promise.resolve().then(function(){t(221)}).catch(t.oe)}).apply(null,n)}).catch(t.oe),n(e,o)):n(e,o)})},killSessionByKey:function(e,n){(0,s.send)("security/killSessionByKey/",{session_key:e},{type:"GET",dataType:"text"},n)},createNewSession:function(n,t){(0,s.send)("security/createNewSession/",null,null,function(t){e(t,n)})},requireLogoutSessionByToken:function(e,n){(0,s.send)("security/requireLogoutSessionByToken/",{token:e},null,n)},ssoTest:function(){(0,s.send)("security/ssoTest",null,null,function(e){console.log(e)})},ssoCheckUser:function(e,n){(0,s.send)("security/SSOCheckUser/",null,null,e,n)},loginas:function(n,t,o,r,i){var a={error:function(e,n,t){alert("Could not contact server ".concat(__apiURL))}};(0,s.send)("security/loginas",{userId:n,token:t,companyId:o},a,function(n){e(n,r)})},loginFromToken:function(n,t,o){var r={error:function(e,n,t){alert("Could not contact server ".concat(__apiURL))}};(0,s.send)("security/loginFromToken",{token:n},r,function(n){e(n,t)})}})}.apply(n,[]))||(e.exports=r)}).call(this,t(218))}}]);